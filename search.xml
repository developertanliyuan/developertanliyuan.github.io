<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>mysqlæŸ¥è¯¢æ—¶é—´æ—¥æœŸè½¬æ¢</title>
      <link href="/2021/03/01/mysql%E6%9F%A5%E8%AF%A2%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2/"/>
      <url>/2021/03/01/mysql%E6%9F%A5%E8%AF%A2%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è½¬æ¢ç¤ºä¾‹å¦‚ä¸‹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">order_id orderId,</span><br><span class="line">REPLACE(REPLACE(FROM_UNIXTIME(order_time/1000,&apos;%Y%m%D%H:%i&apos;),&apos;th&apos;,&apos;&apos;),&apos;:&apos;,&apos;&apos;) AS orderTime,</span><br><span class="line">&quot;202102&quot; AS orderMonth </span><br><span class="line">FROM</span><br><span class="line">mall_order_sku_202102 as t1</span><br><span class="line">WHERE</span><br><span class="line">sku_id = 10023919984358 </span><br><span class="line">AND order_time &gt;= 1614355200000 </span><br><span class="line">AND order_time &lt; 1614441600000</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Nginxé…ç½®HTTPSåŸŸåè¯ä¹¦</title>
      <link href="/2021/01/28/%E4%BD%BF%E7%94%A8Nginx%E9%85%8D%E7%BD%AEHTTPS%E5%9F%9F%E5%90%8D%E8%AF%81%E4%B9%A6/"/>
      <url>/2021/01/28/%E4%BD%BF%E7%94%A8Nginx%E9%85%8D%E7%BD%AEHTTPS%E5%9F%9F%E5%90%8D%E8%AF%81%E4%B9%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="é…ç½®sslåŸŸåè¯ä¹¦"><a href="#é…ç½®sslåŸŸåè¯ä¹¦" class="headerlink" title="é…ç½®sslåŸŸåè¯ä¹¦"></a>é…ç½®sslåŸŸåè¯ä¹¦</h1><blockquote><p>å‚è€ƒé˜¿é‡Œäº‘å¸®åŠ©æ–‡æ¡£<a href="https://help.aliyun.com/document_detail/98728.html?spm=5176.11065259.1996646101.searchclickresult.7f092f78xxRTpU" target="_blank" rel="noopener">åœ¨Nginxï¼ˆæˆ–Tengineï¼‰æœåŠ¡å™¨ä¸Šå®‰è£…è¯ä¹¦</a></p></blockquote><h2 id="ä¸‹è½½è¯ä¹¦åˆ°æœ¬åœ°"><a href="#ä¸‹è½½è¯ä¹¦åˆ°æœ¬åœ°" class="headerlink" title="ä¸‹è½½è¯ä¹¦åˆ°æœ¬åœ°"></a>ä¸‹è½½è¯ä¹¦åˆ°æœ¬åœ°</h2><blockquote><p>å»åŸŸåæœåŠ¡æä¾›å•†ç”³è¯·åŸŸåè¯ä¹¦ï¼ˆè…¾è®¯äº‘ä¸é˜¿é‡Œäº‘éƒ½å¯ä»¥ç”³è¯·å…è´¹çš„åŸŸåè¯ä¹¦ï¼‰</p></blockquote><p><img src="/images/img_41.png" alt="ä¸‹è½½åŸŸåè¯ä¹¦"></p><h2 id="ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨"><a href="#ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨" class="headerlink" title="ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨"></a>ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨</h2><blockquote><p>ä¾‹å¦‚ä½¿ç”¨CRTé™„å¸¦çš„æ–‡ä»¶ä¸Šä¼ å·¥å…·å°†è¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ°/usr/local/nginx/conf/certç›®å½•ä¸‹é¢</p></blockquote><blockquote><p>åœ¨nginxé…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼ˆå¦‚ä¸‹é…ç½®æ˜¯æ ¹æ®nginxæ³¨é‡Šæ‰çš„é»˜è®¤é…ç½®ç›´æ¥ä¿®æ”¹è€Œæ¥,æˆ–å‚è€ƒä¸Šé¢æåˆ°çš„é˜¿é‡Œäº‘çš„æ–‡æ¡£ï¼‰</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl;</span><br><span class="line">    server_name  www.ismyfree.world;</span><br><span class="line"></span><br><span class="line">    ssl_certificate      /usr/local/nginx/conf/cert/4810494_www.ismyfree.world.pem;</span><br><span class="line">    ssl_certificate_key  /usr/local/nginx/conf/cert/4810494_www.ismyfree.world.key;</span><br><span class="line"></span><br><span class="line">    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æœ¬æ¬¡æ¼”ç¤ºåŸºäºæœ¬åœ°æœåŠ¡å™¨ï¼ˆæ— æ„ä¹‰ï¼‰ï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯é€šè¿‡ç°æœ‰çš„ä¸æœåŠ¡å™¨è¿›è¡Œé…ç½®ã€‚</p></blockquote><h2 id="ä¸ºä»€ä¹ˆè¦é…ç½®httpsåŸŸåè¯ä¹¦"><a href="#ä¸ºä»€ä¹ˆè¦é…ç½®httpsåŸŸåè¯ä¹¦" class="headerlink" title="ä¸ºä»€ä¹ˆè¦é…ç½®httpsåŸŸåè¯ä¹¦"></a>ä¸ºä»€ä¹ˆè¦é…ç½®httpsåŸŸåè¯ä¹¦</h2><blockquote><p>ç¬¦åˆè‹¹æœappå®¡æ ¸çš„å¿…è¦æ¡ä»¶</p></blockquote><blockquote><p>åŒç†å®‰å“æˆ–å¾®ä¿¡å°ç¨‹åºå®¡æ ¸ä¹Ÿæ˜¯è¦ç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7é…ç½®JAVAç¯å¢ƒå˜é‡</title>
      <link href="/2021/01/12/CentOS7%E9%85%8D%E7%BD%AEJAVA%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
      <url>/2021/01/12/CentOS7%E9%85%8D%E7%BD%AEJAVA%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨/etc/profile.d/è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåä¸ºjava.sh</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile.d/java.sh</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ç¯å¢ƒé…ç½®å†…å®¹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_251</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH</span><br></pre></td></tr></table></figure><blockquote><p>ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ä¹‹å¯è¿è¡Œ</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/profile.d/java.sh</span><br></pre></td></tr></table></figure><blockquote><p>æœ€åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ°¸ä¹…è®¾ç½®ç¯å¢ƒå˜é‡</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile.d/java.sh</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç¯å¢ƒå˜é‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ideaä»¥debugæ–¹å¼å¯åŠ¨æ—¶æŠ¥é”™ Command line is too long</title>
      <link href="/2020/12/14/Idea%E4%BB%A5debug%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A8%E6%97%B6%E6%8A%A5%E9%94%99/"/>
      <url>/2020/12/14/Idea%E4%BB%A5debug%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A8%E6%97%B6%E6%8A%A5%E9%94%99/</url>
      
        <content type="html"><![CDATA[<h1 id="é”™è¯¯æè¿°ä¿¡æ¯"><a href="#é”™è¯¯æè¿°ä¿¡æ¯" class="headerlink" title="é”™è¯¯æè¿°ä¿¡æ¯"></a>é”™è¯¯æè¿°ä¿¡æ¯</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error running &apos;SaleAdminApplication&apos;: Command line is too long. Shorten command line for SaleAdminApplication or also for Spring Boot default configuration.</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªé”™è¯¯ä¿¡æ¯åœ¨runè¿è¡Œæ–¹å¼ä¸å‡ºç°ï¼Œåœ¨debugçš„è¿è¡Œæ–¹å¼æ‰ä¼šå‡ºç°</p></blockquote><h1 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h1><blockquote><p>ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€å·¥ä½œç›®å½•ä¸‹çš„æ–‡ä»¶ â€”&gt; .idea\workspace.xml</p></blockquote><blockquote><p>æ‰¾åˆ°æ ‡ç­¾</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;component name=&quot;PropertiesComponent&quot;&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æ ‡ç­¾ä¸­æ·»åŠ å†…å®¹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;property name=&quot;dynamic.classpath&quot; value=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mysqlè¡¨å¤‡ä»½åŠæ³•</title>
      <link href="/2020/12/11/mysql%E8%A1%A8%E5%A4%87%E4%BB%BD%E5%8A%9E%E6%B3%95/"/>
      <url>/2020/12/11/mysql%E8%A1%A8%E5%A4%87%E4%BB%BD%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤åˆ¶è¡¨ç»“æ„å¯¼å…¥æ—§è¡¨æ•°æ®"><a href="#å¤åˆ¶è¡¨ç»“æ„å¯¼å…¥æ—§è¡¨æ•°æ®" class="headerlink" title="å¤åˆ¶è¡¨ç»“æ„å¯¼å…¥æ—§è¡¨æ•°æ®"></a>å¤åˆ¶è¡¨ç»“æ„å¯¼å…¥æ—§è¡¨æ•°æ®</h1><h2 id="æ–°å»ºæ–°è¡¨ä¸æ—§è¡¨è¡¨ç»“æ„ç›¸åŒ"><a href="#æ–°å»ºæ–°è¡¨ä¸æ—§è¡¨è¡¨ç»“æ„ç›¸åŒ" class="headerlink" title="æ–°å»ºæ–°è¡¨ä¸æ—§è¡¨è¡¨ç»“æ„ç›¸åŒ"></a>æ–°å»ºæ–°è¡¨ä¸æ—§è¡¨è¡¨ç»“æ„ç›¸åŒ</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table new_table like old_table;</span><br></pre></td></tr></table></figure><h2 id="å°†æ—§è¡¨æ•°æ®å¯¼å…¥æ–°è¡¨"><a href="#å°†æ—§è¡¨æ•°æ®å¯¼å…¥æ–°è¡¨" class="headerlink" title="å°†æ—§è¡¨æ•°æ®å¯¼å…¥æ–°è¡¨"></a>å°†æ—§è¡¨æ•°æ®å¯¼å…¥æ–°è¡¨</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into new_table select * from old_table;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>gitä¸­tagæ ‡ç­¾çš„ä½¿ç”¨</title>
      <link href="/2020/12/04/git%E4%B8%ADtag%E6%A0%87%E7%AD%BE%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/12/04/git%E4%B8%ADtag%E6%A0%87%E7%AD%BE%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯tag"><a href="#ä»€ä¹ˆæ˜¯tag" class="headerlink" title="ä»€ä¹ˆæ˜¯tag"></a>ä»€ä¹ˆæ˜¯tag</h1><blockquote><p>tagæ˜¯gitç‰ˆæœ¬åº“çš„ä¸€ä¸ªæ ‡è®°ï¼ŒæŒ‡å‘æŸä¸ªcommitçš„æŒ‡é’ˆã€‚</p></blockquote><blockquote><p>tagä¸»è¦ç”¨äºå‘å¸ƒç‰ˆæœ¬çš„ç®¡ç†ï¼Œä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºgitæ‰“ä¸Š v.1.0.1 v.1.0.2 â€¦è¿™æ ·çš„æ ‡ç­¾ã€‚</p></blockquote><blockquote><p>tagæ„Ÿè§‰è·Ÿbranchæœ‰ç‚¹ç›¸ä¼¼ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå’Œåˆ†å·¥ä¸Šæ˜¯ä¸åŒçš„ï¼š</p></blockquote><blockquote><p>tag å¯¹åº”æŸæ¬¡commit, æ˜¯ä¸€ä¸ªç‚¹ï¼Œæ˜¯ä¸å¯ç§»åŠ¨çš„ã€‚</p></blockquote><blockquote><p>branch å¯¹åº”ä¸€ç³»åˆ—commitï¼Œæ˜¯å¾ˆå¤šç‚¹è¿æˆçš„ä¸€æ ¹çº¿ï¼Œæœ‰ä¸€ä¸ªHEAD æŒ‡é’ˆï¼Œæ˜¯å¯ä»¥ä¾é  HEAD æŒ‡é’ˆç§»åŠ¨çš„ã€‚</p></blockquote><h1 id="åˆ›å»ºtag"><a href="#åˆ›å»ºtag" class="headerlink" title="åˆ›å»ºtag"></a>åˆ›å»ºtag</h1><h2 id="åˆ›å»ºæœ¬åœ°tag"><a href="#åˆ›å»ºæœ¬åœ°tag" class="headerlink" title="åˆ›å»ºæœ¬åœ°tag"></a>åˆ›å»ºæœ¬åœ°tag</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag &lt;tagName&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºtagæŒ‡å®šmessage"><a href="#åˆ›å»ºtagæŒ‡å®šmessage" class="headerlink" title="åˆ›å»ºtagæŒ‡å®šmessage"></a>åˆ›å»ºtagæŒ‡å®šmessage</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &lt;tagname&gt; -m &quot;message&quot;</span><br></pre></td></tr></table></figure><h2 id="æŒ‡å®šæŸä¸ªcommit-idåˆ›å»ºtag"><a href="#æŒ‡å®šæŸä¸ªcommit-idåˆ›å»ºtag" class="headerlink" title="æŒ‡å®šæŸä¸ªcommit idåˆ›å»ºtag"></a>æŒ‡å®šæŸä¸ªcommit idåˆ›å»ºtag</h2><p><strong>å…ˆæŸ¥çœ‹å†å²çš„comitId</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=oneline</span><br></pre></td></tr></table></figure><p><strong>æŒ‡å®šæŸä¸ªcommitIdåˆ›å»ºtag</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &lt;tagName&gt; &lt;commitId&gt;</span><br></pre></td></tr></table></figure><h2 id="å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“</h2><h3 id="æŒ‡å®štagæ¨é€åˆ°è¿œç«¯"><a href="#æŒ‡å®štagæ¨é€åˆ°è¿œç«¯" class="headerlink" title="æŒ‡å®štagæ¨é€åˆ°è¿œç«¯"></a>æŒ‡å®štagæ¨é€åˆ°è¿œç«¯</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin &lt;tagName&gt;</span><br></pre></td></tr></table></figure><h3 id="æ¨é€æ‰€æœ‰tagåˆ°è¿œç«¯"><a href="#æ¨é€æ‰€æœ‰tagåˆ°è¿œç«¯" class="headerlink" title="æ¨é€æ‰€æœ‰tagåˆ°è¿œç«¯"></a>æ¨é€æ‰€æœ‰tagåˆ°è¿œç«¯</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹tag"><a href="#æŸ¥çœ‹tag" class="headerlink" title="æŸ¥çœ‹tag"></a>æŸ¥çœ‹tag</h1><p><strong>æŸ¥çœ‹æœ¬åœ°æŸä¸ª tag çš„è¯¦ç»†ä¿¡æ¯</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show &lt;tagName&gt;</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰ tag</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag æˆ–è€… git tag -l</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹è¿œç¨‹æ‰€æœ‰ tag</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-remote --tags origin</span><br></pre></td></tr></table></figure><h1 id="åˆ é™¤æ ‡ç­¾"><a href="#åˆ é™¤æ ‡ç­¾" class="headerlink" title="åˆ é™¤æ ‡ç­¾"></a>åˆ é™¤æ ‡ç­¾</h1><h2 id="æœ¬åœ°æ ‡ç­¾åˆ é™¤"><a href="#æœ¬åœ°æ ‡ç­¾åˆ é™¤" class="headerlink" title="æœ¬åœ°æ ‡ç­¾åˆ é™¤"></a>æœ¬åœ°æ ‡ç­¾åˆ é™¤</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -d &lt;tagName&gt;</span><br></pre></td></tr></table></figure><h2 id="è¿œç¨‹-tag-çš„åˆ é™¤"><a href="#è¿œç¨‹-tag-çš„åˆ é™¤" class="headerlink" title="è¿œç¨‹ tag çš„åˆ é™¤"></a>è¿œç¨‹ tag çš„åˆ é™¤</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin :&lt;tagName&gt;</span><br></pre></td></tr></table></figure><h1 id="æ£€å‡ºæ ‡ç­¾"><a href="#æ£€å‡ºæ ‡ç­¾" class="headerlink" title="æ£€å‡ºæ ‡ç­¾"></a>æ£€å‡ºæ ‡ç­¾</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;branchName&gt; &lt;tagName&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>golangå­¦ä¹ ç¬”è®°</title>
      <link href="/2020/11/24/golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/11/24/golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h1><h2 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰"></a>å˜é‡å®šä¹‰</h2><blockquote><p><strong>ä½¿ç”¨varå…³é”®å­—</strong></p><blockquote><p>var a,b,c bool<br>var s1,s2 string = â€œhelloâ€,â€worldâ€<br>å¯ä»¥æ”¾åœ¨å‡½æ•°å†…ï¼Œæˆ–ç›´æ¥æ”¾åœ¨åŒ…å†…<br>ä½¿ç”¨var()é›†ä¸­å®šä¹‰å˜é‡</p></blockquote></blockquote><blockquote><p><strong>ä½¿ç”¨:=å®šä¹‰å˜é‡</strong></p><blockquote><p>a,b,i,s1,s2 := true,false,3,â€helloâ€,â€worldâ€ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨å†³å®šç¼–è¯‘ç±»å‹<br>åªèƒ½åœ¨å‡½æ•°å†…ä½¿ç”¨</p></blockquote></blockquote><blockquote><p><strong>å˜é‡å®šä¹‰æ³¨æ„äº‹é¡¹</strong></p><blockquote><p>å®šä¹‰è¿‡å¾—å˜é‡ä¸€å®šè¦ä½¿ç”¨ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™<br>å­—ç¬¦ä¸²ç±»å‹çš„å˜é‡åˆå§‹å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼ˆä¸åƒjavaä¸ºnullï¼‰<br>å˜é‡å®šä¹‰çš„æ—¶å€™èµ‹å€¼å¯ä»¥ä¸ç”¨å®šä¹‰æ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»å‹æ¨æ–­ï¼Œç”šè‡³åœ¨åŒä¸€è¡Œä»£ç å®šä¹‰ä¸åŒç±»å‹çš„å˜é‡éƒ½æ˜¯å¯ä»¥çš„<br>åœ¨å‡½æ•°å¤–é¢å®šä¹‰å˜é‡ä¸èƒ½ä½¿ç”¨:=æ¥å®šä¹‰å˜é‡ï¼Œåªèƒ½ä½¿ç”¨varå…³é”®å­—è¿›è¡Œå˜é‡å®šä¹‰<br>å‡½æ•°å¤–é¢å®šä¹‰å˜é‡ä½œç”¨åŸŸåœ¨åŒ…å†…éƒ¨ï¼Œæ²¡æœ‰å…¨å±€å˜é‡çš„è¯´æ³•</p></blockquote></blockquote><h2 id="å†…å»ºå˜é‡ç±»å‹"><a href="#å†…å»ºå˜é‡ç±»å‹" class="headerlink" title="å†…å»ºå˜é‡ç±»å‹"></a>å†…å»ºå˜é‡ç±»å‹</h2><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><blockquote><p><strong>bool</strong>:å¸ƒå°”</p></blockquote><blockquote><p><strong>string</strong>å­—ç¬¦ä¸²</p></blockquote><blockquote><p><strong>int</strong>æ•´å½¢</p><blockquote><p><strong>(u)int</strong>  æ ¹æ®æ“ä½œç³»ç»Ÿä½æ•°å†³å®šé•¿åº¦(32ä½ç³»ç»Ÿé•¿åº¦(u)int32/64ä½ç³»ç»Ÿ(u)int64)<br><strong>(u)int8</strong><br><strong>(u)int16</strong><br><strong>(u)int32</strong><br><strong>(u)int64</strong></p></blockquote></blockquote><blockquote><p><strong>uinttpr</strong>æŒ‡é’ˆ</p></blockquote><blockquote><p><strong>byte</strong>å­—èŠ‚</p></blockquote><blockquote><p><strong>rune</strong>å­—ç¬¦(32bit)</p></blockquote><blockquote><p><strong>float</strong>(æµ®ç‚¹)</p><blockquote><p><strong>float32</strong><br><strong>float64</strong></p></blockquote></blockquote><blockquote><p><strong>complex</strong>(å¤æ•°)</p><blockquote><p><strong>complex64</strong>  å®éƒ¨å’Œè™šéƒ¨å„32ä½æµ®ç‚¹æ•°<br><strong>complex128</strong>  å®éƒ¨å’Œè™šéƒ¨å„64ä½æµ®ç‚¹æ•°</p></blockquote></blockquote><h3 id="å¤æ•°å›é¡¾"><a href="#å¤æ•°å›é¡¾" class="headerlink" title="å¤æ•°å›é¡¾"></a>å¤æ•°å›é¡¾</h3><p><strong>ä»€ä¹ˆæ˜¯å¤æ•°</strong>:å¤æ•°æ˜¯å½¢å¦‚ a ï¼‹ b içš„æ•°.å¼ä¸­a,b ä¸º å®æ•°,iæ˜¯ä¸€ä¸ªæ»¡è¶³<strong>i^2 ï¼ï¼1</strong>çš„æ•°,å› ä¸ºä»»ä½•å®æ•°çš„å¹³æ–¹ä¸ç­‰äºï¼1,æ‰€ä»¥iä¸æ˜¯å®æ•°,è€Œæ˜¯å®æ•°ä»¥å¤–çš„æ–°çš„æ•°.</p><p><strong>|3+4i| = 5 ï¼Ÿåˆ°åº•æ˜¯æ€ä¹ˆç®—çš„ï¼Ÿæœ‰çŸ¥é“çš„å¯ä»¥å‘Šè¯‰æˆ‘ä¸€ä¸‹ï¼Œæˆ‘ä¸ä¼šç®—ğŸ˜¢</strong>å¼€å§‹è¿˜ä»¥ä¸ºè¿™ä¸ªå…¬å¼æœ‰é—®é¢˜ï¼Œç»“æœç¨‹åºè·‘å‡ºæ¥çš„ç»“æœå°±æ˜¯è¿™ä¹ˆå¤šğŸ˜«</p><p><img src="/images/img_5.png" alt="å¤æ•°"></p><p><strong>i^0 = 1</strong></p><p><strong>i^1 = i</strong></p><p><strong>i^2 = -1</strong></p><p><strong>i^3 = -i</strong></p><p><strong>i^4 = 1</strong></p><p><strong>i^5 = i</strong></p><p><strong>i^6 = -1</strong></p><p><strong>æˆ‘ä»¬å‘ç°</strong>æ¯å¢åŠ ä¸€ä¸ªæ¬¡æ–¹å°±é€†æ—¶é’ˆæ—‹è½¬90åº¦</p><p><img src="/images/img_6.png" alt="æ¬§æ‹‰å…¬å¼çš„ç”±æ¥"></p><p><img src="/images/img_7.png" alt="æœ€ç¾å…¬å¼-æ¬§æ‹‰å…¬å¼"></p><h2 id="å¸¸é‡ä¸æšä¸¾"><a href="#å¸¸é‡ä¸æšä¸¾" class="headerlink" title="å¸¸é‡ä¸æšä¸¾"></a>å¸¸é‡ä¸æšä¸¾</h2><h3 id="å¸¸é‡å®šä¹‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰"><a href="#å¸¸é‡å®šä¹‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰" class="headerlink" title="å¸¸é‡å®šä¹‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰"></a>å¸¸é‡å®šä¹‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰</h3><blockquote><p>å¸¸é‡å¯ä»¥è§„å®šæ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥è®©ç¼–è¯‘å™¨è‡ªä¸»æ¨æ–­ç±»å‹</p></blockquote><blockquote><p>å¸¸é‡ä¹Ÿå¯ä»¥å®šä¹‰åœ¨const()é‡Œé¢è¡¨ç¤ºå®šä¹‰ä¸€ç»„å¸¸é‡</p></blockquote><blockquote><p>goè¯­è¨€çš„å¸¸é‡åç§°å®šä¹‰ä¸€èˆ¬ä¸å¤§å†™ï¼Œå¤§å†™Fä»£è¡¨public</p></blockquote><h3 id="æšä¸¾ç±»å‹ä½¿ç”¨const-å®šä¹‰"><a href="#æšä¸¾ç±»å‹ä½¿ç”¨const-å®šä¹‰" class="headerlink" title="æšä¸¾ç±»å‹ä½¿ç”¨const()å®šä¹‰"></a>æšä¸¾ç±»å‹ä½¿ç”¨const()å®šä¹‰</h3><blockquote><p>goè¯­è¨€ä¸­æ²¡æœ‰ä¸“é—¨çš„æšä¸¾ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»¥å¸¸é‡ç»„ä½œä¸ºæšä¸¾ç±»å‹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const (</span><br><span class="line">zero = 0</span><br><span class="line">one = 1</span><br><span class="line">two = 2</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>goè¯­è¨€æä¾›äº†iotaå…³é”®å­—æ˜¯æšä¸¾å€¼çš„è‡ªå¢è¡¨è¾¾å¼,ä½¿ç”¨_ä¸‹åˆ’çº¿è·³è¿‡</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const (</span><br><span class="line">cpp = iota</span><br><span class="line">_</span><br><span class="line">python</span><br><span class="line">golang</span><br><span class="line">javascript</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæšä¸¾å¸¸é‡çš„å€¼ä¸ºcpp:0/_:1/python:2/golang:3/javascript:4</p><blockquote><p>è¿˜èƒ½ä»¥iotaå…³é”®ä¹‹å®šä¹‰ç£ç›˜å®¹é‡è¡¨è¾¾å¼å¦‚ä¸‹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const (</span><br><span class="line">b 1 &lt;&lt; (10 * iota)</span><br><span class="line">kb</span><br><span class="line">mb</span><br><span class="line">gb</span><br><span class="line">tb</span><br><span class="line">pb</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h2><h3 id="ifæ¡ä»¶è¯­å¥"><a href="#ifæ¡ä»¶è¯­å¥" class="headerlink" title="ifæ¡ä»¶è¯­å¥"></a>ifæ¡ä»¶è¯­å¥</h3><blockquote><p><strong>ç¤ºä¾‹</strong>ï¼šè¯»å–æ–‡ä»¶</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;io/ioutil&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">const filename = &quot;abc.txt&quot;</span><br><span class="line">//goè¯­è¨€çš„å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼</span><br><span class="line">file, err := ioutil.ReadFile(filename)</span><br><span class="line">//é”™è¯¯ä¸ä¸ºç©ºæ‰“å°é”™è¯¯</span><br><span class="line">if err != nil &#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">//æ²¡æœ‰é”™è¯¯æ‰“å°æ–‡æœ¬æ–‡ä»¶å†…å®¹</span><br><span class="line">fmt.Printf(&quot;%s\n\n&quot;, file)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„</strong>ï¼šgoè¯­è¨€çš„ifè¯­å¥å¯ä»¥åƒå…¶å®ƒè¯­è¨€çš„forè¯­å¥çš„å†™æ³•ï¼Œå…ˆåˆå§‹åŒ–èµ‹å€¼ï¼ˆå®šä¹‰å˜é‡ï¼‰ï¼Œå†è¿›è¡Œæ¡ä»¶åˆ¤æ–­,ä½¿ç”¨åˆ†å·åˆ†éš”ï¼Œä½œç”¨åŸŸåœ¨ifä»¥å†…ï¼Œå†™æ³•å¦‚ä¸‹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;io/ioutil&quot;</span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">const filename = &quot;abc.txt&quot;</span><br><span class="line">if file, err := ioutil.ReadFile(filename); err != nil &#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Printf(&quot;%s\n\n&quot;, file)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="switchæ¡ä»¶è¯­å¥"><a href="#switchæ¡ä»¶è¯­å¥" class="headerlink" title="switchæ¡ä»¶è¯­å¥"></a>switchæ¡ä»¶è¯­å¥</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">func eval(a int, b int, op string) int &#123;</span><br><span class="line">var result int</span><br><span class="line">switch op &#123;</span><br><span class="line">case &quot;+&quot;:</span><br><span class="line">result = a+b</span><br><span class="line">case &quot;-&quot;:</span><br><span class="line">result = a-b</span><br><span class="line">case &quot;*&quot;:</span><br><span class="line">result = a*b</span><br><span class="line">case &quot;/&quot;:</span><br><span class="line">result = a/b</span><br><span class="line">default:</span><br><span class="line">panic(&quot;unsupported operator&quot; + op)</span><br><span class="line">&#125;</span><br><span class="line">return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>çœ‹çœ‹è¿™æ®µ</strong></p><blockquote><p>switchä»£ç å—ä¸­çš„caseä¼šè‡ªåŠ¨breakï¼Œå¦‚æœä¸é€‚ç”¨breakä½¿ç”¨fallthroughï¼Œä¹Ÿå°±æ˜¯å…¶å®ƒé¢„å‹çš„caseç©¿é€ã€‚</p></blockquote><blockquote><p>panicæ˜¯goè¯­è¨€ä¸­çš„æŠ¥é”™ï¼ŒæŠ¥é”™ä¼šè®©ç¨‹åºåœä¸‹æ¥ã€‚</p></blockquote><p><strong>switché‡Œé¢å¦‚æœæ²¡æœ‰è¡¨è¾¾å¼ä¹Ÿå¯ä»¥å°†æ¡ä»¶æ”¾åˆ°caseè¯­å¥é‡Œé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="hljs highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">grade</span><span class="params">(score <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">g := <span class="string">""</span></span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="keyword">case</span> score &lt; <span class="number">60</span>:</span><br><span class="line">g = <span class="string">"F"</span></span><br><span class="line"><span class="keyword">case</span> score &lt; <span class="number">80</span>:</span><br><span class="line">g = <span class="string">"C"</span></span><br><span class="line"><span class="keyword">case</span> score &lt; <span class="number">90</span>:</span><br><span class="line">g = <span class="string">"B"</span></span><br><span class="line"><span class="keyword">case</span> score &lt;= <span class="number">100</span>:</span><br><span class="line">g = <span class="string">"A"</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="built_in">panic</span>(fmt.Sprintf(<span class="string">"Wrong score:%d"</span>,score))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> g</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p><strong>ä¸€ä¸ªç®€å•çš„forå¾ªç¯</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func loopdemo() &#123;</span><br><span class="line">sum := 1</span><br><span class="line">for i := 0; i &lt; 100; i++ &#123;</span><br><span class="line">sum+=1</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>forè¯­å¥çš„æ¡ä»¶é‡Œä¸éœ€è¦æ‹¬å·</p></blockquote><blockquote><p>forçš„æ¡ä»¶é‡Œé¢å¯ä»¥çœç•¥åˆå§‹æ¡ä»¶ï¼Œç»“æŸæ¡ä»¶ï¼Œé€’å¢è¡¨è¾¾å¼</p></blockquote><p><strong>æ²¡æœ‰åˆå§‹åŒ–æ¡ä»¶çš„å†™æ³•</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//å°†æ•°å­—è½¬æ¢ä¸º2è¿›åˆ¶å­—ç¬¦</span><br><span class="line">func convertToBin(number int) string &#123;</span><br><span class="line">result := &quot;&quot;</span><br><span class="line">for ; number &gt; 0; number /= 2 &#123;</span><br><span class="line">lsb := number % 2</span><br><span class="line">result = strconv.Itoa(lsb) + result</span><br><span class="line">&#125;</span><br><span class="line">return result</span><br><span class="line">&#125;</span><br><span class="line">//goè¯­è¨€å¯¹æ¢è¡Œæœ‰æ‰€è®²ç©¶ï¼Œéœ€è¦åŠ ä¸Šé€—å·</span><br><span class="line">func main() &#123;</span><br><span class="line">fmt.Println(</span><br><span class="line">convertToBin(2),</span><br><span class="line">convertToBin(3),</span><br><span class="line">convertToBin(4),</span><br><span class="line">)</span><br><span class="line">//æ‰“å°ç»“æœä¸º10 11 100</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆå§‹åŒ–æ¡ä»¶åŠé€’å¢è¡¨è¾¾å¼åŒæ—¶çœç•¥ï¼ˆç›¸å½“äºwhileï¼Œä½†æ˜¯goè¯­è¨€ä¸­æ²¡æœ‰whileï¼‰</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func printFile(filename string) &#123;</span><br><span class="line">file, err := os.Open(filename)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">scanner := bufio.NewScanner(file)</span><br><span class="line">for scanner.Scan() &#123;</span><br><span class="line">fmt.Println(scanner.Text())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">printFile(&quot;abc.txt&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ­»å¾ªç¯å†™æ³•(å¹¶å‘ç¼–ç¨‹ç›¸äº’é€šä¿¡ä¼šç”¨åˆ°æ­»å¾ªç¯)</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">func forever() &#123;</span><br><span class="line">for true &#123;</span><br><span class="line">fmt.Println(&quot;æ­»å¾ªç¯&quot;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">forever()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><blockquote><p>å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼</p></blockquote><blockquote><p>å‡½æ•°è¿”å›å¤šä¸ªå€¼æ—¶å¯ä»¥èµ·åå­—ï¼ˆä»…é™äºéå¸¸ç®€å•çš„å‡½æ•°ï¼Œä½†å¯¹äºè°ƒç”¨è€…å¯ä»¥éšä¾¿èµ·åï¼‰</p></blockquote><blockquote><p>goè¯­è¨€å‡½æ•°æ˜¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå‡½æ•°é‡Œé¢çš„å‚æ•°ã€è¿”å›å€¼ã€å‡½æ•°ä½“éƒ½å¯ä»¥æœ‰å‡½æ•°</p></blockquote><blockquote><p>goè¯­è¨€æ²¡æœ‰èŠ±å“¨çš„lambdaè¡¨è¾¾å¼ï¼Œæ˜¯éœ€è¦å°†åŒ¿åå‡½æ•°å†™å‡ºå³å¯</p></blockquote><blockquote><p>goè¯­è¨€æ²¡æœ‰é»˜è®¤å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰æ–¹æ³•é‡è½½</p></blockquote><blockquote><p>goè¯­è¨€å‡½æ•°æœ‰å¯å˜å‚æ•°åˆ—è¡¨</p></blockquote><h3 id="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°3çš„4æ¬¡æ–¹"><a href="#ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°3çš„4æ¬¡æ–¹" class="headerlink" title="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°3çš„4æ¬¡æ–¹"></a>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°3çš„4æ¬¡æ–¹</h3><p><strong>ä»£ç å¦‚ä¸‹</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//é‡æ–°å®šä¹‰powå‡½æ•°æ¥æ”¶intç±»å‹</span><br><span class="line">func pow(a, b int) int &#123;</span><br><span class="line">return int(math.Pow(float64(a), float64(b)))</span><br><span class="line">&#125;</span><br><span class="line">//opå®šä¹‰äº†è°ƒç”¨æ–¹ä¼ é€’çš„å‡½æ•°</span><br><span class="line">func apply(op func(int, int) int, a int, b int) (result int) &#123;</span><br><span class="line">//åå°„è·å–åˆ°ä¼ é€’è¿‡æ¥çš„å‡½æ•°çš„æŒ‡é’ˆ</span><br><span class="line">pointer := reflect.ValueOf(op).Pointer()</span><br><span class="line">//é€šè¿‡æŒ‡é’ˆè·å–å‡½æ•°åç§°</span><br><span class="line">name := runtime.FuncForPC(pointer).Name()</span><br><span class="line">//æ‰“å°ä¼ é€’çš„å‡½æ•°åç§°åŠå‚æ•°</span><br><span class="line">fmt.Printf(&quot;calling function is %s with args (%d,%d) \n&quot;, name, a, b)</span><br><span class="line">//è¿”å›å€¼ç”±ä¼ å…¥çš„å‡½æ•°å¤„ç†åçš„ç»“æœå†³å®š</span><br><span class="line">return op(a, b)</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">//è®¡ç®—3çš„4æ¬¡æ–¹ç­‰äº81,ä¼ çš„çš„å‡½æ•°å¼æ“ä½œä¸ºpow,açš„bæ¬¡æ–¹</span><br><span class="line">fmt.Println(apply(pow, 3, 4))</span><br><span class="line">//ä¹Ÿå¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°çš„æ–¹å¼ï¼Œè®¡ç®—2çš„3æ¬¡æ–¹</span><br><span class="line">fmt.Println(apply(</span><br><span class="line">func(a int, b int) int &#123;</span><br><span class="line">return int(math.Pow(float64(a), float64(b)))</span><br><span class="line">&#125;, 2, 3))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœ</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">calling function is main.pow with args (3,4) </span><br><span class="line">81</span><br><span class="line">calling function is main.main.func1 with args (2,3) </span><br><span class="line">8</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°çš„å¯å˜å‚ç¤ºä¾‹"><a href="#å‡½æ•°çš„å¯å˜å‚ç¤ºä¾‹" class="headerlink" title="å‡½æ•°çš„å¯å˜å‚ç¤ºä¾‹"></a>å‡½æ•°çš„å¯å˜å‚ç¤ºä¾‹</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func sum(numbers ...int) int &#123;</span><br><span class="line">sum := 0</span><br><span class="line">for i := range numbers &#123;</span><br><span class="line">sum += numbers[i]</span><br><span class="line">&#125;</span><br><span class="line">return sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h2><p><strong>å…ˆçœ‹ä¸€æ®µä»£ç </strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func pointer() &#123;</span><br><span class="line">//å®šä¹‰å˜é‡aèµ‹å€¼ä¸º2</span><br><span class="line">var a int = 2</span><br><span class="line">//å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆpaï¼Œç±»å‹ä¸º*intï¼ˆæŒ‡é’ˆå‹intï¼‰ï¼ŒæŒ‡å‘å˜é‡açš„åœ°å€å€¼</span><br><span class="line">var pa *int = &amp;a</span><br><span class="line">//å°†æŒ‡é’ˆ*paæŒ‡å‘çš„åœ°å€å€¼èµ‹å€¼ä¸º3,ä¹Ÿå°±æ˜¯å°†å˜é‡aèµ‹å€¼ä¸º3</span><br><span class="line">*pa = 3</span><br><span class="line">fmt.Println(a)</span><br><span class="line">//æ‰“å°ç»“æœä¸º3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>goè¯­è¨€çš„æŒ‡é’ˆä¸èƒ½è¿›è¡Œè¿ç®—</p></blockquote><blockquote><p>goè¯­è¨€åªæœ‰å€¼ä¼ é€’ä¸€ç§æ–¹å¼ï¼ˆå€¼ä¼ é€’ä¼šcopyä¸€ä»½æ•°æ®è¿›è¡Œæ“ä½œ/å¼•ç”¨ä¼ é€’ä¼šæ“ä½œä¼ é€’çš„å€¼ï¼‰</p></blockquote><blockquote><p>goè¯­è¨€é€šè¿‡æŒ‡é’ˆä¼ é€’èƒ½æ‰“åˆ°å¼•ç”¨ä¼ é€’çš„æ•ˆæœ</p></blockquote><blockquote><p>è‡ªå®šä¹‰ç±»å‹éœ€è¦è€ƒè™‘è¯¥ç±»å‹æ˜¯éœ€è¦ä½œä¸ºæŒ‡é’ˆä½¿ç”¨è¿˜æ˜¯ä½œä¸ºå€¼æ¥ä½¿ç”¨</p></blockquote><h3 id="ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ"><a href="#ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ" class="headerlink" title="ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ"></a>ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func swap(a *int, b *int) &#123;</span><br><span class="line">*a, *b = *b, *a</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">a := 3</span><br><span class="line">b := 4</span><br><span class="line">//ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ</span><br><span class="line">swap(&amp;a, &amp;b)</span><br><span class="line">fmt.Println(a,b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸ä½¿ç”¨æŒ‡é’ˆå°†æ“ä½œåçš„ç»“æœè¿”å›æˆ–è®¸æ›´å¥½"><a href="#ä¸ä½¿ç”¨æŒ‡é’ˆå°†æ“ä½œåçš„ç»“æœè¿”å›æˆ–è®¸æ›´å¥½" class="headerlink" title="ä¸ä½¿ç”¨æŒ‡é’ˆå°†æ“ä½œåçš„ç»“æœè¿”å›æˆ–è®¸æ›´å¥½"></a>ä¸ä½¿ç”¨æŒ‡é’ˆå°†æ“ä½œåçš„ç»“æœè¿”å›æˆ–è®¸æ›´å¥½</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func swap(a int, b int) (resa int, resb int) &#123;</span><br><span class="line">return b, a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">a := 3</span><br><span class="line">b := 4</span><br><span class="line">//ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ</span><br><span class="line">a, b = swap(a, b)</span><br><span class="line">fmt.Println(a,b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å†…å»ºå®¹å™¨"><a href="#å†…å»ºå®¹å™¨" class="headerlink" title="å†…å»ºå®¹å™¨"></a>å†…å»ºå®¹å™¨</h1><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><blockquote><p><strong>æ•°ç»„æ˜¯å€¼ç±»å‹</strong>ï¼Œåœ¨å‡½æ•°ä¸­æ‰§è¡Œçš„æ—¶å€™è¿›è¡Œæ‹·è´ä¸€ä»½å†å¤„ç†</p></blockquote><blockquote><p>goè¯­è¨€ä¸­è®¤ä¸º[3]intç±»å‹ä¸[5]intè®¤ä¸ºæ˜¯ä¸åŒçš„ç±»å‹ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™æ•°ç»„é•¿åº¦ä¸ä¸€è‡´goä¼šè®¤ä¸ºæ˜¯ä¸åŒç±»å‹</p></blockquote><blockquote><p>goè¯­è¨€ä¸­æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä½¿ç”¨æ•°ç»„ï¼Œä¹Ÿä¸ä½¿ç”¨æ•°ç»„çš„æŒ‡é’ˆï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ‡ç‰‡Slice</p></blockquote><p><strong>æ•°ç»„çš„å®šä¹‰æ–¹æ³•</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰å®¹é‡ä¸º5å…ƒç´ ç±»å‹ä¸ºintçš„æ•°ç»„(å…ƒç´ åˆå§‹å€¼ä¸º0)</span><br><span class="line">var array1 [5]int</span><br><span class="line">//å®šä¹‰å®¹é‡ä¸º3å…ƒç´ ç±»å‹ä¸ºintçš„æ•°ç»„(æŒ‡å®šå…ƒç´ åˆå§‹å€¼)</span><br><span class="line">array2 := [3]int&#123;1,2,3&#125;</span><br><span class="line">//å®¹é‡ä¸ºç¼–è¯‘å™¨æ¥ç¡®å®šç±»å‹ä¸ºintçš„æ•°ç»„</span><br><span class="line">array3 := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">//å®šä¹‰4è¡Œ5åˆ—çš„intç±»å‹äºŒç»´æ•°ç»„(å…ƒç´ åˆå§‹å€¼ä¸º0)</span><br><span class="line">var grid [4][5]int</span><br></pre></td></tr></table></figure><p><strong>æ™®é€šforå¾ªç¯éå†æ•°ç»„</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func foreachArr() &#123;</span><br><span class="line">arr := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">for i := 0; i &lt; len(arr); i++ &#123;</span><br><span class="line">fmt.Println(arr[i])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>for i := rangeéå†æ•°ç»„</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func foreachArr() &#123;</span><br><span class="line">arr := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">//è¿™é‡Œçš„iå–åˆ°çš„æ˜¯arrçš„ç´¢å¼•</span><br><span class="line">for i := range arr&#123;</span><br><span class="line">fmt.Println(arr[i])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>for i := rangeéå†æ•°ç»„åŒæ—¶å–ç´¢å¼•å’Œå€¼</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func foreachArr() &#123;</span><br><span class="line">arr := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">//è¿™é‡Œçš„iå–åˆ°çš„æ˜¯arrçš„ç´¢å¼•ï¼Œvå–åˆ°çš„æ˜¯å€¼</span><br><span class="line">for i,v := range arr&#123;</span><br><span class="line">fmt.Println(i,v)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>for i := rangeéå†æ•°ç»„åªè·å–å€¼</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func foreachArr() &#123;</span><br><span class="line">arr := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">//è¿™é‡Œçš„ç´¢å¼•ä»¥ä¸‹æ ‡_æ›¿æ¢ä»£è¡¨ä¸å–ç´¢å¼•ï¼Œvå–åˆ°çš„æ˜¯å€¼ï¼ˆä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ä¸‹æ ‡_çœç•¥å˜é‡ï¼‰</span><br><span class="line">for _,v := range arr&#123;</span><br><span class="line">fmt.Println(v)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ‡ç‰‡-Slice"><a href="#åˆ‡ç‰‡-Slice" class="headerlink" title="åˆ‡ç‰‡(Slice)"></a>åˆ‡ç‰‡(Slice)</h2><p><strong>æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼Œçœ‹çœ‹ä»€ä¹ˆæ˜¯åˆ‡ç‰‡</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">s := arr[2:6]</span><br><span class="line">//è¿™é‡Œçš„så°±æ˜¯åˆ‡ç‰‡,ä¸€ä¸ªå·¦é—­å³å¼€çš„åŒº(æ•°å­¦é‡Œé¢çš„é—­åŒºé—´æ˜¯å–ç­‰çš„)</span><br></pre></td></tr></table></figure><blockquote><p>Sliceå…¶å®æ˜¯æ•°ç»„çš„ä¸€ä¸ªè§†å›¾</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr[2:6] = [2 3 4 5]</span><br><span class="line">arr[:6] = [0 1 2 3 4 5]</span><br><span class="line">arr[2:] = [2 3 4 5 6 7]</span><br><span class="line">arr[:] = [0 1 2 3 4 5 6 7]</span><br></pre></td></tr></table></figure><blockquote><p>Sliceæœ¬èº«æ²¡æœ‰æ•°æ®ï¼Œæ˜¯å¯¹åº•å±‚arrayçš„ä¸€ä¸ªview</p></blockquote><h3 id="Reslice"><a href="#Reslice" class="headerlink" title="Reslice"></a>Reslice</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">s2 := arr[:]</span><br><span class="line">//[0 1 2 3 4 5 6 7]</span><br><span class="line">s2 = s2[:5]</span><br><span class="line">//[0 1 2 3 4]</span><br><span class="line">s2 = s2[2:]</span><br><span class="line">//[2 3 4]</span><br></pre></td></tr></table></figure><h3 id="sliceçš„æ‰©å±•"><a href="#sliceçš„æ‰©å±•" class="headerlink" title="sliceçš„æ‰©å±•"></a>sliceçš„æ‰©å±•</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">//ä¸Šé¢æ˜¯å…ƒç´ æ•°æ®</span><br><span class="line">s1 := arr[2:6]</span><br><span class="line">//[2 3 4 5]</span><br><span class="line">//fmt.Pringln(s1[4])</span><br><span class="line">//ä¸Šé¢è¿™è¡Œæ³¨é‡Šçš„ä»£ç ä¼šæŠ¥ç´¢å¼•è¶Šç•Œå¼‚å¸¸ï¼Œç”¨ä¸‹é¢çš„slice(s2)å¯ä»¥ç»“å±€è¿™ä¸ªé—®é¢˜ï¼Œgolangçš„sliceæœ‰capçš„æ¦‚å¿µ</span><br><span class="line">s2 := s1[3:5]</span><br><span class="line">//[5 6]</span><br></pre></td></tr></table></figure><p><strong>ä¸Šé¢è¿™ä¸€å—çš„ä»£ç å›¾è§£å¦‚ä¸‹</strong></p><p><img src="/images/img_8.png" alt="sliceæ‰©å±•"></p><h3 id="sliceçš„å®ç°"><a href="#sliceçš„å®ç°" class="headerlink" title="sliceçš„å®ç°"></a>sliceçš„å®ç°</h3><p><img src="/images/img_9.png" alt="sliceçš„å®ç°"></p><blockquote><p>sliceåº•å±‚æœ‰ä¸€ä¸ªarray</p></blockquote><blockquote><p>ptræŒ‡å‘äº†sliceå¼€å¤´çš„å…ƒç´ </p></blockquote><blockquote><p>lenæŒ‡å‘äº†sliceçš„é•¿åº¦ï¼Œä½¿ç”¨slice[n]åªèƒ½å–lené•¿åº¦é‡Œé¢çš„å€¼ï¼Œè¶…è¿‡é•¿åº¦å€¼ä¼šæŠ¥ç´¢å¼•è¶Šç•Œ</p></blockquote><blockquote><p>capä»£è¡¨äº†ä»ptrå¼€å§‹æ•´ä¸ªæ•°ç»„çš„é•¿åº¦ï¼Œæ‰©å±•çš„æ—¶å€™åªè¦ä¸è¶…è¿‡capçš„é•¿åº¦å°±å¯ä»¥</p></blockquote><blockquote><p>sliceå¯ä»¥å‘åæ‰©å±•ï¼Œä½†æ˜¯ä¸å¯ä»¥å¾€å‰æ‰©å±•ï¼Œå‘åæ‰©å±•ä¸å¯ä»¥è¶…è¿‡capçš„é•¿åº¦</p></blockquote><blockquote><p>len(slice)å¯ä»¥å–åˆ°è¿™ä¸ªsliceçš„é•¿åº¦ï¼Œcap(slice)å¯ä»¥å–åˆ°è¿™ä¸ªsliceçš„capé•¿åº¦</p></blockquote><h2 id="åˆ‡ç‰‡-slice-çš„æ“ä½œ"><a href="#åˆ‡ç‰‡-slice-çš„æ“ä½œ" class="headerlink" title="åˆ‡ç‰‡(slice)çš„æ“ä½œ"></a>åˆ‡ç‰‡(slice)çš„æ“ä½œ</h2><h3 id="sliceçš„appendæ“ä½œ"><a href="#sliceçš„appendæ“ä½œ" class="headerlink" title="sliceçš„appendæ“ä½œ"></a>sliceçš„appendæ“ä½œ</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">//ä¸Šé¢æ˜¯å…ƒç´ æ•°æ®</span><br><span class="line">s1 := arr[2:6]</span><br><span class="line">//s1---&gt;[2 3 4 5]</span><br><span class="line">//fmt.Pringln(s1[4])</span><br><span class="line">//ä¸Šé¢è¿™è¡Œæ³¨é‡Šçš„ä»£ç ä¼šæŠ¥ç´¢å¼•è¶Šç•Œå¼‚å¸¸ï¼Œç”¨ä¸‹é¢çš„slice(s2)å¯ä»¥ç»“å±€è¿™ä¸ªé—®é¢˜ï¼Œgolangçš„sliceæœ‰capçš„æ¦‚å¿µ</span><br><span class="line">s2 := s1[3:5]</span><br><span class="line">//s2---&gt;[5 6]</span><br><span class="line">s3 := appent(s2,10)</span><br><span class="line">//s3---&gt;[5 6 10]</span><br><span class="line">s4 := appent(s3,11)</span><br><span class="line">//s4---&gt;[5 6 10 11]</span><br><span class="line">s5 := appent(s4,12)</span><br><span class="line">//s5---&gt;[5 6 10 11 12]</span><br><span class="line"></span><br><span class="line">//arræœ€ç»ˆçš„å€¼ä¸º[0 1 2 3 4 5 6 10],arrçš„é•¿åº¦å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œè€Œs4åŠs5æ˜¯å¯¹è¢«æ‰©å±•çš„æ•°ç»„çš„ä¸€ä¸ªviewï¼Œæˆ‘ä»¬æ‹¿ä¸åˆ°æ‰©å±•çš„æ•°ç»„ï¼Œs3 appentè¿‡åä½†æ˜¯ä»–å¹¶æ²¡æœ‰è¶…è¿‡arré•¿åº¦ï¼Œæ‰€ä»¥å¯¹åº•å±‚arrç›¸åº”ç´¢å¼•ä½ç½®çš„æ•°æ®è¿›è¡Œäº†ä¿®æ”¹</span><br></pre></td></tr></table></figure><blockquote><p>æ·»åŠ å…ƒç´ æ—¶å¦‚æœè¶…è¿‡capçš„é•¿åº¦ï¼Œç³»ç»Ÿä¼šé‡æ–°åˆ†é…æ›´å¤§çš„åº•å±‚æ•°ç»„ä½œä¸ºæ–°sliceçš„view</p></blockquote><blockquote><p>å¦‚æœåŸæ¥çš„æ•°ç»„æœ‰ç”¨ç³»ç»Ÿä¼šä¿ç•™ï¼Œå¦‚æœæ²¡ç”¨ä¼šè¢«goçš„åƒåœ¾å›æ”¶æœºåˆ¶ç»™å›æ”¶æ‰</p></blockquote><blockquote><p>ç”±äºå€¼ä¼ é€’çš„å…³ç³»å¿…é¡»æ¥å—appentçš„è¿”å›å€¼ s = append(s,val)</p></blockquote><h3 id="sliceçš„å…¶å®ƒæ“ä½œ"><a href="#sliceçš„å…¶å®ƒæ“ä½œ" class="headerlink" title="sliceçš„å…¶å®ƒæ“ä½œ"></a>sliceçš„å…¶å®ƒæ“ä½œ</h3><h4 id="sliceçš„åˆ›å»º"><a href="#sliceçš„åˆ›å»º" class="headerlink" title="sliceçš„åˆ›å»º"></a>sliceçš„åˆ›å»º</h4><p><strong>å®šä¹‰ä¸€ä¸ªç©ºçš„sliceé•¿åº¦ä¸º0</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var s []int</span><br></pre></td></tr></table></figure><p><strong>å®šä¹‰æŒ‡å®šå…ƒç´ å†…å®¹çš„slice</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s1 := []int&#123;2,4,6,8&#125;</span><br></pre></td></tr></table></figure><p><strong>å†…å»ºå‡½æ•°å®šä¹‰lenä¸º16çš„slice</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s2 := make([]int,16)</span><br></pre></td></tr></table></figure><p><strong>å†…å»ºå‡½æ•°å®šä¹‰lenä¸º10 capä¸º32 çš„slice</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s3 := make([]int,10,32)</span><br></pre></td></tr></table></figure><h4 id="sliceçš„copyåŠå…ƒç´ removeæ“ä½œ"><a href="#sliceçš„copyåŠå…ƒç´ removeæ“ä½œ" class="headerlink" title="sliceçš„copyåŠå…ƒç´ removeæ“ä½œ"></a>sliceçš„copyåŠå…ƒç´ removeæ“ä½œ</h4><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s1 := []int&#123;2,4,6,8&#125;</span><br><span class="line">//s1---&gt;[2 4 6 8]</span><br><span class="line">s2 := make([]int,16)</span><br><span class="line">//s2---&gt;[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]</span><br><span class="line">copy(s2,s1)</span><br><span class="line">//s2---&gt;[2 4 6 8 0 0 0 0 0 0 0 0 0 0 0 0]</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœæˆ‘ä»¬æƒ³è¦æŠŠs2ä¸­çš„å…ƒç´ 8åˆ æ‰æ€ä¹ˆæ“ä½œå‘¢</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//s2---&gt;[2 4 6 8 0 0 0 0 0 0 0 0 0 0 0 0]</span><br><span class="line">s2 = append(s2[:3],s2[4:]...)//s2æ‰€åœ¨çš„å‚æ•°åˆ—è¡¨æ˜¯ä¸€ä¸ªå¯å˜å‚ï¼Œå¦‚æœéœ€è¦å°†s2ç´¢å¼•4å³é¢çš„æ‰€æœ‰å…ƒç´ éƒ½é€ä¸ªå®ƒéœ€è¦åŠ ä¸Š...çš„è¯­æ³•</span><br><span class="line">//s2---&gt;[2 4 6 0 0 0 0 0 0 0 0 0 0 0 0]</span><br></pre></td></tr></table></figure><p><strong>å»æ‰s2çš„é¦–å°¾æ“ä½œ</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//s2---&gt;[2 4 6 0 0 0 0 0 0 0 0 0 0 0 0]</span><br><span class="line">//è·å–é¦–å…ƒç´ çš„å€¼ï¼Œå¯ä»¥ç”¨äºæ‰“å°</span><br><span class="line">front := s2[0]</span><br><span class="line">//è·å–å°¾å…ƒç´ ï¼Œå¯ä»¥ç”¨äºæ‰“å°</span><br><span class="line">tail := s2[len(s2)-1]</span><br><span class="line">//å‰”é™¤é¦–ä½æ“ä½œ</span><br><span class="line">s2 := s2[1:]</span><br><span class="line">s2 := s2[:len(s2)-1]</span><br><span class="line">//s2---&gt;[4 6 0 0 0 0 0 0 0 0 0 0 0]</span><br></pre></td></tr></table></figure><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="Mapçš„åˆ›å»º"><a href="#Mapçš„åˆ›å»º" class="headerlink" title="Mapçš„åˆ›å»º"></a>Mapçš„åˆ›å»º</h3><blockquote><p>map[Key]Value åˆ›å»ºå•å±‚Key/Valueç±»å‹çš„Map</p></blockquote><blockquote><p>map[Key1]map[Key2]Value åˆ›å»ºå¤åˆå¤šå±‚çº§Map</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mapDemo := map[string]string&#123;</span><br><span class="line">&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(mapDemo)</span><br></pre></td></tr></table></figure><p><strong>ç©ºmapçš„åˆ›å»º</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//ä½¿ç”¨make</span><br><span class="line">m1 := make(map[string]int)</span><br><span class="line">//m1---&gt;map[] (m1 == empty)</span><br><span class="line">//æˆ–è€…ä½¿ç”¨</span><br><span class="line">var m2 map[string]int</span><br><span class="line">//m2---&gt;map[] (m2 == nil)</span><br><span class="line"></span><br><span class="line">//goè¯­è¨€ä¸­çš„nilåŠemptyæ˜¯å¯ä»¥å‚ä¸è¿ç®—çš„ï¼Œè·Ÿå…¶å®ƒè¯­è¨€æœ‰æ‰€åŒºåˆ«ï¼Œå€¼æ˜¯nilä¹Ÿå¯ä»¥å¾ˆå®‰å…¨çš„ä½¿ç”¨</span><br></pre></td></tr></table></figure><h3 id="Mapçš„è¿­ä»£"><a href="#Mapçš„è¿­ä»£" class="headerlink" title="Mapçš„è¿­ä»£"></a>Mapçš„è¿­ä»£</h3><p><strong>ä½¿ç”¨rangeå¯¹mapè¿›è¡Œè¿­ä»£</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func mapIterate() &#123;</span><br><span class="line">mapDemo := map[string]string&#123;</span><br><span class="line">&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(mapDemo)</span><br><span class="line">for k,v := range mapDemo&#123;</span><br><span class="line">fmt.Println(k,v)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//mapæ‰“å°å‡ºæ¥çš„å€¼æˆ‘ä»¬å‘ç°mapä¸­çš„å…ƒç´ æ˜¯æ— åºçš„</span><br></pre></td></tr></table></figure><h3 id="mapè·å–æŒ‡å®šå…ƒç´ "><a href="#mapè·å–æŒ‡å®šå…ƒç´ " class="headerlink" title="mapè·å–æŒ‡å®šå…ƒç´ "></a>mapè·å–æŒ‡å®šå…ƒç´ </h3><p><strong>é€šè¿‡keyè·å–mapä¸­valueçš„å€¼</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func mapDemo() &#123;</span><br><span class="line">mapDemo := map[string]string&#123;</span><br><span class="line">&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">&#125;</span><br><span class="line">courseName := mapDemo[&quot;course&quot;]</span><br><span class="line">fmt.Println(courseName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœmapä¸­æ²¡æœ‰è¿™ä¸ªkeyçš„è¯è·å–mapçš„å€¼ä¸ä¼šæŠ¥é”™ï¼Œä»–æ˜¯ä¸€ä¸ªç©ºä¸²ï¼ŒPrintlnä»–ä¼šæ‰“å°ä¸€ä¸ªç©ºè¡Œ</p></blockquote><h3 id="åˆ¤æ–­mapä¸­çš„æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­mapä¸­çš„æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­mapä¸­çš„æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­mapä¸­çš„æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨</h3><p><strong>åˆ¤æ–­å…ƒç´ åœ¨mapä¸­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™æ‰“å°ï¼Œä¸å­˜åœ¨ä¸æ‰“å°</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func mapDemo() &#123;</span><br><span class="line">mapDemo := map[string]string&#123;</span><br><span class="line">&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">&#125;</span><br><span class="line">if courseName, ok := mapDemo[&quot;course&quot;]; ok &#123;</span><br><span class="line">fmt.Println(courseName)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Println(&quot;key does not exist&quot;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapåˆ é™¤æŒ‡å®šå…ƒç´ "><a href="#mapåˆ é™¤æŒ‡å®šå…ƒç´ " class="headerlink" title="mapåˆ é™¤æŒ‡å®šå…ƒç´ "></a>mapåˆ é™¤æŒ‡å®šå…ƒç´ </h3><p><strong>åˆ é™¤mapä¸­çš„æŒ‡å®škey</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func mapDemo() &#123;</span><br><span class="line">mapDemo := map[string]string&#123;</span><br><span class="line">&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">&#125;</span><br><span class="line">delete(mapDemo,&quot;name&quot;)</span><br><span class="line">//åˆ é™¤keyä¸ºnameçš„å…ƒç´ ï¼Œåé¢çš„key does not existæç¤ºå°†ä¼šè¢«æ‰“å°</span><br><span class="line">if courseName, ok := mapDemo[&quot;name&quot;]; ok &#123;</span><br><span class="line">fmt.Println(courseName)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Println(&quot;key does not exist&quot;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹æ‰èƒ½ä½œä¸ºmapçš„keyå‘¢"><a href="#ä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹æ‰èƒ½ä½œä¸ºmapçš„keyå‘¢" class="headerlink" title="ä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹æ‰èƒ½ä½œä¸ºmapçš„keyå‘¢"></a>ä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹æ‰èƒ½ä½œä¸ºmapçš„keyå‘¢</h3><blockquote><p>mapä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œå¿…é¡»å¯ä»¥æ¯”è¾ƒç›¸ç­‰</p></blockquote><blockquote><p>é™¤äº†sliceï¼Œmapï¼Œfunctionçš„å†…å»ºç±»å‹éƒ½å¯ä»¥ä½œä¸ºkey</p></blockquote><blockquote><p>Struct(è‡ªå»º)ç±»å‹ä¸åŒ…å«ä¸Šè¿°å­—æ®µä¹Ÿå¯ä»¥ä½œä¸ºkey</p></blockquote><blockquote><p>goåœ¨ç¼–è¯‘å™¨ä¼šå¯¹ä¸Šè¿°æ¡ä»¶è¿›è¡Œæ£€æŸ¥</p></blockquote><h3 id="mapå®ç°leetCodeç®—æ³•3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#mapå®ç°leetCodeç®—æ³•3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="mapå®ç°leetCodeç®—æ³•3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a>mapå®ç°leetCodeç®—æ³•3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h3><p><strong>è‹±æ–‡ç‰ˆ</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func lengthOfLongestSubstring(s string) int &#123;</span><br><span class="line">    //è®°å½•æ¯ä¸ªå­—æ¯æœ€åå‡ºç°çš„ä½ç½®</span><br><span class="line">    lastOccurred := make(map[byte]int)</span><br><span class="line">    start := 0</span><br><span class="line">    maxLenght := 0</span><br><span class="line">    for i,ch := range []byte(s) &#123;</span><br><span class="line">        //æœ‰å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªmapè·å–å‡ºæ¥çš„å€¼æ˜¯0,è€Œ0åˆæ˜¯ä¸€ä¸ªåˆæ³•çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥è¦åˆ¤æ–­è¿™ä¸ªkeyæ˜¯å¦å­˜åœ¨</span><br><span class="line">        if lastI,ok := lastOccurred[ch] ; ok &amp;&amp; lastI &gt;= start &#123;</span><br><span class="line">            start = lastOccurred[ch] +1</span><br><span class="line">        &#125;</span><br><span class="line">        if i - start +1 &gt; maxLenght &#123;</span><br><span class="line">            maxLenght = i - start + 1</span><br><span class="line">        &#125;</span><br><span class="line">        lastOccurred[ch] = i</span><br><span class="line">    &#125;</span><br><span class="line">    return maxLenght</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å›½é™…ç‰ˆ</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func lengthOfLongestSubstring(s string) int &#123;</span><br><span class="line">    //è®°å½•æ¯ä¸ªå­—æ¯æœ€åå‡ºç°çš„ä½ç½®</span><br><span class="line"> Â  Â lastOccurred := make(map[rune]int)</span><br><span class="line">    start := 0</span><br><span class="line">    maxLenght := 0</span><br><span class="line"> Â  Â for i,ch := range []rune(s) &#123;</span><br><span class="line">        //æœ‰å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªmapè·å–å‡ºæ¥çš„å€¼æ˜¯0,è€Œ0åˆæ˜¯ä¸€ä¸ªåˆæ³•çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥è¦åˆ¤æ–­è¿™ä¸ªkeyæ˜¯å¦å­˜åœ¨</span><br><span class="line">        if lastI,ok := lastOccurred[ch] ; ok &amp;&amp; lastI &gt;= start &#123;</span><br><span class="line">            start = lastOccurred[ch] +1</span><br><span class="line">        &#125;</span><br><span class="line">        if i - start +1 &gt; maxLenght &#123;</span><br><span class="line">            maxLenght = i - start + 1</span><br><span class="line">        &#125;</span><br><span class="line">        lastOccurred[ch] = i</span><br><span class="line">    &#125;</span><br><span class="line">    return maxLenght</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h1><blockquote><p>goè¯­è¨€ä»…æ”¯æŒå°è£…ï¼Œä¸æ”¯æŒç»§æ‰¿å’Œå¤šæ€</p></blockquote><blockquote><p>goè¯­è¨€æ²¡æœ‰classï¼Œåªæœ‰struct</p></blockquote><h2 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h2><h3 id="ç»“æ„ä½“å®šä¹‰"><a href="#ç»“æ„ä½“å®šä¹‰" class="headerlink" title="ç»“æ„ä½“å®šä¹‰"></a>ç»“æ„ä½“å®šä¹‰</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰ç»“æ„ä½“</span><br><span class="line">type TreeNode struct &#123;</span><br><span class="line">value int</span><br><span class="line">left,right *TreeNode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å¯¹ç»“æ„ä½“æ•°æ®è¿›è¡Œå¤„ç†</span><br><span class="line">func main() &#123;</span><br><span class="line">node1 := TreeNode&#123;value: 3&#125;</span><br><span class="line">left := TreeNode&#123;value: 1&#125;</span><br><span class="line">right := TreeNode&#123;value: 2&#125;</span><br><span class="line">node1.left = &amp;left</span><br><span class="line">node1.right = &amp;right</span><br><span class="line">fmt.Println(node1)</span><br><span class="line">&#125;</span><br><span class="line">//æ‰“å°ç»“æœ</span><br><span class="line">&#123;3 0xc000004480 0xc0000044a0&#125;</span><br></pre></td></tr></table></figure><blockquote><p>goè¯­è¨€æ²¡æœ‰æ„é€ å‡½æ•°çš„è¯´æ³•,ä½†æ˜¯å¯ä»¥ä½¿ç”¨funcå®ç°è‡ªå®šä¹‰å·¥å‚æ„é€ å‡½æ•°</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func createNode(value int) *TreeNode &#123;</span><br><span class="line">//c**å‡½æ•°è¿”å›å±€éƒ¨å˜é‡ä¸å¯ç”¨ï¼Œä¸è¿‡åœ¨goè¯­è¨€ä¸­æ˜¯å¯ä»¥çš„</span><br><span class="line">//æ³¨æ„è¿”å›çš„æ˜¯å±€éƒ¨å˜é‡çš„åœ°å€</span><br><span class="line">return &amp;TreeNode&#123;value: value&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•"><a href="#ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•" class="headerlink" title="ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•"></a>ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•</h3><blockquote><p>ç»“æ„ä½“çš„æ–¹æ³•æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒåœ¨å‡½æ•°åå‰é¢å¤šäº†ä¸€ä¸ªæ¥æ”¶è€…</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰ç»“æ„ä½“æ–¹æ³•</span><br><span class="line">func (node TreeNode) print() &#123;</span><br><span class="line">fmt.Print(node.value)</span><br><span class="line">&#125;</span><br><span class="line">//ä½¿ç”¨ç»“æ„ä½“æ–¹æ³•</span><br><span class="line">func main() &#123;</span><br><span class="line">node := TreeNode&#123;value: 3&#125;</span><br><span class="line">node.print()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>goè¯­è¨€ä¸­æ‰€æœ‰æ–¹æ³•å‚æ•°çš„ä¼ é€’éƒ½æ˜¯å€¼ä¼ é€’ï¼Œå‚æ•°ä¼šè¢«copyæ‰§è¡Œï¼Œæ‰§è¡Œè¿‡åä¼ é€’çš„å‚æ•°å¹¶æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå¦‚éœ€ä¿®æ”¹éœ€è¦ä½¿ç”¨æŒ‡é’ˆ</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">type TreeNode struct &#123;</span><br><span class="line">value int</span><br><span class="line">left,right *TreeNode</span><br><span class="line">&#125;</span><br><span class="line">func (node TreeNode) print() &#123;</span><br><span class="line">fmt.Println(node.value)</span><br><span class="line">&#125;</span><br><span class="line">func (node TreeNode) setVal(value int)  &#123;</span><br><span class="line">node.value = value</span><br><span class="line">&#125;</span><br><span class="line">//è§£å†³å€¼ä¼ é€’é—®é¢˜éœ€è¦åŠ *å·ä»¥æŒ‡é’ˆçš„æ–¹å¼å³å¯ä¿®æ”¹ä¼ é€’è¿‡æ¥çš„å€¼</span><br><span class="line">func (node *TreeNode) setValue(value int)  &#123;</span><br><span class="line">node.value = value</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">node := TreeNode&#123;&#125;</span><br><span class="line">node.print()</span><br><span class="line">//æ‰“å°å€¼ä¸º0</span><br><span class="line">node.setVal(1)</span><br><span class="line">node.print()</span><br><span class="line">//æ‰“å°å€¼ä¸º0</span><br><span class="line">node.setValue(2)</span><br><span class="line">node.print()</span><br><span class="line">//æ‰“å°å€¼ä¸º2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•çš„å€¼æ¥æ”¶è€…ä¸æŒ‡é’ˆæ¥æ”¶è€…åŸåˆ™"><a href="#æ–¹æ³•çš„å€¼æ¥æ”¶è€…ä¸æŒ‡é’ˆæ¥æ”¶è€…åŸåˆ™" class="headerlink" title="æ–¹æ³•çš„å€¼æ¥æ”¶è€…ä¸æŒ‡é’ˆæ¥æ”¶è€…åŸåˆ™"></a>æ–¹æ³•çš„å€¼æ¥æ”¶è€…ä¸æŒ‡é’ˆæ¥æ”¶è€…åŸåˆ™</h3><blockquote><p>è¦æ”¹å˜å†…å®¹å¿…é¡»ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…</p></blockquote><blockquote><p>ç»“æ„è¿‡å¤§ä¹Ÿè¦è€ƒè™‘ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…</p></blockquote><blockquote><p>ä¸€è‡´æ€§ï¼šå¦‚æœæœ‰æŒ‡é’ˆæ¥æ”¶è€…ï¼Œæœ€å¥½éƒ½æ˜¯ç”¨æŒ‡é’ˆæ¥æ”¶è€…</p></blockquote><blockquote><p><strong>å€¼æ¥æ”¶è€…</strong>æ˜¯goè¯­è¨€ç‰¹æœ‰</p></blockquote><blockquote><p>å€¼/æŒ‡é’ˆæ¥æ”¶è€…æ—¢å¯ä»¥æ¥æ”¶å€¼ä¹Ÿå¯ä»¥æ¥æ”¶æŒ‡é’ˆ</p></blockquote><h3 id="éå†æ ‘"><a href="#éå†æ ‘" class="headerlink" title="éå†æ ‘"></a>éå†æ ‘</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">type TreeNode struct &#123;</span><br><span class="line">value int</span><br><span class="line">left,right *TreeNode</span><br><span class="line">&#125;</span><br><span class="line">func (node TreeNode) print() &#123;</span><br><span class="line">fmt.Print(node.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (node *TreeNode) traverse() &#123;</span><br><span class="line">if node == nil &#123;</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">node.left.traverse()</span><br><span class="line">node.print()</span><br><span class="line">node.right.traverse()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">root := TreeNode&#123;value:3&#125;</span><br><span class="line">root.left = &amp;TreeNode&#123;&#125;</span><br><span class="line">root.right = &amp;TreeNode&#123;value: 5&#125;</span><br><span class="line">root.left.right = &amp;TreeNode&#123;value: 2&#125;</span><br><span class="line">root.right.left = &amp;TreeNode&#123;value: 4&#125;</span><br><span class="line">root.traverse()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ‰§è¡Œç»“æœ 0 2 3 4 5</p></blockquote><p><strong>éå†æ ‘å›¾è§£</strong></p><p><img src="/images/img_10.png" alt="éå†æ ‘"></p><blockquote><p>traverse()å‡½æ•°å…ˆéå†å·¦è¾¹å†éå†è‡ªå·±å†éå†å³è¾¹å¾€å¤é€’å½’</p></blockquote><h2 id="å°è£…å’ŒåŒ…"><a href="#å°è£…å’ŒåŒ…" class="headerlink" title="å°è£…å’ŒåŒ…"></a>å°è£…å’ŒåŒ…</h2><h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p><strong>å®šä¹‰å®Œæ–¹æ³•æˆ‘ä»¬ä¸€èˆ¬è¦è¿›è¡Œå°è£…</strong></p><blockquote><p>goè¯­è¨€åå­—ä¸€èˆ¬ä½¿ç”¨CamelCase</p></blockquote><blockquote><p>æ–¹æ³•ç»“æ„å¸¸é‡ç­‰å®šä¹‰é¦–å­—æ¯å¤§å†™ä»£è¡¨ï¼špublic(é’ˆå¯¹åŒ…)ï¼Œ</p></blockquote><blockquote><p>æ–¹æ³•ç»“æ„å¸¸é‡ç­‰å®šä¹‰é¦–å­—æ¯å°å†™ä»£è¡¨ï¼šprivate(é’ˆå¯¹åŒ…)ï¼Œ</p></blockquote><h3 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h3><blockquote><p>æ¯ä¸ªç›®å½•åªèƒ½æœ‰ä¸€ä¸ªåŒ…ï¼ŒåŒ…åä¸ä¸€å®šå’Œç›®å½•åä¸€æ ·</p></blockquote><blockquote><p>mainåŒ…åŒ…å«å’Œæ‰§è¡Œå…¥å£</p></blockquote><blockquote><p>ä¸€ä¸ªç›®å½•ä¸‹é¢mainå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªmainåŒ…,å¦åˆ™æˆ‘ä»¬éœ€è¦ç»™ç›®å½•èµ·ä¸€ä¸ªå…¶å®ƒçš„åå­—</p></blockquote><blockquote><p>ä¸ºç»“æ„å®šä¹‰æ–¹æ³•å¿…é¡»æ”¾åœ¨åŒä¸€ä¸ªåŒ…å†…ï¼Œä½†æ˜¯å¯ä»¥æ˜¯ä¸åŒçš„æ–‡ä»¶</p></blockquote><h3 id="æ‰©å±•å·²æœ‰ç±»å‹"><a href="#æ‰©å±•å·²æœ‰ç±»å‹" class="headerlink" title="æ‰©å±•å·²æœ‰ç±»å‹"></a>æ‰©å±•å·²æœ‰ç±»å‹</h3><blockquote><p>æ‰©å±•å·²æœ‰ç±»å‹å¯ä»¥<u><strong>å®šä¹‰åˆ«å</strong></u>æˆ–è€…<u><strong>ä½¿ç”¨ç»„åˆ</strong></u></p></blockquote><p><strong>åŒ…è£…TreeNodeä¸ºMyTreeNodeå®ç°æ–°çš„éå†æ–¹å¼</strong>è¿™é‡Œä½¿ç”¨çš„æ–¹å¼æ˜¯<u><strong>ç»„åˆ</strong></u></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/tree&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type MyTreeNode struct &#123;</span><br><span class="line">node *tree.Node</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (myNode *MyTreeNode) postOrder() &#123;</span><br><span class="line">if myNode == nil || myNode.node == nil &#123;</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">left := MyTreeNode&#123;myNode.node.Left&#125;</span><br><span class="line">left.postOrder()</span><br><span class="line">right := MyTreeNode&#123;myNode.node.Right&#125;</span><br><span class="line">right.postOrder()</span><br><span class="line">myNode.node.Print()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">root := tree.Node&#123;Value: 3&#125;</span><br><span class="line">root.Left = &amp;tree.Node&#123;&#125;</span><br><span class="line">root.Right = &amp;tree.Node&#123;Value: 5&#125;</span><br><span class="line">root.Left.Right = &amp;tree.Node&#123;Value: 2&#125;</span><br><span class="line">root.Right.Left = &amp;tree.Node&#123;Value: 4&#125;</span><br><span class="line">root.Traverse()</span><br><span class="line">fmt.Println()</span><br><span class="line">node := MyTreeNode&#123;&amp;root&#125;</span><br><span class="line">node.postOrder()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ ‘è¿˜æ˜¯ä¹‹å‰çš„æ ‘ï¼Œå°±ä¸å›¾è§£äº†ï¼Œéå†ç»“æœä¸º 2 0 4 5 3</p></blockquote><p><strong>å®šä¹‰sliceçš„åˆ«åå®ç°ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Queue.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package queue</span><br><span class="line"></span><br><span class="line">//å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—ï¼Œxianï¼Œå®ƒæ˜¯ä¸€ä¸ªintç±»å‹çš„slice</span><br><span class="line">type Queue []int</span><br><span class="line"></span><br><span class="line">//æ¨è¿›é˜Ÿåˆ—</span><br><span class="line">func (q *Queue) Push(v int) &#123;</span><br><span class="line">*q = append(*q,v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å¼¹å‡ºé˜Ÿåˆ—</span><br><span class="line">func (q *Queue) Pop() int &#123;</span><br><span class="line">head := (*q)[0]</span><br><span class="line">*q = (*q)[1:]</span><br><span class="line">return head</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//é˜Ÿåˆ—å…ƒç´ æ˜¯å¦ä¸ºç©º</span><br><span class="line">func (q *Queue) IsEmpty() bool &#123;</span><br><span class="line">return len(*q) == 0</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/queue&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">q := queue.Queue&#123;1&#125;</span><br><span class="line">q.Push(2)</span><br><span class="line">q.Push(3)</span><br><span class="line">fmt.Println(q.Pop())</span><br><span class="line">fmt.Println(q.Pop())</span><br><span class="line">fmt.Println(q.IsEmpty())</span><br><span class="line">fmt.Println(q.Pop())</span><br><span class="line">fmt.Println(q.IsEmpty())</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br></pre></td></tr></table></figure><p><strong>æ‰“å°ç»“æœ</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">false</span><br><span class="line">3</span><br><span class="line">true</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…ç¬¬ä¸‰æ–¹åŒ…goimports"><a href="#å®‰è£…ç¬¬ä¸‰æ–¹åŒ…goimports" class="headerlink" title="å®‰è£…ç¬¬ä¸‰æ–¹åŒ…goimports"></a>å®‰è£…ç¬¬ä¸‰æ–¹åŒ…goimports</h3><blockquote><p>ç§»åŠ¨åˆ°ä¸€ä¸‹ç›®å½•%GOPATH%/src/golang.org/xä»githubä¸Šdownloadä»¥ä¸‹åŒ…</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:golang/tools.git</span><br></pre></td></tr></table></figure><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:golang/mod.git</span><br></pre></td></tr></table></figure><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:golang/xerrors.git</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œå‘½ä»¤å®‰è£…goimports</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//è¯·å°†%GOPATH%æ›¿æ¢ä¸ºç»å¯¹è·¯å¾„åæ‰§è¡Œå‘½ä»¤</span><br><span class="line">go install %GOPATH%/src/golang.org/x/tools/cmd/goimports</span><br></pre></td></tr></table></figure><p><strong>å°è¯•ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;golang.org/x/tools/container/intsets&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func testSparse() &#123;</span><br><span class="line">sparse := intsets.Sparse&#123;&#125;</span><br><span class="line">sparse.Insert(1)</span><br><span class="line">sparse.Insert(2)</span><br><span class="line">sparse.Insert(3)</span><br><span class="line">sparse.Insert(4)</span><br><span class="line">fmt.Println(sparse.Has(5))</span><br><span class="line">fmt.Println(sparse.Has(4))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">testSparse()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="GOPATHç›®å½•ç»“æ„"><a href="#GOPATHç›®å½•ç»“æ„" class="headerlink" title="GOPATHç›®å½•ç»“æ„"></a>GOPATHç›®å½•ç»“æ„</h3><blockquote><p><strong>go build</strong>è¿›è¡Œç¼–è¯‘</p></blockquote><blockquote><p><strong>go install</strong>äº§ç”Ÿpkgæ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶</p></blockquote><blockquote><p><strong>go run</strong>ç›´æ¥ç¼–è¯‘è¿è¡Œ</p></blockquote><blockquote><p>src</p><blockquote><p>git repository1<br>git repository2</p></blockquote></blockquote><blockquote><p>pkg</p><blockquote><p>git repository1<br>git repository2</p></blockquote></blockquote><blockquote><p>bin</p><blockquote><p>å¯æ‰§è¡Œæ–‡ä»¶1ï¼Œ2ï¼Œ3</p></blockquote></blockquote><h1 id="é¢å‘æ¥å£"><a href="#é¢å‘æ¥å£" class="headerlink" title="é¢å‘æ¥å£"></a>é¢å‘æ¥å£</h1><blockquote><p>goè¯­è¨€çš„æ¥å£æ˜¯<strong>ä½¿ç”¨è€…å®šä¹‰çš„</strong></p></blockquote><blockquote><p>æ¥å£å®ç°æ˜¯éšå¼çš„ï¼Œæ— éœ€æ³¨æ˜å®ç°äº†å“ªä¸ªæ¥å£ï¼Œåªéœ€æ‹¥æœ‰æ¥å£åŒæ ·çš„æ–¹æ³•</p></blockquote><blockquote><p>æ¥å£å˜é‡è‡ªå¸¦æŒ‡é’ˆ</p></blockquote><blockquote><p>æ¥å£å˜é‡åŒæ ·é‡‡ç”¨å€¼ä¼ é€’ï¼Œå‡ ä¹ä¸éœ€è¦ä½¿ç”¨æ¥å£çš„æŒ‡é’ˆ</p></blockquote><blockquote><p>æŒ‡é’ˆæ¥æ”¶è€…å®ç°åªèƒ½ä»¥æŒ‡é’ˆçš„æ–¹å¼ä½¿ç”¨ï¼›å€¼æ¥æ”¶è€…ä¸¤è€…éƒ½å¯ä»¥</p></blockquote><blockquote><p>æ¥å£å˜é‡å¼ºåˆ¶è½¬æ¢ç”¨å˜é‡æ¥æ”¶ååé¢åŠ â€™,okâ€™,å¯ä»¥ä½¿ç”¨okåˆ¤æ–­æ˜¯å¦è¯¥ç±»å‹ï¼Œå­¦åå«<strong>Type assertion</strong></p></blockquote><blockquote><p>é™¤äº†ä½¿ç”¨<strong>Type assertion</strong>æ–¹å¼åˆ¤æ–­ç±»å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<strong>switch case</strong>è¯­å¥çš„æ–¹å¼æ¥åˆ¤æ–­ç±»å‹å¹¶æ‰§è¡Œç›¸å…³é€»è¾‘</p></blockquote><blockquote><p>interface{} å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹</p></blockquote><h2 id="æ¥å£å®šä¹‰"><a href="#æ¥å£å®šä¹‰" class="headerlink" title="æ¥å£å®šä¹‰"></a>æ¥å£å®šä¹‰</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">mockretriever.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package mock</span><br><span class="line"></span><br><span class="line">type Retriever struct &#123;</span><br><span class="line">Contents string</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰æ¥å£å®ç°ï¼Œæ— éœ€æŒ‡æ˜å®ç°äº†å“ªä¸ªæ¥å£ï¼Œæ–¹æ³•åªéœ€è¦å®ç°æ¥å£ä¸­çš„æ–¹æ³•</span><br><span class="line">func (r Retriever) Get(url string) string &#123;</span><br><span class="line">return r.Contents</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">realretriever.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package rel</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;net/http/httputil&quot;</span><br><span class="line">&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type Retriever struct &#123;</span><br><span class="line">UserAgent string</span><br><span class="line">TimeOut time.Duration</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰æ¥å£å®ç°ï¼Œæ— éœ€æŒ‡æ˜å®ç°äº†å“ªä¸ªæ¥å£ï¼Œæ–¹æ³•åªéœ€è¦å®ç°æ¥å£ä¸­çš„æ–¹æ³•</span><br><span class="line">func (r Retriever) Get(url string) string &#123;</span><br><span class="line">resp, err := http.Get(url)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">result, err := httputil.DumpResponse(resp, true)</span><br><span class="line">resp.Body.Close()</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">return string(result)</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/retriever/mock&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/retriever/rel&quot;</span><br><span class="line">)</span><br><span class="line">//å®šä¹‰æ¥å£</span><br><span class="line">type Retriever interface &#123;</span><br><span class="line">Get(url string) string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func download(r Retriever) string &#123;</span><br><span class="line">return r.Get(&quot;http://www.baidu.com&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">//æ¥å£å˜é‡(é‡Œé¢æœ‰æ˜¯é—²ç€ç±»å‹/å®ç°è€…çš„å€¼æˆ–å®ç°è€…çš„æŒ‡é’ˆ(å®ƒæŒ‡å‘äº†ä¸€ä¸ªå®ç°è€…))</span><br><span class="line">//ä¸è¦ä½¿ç”¨æ¥å£å˜é‡çš„åœ°å€ï¼Œå› ä¸ºæ¥å£å˜é‡æœ¬èº«å¯ä»¥åŒ…å«æŒ‡é’ˆï¼Œå†…éƒ¨æŒ‡å‘å®ç°è€…å³å¯</span><br><span class="line">var r Retriever</span><br><span class="line">//å‡çš„retriever</span><br><span class="line">r = mock.Retriever&#123;Contents: &quot;this is a fack imooc.com&quot;&#125;</span><br><span class="line">fmt.Println(download(r))</span><br><span class="line">//çœŸå®çš„retriever</span><br><span class="line">r = rel.Retriever&#123;&#125;</span><br><span class="line">fmt.Println(download(r))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¥å£ç»„åˆ"><a href="#æ¥å£ç»„åˆ" class="headerlink" title="æ¥å£ç»„åˆ"></a>æ¥å£ç»„åˆ</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">mockretriever.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package mock</span><br><span class="line"></span><br><span class="line">type (</span><br><span class="line">Retriever struct &#123;</span><br><span class="line">Contents string</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func (r *Retriever) Post(url string, form map[string]string) string &#123;</span><br><span class="line">r.Contents = form[&quot;contents&quot;]</span><br><span class="line">return &quot;ok&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (r *Retriever) Get(url string) string &#123;</span><br><span class="line">return r.Contents</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/retriever/mock&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type Retriever interface &#123;</span><br><span class="line">Get(url string) string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Poster interface &#123;</span><br><span class="line">Post(url string,form map[string]string) string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func download(r Retriever) string &#123;</span><br><span class="line">return r.Get(&quot;http://www.baidu.com&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func post(poster Poster) &#123;</span><br><span class="line">poster.Post(&quot;http:www.baidu.com&quot;, map[string]string&#123;&quot;name&quot;:&quot;zhangsan&quot;,&quot;course&quot;:&quot;java&quot;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type RetrieverPoster interface &#123;</span><br><span class="line">Retriever</span><br><span class="line">Poster</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const url = &quot;http://www.baidu.com&quot;</span><br><span class="line">func session(s RetrieverPoster) string&#123;</span><br><span class="line">s.Post(url, map[string]string&#123;&quot;contents&quot;:&quot;anather faked imooc.com&quot;&#125;)</span><br><span class="line">return s.Get(url)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">var r RetrieverPoster</span><br><span class="line">r = &amp;mock.Retriever&#123;Contents: &quot;this is a fack imooc.com&quot;&#125;</span><br><span class="line">//type assertion</span><br><span class="line">if mockRetriever,ok := r.(*mock.Retriever); ok&#123;</span><br><span class="line">fmt.Println(mockRetriever.Contents)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Println(&quot;not a mock retriever&quot;)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(session(r))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨æ ‡å‡†æ¥å£"><a href="#å¸¸ç”¨æ ‡å‡†æ¥å£" class="headerlink" title="å¸¸ç”¨æ ‡å‡†æ¥å£"></a>å¸¸ç”¨æ ‡å‡†æ¥å£</h2><h3 id="print-go-â€”-gt-fmt-Stringer-String-string"><a href="#print-go-â€”-gt-fmt-Stringer-String-string" class="headerlink" title="print.go â€”&gt; fmt.Stringer#String() (string)"></a>print.go â€”&gt; fmt.Stringer#String() (string)</h3><blockquote><p>è¯¥æ¥å£ç›¸å½“äºå…¶å®ƒè¯­è¨€ä¸­çš„toString</p></blockquote><h3 id="io-go-â€”-gt-io-Reader-Read-p-byte-n-int-err-error"><a href="#io-go-â€”-gt-io-Reader-Read-p-byte-n-int-err-error" class="headerlink" title="io.go â€”&gt; io.Reader#Read(p []byte) (n int, err error)"></a>io.go â€”&gt; io.Reader#Read(p []byte) (n int, err error)</h3><blockquote><p>æ–‡ä»¶ã€ç½‘ç»œã€byteã€sliceã€stringç­‰ç­‰éƒ½ä¼šç”¨Reader#Read</p></blockquote><h3 id="io-go-â€”-gt-io-Writer-Write-p-byte-n-int-err-error"><a href="#io-go-â€”-gt-io-Writer-Write-p-byte-n-int-err-error" class="headerlink" title="io.go â€”&gt; io.Writer#Write(p []byte) (n int, err error)"></a>io.go â€”&gt; io.Writer#Write(p []byte) (n int, err error)</h3><blockquote><p>æ–‡ä»¶ã€ç½‘ç»œã€byteã€sliceã€stringç­‰ç­‰éƒ½ä¼šç”¨Reader#Write</p></blockquote><h3 id="ä½¿ç”¨io-go-â€”-gt-io-Reader-Read-p-byte-ä»£æ›¿fileç¤ºä¾‹"><a href="#ä½¿ç”¨io-go-â€”-gt-io-Reader-Read-p-byte-ä»£æ›¿fileç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨io.go â€”&gt; io.Reader#Read(p []byte)ä»£æ›¿fileç¤ºä¾‹"></a>ä½¿ç”¨io.go â€”&gt; io.Reader#Read(p []byte)ä»£æ›¿fileç¤ºä¾‹</h3><blockquote><p>è¿™é‡Œä¸ä»…å¯ä»¥ä½¿ç”¨æ–‡ä»¶è¿˜å¯ä»¥ä½¿ç”¨å…¶å®ƒå­—ç¬¦ä¸²ç­‰æ•°æ®ç±»å‹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">func printFile(filename string) &#123;</span><br><span class="line">file, err := os.Open(filename)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">printFileContents(file)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func printFileContents(reader io.Reader) &#123;</span><br><span class="line">scanner := bufio.NewScanner(reader)</span><br><span class="line">for scanner.Scan() &#123;</span><br><span class="line">fmt.Println(scanner.Text())</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">printFile(&quot;basic/loop/abc.txt&quot;)</span><br><span class="line">s := `abc&quot;d&quot;</span><br><span class="line">kkkk</span><br><span class="line">123</span><br><span class="line">p`</span><br><span class="line">printFileContents(strings.NewReader(s))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a>å‡½æ•°å¼ç¼–ç¨‹</h1><blockquote><p>å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼šå‚æ•°ã€å˜é‡ã€è¿”å›å€¼ç­‰éƒ½å¯ä»¥æ˜¯å‡½æ•°,å¯ä»¥ç»™å‡½æ•°å®ç°æ¥å£</p></blockquote><blockquote><p>é«˜é˜¶å‡½æ•°ï¼šå‡½æ•°çš„å‚æ•°è¿˜æ˜¯ä¸€ä¸ªå‡½æ•°</p></blockquote><blockquote><p>å‡½æ•°â€”&gt;é—­åŒ…</p></blockquote><blockquote><p>æ­£ç»Ÿå‡½æ•°å¼ç¼–ç¨‹</p><blockquote><p>ä¸å¯å˜æ€§ï¼šä¸èƒ½æœ‰çŠ¶æ€ï¼Œåªæœ‰å¸¸é‡å’Œå‡½æ•°<br>æ­£ç»Ÿå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°<br>goè¯­è¨€å¼é€šç”¨è¯­è¨€ï¼Œä¸ä¼šå†æ­£ç»Ÿå‡½æ•°å¼åšæ–‡ç« </p></blockquote></blockquote><h2 id="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªç´¯åŠ å™¨-é—­åŒ…"><a href="#ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªç´¯åŠ å™¨-é—­åŒ…" class="headerlink" title="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªç´¯åŠ å™¨(é—­åŒ…)"></a>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªç´¯åŠ å™¨(é—­åŒ…)</h2><p><strong>ä»£ç </strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">//å®šä¹‰å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°</span><br><span class="line">func adder() func(int) int &#123;</span><br><span class="line">sum := 0</span><br><span class="line">//è¿™é‡Œçš„væ—¢æ˜¯ä¸€ä¸ªå‚æ•°åˆæ˜¯å‡½æ•°ä½“çš„ä¸€ä¸ªå±€éƒ¨å˜é‡</span><br><span class="line">return  func(v int) int &#123;</span><br><span class="line">sum += v</span><br><span class="line">//è¿™é‡Œçš„sumæ˜¯è¿™ä¸ªå‡½æ•°ä½“å¤–é¢å®šä¹‰çš„ï¼Œä»–æ˜¯ä¸€ä¸ªè‡ªæœ‰å˜é‡</span><br><span class="line">return sum</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">//è¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°å®ä¾‹ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡å‡½æ•°å®ä¾‹å°†å¯¹å®ä¾‹çš„è¿”å›å€¼è¿›è¡Œç´¯åŠ </span><br><span class="line">funcAdder := adder()</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">fmt.Printf(&quot;0+...+%d = %d\n&quot;,i,funcAdder(i))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœ</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">0+...+0 = 0</span><br><span class="line">0+...+1 = 1</span><br><span class="line">0+...+2 = 3</span><br><span class="line">0+...+3 = 6</span><br><span class="line">0+...+4 = 10</span><br><span class="line">0+...+5 = 15</span><br><span class="line">0+...+6 = 21</span><br><span class="line">0+...+7 = 28</span><br><span class="line">0+...+8 = 36</span><br><span class="line">0+...+9 = 45</span><br></pre></td></tr></table></figure><p><img src="/images/img_11.png" alt="é—­åŒ…"></p><blockquote><p><strong>è‡ªç”±å˜é‡</strong>ä¸æ–­åœ°æ‰¾ä¸<strong>å±€éƒ¨å˜é‡</strong>çš„è”ç³»ç„¶åæ•´ä½“è¿”å›ä¸€ä¸ª<strong>é—­åŒ…</strong></p></blockquote><h2 id="ä»¥æ­£ç»Ÿå‡½æ•°æ–¹å¼å®ç°ç´¯åŠ å™¨"><a href="#ä»¥æ­£ç»Ÿå‡½æ•°æ–¹å¼å®ç°ç´¯åŠ å™¨" class="headerlink" title="ä»¥æ­£ç»Ÿå‡½æ•°æ–¹å¼å®ç°ç´¯åŠ å™¨"></a>ä»¥æ­£ç»Ÿå‡½æ•°æ–¹å¼å®ç°ç´¯åŠ å™¨</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">type innerAdder func(int) (int, innerAdder)</span><br><span class="line"></span><br><span class="line">func adder(base int) innerAdder &#123;</span><br><span class="line">return func(v int) (int, innerAdder) &#123;</span><br><span class="line">return base + v, adder(base + v)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">innerAdder := adder(0)</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">var s int</span><br><span class="line">s, innerAdder = innerAdder(i)</span><br><span class="line">fmt.Printf(&quot;0+...+%d = %d\n&quot;,i,s)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="javaä¸­çš„é—­åŒ…å®ç°ç´¯åŠ å™¨"><a href="#javaä¸­çš„é—­åŒ…å®ç°ç´¯åŠ å™¨" class="headerlink" title="javaä¸­çš„é—­åŒ…å®ç°ç´¯åŠ å™¨"></a>javaä¸­çš„é—­åŒ…å®ç°ç´¯åŠ å™¨</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    private static Function&lt;Integer, Integer&gt; adder() &#123;</span><br><span class="line">        final Holder&lt;Integer&gt; sum = new Holder&lt;&gt;(0);</span><br><span class="line">        return (Integer value) -&gt; &#123;</span><br><span class="line">            sum.value += value;</span><br><span class="line">            return sum.value;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Function&lt;Integer, Integer&gt; adder = adder();</span><br><span class="line">        for (int i = 0; i &lt; 10; i++) &#123;</span><br><span class="line">            System.out.println(adder.apply(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>java8åï¼šä½¿ç”¨Functionæ¥å£å’Œlambdaè¡¨è¾¾å¼æ¥åˆ›å»ºå‡½æ•°å¯¹è±¡</p></blockquote><blockquote><p>åŒ¿åç±»æˆ–è€…lambdaè¡¨è¾¾å¼å‡æ”¯æŒé—­åŒ…</p></blockquote><h2 id="æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨"><a href="#æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨" class="headerlink" title="æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨"></a>æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">//æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨</span><br><span class="line">func fibonacci() func() int &#123;</span><br><span class="line">a,b := 0,1</span><br><span class="line">return func() int &#123;</span><br><span class="line">a,b = b,a+b</span><br><span class="line">return a</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">generate := fibonacci()</span><br><span class="line">fmt.Println(generate())</span><br><span class="line">fmt.Println(generate())</span><br><span class="line">fmt.Println(generate())</span><br><span class="line">fmt.Println(generate())</span><br><span class="line">fmt.Println(generate())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°io-Readeréå†æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ä¸­çš„æ•°æ®"><a href="#å®ç°io-Readeréå†æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ä¸­çš„æ•°æ®" class="headerlink" title="å®ç°io.Readeréå†æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ä¸­çš„æ•°æ®"></a>å®ç°io.Readeréå†æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ä¸­çš„æ•°æ®</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;bufio&quot;</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;io&quot;</span><br><span class="line">&quot;strings&quot;</span><br><span class="line">)</span><br><span class="line">//å®šä¹‰å‡½æ•°ç±»å‹</span><br><span class="line">type intGen func() int</span><br><span class="line">//ä¸ºå‡½æ•°ç±»å‹å®ç°æ¥å£</span><br><span class="line">func (g intGen) Read(p []byte) (n int, err error) &#123;</span><br><span class="line">next := g()</span><br><span class="line">//æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨æ°¸è¿œè¯»ä¸å®Œåšä¸€ä¸ªé™åˆ¶</span><br><span class="line">if next &gt; 10000 &#123;</span><br><span class="line">return 0,io.EOF</span><br><span class="line">&#125;</span><br><span class="line">s := fmt.Sprintf(&quot;%d\n&quot;, next)</span><br><span class="line">//TODO: å¦‚æœpå¤ªå°åˆ™ä¸æ­£ç¡®</span><br><span class="line">return strings.NewReader(s).Read(p)</span><br><span class="line">&#125;</span><br><span class="line">//æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨(æ›¿æ¢å®šä¹‰ç±»å‹ï¼Œå®ƒå®ç°äº†io.Readeræ¥å£)</span><br><span class="line">func fibonacci() intGen &#123;</span><br><span class="line">a,b := 0,1</span><br><span class="line">return func() int &#123;</span><br><span class="line">a,b = b,a+b</span><br><span class="line">return a</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//ä¼ é€’readerå®ç°</span><br><span class="line">func printFileContents(reader io.Reader) &#123;</span><br><span class="line">scanner := bufio.NewScanner(reader)</span><br><span class="line">//éå†ç”Ÿæˆå™¨ä¸­çš„æ•°æ®</span><br><span class="line">for scanner.Scan() &#123;</span><br><span class="line">fmt.Println(scanner.Text())</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//ä¸»å‡½æ•°</span><br><span class="line">func main() &#123;</span><br><span class="line">//å®ç°readerçš„æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨</span><br><span class="line">generate := fibonacci()</span><br><span class="line">//è¯»å–æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨çš„æ•°æ®</span><br><span class="line">printFileContents(generate)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="éå†äºŒå‰æ ‘ä¼ é€’éå†è¿‡ç¨‹ä¸­çš„æ“ä½œ"><a href="#éå†äºŒå‰æ ‘ä¼ é€’éå†è¿‡ç¨‹ä¸­çš„æ“ä½œ" class="headerlink" title="éå†äºŒå‰æ ‘ä¼ é€’éå†è¿‡ç¨‹ä¸­çš„æ“ä½œ"></a>éå†äºŒå‰æ ‘ä¼ é€’éå†è¿‡ç¨‹ä¸­çš„æ“ä½œ</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">node.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package tree</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func (node Node) setVal(value int)  &#123;</span><br><span class="line">node.Value = value</span><br><span class="line">&#125;</span><br><span class="line">func (node *Node) setValue(value int)  &#123;</span><br><span class="line">node.Value = value</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰ç±»å‹</span><br><span class="line">type Node struct &#123;</span><br><span class="line">Value      int</span><br><span class="line">Left,Right *Node</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰print</span><br><span class="line">func (node Node) Print() &#123;</span><br><span class="line">fmt.Print(node.Value,&quot; &quot;)</span><br><span class="line">&#125;</span><br><span class="line">//éå†æ ‘</span><br><span class="line">func (node *Node) Traverse() &#123;</span><br><span class="line">node.TraverseFunc(func(n *Node) &#123;</span><br><span class="line">if node == nil &#123;</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">n.Print()</span><br><span class="line">&#125;)</span><br><span class="line">fmt.Println()</span><br><span class="line">&#125;</span><br><span class="line">//éå†æ ‘åŒæ—¶åšä»€ä¹ˆæ“ä½œç”±ä¼ é€’çš„å‡½æ•°å†³å®š</span><br><span class="line">func (node *Node) TraverseFunc(f func(node *Node)) &#123;</span><br><span class="line">if node == nil &#123;</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">node.Left.TraverseFunc(f)</span><br><span class="line">f(node)</span><br><span class="line">node.Right.TraverseFunc(f)</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/tree&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">root := tree.Node&#123;Value: 3&#125;</span><br><span class="line">root.Left = &amp;tree.Node&#123;&#125;</span><br><span class="line">root.Right = &amp;tree.Node&#123;Value: 5&#125;</span><br><span class="line">root.Left.Right = &amp;tree.Node&#123;Value: 2&#125;</span><br><span class="line">root.Right.Left = &amp;tree.Node&#123;Value: 4&#125;</span><br><span class="line">root.Traverse()</span><br><span class="line">count := 0</span><br><span class="line">root.TraverseFunc(func(node *tree.Node) &#123;</span><br><span class="line">count++</span><br><span class="line">&#125;)</span><br><span class="line">fmt.Println(&quot;Noce count&quot;,count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é”™è¯¯å¤„ç†ä¸èµ„æºç®¡ç†"><a href="#é”™è¯¯å¤„ç†ä¸èµ„æºç®¡ç†" class="headerlink" title="é”™è¯¯å¤„ç†ä¸èµ„æºç®¡ç†"></a>é”™è¯¯å¤„ç†ä¸èµ„æºç®¡ç†</h1><h2 id="deferè°ƒç”¨"><a href="#deferè°ƒç”¨" class="headerlink" title="deferè°ƒç”¨"></a>deferè°ƒç”¨</h2><blockquote><p>deferç¡®ä¿åœ¨å‡½æ•°ç»“æŸæ—¶å‘ç”Ÿè°ƒç”¨</p></blockquote><blockquote><p>å‚æ•°åœ¨deferè¯­å¥æ—¶è®¡ç®—(for loop ä¼šæ ˆæ‰§è¡Œ)</p></blockquote><blockquote><p>deferè°ƒç”¨é‡Œé¢æ—¶æ ˆå­˜å‚¨ï¼Œå…ˆè¿›åå‡º</p></blockquote><h3 id="deferè°ƒç”¨ä½¿ç”¨æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨å†™å…¥æ–‡ä»¶å…³é—­èµ„æºæ“ä½œ"><a href="#deferè°ƒç”¨ä½¿ç”¨æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨å†™å…¥æ–‡ä»¶å…³é—­èµ„æºæ“ä½œ" class="headerlink" title="deferè°ƒç”¨ä½¿ç”¨æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨å†™å…¥æ–‡ä»¶å…³é—­èµ„æºæ“ä½œ"></a>deferè°ƒç”¨ä½¿ç”¨æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨å†™å…¥æ–‡ä»¶å…³é—­èµ„æºæ“ä½œ</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">fib.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package fib</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;io&quot;</span><br><span class="line">&quot;strings&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type fibIntGen func() int</span><br><span class="line"></span><br><span class="line">//ä¸ºå‡½æ•°ç±»å‹å®ç°æ¥å£</span><br><span class="line">func (g fibIntGen) Read(p []byte) (n int, err error) &#123;</span><br><span class="line">next := g()</span><br><span class="line">//æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨æ°¸è¿œè¯»ä¸å®Œåšä¸€ä¸ªé™åˆ¶</span><br><span class="line">if next &gt; 10000 &#123;</span><br><span class="line">return 0, io.EOF</span><br><span class="line">&#125;</span><br><span class="line">s := fmt.Sprintf(&quot;%d\n&quot;, next)</span><br><span class="line">return strings.NewReader(s).Read(p)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func Fibonacci() fibIntGen &#123;</span><br><span class="line">a, b := 0, 1</span><br><span class="line">return func() int &#123;</span><br><span class="line">a, b = b, a+b</span><br><span class="line">return a</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;bufio&quot;</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/functional/fibonacci/fib&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func writeFile(filename string) &#123;</span><br><span class="line">file, err := os.Create(filename)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">//å…³é—­æ–‡ä»¶èµ„æº</span><br><span class="line">defer file.Close()</span><br><span class="line">writer := bufio.NewWriter(file)</span><br><span class="line">//å°†æ•°æ®å†™å…¥æ–‡ä»¶</span><br><span class="line">defer writer.Flush()</span><br><span class="line">fibonacci := fib.Fibonacci()</span><br><span class="line">for i := 0; i &lt; 20; i++ &#123;</span><br><span class="line">fmt.Fprintln(writer,fibonacci())</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">writeFile(&quot;fib.txt&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç”±äºdeferè°ƒç”¨æ˜¯æ ˆç±»å‹ï¼Œwriter.Flush()ä¼šæ¯”file.Close()å…ˆæ‰§è¡Œ</p></blockquote><blockquote><p>deferåœ¨å†™ä»£ç çš„æ—¶å€™å°±æƒ³åˆ°åˆ›å»ºfileå°±è¦å…³é—­ï¼Œåˆ›å»ºwriterå°±è¦æƒ³åˆ°flush</p></blockquote><h3 id="ä½•æ—¶ä½¿ç”¨deferè°ƒç”¨"><a href="#ä½•æ—¶ä½¿ç”¨deferè°ƒç”¨" class="headerlink" title="ä½•æ—¶ä½¿ç”¨deferè°ƒç”¨"></a>ä½•æ—¶ä½¿ç”¨deferè°ƒç”¨</h3><h4 id="Open-Close"><a href="#Open-Close" class="headerlink" title="Open/Close"></a>Open/Close</h4><h4 id="Lock-Unlock"><a href="#Lock-Unlock" class="headerlink" title="Lock/Unlock"></a>Lock/Unlock</h4><h4 id="PrintHeader-PrintFooter"><a href="#PrintHeader-PrintFooter" class="headerlink" title="PrintHeader/PrintFooter"></a>PrintHeader/PrintFooter</h4><h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;bufio&quot;</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/functional/fibonacci/fib&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func writeFile(filename string) &#123;</span><br><span class="line">// If there is an error, it will be of type *PathError.</span><br><span class="line">file, err := os.OpenFile(filename, os.O_EXCL|os.O_CREATE, 0666)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">//å¦‚æœæ˜¯*os.PathErrorï¼Œæ‰“å°æŒ‡å®šä¿¡æ¯</span><br><span class="line">if pathError,ok := err.(*os.PathError); ok &#123;</span><br><span class="line">fmt.Println(pathError.Op,pathError.Path,pathError.Err)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">//å¦åˆ™æ‰“å°æ­£å¸¸é”™è¯¯ä¿¡æ¯</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">defer file.Close()</span><br><span class="line"></span><br><span class="line">writer := bufio.NewWriter(file)</span><br><span class="line">defer writer.Flush()</span><br><span class="line"></span><br><span class="line">fibonacci := fib.Fibonacci()</span><br><span class="line">for i := 0; i &lt; 20; i++ &#123;</span><br><span class="line">fmt.Fprintln(writer,fibonacci())</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">writeFile(&quot;fib.txt&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»Ÿä¸€é”™è¯¯å¤„ç†"><a href="#ç»Ÿä¸€é”™è¯¯å¤„ç†" class="headerlink" title="ç»Ÿä¸€é”™è¯¯å¤„ç†"></a>ç»Ÿä¸€é”™è¯¯å¤„ç†</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">handler.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package filelisting</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;io/ioutil&quot;</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//åŒ…è£…ä¸ºhttp.HandleFunc(pattern string, handler func(ResponseWriter, *Request))çš„ç¬¬äºŒä¸ªå‚æ•°</span><br><span class="line">func HandleFileList(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">path := request.URL.Path[len(&quot;/list/&quot;):]</span><br><span class="line">file, err := os.Open(path)</span><br><span class="line">//é”™è¯¯æ–‡ä»¶è·¯å¾„ä¼šæ§åˆ¶å°ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é”™è¯¯è¿›è¡Œç»Ÿä¸€å¤„ç†</span><br><span class="line">//panic serving [::1]:55751: open fib.txt1: The system cannot find the file specified.</span><br><span class="line">/*if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;*/</span><br><span class="line">//å†…éƒ¨é”™è¯¯å±•ç¤ºç»™ç”¨æˆ·ä¸å¤ªå¥½ï¼Œéœ€è¦è¿›è¡ŒåŒ…è£…</span><br><span class="line">/*if err != nil &#123;</span><br><span class="line">http.Error(writer,</span><br><span class="line">err.Error(),</span><br><span class="line">http.StatusInternalServerError)</span><br><span class="line">return</span><br><span class="line">&#125;*/</span><br><span class="line">//é”™è¯¯ç›´æ¥è¿”å›ä½¿ç”¨é€šç”¨å¤„ç†æ–¹æ³•</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return err</span><br><span class="line">&#125;</span><br><span class="line">defer file.Close()</span><br><span class="line">content, err := ioutil.ReadAll(file)</span><br><span class="line">if  err != nil &#123;</span><br><span class="line">return err</span><br><span class="line">&#125;</span><br><span class="line">writer.Write(content)</span><br><span class="line">return nil</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/errhanding/filelistingserver/filelisting&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//å®šä¹‰å‡½æ•°ç±»å‹å¯¹å‡½æ•°è¿›è¡ŒåŒ…è£…</span><br><span class="line">type appHandler func(writer http.ResponseWriter, request *http.Request) error</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">ç»Ÿä¸€é”™è¯¯å¤„ç†æ–¹æ³•</span><br><span class="line">1.http.HandleFunå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">2.ä½¿ç”¨errWrapperæ–¹æ³•å¯¹å…¶è¿›è¡ŒåŒ…è£…è¿”å›ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">3.handler(writer,request)æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœæŠ¥é”™å°±ä¼šè¿”å›errï¼Œç„¶åå¯¹errè¿›è¡Œå¤„ç†</span><br><span class="line">*/</span><br><span class="line">func errWrapper(handler appHandler) func(http.ResponseWriter, *http.Request) &#123;</span><br><span class="line">//åŒ…è£…ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿”å›ä¸€ä¸ªæ— è¿”å›å€¼çš„å‡½æ•°ä¸­è¿›è¡Œå¤„ç†</span><br><span class="line">return func(writer http.ResponseWriter, request *http.Request) &#123;</span><br><span class="line">//è¿™ä¸ªhandlerå®è´¨å°±æ˜¯filelisting.HandleFileList</span><br><span class="line">err := handler(writer, request)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">//æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯</span><br><span class="line">log.Warn(&quot;Error handling request: %s&quot;,err.Error())</span><br><span class="line">//èµ‹å€¼é»˜è®¤å€¼</span><br><span class="line">code := http.StatusOK</span><br><span class="line">switch &#123;</span><br><span class="line">//æ–‡ä»¶ä¸å­˜åœ¨code</span><br><span class="line">case os.IsNotExist(err):</span><br><span class="line">code = http.StatusNotFound</span><br><span class="line">//æƒé™ä¸å¤Ÿç¦æ­¢è®¿é—®</span><br><span class="line">case os.IsPermission(err):</span><br><span class="line">code = http.StatusForbidden</span><br><span class="line">//é»˜è®¤ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸code</span><br><span class="line">default:</span><br><span class="line">code = http.StatusInternalServerError</span><br><span class="line">&#125;</span><br><span class="line">//å°†é”™è¯¯æ¶ˆæ¯å“åº”ç»™å®¢æˆ·ç«¯</span><br><span class="line">http.Error(writer, http.StatusText(code), code)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">http.HandleFunc(&quot;/list/&quot;, errWrapper(filelisting.HandleFileList))</span><br><span class="line"></span><br><span class="line">err := http.ListenAndServe(&quot;:8888&quot;, nil)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="panicä¸recover"><a href="#panicä¸recover" class="headerlink" title="panicä¸recover"></a>panicä¸recover</h2><h3 id="panic-ææ…Œ"><a href="#panic-ææ…Œ" class="headerlink" title="panic(ææ…Œ)"></a>panic(ææ…Œ)</h3><p><img src="/images/img_12.png" alt="çœ‹åˆ°panicæƒ³åˆ°è¿™å¹…å›¾(é‡)"></p><blockquote><p>panicæ˜¯ä¸€ä¸ªå¾ˆé‡çš„è¯ï¼Œå°½é‡å°‘ç”¨</p></blockquote><blockquote><p>åœæ­¢å½“å‰å‡½æ•°æ‰§è¡Œ(è·Ÿå…¶å®ƒè¯­è¨€çš„throw Exceptionæœ‰ç‚¹åƒ)</p></blockquote><blockquote><p>ä¸€è‡´å‘ä¸Šè¿”å›ï¼Œæ‰§è¡Œæ¯ä¸€å±‚çš„deferè°ƒç”¨</p></blockquote><blockquote><p>å¦‚æœæ²¡æœ‰é‡è§recoverï¼Œç¨‹åºé€€å‡º</p></blockquote><h3 id="recover-æ¢å¤"><a href="#recover-æ¢å¤" class="headerlink" title="recover(æ¢å¤)"></a>recover(æ¢å¤)</h3><blockquote><p>ä»…åœ¨deferè°ƒç”¨ä¸­ä½¿ç”¨</p></blockquote><blockquote><p>åœ¨deferè°ƒç”¨recoveré‡Œé¢å¯ä»¥è·å–panicçš„å€¼è¿›è¡Œå¤„ç†</p></blockquote><blockquote><p>å¦‚æœåœ¨deferè°ƒç”¨ä¸­æ— æ³•å¤„ç†panicçš„å€¼ï¼Œå¯ä»¥é‡æ–°panic</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">tryRecover()</span><br><span class="line">fmt.Println(&quot;test&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func tryRecover() &#123;</span><br><span class="line">//åŒ¿åå‡½æ•°</span><br><span class="line">defer func() &#123;</span><br><span class="line">//deferè°ƒç”¨é‡è§recover</span><br><span class="line">r := recover()</span><br><span class="line">//å¦‚æœæ˜¯ä¸€ä¸ªé”™è¯¯å¯¹é”™è¯¯è¿›è¡Œå¤„ç†</span><br><span class="line">if err, ok := r.(error); ok &#123;</span><br><span class="line">fmt.Println(&quot;Error occurred:&quot;, err)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">//å¦åˆ™é‡æ–°panic</span><br><span class="line">//panic(r)</span><br><span class="line">panic(fmt.Sprintf(&quot;I don&apos;t know what to do: %v&quot;,err))</span><br><span class="line">&#125;</span><br><span class="line">&#125;() //å¤§æ‹¬å·æ˜¯åŒ¿åå‡½æ•°çš„å‡½æ•°ä½“ï¼Œæˆ‘ä»¬éœ€è¦åŒ¿åå‡½æ•°è¢«è°ƒç”¨åœ¨å‡½æ•°ä½“åé¢éœ€è¦åŠ ä¸Šå°æ‹¬å·</span><br><span class="line">//recoverè¿™ä¸ªé”™è¯¯æˆ‘ä»¬åœ¨deferä¸­è°ƒç”¨</span><br><span class="line">//panic(errors.New(&quot;this is an error&quot;))</span><br><span class="line">//b := 0</span><br><span class="line">//a := 5 / b</span><br><span class="line">//fmt.Println(a)</span><br><span class="line">panic(123)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¯¹ç»Ÿä¸€é”™è¯¯å¤„ç†è¿›è¡Œæ”¹è¿› ä½¿ç”¨deverè°ƒç”¨recover</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">//http.HandleFuncè°ƒç”¨åˆ°server.goæ–‡ä»¶ä¸­çš„func (c *conn) serve(ctx context.Context)æ–¹æ³•èµ°äº†deferè°ƒç”¨recover</span><br><span class="line">defer func() &#123;</span><br><span class="line">if err := recover(); err != nil &amp;&amp; err != ErrAbortHandler &#123;</span><br><span class="line">const size = 64 &lt;&lt; 10</span><br><span class="line">buf := make([]byte, size)</span><br><span class="line">buf = buf[:runtime.Stack(buf, false)]</span><br><span class="line">c.server.logf(&quot;http: panic serving %v: %v\n%s&quot;, c.remoteAddr, err, buf)</span><br><span class="line">&#125;</span><br><span class="line">if !c.hijacked() &#123;</span><br><span class="line">c.close()</span><br><span class="line">c.setState(c.rwc, StateClosed)</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">//æˆ‘ä»¬æ‰‹åŠ¨å¤„ç†æ›´å‹å¥½ï¼Œå¤„ç†æœªçŸ¥é”™è¯¯ï¼Œå‹å¥½ç›¸åº”ç»™å®¢æˆ·ç«¯</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;log&quot;</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/errhanding/filelistingserver/filelisting&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//å®šä¹‰å‡½æ•°ç±»å‹å¯¹å‡½æ•°è¿›è¡ŒåŒ…è£…</span><br><span class="line">type appHandler func(writer http.ResponseWriter, request *http.Request) error</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">ç»Ÿä¸€é”™è¯¯å¤„ç†æ–¹æ³•</span><br><span class="line">1.http.HandleFunå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">2.ä½¿ç”¨errWrapperæ–¹æ³•å¯¹å…¶è¿›è¡ŒåŒ…è£…è¿”å›ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">3.handler(writer,request)æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœæŠ¥é”™å°±ä¼šè¿”å›errï¼Œç„¶åå¯¹errè¿›è¡Œå¤„ç†</span><br><span class="line">*/</span><br><span class="line">func errWrapper(handler appHandler) func(http.ResponseWriter, *http.Request) &#123;</span><br><span class="line">//åŒ…è£…ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿”å›ä¸€ä¸ªæ— è¿”å›å€¼çš„å‡½æ•°ä¸­è¿›è¡Œå¤„ç†</span><br><span class="line">return func(writer http.ResponseWriter, request *http.Request) &#123;</span><br><span class="line">//deferå¯¹æœªçŸ¥é”™è¯¯è¿›è¡Œå¤„ç†ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span><br><span class="line">defer func() &#123;</span><br><span class="line">if r := recover(); r != nil &#123;</span><br><span class="line">log.Printf(&quot;Panic: %v&quot;, r)</span><br><span class="line">http.Error(writer, http.StatusText(http.StatusInternalServerError), http.StatusInternalServerError)</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">//è¿™ä¸ªhandlerå®è´¨å°±æ˜¯filelisting.HandleFileList</span><br><span class="line">err := handler(writer, request)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">//æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯</span><br><span class="line">log.Printf(&quot;Error occurred handling request: %s&quot;, err.Error())</span><br><span class="line">//èµ‹å€¼é»˜è®¤å€¼</span><br><span class="line">code := http.StatusOK</span><br><span class="line">switch &#123;</span><br><span class="line">//æ–‡ä»¶ä¸å­˜åœ¨code</span><br><span class="line">case os.IsNotExist(err):</span><br><span class="line">code = http.StatusNotFound</span><br><span class="line">//æƒé™ä¸å¤Ÿç¦æ­¢è®¿é—®</span><br><span class="line">case os.IsPermission(err):</span><br><span class="line">code = http.StatusForbidden</span><br><span class="line">//é»˜è®¤ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸code</span><br><span class="line">default:</span><br><span class="line">code = http.StatusInternalServerError</span><br><span class="line">&#125;</span><br><span class="line">//å°†é”™è¯¯æ¶ˆæ¯å“åº”ç»™å®¢æˆ·ç«¯</span><br><span class="line">http.Error(writer, http.StatusText(code), code)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">http.HandleFunc(&quot;/&quot;, errWrapper(filelisting.HandleFileList))</span><br><span class="line"></span><br><span class="line">err := http.ListenAndServe(&quot;:8888&quot;, nil)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è‡ªå®šä¹‰ç”¨æˆ·é”™è¯¯å¤„ç†æœªçŸ¥é”™è¯¯ç»™å‰ç«¯å‹å¥½æç¤º(ç»ˆæç‰ˆ)</strong></p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">handler.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package filelisting</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;io/ioutil&quot;</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">&quot;strings&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const prefix = &quot;/list/&quot;</span><br><span class="line"></span><br><span class="line">type userError string</span><br><span class="line">//erroræ¥å£æœ‰ä¸€ä¸ªErroræ–¹æ³•ç›¸å½“äºå®ç°äº†erroræ¥å£</span><br><span class="line">func (e userError) Error() string &#123;</span><br><span class="line">return e.Message()</span><br><span class="line">&#125;</span><br><span class="line">//userErroråŒ…è£…äº†ä¸€ä¸ªMessageæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ç›¸å½“äºå®ç°äº†userErroræ¥å£åŠerroræ¥å£</span><br><span class="line">func (e userError) Message() string &#123;</span><br><span class="line">return string(e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åŒ…è£…ä¸ºhttp.HandleFunc(pattern string, handler func(ResponseWriter, *Request))çš„ç¬¬äºŒä¸ªå‚æ•°</span><br><span class="line">func HandleFileList(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">if strings.Index(request.URL.Path, prefix) != 0 &#123;</span><br><span class="line">//return errors.New(&quot;path mast start with :&quot; + prefix)</span><br><span class="line">return userError(&quot;path must start with: &quot;+prefix)</span><br><span class="line">&#125;</span><br><span class="line">path := request.URL.Path[len(prefix):]</span><br><span class="line">file, err := os.Open(path)</span><br><span class="line">//é”™è¯¯æ–‡ä»¶è·¯å¾„ä¼šæ§åˆ¶å°ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é”™è¯¯è¿›è¡Œç»Ÿä¸€å¤„ç†</span><br><span class="line">//panic serving [::1]:55751: open fib.txt1: The system cannot find the file specified.</span><br><span class="line">/*if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;*/</span><br><span class="line">//å†…éƒ¨é”™è¯¯å±•ç¤ºç»™ç”¨æˆ·ä¸å¤ªå¥½ï¼Œéœ€è¦è¿›è¡ŒåŒ…è£…</span><br><span class="line">/*if err != nil &#123;</span><br><span class="line">http.Error(writer,</span><br><span class="line">err.Error(),</span><br><span class="line">http.StatusInternalServerError)</span><br><span class="line">return</span><br><span class="line">&#125;*/</span><br><span class="line">//é”™è¯¯ç›´æ¥è¿”å›ä½¿ç”¨é€šç”¨å¤„ç†æ–¹æ³•</span><br><span class="line">if err != nil &#123;</span><br><span class="line">return err</span><br><span class="line">&#125;</span><br><span class="line">defer file.Close()</span><br><span class="line">content, err := ioutil.ReadAll(file)</span><br><span class="line">if  err != nil &#123;</span><br><span class="line">return err</span><br><span class="line">&#125;</span><br><span class="line">writer.Write(content)</span><br><span class="line">return nil</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;log&quot;</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/errhanding/filelistingserver/filelisting&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//å®šä¹‰å‡½æ•°ç±»å‹å¯¹å‡½æ•°è¿›è¡ŒåŒ…è£…</span><br><span class="line">type appHandler func(writer http.ResponseWriter, request *http.Request) error</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">ç»Ÿä¸€é”™è¯¯å¤„ç†æ–¹æ³•</span><br><span class="line">1.http.HandleFunå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">2.ä½¿ç”¨errWrapperæ–¹æ³•å¯¹å…¶è¿›è¡ŒåŒ…è£…è¿”å›ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">3.handler(writer,request)æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœæŠ¥é”™å°±ä¼šè¿”å›errï¼Œç„¶åå¯¹errè¿›è¡Œå¤„ç†</span><br><span class="line">*/</span><br><span class="line">func errWrapper(handler appHandler) func(http.ResponseWriter, *http.Request) &#123;</span><br><span class="line">//åŒ…è£…ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿”å›ä¸€ä¸ªæ— è¿”å›å€¼çš„å‡½æ•°ä¸­è¿›è¡Œå¤„ç†</span><br><span class="line">return func(writer http.ResponseWriter, request *http.Request) &#123;</span><br><span class="line">//deferå¯¹æœªçŸ¥é”™è¯¯è¿›è¡Œå¤„ç†ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span><br><span class="line">defer func() &#123;</span><br><span class="line">if r := recover(); r != nil &#123;</span><br><span class="line">log.Printf(&quot;Panic: %v&quot;, r)</span><br><span class="line">http.Error(writer, http.StatusText(http.StatusInternalServerError), http.StatusInternalServerError)</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">//è¿™ä¸ªhandlerå®è´¨å°±æ˜¯filelisting.HandleFileList</span><br><span class="line">err := handler(writer, request)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">//æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯</span><br><span class="line">log.Printf(&quot;Error occurred handling request: %s&quot;, err.Error())</span><br><span class="line">//å¦‚æœé”™è¯¯æ˜¯å¸Œæœ›å±•ç¤ºç»™ç”¨æˆ·çš„é”™è¯¯</span><br><span class="line">if userError, ok := err.(userError); ok &#123;</span><br><span class="line">http.Error(writer,userError.Message(),http.StatusBadRequest)</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//èµ‹å€¼é»˜è®¤å€¼</span><br><span class="line">code := http.StatusOK</span><br><span class="line">switch &#123;</span><br><span class="line">//æ–‡ä»¶ä¸å­˜åœ¨code</span><br><span class="line">case os.IsNotExist(err):</span><br><span class="line">code = http.StatusNotFound</span><br><span class="line">//æƒé™ä¸å¤Ÿç¦æ­¢è®¿é—®</span><br><span class="line">case os.IsPermission(err):</span><br><span class="line">code = http.StatusForbidden</span><br><span class="line">//é»˜è®¤ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸code</span><br><span class="line">default:</span><br><span class="line">code = http.StatusInternalServerError</span><br><span class="line">&#125;</span><br><span class="line">//å°†é”™è¯¯æ¶ˆæ¯å“åº”ç»™å®¢æˆ·ç«¯</span><br><span class="line">http.Error(writer, http.StatusText(code), code)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å®šä¹‰èƒ½ç»™ç”¨æˆ·çœ‹çš„é”™è¯¯</span><br><span class="line">type userError interface &#123;</span><br><span class="line">error</span><br><span class="line">Message() string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">http.HandleFunc(&quot;/&quot;, errWrapper(filelisting.HandleFileList))</span><br><span class="line"></span><br><span class="line">err := http.ListenAndServe(&quot;:8888&quot;, nil)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜"><a href="#æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜" class="headerlink" title="æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜"></a>æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜</h1><h2 id="è¡¨æ ¼é©±åŠ¨æµ‹è¯•"><a href="#è¡¨æ ¼é©±åŠ¨æµ‹è¯•" class="headerlink" title="è¡¨æ ¼é©±åŠ¨æµ‹è¯•"></a>è¡¨æ ¼é©±åŠ¨æµ‹è¯•</h2><blockquote><p>æ–¹æ³•åç§°ä»¥func TestXxx(t *testing.T)æ ¼å¼</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;math&quot;</span><br><span class="line">&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//æµ‹è¯•æ–¹æ³•å‚æ•°éœ€è¦æ·»åŠ *testing.Tä½œä¸ºæ–¹æ³•å‚æ•°</span><br><span class="line">func TestTriangle(t *testing.T) &#123;</span><br><span class="line">tests := []struct&#123; a, b, c int &#125;&#123;</span><br><span class="line">&#123;3, 4, 6&#125;,</span><br><span class="line">&#123;5, 12, 13&#125;,</span><br><span class="line">&#123;8, 15, 17&#125;,</span><br><span class="line">&#123;30000, 40000, 50000&#125;,</span><br><span class="line">&#125;</span><br><span class="line">for _, element := range tests &#123;</span><br><span class="line">if actual := calcTriangle(element.a, element.b); actual != element.c &#123;</span><br><span class="line">t.Errorf(&quot;calcTriangle(%d,%d) got %d ; expected %d&quot;,element.a,element.b,actual,element.c)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è®¡ç®—å‹¾è‚¡å®šç†</span><br><span class="line">func calcTriangle(a int, b int) int &#123;</span><br><span class="line">var c int</span><br><span class="line">c = int(math.Sqrt(float64(a*a + b*b)))</span><br><span class="line">return c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ‰“å°ç»“æœ</span><br><span class="line">------------------------------------------------------</span><br><span class="line">API server listening at: [::]:50325</span><br><span class="line">=== RUN   TestTriangle</span><br><span class="line">    add_test.go:17: calcTriangle(3,4) got 5 ; expected 6</span><br><span class="line">--- FAIL: TestTriangle (0.00s)</span><br><span class="line">FAIL</span><br><span class="line"></span><br><span class="line">Debugger finished with exit code 0</span><br><span class="line">------------------------------------------------------</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ä»£ç è¦†ç›–ç‡"><a href="#æŸ¥çœ‹ä»£ç è¦†ç›–ç‡" class="headerlink" title="æŸ¥çœ‹ä»£ç è¦†ç›–ç‡"></a>æŸ¥çœ‹ä»£ç è¦†ç›–ç‡</h2><blockquote><p>å…ˆç”Ÿæˆä»£ç è¦†ç›–ç‡æ–‡ä»¶</p></blockquote> <figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go test -coverprofile=c.out</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨å¯è§†åŒ–å·¥å…·æŸ¥çœ‹æ–‡ä»¶</p></blockquote> <figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go tool cover -html=c.out</span><br></pre></td></tr></table></figure><p><img src="/images/img_13.png" alt="ä»£ç è¦†ç›–ç‡å¯è§†åŒ–æŸ¥çœ‹"></p><blockquote><p>çº¢è‰²æ˜¯æ²¡æœ‰è¦†ç›–çš„ä»£ç </p></blockquote><blockquote><p>ç»¿è‰²æ˜¯è¦†ç›–çš„ä»£ç </p></blockquote><h2 id="ä»£ç æ€§èƒ½æµ‹è¯•"><a href="#ä»£ç æ€§èƒ½æµ‹è¯•" class="headerlink" title="ä»£ç æ€§èƒ½æµ‹è¯•"></a>ä»£ç æ€§èƒ½æµ‹è¯•</h2><blockquote><p>æ–¹æ³•åç§°ä»¥func Benchmark(b *testing.B)æ ¼å¼</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;math&quot;</span><br><span class="line">&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line">//æ€§èƒ½æµ‹è¯•ä»£ç </span><br><span class="line">func BenchmarkSubStr(b *testing.B) &#123;</span><br><span class="line">s := &quot;é»‘åŒ–è‚¥æŒ¥å‘å‘ç°ä¼šèŠ±é£ç°åŒ–è‚¥æŒ¥å‘å‘é»‘ä¼šé£èŠ±&quot;</span><br><span class="line">ans := 8</span><br><span class="line">//b.Nè®©ç³»ç»Ÿå†³å®šä»£ç æ€§èƒ½æ‰§è¡Œçš„æ¬¡æ•°</span><br><span class="line">for i := 0; i &lt; b.N; i++ &#123;</span><br><span class="line">actual := lengthOfLongestSubstring(s)</span><br><span class="line">if actual != ans &#123;</span><br><span class="line">b.Errorf(&quot;got %d for input %s; expected %d&quot;, actual,s,ans)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//éœ€è¦è¿›è¡Œæ€§èƒ½æµ‹è¯•çš„æ–¹æ³•å¿«</span><br><span class="line">func lengthOfLongestSubstring(s string) int &#123;</span><br><span class="line">//è®°å½•æ¯ä¸ªå­—æ¯æœ€åå‡ºç°çš„ä½ç½®</span><br><span class="line">lastOccurred := make(map[rune]int)</span><br><span class="line">start := 0</span><br><span class="line">maxLenght := 0</span><br><span class="line">for i,ch := range []rune(s) &#123;</span><br><span class="line">//æœ‰å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªmapè·å–å‡ºæ¥çš„å€¼æ˜¯0,è€Œ0åˆæ˜¯ä¸€ä¸ªåˆæ³•çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥è¦åˆ¤æ–­è¿™ä¸ªkeyæ˜¯å¦å­˜åœ¨</span><br><span class="line">if lastI,ok := lastOccurred[ch] ; ok &amp;&amp; lastI &gt;= start &#123;</span><br><span class="line">start = lastOccurred[ch] +1</span><br><span class="line">&#125;</span><br><span class="line">if i - start +1 &gt; maxLenght &#123;</span><br><span class="line">maxLenght = i - start + 1</span><br><span class="line">&#125;</span><br><span class="line">lastOccurred[ch] = i</span><br><span class="line">&#125;</span><br><span class="line">return maxLenght</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ‰“å°ç»“æœ</span><br><span class="line">------------------------------------------------------</span><br><span class="line">API server listening at: [::]:62673</span><br><span class="line">goos: windows</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: world.ismyfree/go-learning/basic/loop</span><br><span class="line">BenchmarkSubStr</span><br><span class="line">BenchmarkSubStr-8     523216      2315 ns/op</span><br><span class="line">PASS</span><br><span class="line"></span><br><span class="line">Debugger finished with exit code 0</span><br><span class="line">------------------------------------------------------</span><br></pre></td></tr></table></figure><blockquote><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå¯¹ä»£ç è¿›è¡Œæµ‹è¯•</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go test -bench .</span><br></pre></td></tr></table></figure><blockquote><p>ç”Ÿæˆæ€§èƒ½æµ‹è¯•ç”ŸæˆcpuæŠ¥å‘Š</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go test -bench . -cpuprofile cpu.out</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨pprofå·¥å…·æŸ¥çœ‹cpu-outæŠ¥å‘Šæ–‡ä»¶"><a href="#ä½¿ç”¨pprofå·¥å…·æŸ¥çœ‹cpu-outæŠ¥å‘Šæ–‡ä»¶" class="headerlink" title="ä½¿ç”¨pprofå·¥å…·æŸ¥çœ‹cpu.outæŠ¥å‘Šæ–‡ä»¶"></a>ä½¿ç”¨pprofå·¥å…·æŸ¥çœ‹cpu.outæŠ¥å‘Šæ–‡ä»¶</h3><blockquote><p>è¾“å…¥å‘½ä»¤è¿›å…¥å·¥å…·å‘½ä»¤è¡Œ</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go tool pprof cpu.out</span><br></pre></td></tr></table></figure><blockquote><p>è¿›å…¥å‘½ä»¤è¡Œå·¥å…·åè¾“å…¥webå‘½ä»¤å³å¯ä»¥å›¾å½¢åŒ–ç½‘é¡µå½¢å¼å±•ç¤ºæ€§èƒ½é—®é¢˜ï¼Œé’ˆå¯¹é—®é¢˜è¿›è¡Œè°ƒä¼˜</p></blockquote><blockquote><p>è¾“å…¥helpå¯æŸ¥çœ‹å¸®åŠ©å‘½ä»¤</p></blockquote><blockquote><p>å„ç§æŠ¥é”™æ²¡èƒ½æˆåŠŸï¼Œæœ‰æ—¶é—´å†ç ”ç©¶</p></blockquote><h2 id="httpæµ‹è¯•"><a href="#httpæµ‹è¯•" class="headerlink" title="httpæµ‹è¯•"></a>httpæµ‹è¯•</h2><h3 id="ä»…å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•-æ›´åƒå•å…ƒæµ‹è¯•"><a href="#ä»…å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•-æ›´åƒå•å…ƒæµ‹è¯•" class="headerlink" title="ä»…å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•(æ›´åƒå•å…ƒæµ‹è¯•)"></a>ä»…å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•(æ›´åƒå•å…ƒæµ‹è¯•)</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">errorwrapper_test.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;errors&quot;</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;io/ioutil&quot;</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;net/http/httptest&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">&quot;strings&quot;</span><br><span class="line">&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type testingUserError string</span><br><span class="line"></span><br><span class="line">//erroræ¥å£æœ‰ä¸€ä¸ªErroræ–¹æ³•ç›¸å½“äºå®ç°äº†erroræ¥å£</span><br><span class="line">func (e testingUserError) Error() string &#123;</span><br><span class="line">return e.Message()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//testingUserErroråŒ…è£…äº†ä¸€ä¸ªMessageæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ç›¸å½“äºå®ç°äº†testingUserErroræ¥å£åŠerroræ¥å£</span><br><span class="line">func (e testingUserError) Message() string &#123;</span><br><span class="line">return string(e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errPanic(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">panic(123)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errUserError(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">return testingUserError(&quot;user error&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errNotFound(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">return os.ErrNotExist</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errNoPermission(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">return os.ErrPermission</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errUnknown(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">return errors.New(&quot;unknown error&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func noError(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">fmt.Fprintln(writer, &quot;no error&quot;)</span><br><span class="line">return nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestErrWrapper(t *testing.T) &#123;</span><br><span class="line">tests := []struct &#123;</span><br><span class="line">h       appHandler</span><br><span class="line">code    int</span><br><span class="line">message string</span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;errPanic, 500, &quot;Internal Server Error&quot;&#125;,</span><br><span class="line">&#123;errUserError, 400, &quot;user error&quot;&#125;,</span><br><span class="line">&#123;errNotFound, 404, &quot;Not Found&quot;&#125;,</span><br><span class="line">&#123;errNoPermission, 403, &quot;Forbidden&quot;&#125;,</span><br><span class="line">&#123;errUnknown, 500, &quot;Internal Server Error&quot;&#125;,</span><br><span class="line">&#123;noError,200,&quot;no error&quot;&#125;,</span><br><span class="line">&#125;</span><br><span class="line">for _, tt := range tests &#123;</span><br><span class="line">f := errWrapper(tt.h)</span><br><span class="line">response := httptest.NewRecorder()</span><br><span class="line">request := httptest.NewRequest(http.MethodGet, &quot;http://localhost:8888/list/fib.txt&quot;, nil)</span><br><span class="line">f(response, request)</span><br><span class="line">b, _ := ioutil.ReadAll(response.Body)</span><br><span class="line">body := strings.Trim(string(b), &quot;\n&quot;)</span><br><span class="line">if response.Code != tt.code || body != tt.message &#123;</span><br><span class="line">t.Errorf(&quot;expect (%d,%s); got (%d, %s)&quot;, tt.code, tt.message, response.Code, body)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line">å“åº”ç»“æœ</span><br><span class="line">------------------------------------------------------</span><br><span class="line">API server listening at: [::]:50904</span><br><span class="line">=== RUN   TestErrWrapper</span><br><span class="line">2020/12/28 17:26:00 Panic: 123</span><br><span class="line">2020/12/28 17:26:00 Error occurred handling request: user error</span><br><span class="line">2020/12/28 17:26:00 Error occurred handling request: file does not exist</span><br><span class="line">2020/12/28 17:26:00 Error occurred handling request: permission denied</span><br><span class="line">2020/12/28 17:26:00 Error occurred handling request: unknown error</span><br><span class="line">--- PASS: TestErrWrapper (0.01s)</span><br><span class="line">PASS</span><br><span class="line"></span><br><span class="line">Debugger finished with exit code 0</span><br><span class="line">------------------------------------------------------</span><br></pre></td></tr></table></figure><h3 id="å¼€ä¸€ä¸ªæœåŠ¡å™¨å¯¹httpè¿›è¡Œæµ‹è¯•-é›†æˆåº¦æ›´é«˜"><a href="#å¼€ä¸€ä¸ªæœåŠ¡å™¨å¯¹httpè¿›è¡Œæµ‹è¯•-é›†æˆåº¦æ›´é«˜" class="headerlink" title="å¼€ä¸€ä¸ªæœåŠ¡å™¨å¯¹httpè¿›è¡Œæµ‹è¯•(é›†æˆåº¦æ›´é«˜)"></a>å¼€ä¸€ä¸ªæœåŠ¡å™¨å¯¹httpè¿›è¡Œæµ‹è¯•(é›†æˆåº¦æ›´é«˜)</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">errorwrapper_test.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;errors&quot;</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;io/ioutil&quot;</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;net/http/httptest&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">&quot;strings&quot;</span><br><span class="line">&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type testingUserError string</span><br><span class="line"></span><br><span class="line">//erroræ¥å£æœ‰ä¸€ä¸ªErroræ–¹æ³•ç›¸å½“äºå®ç°äº†erroræ¥å£</span><br><span class="line">func (e testingUserError) Error() string &#123;</span><br><span class="line">return e.Message()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//testingUserErroråŒ…è£…äº†ä¸€ä¸ªMessageæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ç›¸å½“äºå®ç°äº†testingUserErroræ¥å£åŠerroræ¥å£</span><br><span class="line">func (e testingUserError) Message() string &#123;</span><br><span class="line">return string(e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errPanic(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">panic(123)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errUserError(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">return testingUserError(&quot;user error&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errNotFound(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">return os.ErrNotExist</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errNoPermission(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">return os.ErrPermission</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errUnknown(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">return errors.New(&quot;unknown error&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func noError(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">fmt.Fprintln(writer, &quot;no error&quot;)</span><br><span class="line">return nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestErrWrapperInServer(t *testing.T) &#123;</span><br><span class="line">tests := []struct &#123;</span><br><span class="line">h       appHandler</span><br><span class="line">code    int</span><br><span class="line">message string</span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;errPanic, 500, &quot;Internal Server Error&quot;&#125;,</span><br><span class="line">&#123;errUserError, 400, &quot;user error&quot;&#125;,</span><br><span class="line">&#123;errNotFound, 404, &quot;Not Found&quot;&#125;,</span><br><span class="line">&#123;errNoPermission, 403, &quot;Forbidden&quot;&#125;,</span><br><span class="line">&#123;errUnknown, 500, &quot;Internal Server Error&quot;&#125;,</span><br><span class="line">&#123;noError, 200, &quot;no error&quot;&#125;,</span><br><span class="line">&#125;</span><br><span class="line">for _, tt := range tests &#123;</span><br><span class="line">f := errWrapper(tt.h)</span><br><span class="line">server := httptest.NewServer(http.HandlerFunc(f))</span><br><span class="line">resp, _ := http.Get(server.URL)</span><br><span class="line">verifyResponse(resp,tt.code,tt.message,t)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func verifyResponse(resp *http.Response,expectCode int,expectMessage string,t *testing.T) &#123;</span><br><span class="line">b, _ := ioutil.ReadAll(resp.Body)</span><br><span class="line">body := strings.Trim(string(b), &quot;\n&quot;)</span><br><span class="line">if resp.StatusCode != expectCode || body != expectMessage &#123;</span><br><span class="line">t.Errorf(&quot;expect (%d,%s); got (%d, %s)&quot;, expectCode, expectMessage, resp.StatusCode, body)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æ¥å£æ–‡æ¡£"><a href="#æŸ¥çœ‹æ¥å£æ–‡æ¡£" class="headerlink" title="æŸ¥çœ‹æ¥å£æ–‡æ¡£"></a>æŸ¥çœ‹æ¥å£æ–‡æ¡£</h2><blockquote><p>éœ€è¦å®‰è£…godocå·¥å…·</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go install golang.org/x/tools/cmd/godoc</span><br></pre></td></tr></table></figure><blockquote><p>æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹æ¥å£æ–‡æ¡£</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">godoc -http=:6060</span><br></pre></td></tr></table></figure><blockquote><p>æ‰“å¼€æœ¬åœ°ç«¯å£ç½‘é¡µ6060æŸ¥çœ‹(æ‰€æœ‰æ¥å£æ–‡æ¡£,åŒ…å«æœ¬åœ°åŠå®˜æ–¹)</p></blockquote><p><img src="/images/img_14.png" alt="webé¡µé¢æ¥å£æ–‡æ¡£"></p><h1 id="å¹¶å‘ç¼–ç¨‹"><a href="#å¹¶å‘ç¼–ç¨‹" class="headerlink" title="å¹¶å‘ç¼–ç¨‹"></a>å¹¶å‘ç¼–ç¨‹</h1><h2 id="åç¨‹Coroutine"><a href="#åç¨‹Coroutine" class="headerlink" title="åç¨‹Coroutine"></a>åç¨‹Coroutine</h2><blockquote><p>è½»é‡çº§â€çº¿ç¨‹â€</p></blockquote><blockquote><p><strong>éæŠ¢å å¼</strong>å¤šä»»åŠ¡å¤„ç†ï¼Œç”±åç¨‹ä¸»åŠ¨äº¤å‡ºæ§åˆ¶æƒ</p></blockquote><blockquote><p>ç¼–è¯‘å™¨/è§£é‡Šå™¨/è™šæ‹Ÿæœºå±‚çš„å¤šä»»åŠ¡</p></blockquote><blockquote><p>å¤šä¸ªåç¨‹å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ</p></blockquote><blockquote><p>å­ç¨‹åºæ˜¯åç¨‹çš„ä¸€ä¸ªç‰¹ä¾‹(åç¨‹æ˜¯æ¯”å­ç¨‹åºæ›´å®½æ³›çš„ä¸€ä¸ªæ¦‚å¿µ)</p></blockquote><p><img src="/images/img_15.png" alt="åç¨‹ä¸æ™®é€šå‡½æ•°çš„å¯¹æ¯”"></p><h3 id="åç¨‹ç®€å•æ¼”ç¤ºgo-func"><a href="#åç¨‹ç®€å•æ¼”ç¤ºgo-func" class="headerlink" title="åç¨‹ç®€å•æ¼”ç¤ºgo func"></a>åç¨‹ç®€å•æ¼”ç¤ºgo func</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;runtime&quot;</span><br><span class="line">&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">var a [10]int</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">//åç¨‹</span><br><span class="line">go func(i int) &#123;</span><br><span class="line">for true &#123;</span><br><span class="line">//idæ“ä½œåç¨‹ä¹‹é—´ä¼šåˆ‡æ¢</span><br><span class="line">//fmt.Printf(&quot;hello from goroutine %d&quot;,i)</span><br><span class="line">a[i]++</span><br><span class="line">//æ‰‹åŠ¨äº¤å‡ºåç¨‹æ§åˆ¶æƒ</span><br><span class="line">runtime.Gosched()</span><br><span class="line">&#125;</span><br><span class="line">&#125;(i)</span><br><span class="line">&#125;</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line">fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ­¤æ®µä»£ç æœ‰æ•°æ®è®¿é—®å†²çª,å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ£€æµ‹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go run -race xxx.go</span><br></pre></td></tr></table></figure><blockquote><p>å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">==================</span><br><span class="line">WARNING: DATA RACE</span><br><span class="line">//è¯»</span><br><span class="line">Read at 0x00c0001300f0 by main goroutine:</span><br><span class="line">  main.main()</span><br><span class="line"> Â  Â  Â D:/goProject/src/world.ismyfree/go-learning/goroutine/goroutine.go:24 +0x104</span><br><span class="line">//å†™</span><br><span class="line">Previous write at 0x00c0001300f0 by goroutine 7:</span><br><span class="line">  main.main.func1()</span><br><span class="line">      D:/goProject/src/world.ismyfree/go-learning/goroutine/goroutine.go:17 +0x6f</span><br><span class="line"></span><br><span class="line">Goroutine 7 (running) created at:</span><br><span class="line">  main.main()</span><br><span class="line">      D:/goProject/src/world.ismyfree/go-learning/goroutine/goroutine.go:13 +0xca</span><br><span class="line">==================</span><br><span class="line">[4400 3695 3707 3321 3159 2643 2964 2641 2969 2490]</span><br><span class="line">Found 1 data race(s)</span><br><span class="line">exit status 66</span><br></pre></td></tr></table></figure><h3 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h3><p><img src="/images/img_16.png" alt="goroutineæŠ½è±¡å›¾"></p><blockquote><p>ä»»ä½•å‡½æ•°åªè¦åŠ ä¸Šgoå°±èƒ½é€ç»™è°ƒåº¦å™¨è¿è¡Œ</p></blockquote><blockquote><p>ä¸éœ€è¦åœ¨å®šä¹‰æ˜¯åŒºåˆ†æ˜¯å¦æ˜¯å¼‚æ­¥å‡½æ•°</p></blockquote><blockquote><p>è°ƒåº¦å™¨åœ¨åˆé€‚çš„ç‚¹è¿›è¡Œåˆ‡æ¢</p></blockquote><blockquote><p>ä½¿ç”¨-raceå¯ä»¥æ£€æµ‹æ•°æ®è®¿é—®å†²çª</p></blockquote><blockquote><p>è°ƒåº¦å™¨ä¼šå°†å„ä¸ªåç¨‹æ˜ å°„åˆ°ç‰©ç†æœºçš„å„ä¸ªçº¿ç¨‹</p></blockquote><h3 id="goroutineå¯èƒ½åˆ‡æ¢çš„å‚è€ƒç‚¹"><a href="#goroutineå¯èƒ½åˆ‡æ¢çš„å‚è€ƒç‚¹" class="headerlink" title="goroutineå¯èƒ½åˆ‡æ¢çš„å‚è€ƒç‚¹"></a>goroutineå¯èƒ½åˆ‡æ¢çš„å‚è€ƒç‚¹</h3><blockquote><p>I/O,select (å¦‚print)<br>d<br>channel</p></blockquote><blockquote><p>ç­‰å¾…é”</p></blockquote><blockquote><p>å‡½æ•°è°ƒç”¨(æœ‰æ—¶)</p></blockquote><blockquote><p>runtime.Gosched()(æ‰‹åŠ¨äº¤å‡ºåç¨‹æ§åˆ¶æƒ)</p></blockquote><h2 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h2><p><img src="/images/img_17.png" alt="channel"></p><blockquote><p>goroutineä¸goroutineä¹‹é—´åŒå‘çš„é€šé“å°±æ˜¯channel</p></blockquote><blockquote><p>channelæ˜¯goroutineä¸goroutineä¹‹é—´çš„äº¤äº’ï¼Œä¸€ä¸ªgoroutineå‘é€æ•°æ®å°±è¦æœ‰ä¸€ä¸ªgoroutineæ¥æ”¶æ•°æ®ï¼Œæ²¡æœ‰goroutineæ¥æ”¶æ•°æ®ä¼šå‘ç”Ÿdadelock</p></blockquote><blockquote><p>channel</p><blockquote><p>channel<br>buffered channel<br>range</p><blockquote><p>ç†è®ºåŸºç¡€ï¼šCommunication Sequential Process (CSPæ¨¡å‹)</p></blockquote></blockquote></blockquote><blockquote><p>ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡;<strong>é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜</strong></p></blockquote><h3 id="channelçš„ç¤ºä¾‹"><a href="#channelçš„ç¤ºä¾‹" class="headerlink" title="channelçš„ç¤ºä¾‹"></a>channelçš„ç¤ºä¾‹</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func worker(id int, c chan int) &#123;</span><br><span class="line">/*for true &#123;</span><br><span class="line">//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">break</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">&#125;</span><br><span class="line">&#125;*/</span><br><span class="line">for n := range c &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int) chan&lt;- int &#123;</span><br><span class="line">c := make(chan int)</span><br><span class="line">//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">go worker(id, c)</span><br><span class="line">//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">return c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//channelç¤ºä¾‹ä»£ç </span><br><span class="line">func chanDemo() &#123;</span><br><span class="line">var channels [10]chan&lt;- int</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">//åˆ›å»ºä¸€ä¸ªchannelï¼ˆchannelæ˜¯ä¸€ç­‰å…¬æ°‘,èƒ½ä½œä¸ºå‚æ•°ä¹Ÿèƒ½ä½œä¸ºè¿”å›å€¼ï¼‰</span><br><span class="line">//channels[i] = make(chan int)</span><br><span class="line">//åˆ›å»ºä¸€ä¸ªgoroutineæ¥æ”¶channelä¸­çš„æ•°æ®</span><br><span class="line">channels[i] = createWorker(i)</span><br><span class="line">&#125;</span><br><span class="line">//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">channels[i] &lt;- &apos;a&apos; + i</span><br><span class="line">&#125;</span><br><span class="line">//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">channels[i] &lt;- &apos;A&apos; + i</span><br><span class="line">&#125;</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//bufferedChannel</span><br><span class="line">func bufferedChannel() &#123;</span><br><span class="line">c := make(chan int, 3)</span><br><span class="line">go worker(0, c)</span><br><span class="line">c &lt;- &apos;A&apos;</span><br><span class="line">c &lt;- &apos;B&apos;</span><br><span class="line">c &lt;- &apos;C&apos;</span><br><span class="line">c &lt;- &apos;C&apos;</span><br><span class="line">c &lt;- &apos;C&apos;</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//bufferedChannel</span><br><span class="line">func channelClose() &#123;</span><br><span class="line">c := make(chan int, 3)</span><br><span class="line">go worker(0, c)</span><br><span class="line">c &lt;- &apos;A&apos;</span><br><span class="line">c &lt;- &apos;B&apos;</span><br><span class="line">c &lt;- &apos;C&apos;</span><br><span class="line">c &lt;- &apos;C&apos;</span><br><span class="line">c &lt;- &apos;C&apos;</span><br><span class="line">close(c)</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//main</span><br><span class="line">func main() &#123;</span><br><span class="line">fmt.Println(&quot;Channel as first-class citizen&quot;)</span><br><span class="line">chanDemo()</span><br><span class="line">fmt.Println(&quot;Buffered channel&quot;)</span><br><span class="line">bufferedChannel()</span><br><span class="line">fmt.Println(&quot;Channel close and range&quot;)</span><br><span class="line">channelClose()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="channelç¤ºä¾‹ä¼˜åŒ–-é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜"><a href="#channelç¤ºä¾‹ä¼˜åŒ–-é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜" class="headerlink" title="channelç¤ºä¾‹ä¼˜åŒ–(é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜)"></a>channelç¤ºä¾‹ä¼˜åŒ–(é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜)</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func doWorker(id int, c chan int, done chan bool) &#123;</span><br><span class="line">/*for true &#123;</span><br><span class="line">//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">break</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">&#125;</span><br><span class="line">&#125;*/</span><br><span class="line">for n := range c &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">//é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜é€šçŸ¥å¤–é¢æ‰“å°å®Œæˆ</span><br><span class="line">//done &lt;- true</span><br><span class="line">//channelå‘é€æ•°æ®éœ€è¦åœ¨å¦å¤–çš„goroutineä¸­åš,å¦åˆ™ä¼šå‘ç”Ÿé˜»å¡</span><br><span class="line">//go func() &#123;done&lt;-true&#125;()</span><br><span class="line">done &lt;- true</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int) worker &#123;</span><br><span class="line">w := worker&#123;</span><br><span class="line">in:   make(chan int),</span><br><span class="line">done: make(chan bool),</span><br><span class="line">&#125;</span><br><span class="line">//c := make(chan int)</span><br><span class="line">//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">go doWorker(id, w.in, w.done)</span><br><span class="line">//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">return w</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type worker struct &#123;</span><br><span class="line">in   chan int</span><br><span class="line">done chan bool</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//channelç¤ºä¾‹ä»£ç </span><br><span class="line">func chanDemo() &#123;</span><br><span class="line">var workers [10]worker</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">//åˆ›å»ºä¸€ä¸ªchannelï¼ˆchannelæ˜¯ä¸€ç­‰å…¬æ°‘,èƒ½ä½œä¸ºå‚æ•°ä¹Ÿèƒ½ä½œä¸ºè¿”å›å€¼ï¼‰</span><br><span class="line">//channels[i] = make(chan int)</span><br><span class="line">//åˆ›å»ºä¸€ä¸ªgoroutineæ¥æ”¶channelä¸­çš„æ•°æ®</span><br><span class="line">workers[i] = createWorker(i)</span><br><span class="line">&#125;</span><br><span class="line">//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">workers[i].in &lt;- &apos;a&apos; + i</span><br><span class="line">//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">//&lt;-workers[i].done</span><br><span class="line">&#125;</span><br><span class="line">for _, worker := range workers &#123;</span><br><span class="line">&lt;-worker.done</span><br><span class="line">&#125;</span><br><span class="line">//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">workers[i].in &lt;- &apos;A&apos; + i</span><br><span class="line">//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">//&lt;-workers[i].done</span><br><span class="line">&#125;</span><br><span class="line">for _, worker := range workers &#123;</span><br><span class="line">&lt;-worker.done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*for _,worker := range workers&#123;</span><br><span class="line">&lt;-worker.done</span><br><span class="line">&lt;-worker.done</span><br><span class="line">&#125;*/</span><br><span class="line">//sleepçš„æ–¹å¼å¾ˆä¸å¥½,æˆ‘ä»¬éœ€è¦é€šçŸ¥åˆ°å¤–é¢å·²ç»æ‰“å°å®Œæˆ</span><br><span class="line">//time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//main</span><br><span class="line">func main() &#123;</span><br><span class="line">chanDemo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨goæä¾›çš„waitGroupæ”¹è¿›ç¤ºä¾‹"><a href="#ä½¿ç”¨goæä¾›çš„waitGroupæ”¹è¿›ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨goæä¾›çš„waitGroupæ”¹è¿›ç¤ºä¾‹"></a>ä½¿ç”¨goæä¾›çš„waitGroupæ”¹è¿›ç¤ºä¾‹</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;sync&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func doWorker(id int, c chan int, wg *sync.WaitGroup) &#123;</span><br><span class="line">/*for true &#123;</span><br><span class="line">//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">break</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">&#125;</span><br><span class="line">&#125;*/</span><br><span class="line">for n := range c &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">//é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜é€šçŸ¥å¤–é¢æ‰“å°å®Œæˆ</span><br><span class="line">//done &lt;- true</span><br><span class="line">//channelå‘é€æ•°æ®éœ€è¦åœ¨å¦å¤–çš„goroutineä¸­åš,å¦åˆ™ä¼šå‘ç”Ÿé˜»å¡</span><br><span class="line">//go func() &#123;done&lt;-true&#125;()</span><br><span class="line">//done &lt;- true</span><br><span class="line">wg.Done()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int,wg *sync.WaitGroup) worker &#123;</span><br><span class="line">w := worker&#123;</span><br><span class="line">in:   make(chan int),</span><br><span class="line">wg: wg,</span><br><span class="line">&#125;</span><br><span class="line">//c := make(chan int)</span><br><span class="line">//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">go doWorker(id, w.in, wg)</span><br><span class="line">//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">return w</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type worker struct &#123;</span><br><span class="line">in   chan int</span><br><span class="line">wg *sync.WaitGroup</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//channelç¤ºä¾‹ä»£ç </span><br><span class="line">func chanDemo() &#123;</span><br><span class="line">//goæä¾›çš„ç­‰å¾…å¤šä»»åŠ¡å®Œæˆçš„æ–¹æ³•</span><br><span class="line">var wg sync.WaitGroup</span><br><span class="line">var workers [10]worker</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">//åˆ›å»ºä¸€ä¸ªchannelï¼ˆchannelæ˜¯ä¸€ç­‰å…¬æ°‘,èƒ½ä½œä¸ºå‚æ•°ä¹Ÿèƒ½ä½œä¸ºè¿”å›å€¼ï¼‰</span><br><span class="line">//channels[i] = make(chan int)</span><br><span class="line">//åˆ›å»ºä¸€ä¸ªgoroutineæ¥æ”¶channelä¸­çš„æ•°æ®</span><br><span class="line">workers[i] = createWorker(i,&amp;wg)</span><br><span class="line">&#125;</span><br><span class="line">//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">workers[i].in &lt;- &apos;a&apos; + i</span><br><span class="line">//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">//&lt;-workers[i].done</span><br><span class="line">wg.Add(1)</span><br><span class="line">&#125;</span><br><span class="line">//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">workers[i].in &lt;- &apos;A&apos; + i</span><br><span class="line">//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">//&lt;-workers[i].done</span><br><span class="line">wg.Add(1)</span><br><span class="line">&#125;</span><br><span class="line">wg.Wait()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//main</span><br><span class="line">func main() &#123;</span><br><span class="line">chanDemo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¤ºä¾‹è¿›è¡ŒæŠ½è±¡é‡æ„"><a href="#ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¤ºä¾‹è¿›è¡ŒæŠ½è±¡é‡æ„" class="headerlink" title="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¤ºä¾‹è¿›è¡ŒæŠ½è±¡é‡æ„"></a>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¤ºä¾‹è¿›è¡ŒæŠ½è±¡é‡æ„</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;sync&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func doWorker(id int, w worker) &#123;</span><br><span class="line">/*for true &#123;</span><br><span class="line">//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">break</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">&#125;</span><br><span class="line">&#125;*/</span><br><span class="line">for n := range w.in &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">//é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜é€šçŸ¥å¤–é¢æ‰“å°å®Œæˆ</span><br><span class="line">//done &lt;- true</span><br><span class="line">//channelå‘é€æ•°æ®éœ€è¦åœ¨å¦å¤–çš„goroutineä¸­åš,å¦åˆ™ä¼šå‘ç”Ÿé˜»å¡</span><br><span class="line">//go func() &#123;done&lt;-true&#125;()</span><br><span class="line">//done &lt;- true</span><br><span class="line">w.done()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int, wg *sync.WaitGroup) worker &#123;</span><br><span class="line">w := worker&#123;</span><br><span class="line">in: make(chan int),</span><br><span class="line">done: func() &#123;</span><br><span class="line">wg.Done()</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">//c := make(chan int)</span><br><span class="line">//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">go doWorker(id, w)</span><br><span class="line">//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">return w</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type worker struct &#123;</span><br><span class="line">in   chan int</span><br><span class="line">done func()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//channelç¤ºä¾‹ä»£ç </span><br><span class="line">func chanDemo() &#123;</span><br><span class="line">//goæä¾›çš„ç­‰å¾…å¤šä»»åŠ¡å®Œæˆçš„æ–¹æ³•</span><br><span class="line">var wg sync.WaitGroup</span><br><span class="line">var workers [10]worker</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">//åˆ›å»ºä¸€ä¸ªchannelï¼ˆchannelæ˜¯ä¸€ç­‰å…¬æ°‘,èƒ½ä½œä¸ºå‚æ•°ä¹Ÿèƒ½ä½œä¸ºè¿”å›å€¼ï¼‰</span><br><span class="line">//channels[i] = make(chan int)</span><br><span class="line">//åˆ›å»ºä¸€ä¸ªgoroutineæ¥æ”¶channelä¸­çš„æ•°æ®</span><br><span class="line">workers[i] = createWorker(i, &amp;wg)</span><br><span class="line">&#125;</span><br><span class="line">//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">workers[i].in &lt;- &apos;a&apos; + i</span><br><span class="line">//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">//&lt;-workers[i].done</span><br><span class="line">wg.Add(1)</span><br><span class="line">&#125;</span><br><span class="line">//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">workers[i].in &lt;- &apos;A&apos; + i</span><br><span class="line">//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">//&lt;-workers[i].done</span><br><span class="line">wg.Add(1)</span><br><span class="line">&#125;</span><br><span class="line">wg.Wait()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//main</span><br><span class="line">func main() &#123;</span><br><span class="line">chanDemo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨channelå®ç°æ ‘çš„éå†"><a href="#ä½¿ç”¨channelå®ç°æ ‘çš„éå†" class="headerlink" title="ä½¿ç”¨channelå®ç°æ ‘çš„éå†"></a>ä½¿ç”¨channelå®ç°æ ‘çš„éå†</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">Node.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package tree</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func (node Node) setVal(value int) &#123;</span><br><span class="line">node.Value = value</span><br><span class="line">&#125;</span><br><span class="line">func (node *Node) setValue(value int) &#123;</span><br><span class="line">node.Value = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å®šä¹‰ç±»å‹</span><br><span class="line">type Node struct &#123;</span><br><span class="line">Value       int</span><br><span class="line">Left, Right *Node</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å®šä¹‰print</span><br><span class="line">func (node Node) Print() &#123;</span><br><span class="line">fmt.Print(node.Value, &quot; &quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//éå†æ ‘</span><br><span class="line">func (node *Node) Traverse() &#123;</span><br><span class="line">node.TraverseFunc(func(n *Node) &#123;</span><br><span class="line">if node == nil &#123;</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">n.Print()</span><br><span class="line">&#125;)</span><br><span class="line">fmt.Println()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//éå†æ ‘åŒæ—¶åšä»€ä¹ˆæ“ä½œç”±ä¼ é€’çš„å‡½æ•°å†³å®š</span><br><span class="line">func (node *Node) TraverseFunc(f func(node *Node)) &#123;</span><br><span class="line">if node == nil &#123;</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">node.Left.TraverseFunc(f)</span><br><span class="line">f(node)</span><br><span class="line">node.Right.TraverseFunc(f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨channelå¯¹æ ‘è¿›è¡Œéå†</span><br><span class="line">func (node *Node) TraverseWithChannel() chan *Node &#123;</span><br><span class="line">out := make(chan *Node)</span><br><span class="line">go func() &#123;</span><br><span class="line">node.TraverseFunc(</span><br><span class="line">func(node *Node) &#123;</span><br><span class="line">out &lt;- node</span><br><span class="line">&#125;,</span><br><span class="line">)</span><br><span class="line">close(out)</span><br><span class="line">&#125;()</span><br><span class="line">return out</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;world.ismyfree/go-learning/tree&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">root := tree.Node&#123;Value: 3&#125;</span><br><span class="line">root.Left = &amp;tree.Node&#123;&#125;</span><br><span class="line">root.Right = &amp;tree.Node&#123;Value: 5&#125;</span><br><span class="line">root.Left.Right = &amp;tree.Node&#123;Value: 2&#125;</span><br><span class="line">root.Right.Left = &amp;tree.Node&#123;Value: 4&#125;</span><br><span class="line">root.Traverse()</span><br><span class="line">count := 0</span><br><span class="line">root.TraverseFunc(func(node *tree.Node) &#123;</span><br><span class="line">count++</span><br><span class="line">&#125;)</span><br><span class="line">fmt.Println(&quot;Node count: &quot;, count)</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨channeléå†æ ‘è·å–æœ€å¤§å€¼</span><br><span class="line">c := root.TraverseWithChannel()</span><br><span class="line">maxNode := 0</span><br><span class="line">for node := range c &#123;</span><br><span class="line">if node.Value &gt; maxNode &#123;</span><br><span class="line">maxNode = node.Value</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(&quot;Max node value:&quot;, maxNode)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨selectæ–¹å¼å¯¹chnnelè¿›è¡Œè°ƒåº¦"><a href="#ä½¿ç”¨selectæ–¹å¼å¯¹chnnelè¿›è¡Œè°ƒåº¦" class="headerlink" title="ä½¿ç”¨selectæ–¹å¼å¯¹chnnelè¿›è¡Œè°ƒåº¦"></a>ä½¿ç”¨selectæ–¹å¼å¯¹chnnelè¿›è¡Œè°ƒåº¦</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;math/rand&quot;</span><br><span class="line">&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func worker(id int, c chan int) &#123;</span><br><span class="line">/*for true &#123;</span><br><span class="line">//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">break</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">&#125;</span><br><span class="line">&#125;*/</span><br><span class="line">for n := range c &#123;</span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line">fmt.Printf(&quot;worker %d received %d\n&quot;, id, n)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int) chan&lt;- int &#123;</span><br><span class="line">c := make(chan int)</span><br><span class="line">//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">go worker(id, c)</span><br><span class="line">//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">return c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func generator() chan int &#123;</span><br><span class="line">out := make(chan int)</span><br><span class="line">go func() &#123;</span><br><span class="line">i := 0</span><br><span class="line">for true &#123;</span><br><span class="line">time.Sleep(time.Duration(rand.Intn(1500)) * time.Millisecond)</span><br><span class="line">out &lt;- i</span><br><span class="line">i++</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line">return out</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">var c1, c2 = generator(), generator()</span><br><span class="line">var worker = createWorker(0)</span><br><span class="line">var values []int</span><br><span class="line">//10såå¾€è¿™ä¸ªchannelå‘é€æ—¶é—´</span><br><span class="line">afterTenSecond := time.After(10 * time.Second)</span><br><span class="line">//æ¯ç§’å¾€è¿™ä¸ª</span><br><span class="line">tick := time.Tick(time.Second)</span><br><span class="line">for true &#123;</span><br><span class="line">var activeWorker chan&lt;- int</span><br><span class="line">var activeValue int</span><br><span class="line">if len(values) &gt; 0 &#123;</span><br><span class="line">activeWorker = worker</span><br><span class="line">activeValue = values[0]</span><br><span class="line">&#125;</span><br><span class="line">select &#123;</span><br><span class="line">case n := &lt;-c1:</span><br><span class="line">values = append(values, n)</span><br><span class="line">case n := &lt;-c2:</span><br><span class="line">values = append(values, n)</span><br><span class="line">case activeWorker &lt;- activeValue:</span><br><span class="line">values = values[1:]</span><br><span class="line">case &lt;-time.After(500 * time.Millisecond):</span><br><span class="line">//æ¯æ¬¡è¿›å¯»é­‚ç”Ÿæˆæ•°æ®è¶…è¿‡500æ¯«ç§’æ‰“å°time out</span><br><span class="line">fmt.Println(&quot;time out&quot;)</span><br><span class="line">case &lt;-tick:</span><br><span class="line">fmt.Println(&quot;queue len = &quot;, len(values))</span><br><span class="line">case &lt;-afterTenSecond:</span><br><span class="line">//10såå†²è¿™ä¸ªchannelè·å–åˆ°æ•°æ®ç»“æŸç¨‹åº</span><br><span class="line">fmt.Println(&quot;Bye&quot;)</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¼ ç»ŸåŒæ­¥æœºåˆ¶"><a href="#ä¼ ç»ŸåŒæ­¥æœºåˆ¶" class="headerlink" title="ä¼ ç»ŸåŒæ­¥æœºåˆ¶"></a>ä¼ ç»ŸåŒæ­¥æœºåˆ¶</h3><blockquote><p>WaitGroup</p></blockquote><blockquote><p>Mutex(äº’æ–¥é‡)</p></blockquote><blockquote><p>cond(æ¡ä»¶å˜é‡)</p></blockquote><h4 id="Mutexç¤ºä¾‹-çœŸå®æ“ä½œè¯·ä½¿ç”¨ç³»ç»Ÿåº“æä¾›çš„åŸå­æ“ä½œï¼Œè¿™é‡Œä»…ä½œä¸ºç¤ºä¾‹"><a href="#Mutexç¤ºä¾‹-çœŸå®æ“ä½œè¯·ä½¿ç”¨ç³»ç»Ÿåº“æä¾›çš„åŸå­æ“ä½œï¼Œè¿™é‡Œä»…ä½œä¸ºç¤ºä¾‹" class="headerlink" title="Mutexç¤ºä¾‹(çœŸå®æ“ä½œè¯·ä½¿ç”¨ç³»ç»Ÿåº“æä¾›çš„åŸå­æ“ä½œï¼Œè¿™é‡Œä»…ä½œä¸ºç¤ºä¾‹)"></a>Mutexç¤ºä¾‹(çœŸå®æ“ä½œè¯·ä½¿ç”¨ç³»ç»Ÿåº“æä¾›çš„åŸå­æ“ä½œï¼Œè¿™é‡Œä»…ä½œä¸ºç¤ºä¾‹)</h4><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;sync&quot;</span><br><span class="line">&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type atomicInt struct &#123;</span><br><span class="line">value int</span><br><span class="line">lock sync.Mutex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (a *atomicInt) increment() &#123;</span><br><span class="line">fmt.Println(&quot;safe increment&quot;)</span><br><span class="line">func()&#123;</span><br><span class="line">a.lock.Lock()</span><br><span class="line">defer a.lock.Unlock()</span><br><span class="line">a.value++</span><br><span class="line">&#125;()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (a *atomicInt) get() int &#123;</span><br><span class="line">a.lock.Lock()</span><br><span class="line">defer a.lock.Unlock()</span><br><span class="line">return a.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">var a atomicInt</span><br><span class="line">a.increment()</span><br><span class="line">go func() &#123;</span><br><span class="line">a.increment()</span><br><span class="line">&#125;()</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line">fmt.Println(a.get())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="httpåŠå…¶å®ƒæ ‡å‡†åº“"><a href="#httpåŠå…¶å®ƒæ ‡å‡†åº“" class="headerlink" title="httpåŠå…¶å®ƒæ ‡å‡†åº“"></a>httpåŠå…¶å®ƒæ ‡å‡†åº“</h1><h2 id="httpClientç¤ºä¾‹"><a href="#httpClientç¤ºä¾‹" class="headerlink" title="httpClientç¤ºä¾‹"></a>httpClientç¤ºä¾‹</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;net/http&quot;</span><br><span class="line">&quot;net/http/httputil&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">request, err := http.NewRequest(http.MethodGet, &quot;https://www.imooc.com&quot;, nil)</span><br><span class="line">//æ§åˆ¶è¯·æ±‚çš„å¤´éƒ¨ä¿¡æ¯</span><br><span class="line">request.Header.Add(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1&quot;)</span><br><span class="line">//è‡ªå·±æ„å»ºå®¢æˆ·ç«¯æ‰“å°é‡å®šå‘æ—¶å€™çš„æ“ä½œ</span><br><span class="line">client := http.Client&#123;</span><br><span class="line">CheckRedirect: func(req *http.Request, via []*http.Request) error &#123;</span><br><span class="line">fmt.Println(&quot;Redirect&quot;, req)</span><br><span class="line">return nil</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">//æˆ‘ä»¬ä½¿ç”¨è‡ªå·±æ„å»ºçš„client</span><br><span class="line">resp, err := client.Do(request)</span><br><span class="line">//resp, err := http.DefaultClient.Do(request)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">defer resp.Body.Close()</span><br><span class="line">//ä½¿ç”¨httputilç®€åŒ–å·¥ä½œ</span><br><span class="line">s, err := httputil.DumpResponse(resp, true)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(&quot;%s\n&quot;,s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="httpServeræ€§èƒ½åˆ†æ"><a href="#httpServeræ€§èƒ½åˆ†æ" class="headerlink" title="httpServeræ€§èƒ½åˆ†æ"></a>httpServeræ€§èƒ½åˆ†æ</h2><blockquote><p>åœ¨ç¨‹åºä¸­import _ â€œnet/http/pprofâ€</p></blockquote><blockquote><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ¥å£è·¯å¾„ä¸º/debug/pprof/çš„è¯·æ±‚</p></blockquote><p><img src="/images/img_18.png" alt="http pprofå·¥å…·"></p><blockquote><p>ä½¿ç”¨å‘½ä»¤è¡Œpprofå·¥å…·è·å¾—ç¨‹åº30ç§’çš„æ€§èƒ½è®¿é—®æƒé™(30ç§’å†…éšæ„è®¿é—®æœåŠ¡çš„æ¥å£)</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go tool pprof http://localhost:8888/debug/pprof/profile</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šå‘½ä»¤æ“ä½œå®Œåè¾“å…¥webä»¥å›¾å½¢åŒ–ç•Œé¢è¿›è¡Œåˆ†æç¨‹åºï¼ˆéœ€è¦å®‰è£…Graphvizï¼‰</p></blockquote><blockquote><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go tool pprof http://localhost:8888/debug/pprof/profile</span><br></pre></td></tr></table></figure><h2 id="å…¶å®ƒæ ‡å‡†åº“"><a href="#å…¶å®ƒæ ‡å‡†åº“" class="headerlink" title="å…¶å®ƒæ ‡å‡†åº“"></a>å…¶å®ƒæ ‡å‡†åº“</h2><h3 id="å¸¸ç”¨æ ‡å‡†åº“"><a href="#å¸¸ç”¨æ ‡å‡†åº“" class="headerlink" title="å¸¸ç”¨æ ‡å‡†åº“"></a>å¸¸ç”¨æ ‡å‡†åº“</h3><blockquote><p>bufio</p></blockquote><blockquote><p>log</p></blockquote><blockquote><p>encoding/json</p></blockquote><blockquote><p>regexp</p></blockquote><blockquote><p>time</p></blockquote><blockquote><p>strings/math/rand</p></blockquote><h3 id="èµ·ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£"><a href="#èµ·ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£" class="headerlink" title="èµ·ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£"></a>èµ·ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">godoc -http=:6060</span><br></pre></td></tr></table></figure><h3 id="ä¸­æ–‡æ ‡å‡†åº“ç½‘å€"><a href="#ä¸­æ–‡æ ‡å‡†åº“ç½‘å€" class="headerlink" title="ä¸­æ–‡æ ‡å‡†åº“ç½‘å€"></a>ä¸­æ–‡æ ‡å‡†åº“ç½‘å€</h3><p>ç‚¹æ­¤è¿›è¡Œè·³è½¬<strong><a href="https://studygolang.com/pkgdoc" target="_blank" rel="noopener">goä¸­æ–‡api</a></strong></p><h1 id="è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢"><a href="#è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢"></a>è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢</h1><p><img src="/images/img_19.png" alt="è¿·å®«ç¤ºæ„å›¾"></p><blockquote><p>0ä»£è¡¨å¯ä»¥èµ°çš„åœ°æ–¹</p></blockquote><blockquote><p>1ä»£è¡¨å¢™</p></blockquote><blockquote><p>äººä¸ºè§„å®šå…¥å£å’Œå‡ºå£ä¸ºå·¦ä¸Šè§’å’Œå³ä¸‹è§’</p></blockquote><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><blockquote><p>æƒ³æƒ³æˆ‘ä»¬åœ¨ä¸€ä¸ªæœªçŸ¥çš„ä¸–ç•Œ</p></blockquote><p><img src="/images/img_20.png" alt="ç¬¬0æ­¥"></p><blockquote><p>é¡ºåºæ¢ç´¢å¹¶æ”¾å…¥æœªæ¢ç´¢é˜Ÿåˆ—å½“ä¸­(ä¸Šå·¦ä¸‹å³)</p></blockquote><p><img src="/images/img_21.png" alt="ç¬¬1æ­¥"></p><blockquote><p>æ¯æ¢ç´¢ä¸€ä¸ªç§»é™¤æœªæ¢ç´¢é˜Ÿåˆ—å¹¶å°†æ–°æ¢ç´¢åˆ°æœªæ¢ç´¢çš„åŠ å…¥é˜Ÿåˆ—ä¸­</p></blockquote><p><img src="/images/img_22.png" alt="ç¬¬2æ­¥ä¸Š"></p><p><img src="/images/img_23.png" alt="ç¬¬2æ­¥å·¦"></p><p><img src="/images/img_24.png" alt="ç¬¬2æ­¥ä¸‹"></p><p><img src="/images/img_25.png" alt="ç¬¬2æ­¥å³"></p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line">maze.in</span><br><span class="line">------------------------------------------------------</span><br><span class="line">6 5</span><br><span class="line">0 1 0 0 0</span><br><span class="line">0 0 0 1 0</span><br><span class="line">0 1 0 1 0</span><br><span class="line">1 1 1 0 0</span><br><span class="line">0 1 0 0 1</span><br><span class="line">0 1 0 0 0</span><br><span class="line">------------------------------------------------------</span><br><span class="line">maze.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//è¯»å–è¿·å®«æ–‡ä»¶</span><br><span class="line">func readMaze(filename string) [][]int &#123;</span><br><span class="line">file, err := os.Open(filename)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">panic(err)</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰è¡Œåˆ—ä¸´æ—¶å˜é‡</span><br><span class="line">var row, col int</span><br><span class="line">//æ‰«æç¬¬ä¸€è¡Œè·å–æ–‡ä»¶çš„è¡Œåˆ—æ•°(\nè¯»æ¢è¡Œ)</span><br><span class="line">fmt.Fscanf(file, &quot;%d %d\n&quot;, &amp;row, &amp;col)</span><br><span class="line">//åˆ›å»ºç¬¬ä¸€ç»´slice</span><br><span class="line">maze := make([][]int, row)</span><br><span class="line">for i := range maze &#123;</span><br><span class="line">//åˆ›å»ºç¬¬äºŒç»´slice</span><br><span class="line">maze[i] = make([]int, col)</span><br><span class="line">//å°†æ•°æ®æ”¾åˆ°äºŒç»´sliceä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸­</span><br><span class="line">for j := range maze[i] &#123;</span><br><span class="line">a := &amp;maze[i][j]</span><br><span class="line">if j == len(maze[i])-1 &#123;</span><br><span class="line">//(\nè¯»æ¢è¡Œ)</span><br><span class="line">fmt.Fscanf(file, &quot;%d\n&quot;, a)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">fmt.Fscanf(file, &quot;%d&quot;, a)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return maze</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type point struct &#123;</span><br><span class="line">i, j int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç§»åŠ¨(ä¸Šå·¦ä¸‹å³)</span><br><span class="line">var dirs = [4]point&#123;</span><br><span class="line">&#123;-1, 0&#125;,</span><br><span class="line">&#123;0, -1&#125;,</span><br><span class="line">&#123;1, 0&#125;,</span><br><span class="line">&#123;0, 1&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç§»åŠ¨add</span><br><span class="line">func (p point) add(r point) point &#123;</span><br><span class="line">return point&#123;p.i + r.i, p.j + r.j&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//atæ ¡éªŒå½“å‰ä½ç½®</span><br><span class="line">func (p point) at(grid [][]int) (int, bool) &#123;</span><br><span class="line">//å¾€ä¸Šèµ°æˆ–è€…å¾€ä¸‹èµ°è¶Šç•Œçš„æ—¶å€™</span><br><span class="line">if p.i &lt; 0 || p.i &gt;= len(grid) &#123;</span><br><span class="line">return 0, false</span><br><span class="line">&#125;</span><br><span class="line">//å¾€å·¦èµ°æˆ–è€…å¾€å³èµ°è¶Šç•Œçš„æ—¶å€™</span><br><span class="line">if p.j &lt; 0 || p.j &gt;= len(grid[p.i]) &#123;</span><br><span class="line">return 0, false</span><br><span class="line">&#125;</span><br><span class="line">return grid[p.i][p.j],true</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//èµ°è¿·å®«</span><br><span class="line">func walk(maze [][]int, start, end point) [][]int&#123;</span><br><span class="line">//è¦èµ°çš„æ¯ä¸€æ­¥</span><br><span class="line">steps := make([][]int, len(maze))</span><br><span class="line">for i := range steps &#123;</span><br><span class="line">steps[i] = make([]int, len(maze[i]))</span><br><span class="line">&#125;</span><br><span class="line">//å°†èµ·ç‚¹æ”¾å…¥é˜Ÿåˆ—å½“ä¸­</span><br><span class="line">Q := []point&#123;start&#125;</span><br><span class="line"></span><br><span class="line">for len(Q) &gt; 0 &#123;</span><br><span class="line">//å–å‡ºé˜Ÿåˆ—ä¸­å½“å‰çš„ä½ç½®ä½œä¸ºè¦æ¢ç´¢çš„ç‚¹</span><br><span class="line">cur := Q[0]</span><br><span class="line">Q = Q[1:]</span><br><span class="line">//åˆ¤æ–­å½“å‰æ¢ç´¢ç‚¹æ˜¯å¦æ˜¯ç»ˆç‚¹</span><br><span class="line">if cur == end &#123;</span><br><span class="line">break</span><br><span class="line">&#125;</span><br><span class="line">for _, dir := range dirs &#123;</span><br><span class="line">next := cur.add(dir)</span><br><span class="line">//å¦‚æœè¶Šç•Œæˆ–è€…æ’å¢™,ç»§ç»­æ¢ç´¢</span><br><span class="line">val, ok := next.at(maze)</span><br><span class="line">if !ok || val == 1 &#123;</span><br><span class="line">continue</span><br><span class="line">&#125;</span><br><span class="line">//å¦‚æœå½“å‰æœ‰å€¼è¯´æ˜å·²ç»æœ‰å€¼äº†ï¼Œç»§ç»­æ¢ç´¢</span><br><span class="line">val, ok = next.at(steps)</span><br><span class="line">if !ok || val != 0 &#123;</span><br><span class="line">continue</span><br><span class="line">&#125;</span><br><span class="line">//å¦‚æœå½“å‰ç‚¹åœ¨èµ·ç‚¹ç»§ç»­æ¢ç´¢</span><br><span class="line">if next == start &#123;</span><br><span class="line">continue</span><br><span class="line">&#125;</span><br><span class="line">//æ¢ç´¢(éœ€è¦åšçš„äº‹ï¼š1.æ¢ç´¢åˆ°çš„ä¸‹ä¸€æ­¥å¡«ä¸Šæ˜¯ç¬¬å‡ æ­¥2.å°†æ¢ç´¢åˆ°çš„ä¸‹ä¸€æ­¥åŠ å…¥åˆ°é˜Ÿåˆ—)</span><br><span class="line">curSteps, _ := cur.at(steps)</span><br><span class="line">steps[next.i][next.j] = curSteps + 1</span><br><span class="line">Q = append(Q, next)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return steps</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">maze := readMaze(&quot;maze/maze.in&quot;)</span><br><span class="line">fmt.Println(&quot;print maze&quot;)</span><br><span class="line">fmt.Println(&quot;-----------------------&quot;)</span><br><span class="line">//æ‰“å°è¯»å–å‡ºæ¥çš„æ•°æ®</span><br><span class="line">for _, row := range maze &#123;</span><br><span class="line">for _, val := range row &#123;</span><br><span class="line">fmt.Printf(&quot;%d &quot;, val)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println()</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(&quot;-----------------------&quot;)</span><br><span class="line">fmt.Println(&quot;print steps&quot;)</span><br><span class="line">fmt.Println(&quot;-----------------------&quot;)</span><br><span class="line">//èµ°è¿·å®«</span><br><span class="line">steps := walk(maze, point&#123;0, 0&#125;, point&#123;len(maze) - 1, len(maze[0]) - 1&#125;)</span><br><span class="line">for _,row := range steps &#123;</span><br><span class="line">for _, val := range row &#123;</span><br><span class="line">fmt.Printf(&quot;%3d &quot;,val)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println()</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(&quot;-----------------------&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ‰“å°ç»“æœ</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">print maze</span><br><span class="line">-----------------------</span><br><span class="line">0 1 0 0 0 </span><br><span class="line">0 0 0 1 0 </span><br><span class="line">0 1 0 1 0 </span><br><span class="line">1 1 1 0 0 </span><br><span class="line">0 1 0 0 1 </span><br><span class="line">0 1 0 0 0 </span><br><span class="line">-----------------------</span><br><span class="line">print steps</span><br><span class="line">-----------------------</span><br><span class="line">  0   0   4   5   6 </span><br><span class="line">  1   2   3   0   7 </span><br><span class="line">  2   0   4   0   8 </span><br><span class="line">  0   0   0  10   9 </span><br><span class="line">  0   0  12  11   0 </span><br><span class="line">  0   0  13  12  13 </span><br><span class="line">-----------------------</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Keepalivedå®ç°nginxåŒæœºä¸»å¤‡æˆ–åŒæœºçƒ­å¤‡é«˜å¯ç”¨</title>
      <link href="/2020/11/23/Keepalived%E5%AE%9E%E7%8E%B0nginx%E5%8F%8Cj%E6%9C%BA%E4%B8%BB%E5%A4%87%E6%88%96%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E9%AB%98%E5%8F%AF%E7%94%A8/"/>
      <url>/2020/11/23/Keepalived%E5%AE%9E%E7%8E%B0nginx%E5%8F%8Cj%E6%9C%BA%E4%B8%BB%E5%A4%87%E6%88%96%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E9%AB%98%E5%8F%AF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="HAé«˜å¯ç”¨"><a href="#HAé«˜å¯ç”¨" class="headerlink" title="HAé«˜å¯ç”¨"></a>HAé«˜å¯ç”¨</h1><p><img src="/images/img_45.png" alt="HAé«˜å¯ç”¨æ¶æ„å›¾"></p><h1 id="Keepalivedä»‹ç»"><a href="#Keepalivedä»‹ç»" class="headerlink" title="Keepalivedä»‹ç»"></a>Keepalivedä»‹ç»</h1><blockquote><p>è§£å†³å•ç‚¹æ•…éšœ</p></blockquote><blockquote><p>ç»„ä»¶å…è´¹</p></blockquote><blockquote><p>å¯ä»¥å®ç°é«˜å¯ç”¨HAæœºåˆ¶</p></blockquote><blockquote><p>åŸºäºVRRPåè®®</p><blockquote><p>æ£€æµ‹nginxçŠ¶æ€ï¼Œå‘ç”Ÿæ•…éšœåˆ‡æ¢åˆ°å¤‡ç”¨æœºï¼Œè¿˜å¯é‚®ä»¶é€šçŸ¥ç®¡ç†å‘˜ã€‚<br>ä¸»æœºä¿®å¤å®Œæˆå¯ä»¥é€šè¿‡keepalivedè‡ªåŠ¨åŠ å…¥å†…ç½‘ï¼Œé‡æ–°æˆä¸ºä¸»æœºï¼Œå¤‡ç”¨æœºä¼šè®©ä¸»æœºç»§ç»­å·¥ä½œ<br>ä¸€åˆ‡è¿‡ç¨‹ç”±keepalivedå¤„ç†ï¼Œäººå·¥å¹²é¢„çš„åªæœ‰ä¿®å¤å‡ºæ•…éšœçš„nginxèŠ‚ç‚¹</p></blockquote></blockquote><h2 id="VRRPåè®®"><a href="#VRRPåè®®" class="headerlink" title="VRRPåè®®"></a>VRRPåè®®</h2><blockquote><p>Virtual Router Redundance Protocolï¼ˆè™šæ‹Ÿè·¯ç”±å†—ä½™åè®®ï¼‰</p></blockquote><blockquote><p>è§£å†³å†…ç½‘å•æœºæ•…éšœçš„è·¯ç”±åè®®</p></blockquote><blockquote><p>æ„å»ºæœ‰å¤šä¸ªè·¯ç”±å™¨ MASTER BACKUP</p></blockquote><blockquote><p>è™šæ‹ŸIP - VIP ï¼ˆVirtual IP Addressï¼‰</p></blockquote><h2 id="keepaliveåŒæœºä¸»å¤‡åŸç†"><a href="#keepaliveåŒæœºä¸»å¤‡åŸç†" class="headerlink" title="keepaliveåŒæœºä¸»å¤‡åŸç†"></a>keepaliveåŒæœºä¸»å¤‡åŸç†</h2><p><img src="/images/img_46.png" alt="KeepAlivedåŒæœºä¸»å¤‡åŸç†"></p><blockquote><p>ç”¨æˆ·è¯·æ±‚è™šæ‹Ÿipè™šæ‹Ÿipä¸nginxç»‘å®šåˆ°ä¸€èµ·ã€‚</p></blockquote><blockquote><p>ç”±äºkeepalivedä¼šè¿›è¡Œå¿ƒè·³æ£€æµ‹nginxæŒ‚äº†åè™šæ‹Ÿipä¼šä¸æˆ‘ä»¬çš„å¤‡ç”¨nginxç»‘å®šåˆ°ä¸€èµ·ã€‚</p></blockquote><blockquote><p>ä¸»å¤‡èŠ‚ç‚¹é…ç½®éœ€è¦ä¿æŒä¸€è‡´}ï¼ˆå¦‚æœå¤‡ç”¨èŠ‚ç‚¹æœºå™¨é…ç½®ä½äºä¸»èŠ‚ç‚¹æœºå™¨å¯èƒ½å‘ç”Ÿç¬é—´å®•æœºçš„æƒ…å†µï¼‰</p></blockquote><h1 id="å®‰è£…Keepalived"><a href="#å®‰è£…Keepalived" class="headerlink" title="å®‰è£…Keepalived"></a>å®‰è£…Keepalived</h1><blockquote><p>å®‰è£…libnl/libnl-3ä¾èµ–</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libnl libnl-devel</span><br></pre></td></tr></table></figure><blockquote><p>æ‰“å¼€<a href="https://www.keepalived.org/" target="_blank" rel="noopener">keepalivedå®˜ç½‘</a>é€‰æ‹©downloadé€‰æ‹©å“åº”çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p></blockquote><blockquote><p>è§£å‹å®‰è£…åŒ…</p></blockquote><blockquote><p>è¿›å…¥ç›®å½•æ‰§è¡Œå‘½ä»¤è¿›è¡Œé…ç½®ç”Ÿæˆé…ç½®æ–‡ä»¶</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/keepalived --sysconf=/etc</span><br></pre></td></tr></table></figure><blockquote><p>å„ä¸ªå‚æ•°ä»£è¡¨çš„å«ä¹‰</p></blockquote><table><thead><tr><th>å‚æ•°</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>â€“prefix</td><td>æŒ‡å®škeepalivedå®‰è£…ä½ç½®</td></tr><tr><td>â€“sysconf</td><td>æ ¸å¿ƒé…ç½®æ–‡ä»¶è·¯å¾„(è¦æ˜¯ä¸è®¾ç½®åˆ°è¿™ä¸ªç›®å½•ä¸‹é¢çš„è¯åé¢æ—¥å¿—ä¼šæŠ¥ä¸€ä¸ªé”™åœ¨/etcç›®å½•ä¸‹æ‰¾ä¸åˆ°keepalived,æ ¸å¿ƒé…ç½®æ–‡ä»¶è·¯å¾„ä¸º/etc/keepalived/keepalived.conf)</td></tr></tbody></table><h1 id="ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶</h1><blockquote><p>ä¸»èŠ‚ç‚¹é…ç½®æ–‡ä»¶</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">global_defs &#123;</span><br><span class="line">    # è·¯ç”±idï¼šå½“å‰å®‰è£…keepalivedçš„èŠ‚ç‚¹ä¸»æœºæ ‡è¯†ç¬¦ï¼Œä¿è¯å…¨å±€å”¯ä¸€</span><br><span class="line">    router_id keep_001</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    # è¡¨ç¤ºçŠ¶æ€æ˜¯MASTERä¸»æœºè¿˜æ˜¯å¤‡ç”¨æœºBACKUP</span><br><span class="line">    state MASTER</span><br><span class="line">    # è¯¥å®ä¾‹ç»‘å®šçš„ç½‘å¡ï¼ˆå¯ä»¥ä½¿ç”¨ ip addr æ‰§è¡ŒæŸ¥çœ‹ï¼‰</span><br><span class="line">    interface ens33</span><br><span class="line">    # è™šæ‹Ÿè·¯ç”±Idï¼Œä¿è¯ä¸»å¤‡èŠ‚ç‚¹ä¸€è‡´å³å¯</span><br><span class="line">    virtual_router_id 101</span><br><span class="line">    # æƒé‡ï¼Œmasteræƒé‡ä¸€èˆ¬é«˜äºbackupï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé‚£å°±æ˜¯é€‰ä¸¾ï¼Œè°çš„æƒé‡é«˜ï¼Œè°å°±å½“é€‰</span><br><span class="line">    priority 100</span><br><span class="line">    # ä¸»å¤‡ä¹‹é—´åŒæ­¥æ£€æŸ¥æ—¶é—´é—´éš”ï¼Œå•ä½ç§’</span><br><span class="line">    advert_int 1</span><br><span class="line">    # è®¤è¯æƒé™å¯†ç ï¼Œé˜²æ­¢éæ³•èŠ‚ç‚¹è¿›å…¥</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    # è™šæ‹Ÿå‡ºæ¥çš„ipï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼ˆvipï¼‰</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.88.88</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¤‡ç”¨èŠ‚ç‚¹é…ç½®æ–‡ä»¶</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">global_defs &#123;</span><br><span class="line">    # è·¯ç”±idï¼šå½“å‰å®‰è£…keepalivedçš„èŠ‚ç‚¹ä¸»æœºæ ‡è¯†ç¬¦ï¼Œä¿è¯å…¨å±€å”¯ä¸€</span><br><span class="line">    router_id keep_002</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    # è¡¨ç¤ºçŠ¶æ€æ˜¯MASTERä¸»æœºè¿˜æ˜¯å¤‡ç”¨æœºBACKUP</span><br><span class="line">    state BACKUP</span><br><span class="line">    # è¯¥å®ä¾‹ç»‘å®šçš„ç½‘å¡ï¼ˆå¯ä»¥ä½¿ç”¨ ip addr æ‰§è¡ŒæŸ¥çœ‹ï¼‰</span><br><span class="line">    interface ens33</span><br><span class="line">    # è™šæ‹Ÿè·¯ç”±Idï¼Œä¿è¯ä¸»å¤‡èŠ‚ç‚¹ä¸€è‡´å³å¯</span><br><span class="line">    virtual_router_id 101</span><br><span class="line">    # æƒé‡ï¼Œmasteræƒé‡ä¸€èˆ¬é«˜äºbackupï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé‚£å°±æ˜¯é€‰ä¸¾ï¼Œè°çš„æƒé‡é«˜ï¼Œè°å°±å½“é€‰</span><br><span class="line">    priority 80</span><br><span class="line">    # ä¸»å¤‡ä¹‹é—´åŒæ­¥æ£€æŸ¥æ—¶é—´é—´éš”ï¼Œå•ä½ç§’</span><br><span class="line">    advert_int 1</span><br><span class="line">    # è®¤è¯æƒé™å¯†ç ï¼Œé˜²æ­¢éæ³•èŠ‚ç‚¹è¿›å…¥</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    # è™šæ‹Ÿå‡ºæ¥çš„ipï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼ˆvipï¼‰</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.88.88</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>linuxæ·»åŠ å®šæ—¶ä»»åŠ¡</title>
      <link href="/2020/11/13/linux%E6%B7%BB%E5%8A%A0%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
      <url>/2020/11/13/linux%E6%B7%BB%E5%8A%A0%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…å®šæ—¶ä»»åŠ¡"><a href="#å®‰è£…å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®‰è£…å®šæ—¶ä»»åŠ¡"></a>å®‰è£…å®šæ—¶ä»»åŠ¡</h1><ul><li>å®‰è£…å®šæ—¶ä»»åŠ¡(centos6æˆ–centos7å·²ç»å­å¼¹)</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install crontabs</span><br></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹å½“å‰å·²ç»å­˜åœ¨çš„å®šæ—¶ä»»åŠ¡"><a href="#æŸ¥çœ‹å½“å‰å·²ç»å­˜åœ¨çš„å®šæ—¶ä»»åŠ¡" class="headerlink" title="æŸ¥çœ‹å½“å‰å·²ç»å­˜åœ¨çš„å®šæ—¶ä»»åŠ¡"></a>æŸ¥çœ‹å½“å‰å·²ç»å­˜åœ¨çš„å®šæ—¶ä»»åŠ¡</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br></pre></td></tr></table></figure><h1 id="ç¼–è¾‘å®šæ—¶ä»»åŠ¡"><a href="#ç¼–è¾‘å®šæ—¶ä»»åŠ¡" class="headerlink" title="ç¼–è¾‘å®šæ—¶ä»»åŠ¡"></a>ç¼–è¾‘å®šæ—¶ä»»åŠ¡</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><h1 id="ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡"><a href="#ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡" class="headerlink" title="ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡"></a>ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡</h1><ul><li>å‰é¢æ˜¯è¡¨è¾¾å¼,åé¢æ˜¯è¦å®šæ—¶æ‰§è¡Œçš„è„šæœ¬<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * /usr/local/nginx/sbin/cut_my_log.sh</span><br></pre></td></tr></table></figure></li></ul><h1 id="é‡å¯å®šæ—¶ä»»åŠ¡"><a href="#é‡å¯å®šæ—¶ä»»åŠ¡" class="headerlink" title="é‡å¯å®šæ—¶ä»»åŠ¡"></a>é‡å¯å®šæ—¶ä»»åŠ¡</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service crond restart</span><br></pre></td></tr></table></figure><h1 id="å®šæ—¶ä»»åŠ¡å¸¸ç”¨å‘½ä»¤"><a href="#å®šæ—¶ä»»åŠ¡å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å®šæ—¶ä»»åŠ¡å¸¸ç”¨å‘½ä»¤"></a>å®šæ—¶ä»»åŠ¡å¸¸ç”¨å‘½ä»¤</h1><table><thead><tr><th>å‘½ä»¤</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>service crond restart</td><td>å¯åŠ¨æœåŠ¡</td></tr><tr><td>service crond stop</td><td>å…³é—­æœåŠ¡</td></tr><tr><td>service crond restart</td><td>é‡å¯æœåŠ¡</td></tr><tr><td>service crond reload</td><td>é‡æ–°è½½å…¥é…ç½®</td></tr><tr><td>crontab -e</td><td>ç¼–è¾‘ä»»åŠ¡</td></tr><tr><td>crontab -l</td><td>æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> å®šæ—¶ä»»åŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxæ ¸å¿ƒé…ç½®åŠè¿›ç¨‹äº‹ä»¶æ¨¡å‹</title>
      <link href="/2020/11/12/Nginx%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%BF%9B%E7%A8%8B%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B/"/>
      <url>/2020/11/12/Nginx%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%BF%9B%E7%A8%8B%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="nginxé»˜è®¤é…ç½®æ–‡ä»¶"><a href="#nginxé»˜è®¤é…ç½®æ–‡ä»¶" class="headerlink" title="nginxé»˜è®¤é…ç½®æ–‡ä»¶"></a>nginxé»˜è®¤é…ç½®æ–‡ä»¶</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line">#userå¯ä»¥é…ç½®æ–‡ä»¶ç›®å½•è®¿é—®çš„ç”¨æˆ·</span><br><span class="line">#user  nobody;</span><br><span class="line"># worker_processeså¯ä»¥æŒ‡å®šå·¥ä½œè¿›ç¨‹çš„æ•°é‡</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">#error_log  logs/error.log;</span><br><span class="line">#error_log  logs/error.log  notice;</span><br><span class="line">#error_log  logs/error.log  info;</span><br><span class="line"></span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">#äº‹ä»¶å¤„ç†</span><br><span class="line">events &#123;</span><br><span class="line"> Â  Â use epoll;#é»˜è®¤ä½¿ç”¨epoll</span><br><span class="line"> Â  Â worker_connections  1024;</span><br><span class="line"> Â  Â #æ¯ä¸ªworkerå·¥ä½œè¿›ç¨‹å…è®¸è¿æ¥å®¢æˆ·ç«¯çš„æœ€å¤§è¿æ¥æ•°ï¼ˆå¯ä»¥é…ç½®ï¼‰</span><br><span class="line"> Â  Â #nginxä¹‹æ‰€ä»¥èƒ½å¤„ç†é«˜å¹¶å‘å°±æ˜¯å› ä¸ºè¿™é‡ŒåŠnginxçš„äº‹ä»¶å¤„ç†æ¨¡å‹</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line"> Â  Â #includeåŒ…å«å¯¼å…¥å¤–éƒ¨æ–‡ä»¶ï¼ˆmime.typesåœ¨configç›®å½•ä¸‹ï¼ŒåŒ…å«äº†å¹³æ—¶è¯·æ±‚åŒ…å«çš„ç±»å‹ï¼‰ï¼Œæé«˜å¯è¯»æ€§</span><br><span class="line"> Â  Â #æˆ‘ä»¬è‡ªå·±é€šè¿‡includeå¯¼å…¥serveré…ç½®ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„(å¯¼å…¥é…ç½®ä¸€å®šè¦è®°å¾—åŠ åˆ†å·)</span><br><span class="line"> Â  Â include Â  Â  Â  mime.types;</span><br><span class="line"> Â  Â #é»˜è®¤çš„typeç±»å‹</span><br><span class="line"> Â  Â default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line"> Â  Â #æ—¥å¿—æ ¼å¼çš„é…ç½®ï¼ˆé»˜è®¤è‡ªå¸¦æ—¥å¿—æ ¼å¼ä¸éœ€è¦é…ç½®/å¦‚æœéœ€è¦å®šåˆ¶åŒ–æ—¥å¿—æ ¼å¼å¯ä»¥å¯¹å…¶è¿›è¡Œé…ç½®ï¼‰</span><br><span class="line"> Â  Â #log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">    #                  &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">    #                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line">    </span><br><span class="line"> Â  Â #httpè¯·æ±‚æ—¥å¿—è·¯å¾„ï¼ŒåŒæ—¶ä»£è¡¨æˆ‘ä»¬nginxçš„æ€§èƒ½ä¹Ÿå¾—åˆ°äº†æå‡</span><br><span class="line"> Â  Â #access_log  logs/access.log  main;</span><br><span class="line"> Â  Â #æ‰“å¼€sendfileå¯å¼€å¯æ–‡ä»¶çš„é«˜æ•ˆä¼ è¾“</span><br><span class="line"> Â  Â sendfile Â  Â  Â   on;</span><br><span class="line"> Â  Â #å¼€å¯sendfileæ‰å¯ä»¥å¼€å¯tcp_nopush,è¡¨ç¤ºæ•°æ®åŒ…ç´¯ç§¯åˆ°ä¸€å®šå¤§å°è¿‡åå†å¼€å§‹å‘é€ï¼Œæå‡æ–‡ä»¶ä¼ è¾“çš„æ•ˆç‡ï¼ˆç±»æ¯”å¤–å–å°å“¥æ‰“åŒ…é€é¤æ”¾åˆ°é›†è£…ç®±æé«˜å·¥ä½œæ•ˆç‡ï¼‰/ä¸å¼€å¯åˆ™ä½¿ç”¨åŒæ­¥é˜»å¡çš„æ–¹å¼ï¼Œæ•ˆç‡æ˜¯æå…¶ä½ä¸‹çš„ã€‚</span><br><span class="line"> Â  Â #tcp_nopush Â  Â  on;</span><br><span class="line"></span><br><span class="line"> Â  Â #keepalive_timeoutå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨å¯ä»¥ä¿æŒè¿æ¥çš„æ—¶é—´</span><br><span class="line"> Â  Â #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â #å†…å®¹ä¼ è¾“è¿›è¡Œå‹ç¼©ï¼ŒèŠ‚çº¦æœåŠ¡å™¨å¸¦å®½çš„å¼€é”€ï¼Œä¸è¿‡å‹ç¼©è‚¯å®šä¼šæ¶ˆè€—æœåŠ¡å™¨çš„æ€§èƒ½</span><br><span class="line"> Â  Â #gzip  on;</span><br><span class="line">    </span><br><span class="line"> Â  Â #é™åˆ¶æœ€å°å‹ç¼©ï¼Œæ–‡ä»¶å†…å®¹å°äº1ä¸ªå­—èŠ‚å°±ä¸ä¼šå¯¹å…¶è¿›è¡Œå‹ç¼©</span><br><span class="line"> Â  Â #gzip_min_length 1;</span><br><span class="line">    </span><br><span class="line"> Â  Â #å®šä¹‰å‹ç¼©çš„çº§åˆ«ï¼ˆå‹ç¼©æ¯”ï¼Œæ–‡ä»¶è¶Šå¤§ï¼Œå‹ç¼©è¶Šå¤šï¼Œä½†æ˜¯cpuæ¶ˆè€—å°±æ›´å¤šï¼‰</span><br><span class="line">    #gzip_min_lenght 3;</span><br><span class="line">    </span><br><span class="line"> Â  Â #å®šä¹‰å‹ç¼©æ–‡ä»¶çš„ç±»å‹</span><br><span class="line"> Â  Â #gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/json</span><br><span class="line"></span><br><span class="line"> Â  Â #ä¸ºè™šæ‹Ÿä¸»æœºé…ç½®ç›‘å¬ä¿¡æ¯ï¼ˆå¯ä»¥é…ç½®å¤šå—ï¼‰</span><br><span class="line"> Â  Â server &#123;</span><br><span class="line"> Â  Â  Â  Â #ç›‘å¬çš„ç«¯å£å·</span><br><span class="line"> Â  Â  Â  Â listen Â  Â  Â  80;</span><br><span class="line"> Â  Â  Â  Â #æœåŠ¡å™¨åç§°ï¼ˆå¯ä»¥æ˜¯å¤‡æ¡ˆè¿‡ååŸŸåæˆ–ipæˆ–è€…æ˜¯localhostï¼‰</span><br><span class="line"> Â  Â  Â  Â server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line"> Â  Â  Â  Â #è·¯ç”±ï¼Œæ‰¾åˆ°å¯¹åº”çš„é¡µé¢</span><br><span class="line"> Â  Â  Â  Â location / &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â #èµ„æºè·¯å¾„ï¼ˆå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œè¿™é‡Œæ˜¯ç›¸å¯¹è·¯å¾„ï¼‰</span><br><span class="line"> Â  Â  Â  Â  Â  Â root Â  html;</span><br><span class="line"> Â  Â  Â  Â  Â  Â #æ ¹è·¯å¾„é»˜è®¤è®¿é—®çš„èµ„æº</span><br><span class="line"> Â  Â  Â  Â  Â  Â index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"> Â  Â  Â  Â #é”™è¯¯é¡µé¢å±•ç¤º</span><br><span class="line"> Â  Â  Â  Â #error_page  404 Â  Â  Â  Â  Â  Â   /404.html;</span><br><span class="line"></span><br><span class="line"> Â  Â  Â  Â #å‘ç”Ÿ50xé”™è¯¯çš„æ—¶å€™é‡å®šå‘åˆ°ç›¸å…³é”™è¯¯é¡µé¢</span><br><span class="line"> Â  Â  Â  Â # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache&apos;s document root</span><br><span class="line">        # concurs with nginx&apos;s one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line"> Â  Â  Â  Â #ä»¥ä¸Šé…ç½®å¤šä¸ªèµ„æºè·¯å¾„</span><br><span class="line">        </span><br><span class="line"> Â  Â  Â  Â #ä»¥åˆ«åå½¢å¼é…ç½®è·¯å¾„(éšè—çœŸå®èµ„æºè·¯å¾„)</span><br><span class="line"> Â  Â  Â  Â #location /resource &#123;</span><br><span class="line"> Â  Â  Â  Â # Â  Â #å°†èµ„æºè·¯å¾„resourceæ˜ å°„åˆ°/xxx/xxx/xxx/resourceè·¯å¾„ä¸‹</span><br><span class="line"> Â  Â  Â  Â # Â  Â alias /xxx/xxx/xxx/resource;</span><br><span class="line"> Â  Â  Â  Â #&#125;</span><br><span class="line"></span><br><span class="line"> Â  Â &#125;</span><br><span class="line"> Â  Â #é…ç½®ä¸Šæ¸¸æœåŠ¡å™¨</span><br><span class="line"> Â  Â upstream tomcats &#123;</span><br><span class="line"> Â  Â  Â  Â #é»˜è®¤ä½¿ç”¨è½®è¯¢ç­–ç•¥ï¼Œæ·»åŠ weightæ ¹æ®æƒé‡é€‰æ‹©æ‰§è¡Œçš„æœºå™¨</span><br><span class="line"> Â  Â  Â  Â server 192.168.1.101:8080 weight=1;</span><br><span class="line">        server 192.168.1.102:8080;</span><br><span class="line">        server 192.168.1.103:8080;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"> Â  Â #å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸï¼Œ*ä»£è¡¨æ‰€æœ‰</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Origin&apos; *;</span><br><span class="line"> Â  Â #å…è®¸å¸¦ä¸Šcookieè¯·æ±‚</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Credentials&apos; &apos;true&apos;;</span><br><span class="line"> Â  Â #å…è®¸è¯·æ±‚çš„æ–¹æ³•get/post/put/delete</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Method&apos; *;</span><br><span class="line"> Â  Â #å…è®¸è¯·æ±‚çš„header</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Header&apos; *;</span><br><span class="line"> Â  Â #å¯¹æºç«™ç‚¹éªŒè¯(é™æ€èµ„æºé˜²ç›—é“¾)</span><br><span class="line"> Â  Â #valid_referers *.xxx.com;</span><br><span class="line">    #if($invalid_refer) &#123;</span><br><span class="line"> Â  Â # Â  Â return 404;</span><br><span class="line"> Â  Â #&#125;</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Header&apos; *;</span><br><span class="line"> Â  Â # Â   location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line"> Â  Â # Â  Â  Â   #é™æ€èµ„æºè®¿é—®ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œæ–‡ä»¶å‘ç”Ÿæ›´æ”¹ä¹Ÿä¼šä¸ä½¿ç”¨ç¼“å­˜ã€‚</span><br><span class="line"> Â  Â # Â  Â  Â   expires 10s;</span><br><span class="line"> Â  Â # Â  Â  Â   #æŒ‡å®šç¼“å­˜è¿‡æœŸæ—¶é—´ä¸º22ç‚¹30åˆ†</span><br><span class="line"> Â  Â # Â  Â  Â   expires @22h30m</span><br><span class="line"> Â  Â # Â  Â  Â   #ç¼“å­˜åœ¨1ä¸ªå°æ—¶ä¹‹å‰å·²ç»è¿‡æœŸ</span><br><span class="line"> Â  Â # Â  Â  Â   expires -1h</span><br><span class="line"> Â  Â # Â  Â  Â   #ä¸è®¾ç½®ç¼“å­˜</span><br><span class="line"> Â  Â # Â  Â  Â   expires epoch</span><br><span class="line"> Â  Â # Â  Â  Â   #å…³é—­nginxç¼“å­˜ï¼ˆé»˜è®¤ï¼‰ï¼Œæµè§ˆå™¨è¿˜æ˜¯æœ‰ç¼“å­˜æœºåˆ¶</span><br><span class="line"> Â  Â # Â  Â  Â   expires off</span><br><span class="line"> Â  Â # Â  Â  Â   #æœ€å¤§è¿‡æœŸæ—¶é—´ï¼ˆç›¸å½“äºæ°¸ä¸è¿‡æœŸï¼‰</span><br><span class="line"> Â  Â # Â  Â  Â   expires max</span><br><span class="line"> Â  Â # Â   &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       443 ssl;</span><br><span class="line">    #    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #    ssl_certificate      cert.pem;</span><br><span class="line">    #    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    #    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    #    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    #    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="nginxé…ç½®ç»“æ„"><a href="#nginxé…ç½®ç»“æ„" class="headerlink" title="nginxé…ç½®ç»“æ„"></a>nginxé…ç½®ç»“æ„</h1><p><img src="/images/QQDVHSPWSN.png" alt="nginxé…ç½®ç»“æ„"></p><h1 id="æ ¡éªŒnginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®"><a href="#æ ¡éªŒnginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®" class="headerlink" title="æ ¡éªŒnginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®"></a>æ ¡éªŒnginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -t</span><br></pre></td></tr></table></figure><h1 id="ä¿®æ”¹é…ç½®æ–‡ä»¶è¿‡åéœ€è¦é‡æ–°è£…è½½nginx"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶è¿‡åéœ€è¦é‡æ–°è£…è½½nginx" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶è¿‡åéœ€è¦é‡æ–°è£…è½½nginx"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶è¿‡åéœ€è¦é‡æ–°è£…è½½nginx</h1><ul><li>é‡æ–°è£…è½½nginxçš„å‘½ä»¤å¦‚ä¸‹</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure><h1 id="Nginxè¿›ç¨‹æ¨¡å‹"><a href="#Nginxè¿›ç¨‹æ¨¡å‹" class="headerlink" title="Nginxè¿›ç¨‹æ¨¡å‹"></a>Nginxè¿›ç¨‹æ¨¡å‹</h1><h2 id="æŸ¥çœ‹nginxè¿›ç¨‹"><a href="#æŸ¥çœ‹nginxè¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹nginxè¿›ç¨‹"></a>æŸ¥çœ‹nginxè¿›ç¨‹</h2><ul><li>æŸ¥çœ‹nginxè¿›ç¨‹å‘½ä»¤</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure><ul><li>å‘½ä»¤æ‰§è¡Œç»“æœ</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root       4640      1  0 13:59 ?        00:00:00 nginx: master process ./nginx</span><br><span class="line">nobody     4641   4640  0 13:59 ?        00:00:00 nginx: worker process</span><br><span class="line">root       4723   4668  0 15:22 pts/0    00:00:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure><p>æ ¹æ®å‘½ä»¤æ‰§è¡Œç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€å…±æ˜¯æœ‰ä¸¤ä¸ªnginxçš„è¿›ç¨‹ï¼Œç¬¬1ä¸ªæ˜¯nginx:masterä¸»è¿›ç¨‹ï¼Œç¬¬2ä¸ªæ˜¯nginx:workerå·¥ä½œè¿›ç¨‹ï¼Œå®é™…ä¸Šæˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šnginx:workerçš„å·¥ä½œè¿›ç¨‹çš„æ•°é‡çš„ï¼Œé…ç½®æ–‡ä»¶å±æ€§å¦‚ä¸‹ã€‚</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;#æŒ‡å®šå·¥ä½œè¿›ç¨‹çš„æ•°é‡</span><br></pre></td></tr></table></figure><h2 id="nginxè¿›ç¨‹æ¨¡å‹"><a href="#nginxè¿›ç¨‹æ¨¡å‹" class="headerlink" title="nginxè¿›ç¨‹æ¨¡å‹"></a>nginxè¿›ç¨‹æ¨¡å‹</h2><ul><li><p>nginx:masterè¿›ç¨‹æ˜¯ä¸»è¿›ç¨‹ï¼Œå¯¹nginx:workerè¿›ç¨‹è¿›è¡Œç®¡ç†</p></li><li><p>nginx:workerè¿›ç¨‹æ˜¯å·¥ä½œè¿›ç¨‹ï¼Œä¸ºnginx:masterè¿›ç¨‹æœåŠ¡</p></li><li><p>nginx:masterä¼šå‘é€ä¿¡å·ç»™nginx:workerè¿›ç¨‹ï¼Œå®ä¾‹ä¿¡å·æŒ‡ä»¤å¦‚ä¸‹</p></li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s stop</span><br><span class="line">./nginx -s quit</span><br><span class="line">./nginx -s reload</span><br><span class="line">./nginx -t</span><br></pre></td></tr></table></figure><p>//todoå¤šçœ‹çœ‹nginxçš„è¿›ç¨‹æ¨¡å‹åŠnginxæŠ¢å æœºåˆ¶è¿™å—çŸ¥è¯†<br><img src="/images/WGMHZNCTSG.png" alt="nginxè¿›ç¨‹æ¨¡å‹"></p><h1 id="nginxäº‹ä»¶å¤„ç†æ¨¡å‹"><a href="#nginxäº‹ä»¶å¤„ç†æ¨¡å‹" class="headerlink" title="nginxäº‹ä»¶å¤„ç†æ¨¡å‹"></a>nginxäº‹ä»¶å¤„ç†æ¨¡å‹</h1><ul><li>nginxäº‹ä»¶å¤„ç†æ¨¡å‹ç±»ä¼¼äºå¤šè·¯å¤ç”¨</li></ul><p><img src="/images/YSGFWLTNXZI.png" alt="nginxäº‹ä»¶å¤„ç†æ¨¡å‹"></p><h1 id="nginxå¸¸è§çš„é—®é¢˜"><a href="#nginxå¸¸è§çš„é—®é¢˜" class="headerlink" title="nginxå¸¸è§çš„é—®é¢˜"></a>nginxå¸¸è§çš„é—®é¢˜</h1><h2 id="open-â€œ-XXX-XXX-nginx-pidâ€-failed-2-No-such-file-or-directory"><a href="#open-â€œ-XXX-XXX-nginx-pidâ€-failed-2-No-such-file-or-directory" class="headerlink" title="open â€œ/XXX/XXX/nginx.pidâ€ failed (2: No such file or directory)"></a>open â€œ/XXX/XXX/nginx.pidâ€ failed (2: No such file or directory)</h2><ul><li>é¦–å…ˆè¿›å…¥pidç›®å½•</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /XXX/XXX</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœæç¤ºcd: /XXX/XXXï¼šæ²¡æœ‰å“ªä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œåˆ›å»ºç›®å½•</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /XXX/XXX</span><br></pre></td></tr></table></figure><h2 id="nginx-error-invalid-PID-number-â€œâ€-â€œin-xxx-xxx-nginx-pidâ€"><a href="#nginx-error-invalid-PID-number-â€œâ€-â€œin-xxx-xxx-nginx-pidâ€" class="headerlink" title="nginx:[error] invalid PID number â€œâ€ â€œin /xxx/xxx/nginx.pidâ€"></a>nginx:[error] invalid PID number â€œâ€ â€œin /xxx/xxx/nginx.pidâ€</h2><ul><li><p>è¯¥é”™è¯¯å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªpidæ— æ•ˆï¼Œæˆ‘ä»¬åªéœ€è¦é‡æ–°æŒ‡å®šä¸€ä¸‹nginxçš„é…ç½®æ–‡ä»¶</p></li><li><p>é¦–å…ˆæŸ¥çœ‹nginxçš„å¸®åŠ©å‘½ä»¤,åœ¨nginxå®‰è£…ç›®å½•ä¸‹çš„sbinç›®å½•ä¸‹æ‰§è¡Œ</p></li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -h</span><br></pre></td></tr></table></figure><ul><li>å‘½ä»¤ç»“æœ</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Options:</span><br><span class="line"> Â //-cæŸ¥çœ‹å¸®åŠ©</span><br><span class="line"> Â -?,-h Â  Â  Â  Â  : this help</span><br><span class="line"> Â //æŸ¥çœ‹ç‰ˆæœ¬</span><br><span class="line"> Â -v Â  Â  Â  Â  Â   : show version and exit</span><br><span class="line"> Â //ç‰ˆæœ¬åŠå…·ä½“ç¼–è¯‘å®‰è£…ç¯å¢ƒé…ç½®å‚æ•°</span><br><span class="line"> Â -V Â  Â  Â  Â  Â   : show version and configure options then exit</span><br><span class="line"> Â //æ ¡éªŒé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</span><br><span class="line"> Â -t Â  Â  Â  Â  Â   : test configuration and exit</span><br><span class="line">  -T            : test configuration, dump it and exit</span><br><span class="line">  -q            : suppress non-error messages during configuration testing</span><br><span class="line"> Â //å‘é€ä¿¡å·ç»™nginx:masterè¿›ç¨‹ï¼Œstopåœæ­¢/quitä¼˜é›…åœæ­¢/reopené‡æ–°æ‰“å¼€/reloadé‡æ–°è£…è½½</span><br><span class="line"> Â -s signal Â  Â  : send signal to a master process: stop, quit, reopen, reload</span><br><span class="line"> Â //nginxå®‰è£…è·¯å¾„</span><br><span class="line"> Â -p prefix Â  Â  : set prefix path (default: /usr/local/nginx/)</span><br><span class="line">  //-cæŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„</span><br><span class="line"> Â -c filename Â  : set configuration file (default: conf/nginx.conf)</span><br><span class="line">  -g directives : set global directives out of configuration file</span><br></pre></td></tr></table></figure><ul><li>æ‰§è¡Œå‘½ä»¤</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -c /.../conf/nginx.conf</span><br></pre></td></tr></table></figure><h1 id="nginxæ—¥å¿—åˆ‡å‰²"><a href="#nginxæ—¥å¿—åˆ‡å‰²" class="headerlink" title="nginxæ—¥å¿—åˆ‡å‰²"></a>nginxæ—¥å¿—åˆ‡å‰²</h1><ul><li>éšç€æ—¶é—´çš„æ¨ç§»é¡¹ç›®æ—¥å¿—è¶Šå¤§ï¼Œè¾¾åˆ°10GBç”šè‡³å‡ åGBï¼Œä¸ä¾¿äºæ—¥å¿—åˆ†æï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ—¥å¿—è¿›è¡Œåˆ‡å‰²</li></ul><h2 id="æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—çš„è„šæœ¬"><a href="#æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—çš„è„šæœ¬" class="headerlink" title="æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—çš„è„šæœ¬"></a>æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—çš„è„šæœ¬</h2><ul><li>åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„shellè„šæœ¬ï¼šcut_my_log.shï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">LOG_PATH=&quot;/var/log/nginx&quot;</span><br><span class="line">RECORD_TIME=$(date -d &quot;yesterday&quot; +%Y-%m-%d+%H:%M)</span><br><span class="line">PID=/var/run/nginx/nginx.pid</span><br><span class="line">mv $&#123;LOG_PATH&#125;/access.log $&#123;LOG_PATH&#125;/access.$&#123;RECORD_TIME&#125;.log</span><br><span class="line">mv $&#123;LOG_PATH&#125;/error.log $&#123;LOG_PATH&#125;/access.$&#123;RECORD_TIME&#125;.log</span><br><span class="line">#å‘nginx:masterè¿›ç¨‹å‘é€ä¿¡å·ï¼Œç”¨äºé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶</span><br><span class="line">kill -USR1 `cat $PID`</span><br></pre></td></tr></table></figure><ul><li>ä¸ºcut_my_log.shè„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x cut_my_log.sh</span><br></pre></td></tr></table></figure><h1 id="nginxåŒ¹é…è§„åˆ™"><a href="#nginxåŒ¹é…è§„åˆ™" class="headerlink" title="nginxåŒ¹é…è§„åˆ™"></a>nginxåŒ¹é…è§„åˆ™</h1><ul><li><p>location / #è·¯å¾„å­˜åœ¨å³å¯è®¿é—®</p></li><li><p>location = / #ç²¾ç¡®åŒ¹é… ï¼ˆè¿™é‡Œåªèƒ½è®¿é—®åˆ°æ ¹ï¼‰</p></li><li><p>location ~ .(GIF|png|bmp|jpg|jpeg) #æ­£åˆ™è¡¨è¾¾å¼ä¸å¸¦*åŒºåˆ†å¤§å°å†™</p></li><li><p>location ~* .(GIF|png|bmp|jpg|jpeg) #æ­£åˆ™è¡¨è¾¾å¼å¸¦*ä¸åŒºåˆ†å¤§å°å†™</p></li><li><p>location ^~ /xxx/xxx #ä¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä»¥/xxx/xxxè·¯å¾„å¼€å¤´</p></li></ul><h1 id="upstreamæŒ‡ä»¤å‚æ•°"><a href="#upstreamæŒ‡ä»¤å‚æ•°" class="headerlink" title="upstreamæŒ‡ä»¤å‚æ•°"></a>upstreamæŒ‡ä»¤å‚æ•°</h1><ul><li>upstreamæŒ‡å®šå‚æ•°ä»¥keyä¸valueçš„å½¢å¼é…ç½®åˆ°ipåŠç«¯å£çš„åé¢å¦‚ä¸‹æ‰€ç¤º</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">upstream tomcats &#123;</span><br><span class="line">  Â  Â server 192.168.1.101:8080 key=value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŒ‡ä»¤å‚æ•°"><a href="#æŒ‡ä»¤å‚æ•°" class="headerlink" title="æŒ‡ä»¤å‚æ•°"></a>æŒ‡ä»¤å‚æ•°</h2><hr><h3 id="max-conns-count-æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è®¾ç½®è¿‡è½½ä¿æŠ¤åšé™æµç°ä½œç”¨ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½èƒ½ç”Ÿæ•ˆï¼Œåœ¨1-11-5ä¹‹å‰è¿™ä¸ªå‚æ•°åªé€‚ç”¨äºå•†ä¸šç‰ˆæœ¬"><a href="#max-conns-count-æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è®¾ç½®è¿‡è½½ä¿æŠ¤åšé™æµç°ä½œç”¨ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½èƒ½ç”Ÿæ•ˆï¼Œåœ¨1-11-5ä¹‹å‰è¿™ä¸ªå‚æ•°åªé€‚ç”¨äºå•†ä¸šç‰ˆæœ¬" class="headerlink" title="max_conns=count (æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è®¾ç½®è¿‡è½½ä¿æŠ¤åšé™æµç°ä½œç”¨ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½èƒ½ç”Ÿæ•ˆï¼Œåœ¨1.11.5ä¹‹å‰è¿™ä¸ªå‚æ•°åªé€‚ç”¨äºå•†ä¸šç‰ˆæœ¬)"></a>max_conns=count (æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è®¾ç½®è¿‡è½½ä¿æŠ¤åšé™æµç°ä½œç”¨ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½èƒ½ç”Ÿæ•ˆï¼Œåœ¨1.11.5ä¹‹å‰è¿™ä¸ªå‚æ•°åªé€‚ç”¨äºå•†ä¸šç‰ˆæœ¬)</h3><hr><h3 id="slow-start-time-æœåŠ¡å™¨æ¢å¤è¿‡åç»è¿‡timeçš„æ—¶é—´è¿‡åå†åŠ å…¥åˆ°upstreamé›†ç¾¤ä¸­ï¼Œå•†ä¸šç‰ˆnginxä¸­æ‰èƒ½ä½¿ç”¨"><a href="#slow-start-time-æœåŠ¡å™¨æ¢å¤è¿‡åç»è¿‡timeçš„æ—¶é—´è¿‡åå†åŠ å…¥åˆ°upstreamé›†ç¾¤ä¸­ï¼Œå•†ä¸šç‰ˆnginxä¸­æ‰èƒ½ä½¿ç”¨" class="headerlink" title="slow_start=time(æœåŠ¡å™¨æ¢å¤è¿‡åç»è¿‡timeçš„æ—¶é—´è¿‡åå†åŠ å…¥åˆ°upstreamé›†ç¾¤ä¸­ï¼Œå•†ä¸šç‰ˆnginxä¸­æ‰èƒ½ä½¿ç”¨)"></a>slow_start=time(æœåŠ¡å™¨æ¢å¤è¿‡åç»è¿‡timeçš„æ—¶é—´è¿‡åå†åŠ å…¥åˆ°upstreamé›†ç¾¤ä¸­ï¼Œå•†ä¸šç‰ˆnginxä¸­æ‰èƒ½ä½¿ç”¨)</h3><hr><h3 id="down-é…ç½®è¯¥æœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€"><a href="#down-é…ç½®è¯¥æœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€" class="headerlink" title="down é…ç½®è¯¥æœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€"></a>down é…ç½®è¯¥æœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€</h3><hr><h3 id="back-æ ‡è®°è¯¥æœåŠ¡æ˜¯ä¸€å°å¤‡ç”¨æœºï¼Œé›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ä¼šå¯åŠ¨è¯¥å°æœåŠ¡å™¨è¿›è¡Œå¤‡ç”¨"><a href="#back-æ ‡è®°è¯¥æœåŠ¡æ˜¯ä¸€å°å¤‡ç”¨æœºï¼Œé›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ä¼šå¯åŠ¨è¯¥å°æœåŠ¡å™¨è¿›è¡Œå¤‡ç”¨" class="headerlink" title="back æ ‡è®°è¯¥æœåŠ¡æ˜¯ä¸€å°å¤‡ç”¨æœºï¼Œé›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ä¼šå¯åŠ¨è¯¥å°æœåŠ¡å™¨è¿›è¡Œå¤‡ç”¨"></a>back æ ‡è®°è¯¥æœåŠ¡æ˜¯ä¸€å°å¤‡ç”¨æœºï¼Œé›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ä¼šå¯åŠ¨è¯¥å°æœåŠ¡å™¨è¿›è¡Œå¤‡ç”¨</h3><hr><h3 id="max-fails-countæœ€å¤§å¤±è´¥æ¬¡æ•°"><a href="#max-fails-countæœ€å¤§å¤±è´¥æ¬¡æ•°" class="headerlink" title="max_fails=countæœ€å¤§å¤±è´¥æ¬¡æ•°"></a>max_fails=countæœ€å¤§å¤±è´¥æ¬¡æ•°</h3><h3 id="fail-time-out-time"><a href="#fail-time-out-time" class="headerlink" title="fail_time_out=time"></a>fail_time_out=time</h3><h3 id="ä»¥ä¸Šä¸¤ä¸ªå‚æ•°è¿ç”¨è¡¨ç¤ºtimeæ—¶é—´å†…å¤±è´¥æ¬¡æ•°è¶…è¿‡countå°±ä¼šå°†æœåŠ¡è¸¢å‡ºupstreamé›†ç¾¤ä¸­ï¼Œ15såå†å°è¯•è¯·æ±‚æ˜¯å¦æ­£å¸¸å¦‚æ­¤å¾€å¤"><a href="#ä»¥ä¸Šä¸¤ä¸ªå‚æ•°è¿ç”¨è¡¨ç¤ºtimeæ—¶é—´å†…å¤±è´¥æ¬¡æ•°è¶…è¿‡countå°±ä¼šå°†æœåŠ¡è¸¢å‡ºupstreamé›†ç¾¤ä¸­ï¼Œ15såå†å°è¯•è¯·æ±‚æ˜¯å¦æ­£å¸¸å¦‚æ­¤å¾€å¤" class="headerlink" title="ä»¥ä¸Šä¸¤ä¸ªå‚æ•°è¿ç”¨è¡¨ç¤ºtimeæ—¶é—´å†…å¤±è´¥æ¬¡æ•°è¶…è¿‡countå°±ä¼šå°†æœåŠ¡è¸¢å‡ºupstreamé›†ç¾¤ä¸­ï¼Œ15såå†å°è¯•è¯·æ±‚æ˜¯å¦æ­£å¸¸å¦‚æ­¤å¾€å¤"></a>ä»¥ä¸Šä¸¤ä¸ªå‚æ•°è¿ç”¨è¡¨ç¤ºtimeæ—¶é—´å†…å¤±è´¥æ¬¡æ•°è¶…è¿‡countå°±ä¼šå°†æœåŠ¡è¸¢å‡ºupstreamé›†ç¾¤ä¸­ï¼Œ15såå†å°è¯•è¯·æ±‚æ˜¯å¦æ­£å¸¸å¦‚æ­¤å¾€å¤</h3><hr><h1 id="keepalive-countæé«˜ååé‡"><a href="#keepalive-countæé«˜ååé‡" class="headerlink" title="keepalive=countæé«˜ååé‡"></a>keepalive=countæé«˜ååé‡</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">upstream tomcats &#123;</span><br><span class="line">server 192.168.1.101:8080;</span><br><span class="line">#ä¿æŒé•¿è¿æ¥çš„æ•°é‡</span><br><span class="line">keepalive 32;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">listen80;</span><br><span class="line">server_namewww.tomcats.com;</span><br><span class="line">location / &#123;</span><br><span class="line">proxy_pass http://tomcats;</span><br><span class="line">#åè®®ç‰ˆæœ¬å·http1.1æ‰æ”¯æŒä¿æŒé•¿è¿æ¥é¿å…æœåŠ¡ç»å¸¸åˆ›å»ºå…³é—­æ¶ˆè€—æœåŠ¡å™¨èµ„æº</span><br><span class="line">proxy_http_version 1.1;</span><br><span class="line">#æ¸…é™¤collectionä¸­çš„ä¿¡æ¯</span><br><span class="line">proxy_set_header Connection &quot;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ip-hash-ipåœ°å€å–æ¨¡è¯·æ±‚æ‰“åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šé¢"><a href="#ip-hash-ipåœ°å€å–æ¨¡è¯·æ±‚æ‰“åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šé¢" class="headerlink" title="ip_hash ipåœ°å€å–æ¨¡è¯·æ±‚æ‰“åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šé¢"></a>ip_hash ipåœ°å€å–æ¨¡è¯·æ±‚æ‰“åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šé¢</h1><ul><li><p>é…ç½®æ–¹å¼å¦‚ä¸‹å³å¯</p></li><li><p>ä¸åŒipçš„å®¢æˆ·ç«¯ä¼šä¼šå›ºå®šçš„è¯·æ±‚åˆ°ä¸åŒçš„å›ºå®šæœåŠ¡å™¨</p></li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">upstream tomcats &#123;</span><br><span class="line">#ip_hashæ ¹æ®è¯·æ±‚çš„ipåœ°å€ä¸é›†ç¾¤ä¸­æœåŠ¡å™¨çš„æ•°é‡è¿›è¡Œæ±‚æ¨¡æ“ä½œ</span><br><span class="line">ip_hash;</span><br><span class="line">server 192.168.1.101:8080;</span><br><span class="line">server 192.168.1.102:8080;</span><br><span class="line">server 192.168.1.103:8080;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ip-hashåœ¨nginxæºç ä¸­çš„ç®—æ³•"><a href="#ip-hashåœ¨nginxæºç ä¸­çš„ç®—æ³•" class="headerlink" title="ip_hashåœ¨nginxæºç ä¸­çš„ç®—æ³•"></a>ip_hashåœ¨nginxæºç ä¸­çš„ç®—æ³•</h2><ul><li><p>ip_hashæºç åœ¨å®‰è£…åŒ…å†…/src/http/modules/ngx_http_upstream_ip_hash_module.cæ–‡ä»¶ä¸­</p></li><li><p>æºç ä¸­é€šè¿‡â€.â€å¯¹ipè¿›è¡Œåˆ‡å‰²çš„æ•°ç»„é•¿åº¦ä¸º4ï¼Œç´¢å¼•ä¸º0~3ï¼Œå–ç´¢å¼•2è¿›è¡Œå–æ¨¡ï¼Œæ‰€ä»¥åœ¨æœ¬åœ°å†…ç½‘ç¯å¢ƒè®¿é—®æœåŠ¡å™¨çš„æ—¶å€™çœ‹ä¸å‡ºæ¥ä¸åŒçš„ipæ‰“åˆ°äº†ç›¸åŒçš„æœåŠ¡å™¨</p><h2 id="ip-hashæ³¨æ„"><a href="#ip-hashæ³¨æ„" class="headerlink" title="ip_hashæ³¨æ„"></a>ip_hashæ³¨æ„</h2></li><li><p>ä½¿ç”¨ip_hashçš„æ—¶å€™å¦‚æœå…¶ä¸­ä¸€å°æœåŠ¡å™¨å‡ºç°äº†é—®é¢˜æˆ‘ä»¬éœ€è¦ç§»é™¤ä¸èƒ½åœ¨upstremä¸­ç›´æ¥åˆ é™¤ï¼Œå¦åˆ™hashçš„å€¼ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè¯·æ±‚çš„æœåŠ¡å™¨å°±ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬åº”è¯¥å°†æœåŠ¡å™¨æ ‡è®°ä¸ºdownä¸è¢«è¯·æ±‚ã€‚</p></li></ul><h2 id="ip-hashå¸¦æ¥çš„é—®é¢˜"><a href="#ip-hashå¸¦æ¥çš„é—®é¢˜" class="headerlink" title="ip_hashå¸¦æ¥çš„é—®é¢˜"></a>ip_hashå¸¦æ¥çš„é—®é¢˜</h2><ul><li>å¦‚æœæœåŠ¡å™¨æ•°é‡å‘ç”Ÿå˜åŒ–ï¼Œæ— è®ºæ˜¯æ–°å¢æˆ–è€…å‡å°‘éƒ½ä¼šå¯¼è‡´hashç®—æ³•ç®—å‡ºæ¥çš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œä¼šè¯ä¸¢å¤±ï¼Œç¼“å­˜æ— æ³•è®¿é—®ç­‰é—®é¢˜ã€‚</li></ul><h1 id="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"><a href="#ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•" class="headerlink" title="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"></a>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</h1><ul><li>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯å°†ç”¨æˆ·å“ˆå¸Œåˆ°è¿™ä¸ªç¯ä¸Šï¼Œç›¸åŒçš„ç”¨æˆ·åœ¨è®¿é—®çš„ä¸»æœºä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåªæœ‰å½“ä¸»æœºèŠ‚ç‚¹æ•°é‡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰ä¼šæœ‰å°‘é‡çš„ç”¨æˆ·ä¸»æœºè¯·æ±‚çš„æœåŠ¡å™¨å‘ç”Ÿå˜åŒ–,ä¿è¯å¤§éƒ¨åˆ†ç”¨æˆ·è¯·æ±‚çš„ä¸»æœºä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</li></ul><h2 id="åŸæœ‰çš„æœåŠ¡å™¨åŠç”¨æˆ·çŠ¶æ€"><a href="#åŸæœ‰çš„æœåŠ¡å™¨åŠç”¨æˆ·çŠ¶æ€" class="headerlink" title="åŸæœ‰çš„æœåŠ¡å™¨åŠç”¨æˆ·çŠ¶æ€"></a>åŸæœ‰çš„æœåŠ¡å™¨åŠç”¨æˆ·çŠ¶æ€</h2><p><img src="/images/img_2.png" alt="åŸæœ‰èŠ‚ç‚¹åŠç”¨æˆ·çŠ¶æ€"></p><h2 id="æœåŠ¡å™¨æ•°é‡å‡å°‘"><a href="#æœåŠ¡å™¨æ•°é‡å‡å°‘" class="headerlink" title="æœåŠ¡å™¨æ•°é‡å‡å°‘"></a>æœåŠ¡å™¨æ•°é‡å‡å°‘</h2><p><img src="/images/img_3.png" alt="æœåŠ¡å™¨æ•°é‡å‡å°‘"></p><ul><li>å›¾ä¸­èŠ‚ç‚¹3ç§»é™¤äº†ï¼ŒåŸæœ‰è®¿é—®èŠ‚ç‚¹3çš„2ä¸ªå°‘é‡ç”¨æˆ·è½¬ç§»åˆ°äº†èŠ‚ç‚¹4ï¼Œå…¶ä½™èŠ‚ç‚¹ä¸Šçš„ç”¨æˆ·è®¿é—®çš„æœåŠ¡å™¨ä¸å‘ç”Ÿå˜åŒ–</li></ul><h2 id="å‡å¦‚è¯´è¦å¢åŠ æœåŠ¡å™¨"><a href="#å‡å¦‚è¯´è¦å¢åŠ æœåŠ¡å™¨" class="headerlink" title="å‡å¦‚è¯´è¦å¢åŠ æœåŠ¡å™¨"></a>å‡å¦‚è¯´è¦å¢åŠ æœåŠ¡å™¨</h2><p><img src="/images/img_4.png" alt="æœåŠ¡å™¨æ•°é‡å¢åŠ "></p><ul><li>å›¾ä¸­æˆ‘ä»¬çœ‹å‡ºæœåŠ¡å™¨æ•°é‡å¢åŠ åªæœ‰ä¸€ä¸ªç”¨æˆ·å˜æ›´äº†æœåŠ¡å™¨çš„è¯·æ±‚åœ°å€ï¼Œå…¶ä½™ç”¨æˆ·ä¸å‘ç”Ÿæ”¹å˜ã€‚</li></ul><h1 id="Nginxè´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›"><a href="#Nginxè´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›" class="headerlink" title="Nginxè´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›"></a>Nginxè´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›</h1><ul><li><p>nginxé»˜è®¤ä½¿ç”¨è½®è¯¢ç®—æ³•ã€‚</p></li><li><p>ip_hashæ ¹æ®è¯·æ±‚å®¢æˆ·ç«¯çš„ipè¿›è¡Œå“ˆå¸Œè¯·æ±‚åˆ°å›ºå®šçš„æœåŠ¡å™¨ã€‚</p></li><li><p>url_hashæ ¹æ®urlåœ°å€è¿›è¡Œhashè¯·æ±‚åˆ°å›ºå®šçš„æœåŠ¡å™¨ã€‚</p></li><li><p>least_connå“ªå°æœåŠ¡å™¨çš„è¿æ¥æ•°å°‘å°±è¿æ¥åˆ°å“ªä¸€å°æœåŠ¡å™¨</p></li></ul><h1 id="é…ç½®nginxé™æ€èµ„æºæ–‡ä»¶ç¼“å­˜è¿‡æœŸæ—¶é—´"><a href="#é…ç½®nginxé™æ€èµ„æºæ–‡ä»¶ç¼“å­˜è¿‡æœŸæ—¶é—´" class="headerlink" title="é…ç½®nginxé™æ€èµ„æºæ–‡ä»¶ç¼“å­˜è¿‡æœŸæ—¶é—´"></a>é…ç½®nginxé™æ€èµ„æºæ–‡ä»¶ç¼“å­˜è¿‡æœŸæ—¶é—´</h1><ul><li>åœ¨nginxé…ç½®ç»“æ„ä¸­çš„httpå±‚è¿›è¡Œé…ç½®</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">proxy_cache_path /usr/local/nginx/upstream_cache keys_zone=mycache:5m max_size=1g inactive=30s use_temp_path=off;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">listen80;</span><br><span class="line">server_namewww.tomcats.com;</span><br><span class="line"></span><br><span class="line">#é™æ€èµ„æºå¼€å¯å¹¶ä¸”ä½¿ç”¨ç¼“å­˜</span><br><span class="line">proxy_cache mycache;</span><br><span class="line">#é’ˆå¯¹200å’Œ304çŠ¶æ€ç çš„ç¼“å­˜è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º8h</span><br><span class="line">proxy_cache_valid200 304 8h;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>proxy_cache_path è®¾ç½®ç¼“å­˜ä¿å­˜çš„ç›®å½•</p></li><li><p>/usr/local/nginx/upstream_cacheæ˜¯å®šä¹‰çš„ä¿å­˜ç¼“å­˜çš„è·¯å¾„</p></li><li><p>keys_zone è®¾ç½®å…±äº«å†…å­˜ä¸€çº§å ç”¨ç©ºé—´çš„å¤§å°</p></li><li><p>max_size è®¾ç½®ç¼“å­˜å¤§å°</p></li><li><p>inactive è¶…è¿‡æ­¤æ—¶é—´ç¼“å­˜è‡ªåŠ¨æ¸…ç†</p></li><li><p>use_temp_path å…³é—­ä¸´æ—¶ç›®å½•</p></li></ul><h1 id="åŠ¨é™åˆ†ç¦»"><a href="#åŠ¨é™åˆ†ç¦»" class="headerlink" title="åŠ¨é™åˆ†ç¦»"></a>åŠ¨é™åˆ†ç¦»</h1><h2 id="ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼Ÿ</h2><blockquote><p>åŠ¨é™åˆ†ç¦»æœ¬è´¨æ˜¯å°†å‰ç«¯é™æ€èµ„æºä¸æˆ‘ä»¬åç«¯æœåŠ¡çš„æ¥å£åˆ†å¼€å‡å°åç«¯æœåŠ¡å™¨çš„å‹åŠ›ï¼Œæé«˜é™æ€èµ„æºçš„è®¿é—®é€Ÿåº¦ï¼ˆé™æ€èµ„æºå¯ä»¥æ˜¯è¢«ç¼“å­˜çš„è®¿é—®èµ·æ¥æ›´å¿«ï¼Œåç«¯ä¸éœ€è¦æ¸²æŸ“é¡µé¢ï¼‰</p></blockquote><blockquote><p>é™æ€æ•°æ®ï¼šcss/js/html/images/audios/videos/â€¦</p></blockquote><blockquote><p>åŠ¨æ€æ•°æ®ï¼šåç«¯æ¥å£ï¼Œä¸åŒæ—¶é—´å¾—åˆ°çš„å“åº”å¯èƒ½ä¸åŒ</p></blockquote><h2 id="åŠ¨é™åˆ†ç¦»çš„ç‰¹ç‚¹"><a href="#åŠ¨é™åˆ†ç¦»çš„ç‰¹ç‚¹" class="headerlink" title="åŠ¨é™åˆ†ç¦»çš„ç‰¹ç‚¹"></a>åŠ¨é™åˆ†ç¦»çš„ç‰¹ç‚¹</h2><blockquote><p>åˆ†å¸ƒå¼</p></blockquote><blockquote><p>å‰åç«¯æ¥å£</p></blockquote><blockquote><p>é™æ€å½’nginx</p></blockquote><blockquote><p>æ¥å£æœåŠ¡åŒ–</p></blockquote><h2 id="åŠ¨é™åˆ†ç¦»å®ç°æ–¹å¼"><a href="#åŠ¨é™åˆ†ç¦»å®ç°æ–¹å¼" class="headerlink" title="åŠ¨é™åˆ†ç¦»å®ç°æ–¹å¼"></a>åŠ¨é™åˆ†ç¦»å®ç°æ–¹å¼</h2><blockquote><p>ä½¿ç”¨cdnåŠ é€Ÿ</p></blockquote><p><img src="/images/img_42.png" alt="cdmåŠ é€Ÿ"></p><blockquote><p>ä½¿ç”¨nginxå®ç°åŠ¨é™åˆ†ç¦»</p></blockquote><p><img src="/images/img_43.png" alt="nginx"></p><h1 id="è½¯ä»¶æ¨è"><a href="#è½¯ä»¶æ¨è" class="headerlink" title="è½¯ä»¶æ¨è"></a>è½¯ä»¶æ¨è</h1><blockquote><p>nginxé…ç½®ç®¡ç†å·¥å…·<a href="http://www.nginxwebui.cn/" target="_blank" rel="noopener">nginxWebUI</a></p></blockquote><blockquote><p>è‡ªå»ºngrokï¼Œä»æ­¤æŠ›å¼ƒèŠ±ç”Ÿå£³<a href="https://www.vediotalk.com/archives/336" target="_blank" rel="noopener">æ•™ç¨‹åœ°å€</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CentOSå®‰è£…Nginx</title>
      <link href="/2020/11/12/CentOS%E5%AE%89%E8%A3%85Nginx/"/>
      <url>/2020/11/12/CentOS%E5%AE%89%E8%A3%85Nginx/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‹è½½å¹¶ä¸Šä¼ nginxå®‰è£…åŒ…åˆ°linux"><a href="#ä¸‹è½½å¹¶ä¸Šä¼ nginxå®‰è£…åŒ…åˆ°linux" class="headerlink" title="ä¸‹è½½å¹¶ä¸Šä¼ nginxå®‰è£…åŒ…åˆ°linux"></a>ä¸‹è½½å¹¶ä¸Šä¼ nginxå®‰è£…åŒ…åˆ°linux</h1><h1 id="å®‰è£…ä¾èµ–ç¯å¢ƒ"><a href="#å®‰è£…ä¾èµ–ç¯å¢ƒ" class="headerlink" title="å®‰è£…ä¾èµ–ç¯å¢ƒ"></a>å®‰è£…ä¾èµ–ç¯å¢ƒ</h1><ul><li>å®‰è£…gccç¯å¢ƒ</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc-c++</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…pcreåº“ç”¨äºæ­£åˆ™è¡¨è¾¾å¼</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y pcre pcre-devel</span><br></pre></td></tr></table></figure><ul><li>zlibå‹ç¼©å’Œè§£å‹ç¼©ä¾èµ–</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y zlib zlib-devel</span><br></pre></td></tr></table></figure><ul><li>sslå®‰å…¨çš„åŠ å¯†çš„å¥—æ¥å­—åè®®ï¼Œç”¨ä¸HTTPçš„å®‰å…¨ä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯https</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure><h1 id="è§£å‹nginx"><a href="#è§£å‹nginx" class="headerlink" title="è§£å‹nginx"></a>è§£å‹nginx</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.16.1.tar.gz</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºnginxä¸´æ—¶ç›®å½•"><a href="#åˆ›å»ºnginxä¸´æ—¶ç›®å½•" class="headerlink" title="åˆ›å»ºnginxä¸´æ—¶ç›®å½•"></a>åˆ›å»ºnginxä¸´æ—¶ç›®å½•</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/temp/nginx -p</span><br></pre></td></tr></table></figure><h1 id="åœ¨nginxç›®å½•ä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œç›®çš„æ˜¯ä¸ºäº†åˆ›å»ºmakefileæ–‡ä»¶"><a href="#åœ¨nginxç›®å½•ä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œç›®çš„æ˜¯ä¸ºäº†åˆ›å»ºmakefileæ–‡ä»¶" class="headerlink" title="åœ¨nginxç›®å½•ä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œç›®çš„æ˜¯ä¸ºäº†åˆ›å»ºmakefileæ–‡ä»¶"></a>åœ¨nginxç›®å½•ä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œç›®çš„æ˜¯ä¸ºäº†åˆ›å»ºmakefileæ–‡ä»¶</h1><ul><li>å‚æ•°å‘½ä»¤</li></ul><p>åœ¨å®‰è£…åŒ…è§£å‹ç›®å½•ä¸‹å¤åˆ¶å¦‚ä¸‹å‘½ä»¤ç›´æ¥ç”Ÿæˆmakefileæ–‡ä»¶</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">./configure \</span><br><span class="line">--prefix=/usr/local/nginx \</span><br><span class="line">--pid-path=/var/run/nginx/nginx.pid \</span><br><span class="line">--lock-path=/var/lock/nginx.lock \</span><br><span class="line">--error-log-path=/var/log/nginx/error.log \</span><br><span class="line">--http-log-path=/var/log/nginx/access.log \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--http-client-body-temp-path=/var/temp/nginx/client \</span><br><span class="line">--http-proxy-temp-path=/var/temp/nginx/proxy \</span><br><span class="line">--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \</span><br><span class="line">--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \</span><br><span class="line">--http-scgi-temp-path=/var/temp/nginx/scgi \</span><br><span class="line">--with-http_ssl_module</span><br></pre></td></tr></table></figure><ul><li>å„ä¸ªå‚æ•°ä»£è¡¨çš„å«ä¹‰</li></ul><table><thead><tr><th>å‚æ•°</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>â€“prefix</td><td>æŒ‡å®šnginxå®‰è£…ä½ç½®</td></tr><tr><td>â€“pid-path</td><td>æŒ‡å‘nginxçš„pid</td></tr><tr><td>â€“lock-path</td><td>é”å®šå®‰è£…æ–‡ä»¶ã€é˜²æ­¢æ¶æ„ç¯¡æ”¹æˆ–è¯¯æ“ä½œ</td></tr><tr><td>â€“error-log-path</td><td>é”™è¯¯æ—¥å¿—</td></tr><tr><td>â€“http-log-path</td><td>httpæ—¥å¿—</td></tr><tr><td>â€“with-http_gzip_static_module</td><td>å¯åŠ¨gzipæ¨¡å—ï¼Œåœ¨çº¿å®æ—¶å‹ç¼©æ•°æ®æµ</td></tr><tr><td>â€“http-client-body-temp-path</td><td>è®¾å®šå®¢æˆ·ç«¯è¯·æ±‚çš„ä¸´æ—¶ç›®å½•</td></tr><tr><td>â€“http-proxy-temp-path</td><td>è®¾å®šhttpä»£ç†ä¸´æ—¶ç›®å½•</td></tr><tr><td>â€“http-fastcgi-temp-path</td><td>è®¾å®šfastcgiä¸´æ—¶ç›®å½•</td></tr><tr><td>â€“http-uwsgi-temp-path</td><td>è®¾å®šuwsgiä¸´æ—¶ç›®å½•</td></tr><tr><td>â€“http-scgi-temp-path</td><td>è®¾å®šscgiä¸´æ—¶ç›®å½•</td></tr><tr><td>â€“with-http_ssl_module</td><td>å¦‚æœè¦é…ç½®sslåŸŸåè¯ä¹¦éœ€è¦å®‰è£…sslæ¨¡å—</td></tr></tbody></table><h1 id="æŸ¥çœ‹å®‰è£…åŒ…ç›®å½•ä¸‹çš„objsç›®å½•"><a href="#æŸ¥çœ‹å®‰è£…åŒ…ç›®å½•ä¸‹çš„objsç›®å½•" class="headerlink" title="æŸ¥çœ‹å®‰è£…åŒ…ç›®å½•ä¸‹çš„objsç›®å½•"></a>æŸ¥çœ‹å®‰è£…åŒ…ç›®å½•ä¸‹çš„objsç›®å½•</h1><blockquote><p>æŸ¥çœ‹objsç›®å½•ä¸‹çš„ngx_modules.cï¼Œå·²ç»åŒ…å«sslç›¸å…³æ¨¡å—å†…å®¹å¦‚ä¸‹</p></blockquote><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ngx_config.h&gt;</span><br><span class="line">#include &lt;ngx_core.h&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">extern ngx_module_t  ngx_core_module;</span><br><span class="line">extern ngx_module_t  ngx_errlog_module;</span><br><span class="line">extern ngx_module_t  ngx_conf_module;</span><br><span class="line">extern ngx_module_t  ngx_events_module;</span><br><span class="line">extern ngx_module_t  ngx_event_core_module;</span><br><span class="line">extern ngx_module_t  ngx_epoll_module;</span><br><span class="line">extern ngx_module_t  ngx_openssl_module;</span><br><span class="line">extern ngx_module_t  ngx_regex_module;</span><br><span class="line">extern ngx_module_t  ngx_http_module;</span><br><span class="line">extern ngx_module_t  ngx_http_core_module;</span><br><span class="line">extern ngx_module_t  ngx_http_log_module;</span><br><span class="line">extern ngx_module_t  ngx_http_upstream_module;</span><br><span class="line">extern ngx_module_t  ngx_http_static_module;</span><br><span class="line">extern ngx_module_t  ngx_http_gzip_static_module;</span><br><span class="line">extern ngx_module_t  ngx_http_autoindex_module;</span><br><span class="line">extern ngx_module_t  ngx_http_index_module;</span><br><span class="line">extern ngx_module_t  ngx_http_auth_basic_module;</span><br><span class="line">extern ngx_module_t  ngx_http_access_module;</span><br><span class="line">extern ngx_module_t  ngx_http_limit_conn_module;</span><br><span class="line">extern ngx_module_t  ngx_http_limit_req_module;</span><br><span class="line">extern ngx_module_t  ngx_http_geo_module;</span><br><span class="line">extern ngx_module_t  ngx_http_map_module;</span><br><span class="line">extern ngx_module_t  ngx_http_split_clients_module;</span><br><span class="line">extern ngx_module_t  ngx_http_referer_module;</span><br><span class="line">extern ngx_module_t  ngx_http_rewrite_module;</span><br><span class="line">extern ngx_module_t  ngx_http_ssl_module;</span><br><span class="line">extern ngx_module_t  ngx_http_proxy_module;</span><br><span class="line">extern ngx_module_t  ngx_http_fastcgi_module;</span><br><span class="line">extern ngx_module_t  ngx_http_uwsgi_module;</span><br><span class="line">extern ngx_module_t  ngx_http_scgi_module;</span><br><span class="line">extern ngx_module_t  ngx_http_memcached_module;</span><br><span class="line">extern ngx_module_t  ngx_http_empty_gif_module;</span><br><span class="line">extern ngx_module_t  ngx_http_browser_module;</span><br><span class="line">extern ngx_module_t  ngx_http_upstream_hash_module;</span><br><span class="line">extern ngx_module_t  ngx_http_upstream_ip_hash_module;</span><br><span class="line">extern ngx_module_t  ngx_http_upstream_least_conn_module;</span><br><span class="line">extern ngx_module_t  ngx_http_upstream_keepalive_module;</span><br><span class="line">extern ngx_module_t  ngx_http_upstream_zone_module;</span><br><span class="line">extern ngx_module_t  ngx_http_write_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_header_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_chunked_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_range_header_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_gzip_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_postpone_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_ssi_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_charset_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_userid_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_headers_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_copy_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_range_body_filter_module;</span><br><span class="line">extern ngx_module_t  ngx_http_not_modified_filter_module;</span><br><span class="line"></span><br><span class="line">ngx_module_t *ngx_modules[] = &#123;</span><br><span class="line">    &amp;ngx_core_module,</span><br><span class="line">    &amp;ngx_errlog_module,</span><br><span class="line">    &amp;ngx_conf_module,</span><br><span class="line">    &amp;ngx_events_module,</span><br><span class="line">    &amp;ngx_event_core_module,</span><br><span class="line">    &amp;ngx_epoll_module,</span><br><span class="line">    &amp;ngx_openssl_module,</span><br><span class="line">    &amp;ngx_regex_module,</span><br><span class="line">    &amp;ngx_http_module,</span><br><span class="line">    &amp;ngx_http_core_module,</span><br><span class="line">    &amp;ngx_epoll_module,</span><br><span class="line">    &amp;ngx_openssl_module,</span><br><span class="line">    &amp;ngx_regex_module,</span><br><span class="line">    &amp;ngx_http_module,</span><br><span class="line">    &amp;ngx_http_core_module,</span><br><span class="line">    &amp;ngx_http_log_module,</span><br><span class="line">    &amp;ngx_http_upstream_module,</span><br><span class="line">    &amp;ngx_http_static_module,</span><br><span class="line">    &amp;ngx_http_gzip_static_module,</span><br><span class="line">    &amp;ngx_http_autoindex_module,</span><br><span class="line">    &amp;ngx_http_index_module,</span><br><span class="line">    &amp;ngx_http_auth_basic_module,</span><br><span class="line">    &amp;ngx_http_access_module,</span><br><span class="line">    &amp;ngx_http_limit_conn_module,</span><br><span class="line">    &amp;ngx_http_limit_req_module,</span><br><span class="line">    &amp;ngx_http_geo_module,</span><br><span class="line">    &amp;ngx_http_map_module,</span><br><span class="line">    &amp;ngx_http_split_clients_module,</span><br><span class="line">    &amp;ngx_http_referer_module,</span><br><span class="line">    &amp;ngx_http_rewrite_module,</span><br><span class="line">    &amp;ngx_http_ssl_module,</span><br><span class="line">    &amp;ngx_http_proxy_module,</span><br><span class="line">    &amp;ngx_http_fastcgi_module,</span><br><span class="line">    &amp;ngx_http_uwsgi_module,</span><br><span class="line">    &amp;ngx_http_scgi_module,</span><br><span class="line">    &amp;ngx_http_memcached_module,</span><br><span class="line">    &amp;ngx_http_empty_gif_module,</span><br><span class="line">    &amp;ngx_http_browser_module,</span><br><span class="line">    &amp;ngx_http_upstream_hash_module,</span><br><span class="line">    &amp;ngx_http_upstream_ip_hash_module,</span><br><span class="line">    &amp;ngx_http_upstream_least_conn_module,</span><br><span class="line">    &amp;ngx_http_upstream_keepalive_module,</span><br><span class="line">    &amp;ngx_http_upstream_zone_module,</span><br><span class="line">    &amp;ngx_http_write_filter_module,</span><br><span class="line">    &amp;ngx_http_header_filter_module,</span><br><span class="line">    &amp;ngx_http_chunked_filter_module,</span><br><span class="line">    &amp;ngx_http_range_header_filter_module,</span><br><span class="line">    &amp;ngx_http_gzip_filter_module,</span><br><span class="line">    &amp;ngx_http_postpone_filter_module,</span><br><span class="line">    &amp;ngx_http_ssi_filter_module,</span><br><span class="line">    &amp;ngx_http_charset_filter_module,</span><br><span class="line">    &amp;ngx_http_userid_filter_module,</span><br><span class="line">    &amp;ngx_http_headers_filter_module,</span><br><span class="line">    &amp;ngx_http_copy_filter_module,</span><br><span class="line">    &amp;ngx_http_range_body_filter_module,</span><br><span class="line">    &amp;ngx_http_not_modified_filter_module,</span><br><span class="line">    NULL</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="é€šè¿‡Makefileè¿›è¡Œç¼–è¯‘"><a href="#é€šè¿‡Makefileè¿›è¡Œç¼–è¯‘" class="headerlink" title="é€šè¿‡Makefileè¿›è¡Œç¼–è¯‘"></a>é€šè¿‡Makefileè¿›è¡Œç¼–è¯‘</h1><ul><li>åœ¨å®‰è£…åŒ…è§£å‹ç›®å½•ä¸‹ç›´æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make install</span><br></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹nginxå®‰è£…ç›®å½•"><a href="#æŸ¥çœ‹nginxå®‰è£…ç›®å½•" class="headerlink" title="æŸ¥çœ‹nginxå®‰è£…ç›®å½•"></a>æŸ¥çœ‹nginxå®‰è£…ç›®å½•</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis nginx</span><br></pre></td></tr></table></figure><h1 id="å¯åŠ¨nginx"><a href="#å¯åŠ¨nginx" class="headerlink" title="å¯åŠ¨nginx"></a>å¯åŠ¨nginx</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx</span><br></pre></td></tr></table></figure><h1 id="åœæ­¢nginx"><a href="#åœæ­¢nginx" class="headerlink" title="åœæ­¢nginx"></a>åœæ­¢nginx</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s stop</span><br></pre></td></tr></table></figure><h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><ul><li><p>å¦‚æœåœ¨äº‘æœåŠ¡å™¨å®‰è£…éœ€è¦å¼€å¯é»˜è®¤çš„nginxç«¯å£ï¼š80</p></li><li><p>å¦‚æœåœ¨è™šæ‹Ÿæœºå®‰è£…ï¼Œéœ€è¦å…³é—­é˜²ç«å¢™</p></li><li><p>æœ¬åœ°winæˆ–macéœ€è¦å…³é—­é˜²ç«å¢™</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å®‰è£…æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springçš„7ç§äº‹ç‰©çš„ä¼ æ’­è¡Œä¸º</title>
      <link href="/2020/11/07/spring%E7%9A%847%E7%A7%8D%E4%BA%8B%E7%89%A9%E7%9A%84%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA/"/>
      <url>/2020/11/07/spring%E7%9A%847%E7%A7%8D%E4%BA%8B%E7%89%A9%E7%9A%84%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="Transactionæ³¨è§£"><a href="#Transactionæ³¨è§£" class="headerlink" title="@Transactionæ³¨è§£"></a>@Transactionæ³¨è§£</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Inherited</span><br><span class="line">@Documented</span><br><span class="line">public @interface Transactional &#123;</span><br><span class="line">//ä¸valueäº’ä¸ºåˆ«å(äº’ä¸ºåˆ«åçš„å±æ€§å€¼å¿…é¡»è®¾ç½®é»˜è®¤å€¼ï¼›äº’ä¸ºåˆ«åä¸èƒ½åŒæ—¶è®¾ç½®)</span><br><span class="line">@AliasFor(&quot;transactionManager&quot;)</span><br><span class="line">String value() default &quot;&quot;;</span><br><span class="line">@AliasFor(&quot;value&quot;)</span><br><span class="line">String transactionManager() default &quot;&quot;;</span><br><span class="line">    </span><br><span class="line">//äº‹ç‰©ä¼ æ’­è¡Œä¸º(é»˜è®¤å€¼Propagation.REQUIREDå¦‚æœæœ‰äº‹åŠ¡, é‚£ä¹ˆåŠ å…¥äº‹åŠ¡, æ²¡æœ‰çš„è¯æ–°å»ºä¸€ä¸ª)</span><br><span class="line">Propagation propagation() default Propagation.REQUIRED;</span><br><span class="line">   </span><br><span class="line">//äº‹ç‰©éš”ç¦»çº§åˆ«</span><br><span class="line">Isolation isolation() default Isolation.DEFAULT;</span><br><span class="line">   </span><br><span class="line">//äº‹ç‰©è¶…æ—¶è®¾ç½®</span><br><span class="line">int timeout() default TransactionDefinition.TIMEOUT_DEFAULT;</span><br><span class="line">   </span><br><span class="line">//è®¾ç½®å½“å‰äº‹ç‰©æ˜¯å¦ä¸ºåªè¯»äº‹ç‰©</span><br><span class="line">boolean readOnly() default false;</span><br><span class="line">   </span><br><span class="line">//å½“æ–¹æ³•ä¸­æŠ›å‡ºæŒ‡å®šå¼‚å¸¸æ•°ç»„ä¸­çš„å¼‚å¸¸æ—¶ï¼Œåˆ™è¿›è¡Œäº‹åŠ¡å›æ»š</span><br><span class="line">//@Transactional(rollbackFor=&#123;RuntimeException.class, Exception.class&#125;)</span><br><span class="line">Class&lt;? extends Throwable&gt;[] rollbackFor() default &#123;&#125;;</span><br><span class="line">   </span><br><span class="line">//å½“æ–¹æ³•ä¸­æŠ›å‡ºæŒ‡å®šå¼‚å¸¸åç§°æ•°ç»„ä¸­çš„å¼‚å¸¸æ—¶ï¼Œåˆ™è¿›è¡Œäº‹åŠ¡å›æ»šã€‚</span><br><span class="line">//@Transactional(rollbackForClassName=&#123;&quot;RuntimeException&quot;,&quot;Exception&quot;&#125;)</span><br><span class="line">String[] rollbackForClassName() default &#123;&#125;;</span><br><span class="line">   </span><br><span class="line">//å½“æ–¹æ³•ä¸­æŠ›å‡ºæŒ‡å®šå¼‚å¸¸æ•°ç»„ä¸­çš„å¼‚å¸¸æ—¶ï¼Œä¸è¿›è¡Œäº‹åŠ¡å›æ»šã€‚</span><br><span class="line">//@Transactional(noRollbackFor=&#123;RuntimeException.class, Exception.class&#125;)</span><br><span class="line">Class&lt;? extends Throwable&gt;[] noRollbackFor() default &#123;&#125;;</span><br><span class="line">   </span><br><span class="line">//å½“æ–¹æ³•ä¸­æŠ›å‡ºæŒ‡å®šå¼‚å¸¸åç§°æ•°ç»„ä¸­çš„å¼‚å¸¸æ—¶ï¼Œä¸è¿›è¡Œäº‹åŠ¡å›æ»šã€‚</span><br><span class="line">//@Transactional(noRollbackForClassName=&#123;&quot;RuntimeException&quot;,&quot;Exception&quot;&#125;)</span><br><span class="line">String[] noRollbackForClassName() default &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><ul><li><p>è¯¥æ³¨è§£ä¸­çš„æ–¹æ³•Transaction#propagation()è¯´æ˜äº†äº‹ç‰©çš„ä¼ æ’­è¡Œä¸ºè¿”å›çš„æ˜¯æšä¸¾ç±»å‹Propagation</p></li><li><p>@Transactional åªèƒ½è¢«åº”ç”¨åˆ°publicæ–¹æ³•ä¸Šå¦åˆ™æ²¡æœ‰äº‹ç‰©åŠŸèƒ½</p></li><li><p>@Transactional æ³¨è§£å¯ä»¥è¢«åº”ç”¨äºæ¥å£å®šä¹‰å’Œæ¥å£æ–¹æ³•</p></li><li><p>Springå›¢é˜Ÿçš„å»ºè®®æ˜¯ä½ åœ¨å…·ä½“çš„ç±»ï¼ˆæˆ–ç±»çš„æ–¹æ³•ï¼‰ä¸Šä½¿ç”¨ @Transactional æ³¨è§£ï¼Œè€Œä¸è¦ä½¿ç”¨åœ¨ç±»æ‰€è¦å®ç°çš„ä»»ä½•æ¥å£ä¸Šã€‚ä½ å½“ç„¶å¯ä»¥åœ¨æ¥å£ä¸Šä½¿ç”¨ @Transactional æ³¨è§£ï¼Œä½†æ˜¯è¿™å°†åªèƒ½å½“ä½ è®¾ç½®äº†åŸºäºæ¥å£çš„ä»£ç†æ—¶å®ƒæ‰ç”Ÿæ•ˆã€‚å› ä¸ºæ³¨è§£æ˜¯ä¸èƒ½ç»§æ‰¿çš„ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœä½ æ­£åœ¨ä½¿ç”¨åŸºäºç±»çš„ä»£ç†æ—¶ï¼Œé‚£ä¹ˆäº‹åŠ¡çš„è®¾ç½®å°†ä¸èƒ½è¢«åŸºäºç±»çš„ä»£ç†æ‰€è¯†åˆ«ï¼Œè€Œä¸”å¯¹è±¡ä¹Ÿå°†ä¸ä¼šè¢«äº‹åŠ¡ä»£ç†æ‰€åŒ…è£…ï¼ˆå°†è¢«ç¡®è®¤ä¸ºä¸¥é‡çš„ï¼‰ã€‚</p></li></ul><h1 id="äº‹ç‰©çš„ä¼ æ’­è¡Œä¸ºPropagation"><a href="#äº‹ç‰©çš„ä¼ æ’­è¡Œä¸ºPropagation" class="headerlink" title="äº‹ç‰©çš„ä¼ æ’­è¡Œä¸ºPropagation"></a>äº‹ç‰©çš„ä¼ æ’­è¡Œä¸ºPropagation</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Propagation &#123;</span><br><span class="line"><span class="comment">//å¦‚æœæœ‰äº‹åŠ¡, é‚£ä¹ˆåŠ å…¥äº‹åŠ¡, æ²¡æœ‰çš„è¯æ–°å»ºä¸€ä¸ª(é»˜è®¤)</span></span><br><span class="line">REQUIRED(TransactionDefinition.PROPAGATION_REQUIRED),</span><br><span class="line">    </span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰è°ƒç”¨æœ‰äº‹ç‰©åˆ™ä½¿ç”¨äº‹ç‰©ï¼Œå¦‚æœå½“å‰è°ƒç”¨æ²¡æœ‰äº‹ç‰©åˆ™ä¸ä½¿ç”¨äº‹ç‰©</span></span><br><span class="line">SUPPORTS(TransactionDefinition.PROPAGATION_SUPPORTS),</span><br><span class="line">   </span><br><span class="line"><span class="comment">//å¿…é¡»åœ¨ä¸€ä¸ªå·²æœ‰çš„äº‹åŠ¡ä¸­æ‰§è¡Œ,å¦åˆ™æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">MANDATORY(TransactionDefinition.PROPAGATION_MANDATORY),</span><br><span class="line">   </span><br><span class="line"><span class="comment">//ä¸ç®¡æ˜¯å¦å­˜åœ¨äº‹åŠ¡,éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡,åŸæ¥çš„æŒ‚èµ·,æ–°çš„æ‰§è¡Œå®Œæ¯•,ç»§ç»­æ‰§è¡Œè€çš„äº‹åŠ¡</span></span><br><span class="line">REQUIRES_NEW(TransactionDefinition.PROPAGATION_REQUIRES_NEW),</span><br><span class="line">   </span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰æœ‰äº‹ç‰©å°†äº‹ç‰©æŒ‚èµ·ï¼Œè‡ªå·±ä¸ä½¿ç”¨äº‹ç‰©è¿›è¡Œæ•°æ®åº“æ“ä½œ</span></span><br><span class="line">NOT_SUPPORTED(TransactionDefinition.PROPAGATION_NOT_SUPPORTED),</span><br><span class="line">   </span><br><span class="line"><span class="comment">//å¿…é¡»åœ¨ä¸€ä¸ªæ²¡æœ‰çš„äº‹åŠ¡ä¸­æ‰§è¡Œ,å¦åˆ™æŠ›å‡ºå¼‚å¸¸(ä¸Propagation.MANDATORYç›¸å)</span></span><br><span class="line">NEVER(TransactionDefinition.PROPAGATION_NEVER),</span><br><span class="line">   </span><br><span class="line"><span class="comment">//æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œä¸€ä¸ªåµŒå¥—äº‹åŠ¡ï¼Œå½“å‰äº‹åŠ¡æäº¤æ—¶åµŒå¥—äº‹ç‰©æ‰èƒ½æäº¤ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ã€‚</span></span><br><span class="line">NESTED(TransactionDefinition.PROPAGATION_NESTED);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äº‹ç‰©éš”ç¦»çº§åˆ«Isolation"><a href="#äº‹ç‰©éš”ç¦»çº§åˆ«Isolation" class="headerlink" title="äº‹ç‰©éš”ç¦»çº§åˆ«Isolation"></a>äº‹ç‰©éš”ç¦»çº§åˆ«Isolation</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Isolation &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«</span></span><br><span class="line">DEFAULT(TransactionDefinition.ISOLATION_DEFAULT),</span><br><span class="line"><span class="comment">//è¯»æœªæäº¤ï¼ˆè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰</span></span><br><span class="line">READ_UNCOMMITTED(TransactionDefinition.ISOLATION_READ_UNCOMMITTED),</span><br><span class="line"><span class="comment">//ä¸å¯é‡å¤è¯»ï¼ˆè§£å†³ï¼šè„è¯»/æœªè§£å†³ï¼šä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰</span></span><br><span class="line">READ_COMMITTED(TransactionDefinition.ISOLATION_READ_COMMITTED),</span><br><span class="line"><span class="comment">//å¯é‡å¤è¯»(mysqlé»˜è®¤ä½¿ç”¨çš„éš”ç¦»çº§åˆ«)ï¼ˆè§£å†³ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»/æœªè§£å†³ï¼šå¹»è¯»ï¼‰</span></span><br><span class="line">REPEATABLE_READ(TransactionDefinition.ISOLATION_REPEATABLE_READ),</span><br><span class="line"><span class="comment">//ä¸²è¡ŒåŒ–ï¼ˆè§£å†³æ‰€æœ‰é—®é¢˜ï¼‰</span></span><br><span class="line">SERIALIZABLE(TransactionDefinition.ISOLATION_SERIALIZABLE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äº‹ç‰©çš„åŸºæœ¬è¦ç´ -ACID"><a href="#äº‹ç‰©çš„åŸºæœ¬è¦ç´ -ACID" class="headerlink" title="äº‹ç‰©çš„åŸºæœ¬è¦ç´ (ACID)"></a>äº‹ç‰©çš„åŸºæœ¬è¦ç´ (ACID)</h1><h2 id="åŸå­æ€§ï¼ˆAtomicityï¼‰"><a href="#åŸå­æ€§ï¼ˆAtomicityï¼‰" class="headerlink" title="åŸå­æ€§ï¼ˆAtomicityï¼‰"></a>åŸå­æ€§ï¼ˆAtomicityï¼‰</h2><ul><li>äº‹åŠ¡å¼€å§‹åæ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨åšå®Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸åšï¼Œä¸å¯èƒ½åœæ»åœ¨ä¸­é—´ç¯èŠ‚ã€‚äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™ï¼Œä¼šå›æ»šåˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œæ‰€æœ‰çš„æ“ä½œå°±åƒæ²¡æœ‰å‘ç”Ÿä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œå°±åƒåŒ–å­¦ä¸­å­¦è¿‡çš„åŸå­ï¼Œæ˜¯ç‰©è´¨æ„æˆçš„åŸºæœ¬å•ä½ã€‚</li></ul><h2 id="ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰"><a href="#ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰" class="headerlink" title="ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰"></a>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</h2><ul><li>äº‹åŠ¡å¼€å§‹å‰å’Œç»“æŸåï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸæ²¡æœ‰è¢«ç ´å ã€‚æ¯”å¦‚Aå‘Bè½¬è´¦ï¼Œä¸å¯èƒ½Aæ‰£äº†é’±ï¼ŒBå´æ²¡æ”¶åˆ°ã€‚</li></ul><h2 id="éš”ç¦»æ€§ï¼ˆIsolationï¼‰"><a href="#éš”ç¦»æ€§ï¼ˆIsolationï¼‰" class="headerlink" title="éš”ç¦»æ€§ï¼ˆIsolationï¼‰"></a>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</h2><ul><li>åŒä¸€æ—¶é—´ï¼Œåªå…è®¸ä¸€ä¸ªäº‹åŠ¡è¯·æ±‚åŒä¸€æ•°æ®ï¼Œä¸åŒçš„äº‹åŠ¡ä¹‹é—´å½¼æ­¤æ²¡æœ‰ä»»ä½•å¹²æ‰°ã€‚</li></ul><h2 id="æŒä¹…æ€§ï¼ˆDurabilityï¼‰"><a href="#æŒä¹…æ€§ï¼ˆDurabilityï¼‰" class="headerlink" title="æŒä¹…æ€§ï¼ˆDurabilityï¼‰"></a>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</h2><ul><li>äº‹åŠ¡å®Œæˆåï¼Œäº‹åŠ¡å¯¹æ•°æ®åº“çš„æ‰€æœ‰æ›´æ–°å°†è¢«ä¿å­˜åˆ°æ•°æ®åº“ï¼Œä¸èƒ½å›æ»šã€‚</li></ul><h1 id="äº‹ç‰©çš„å¹¶å‘é—®é¢˜"><a href="#äº‹ç‰©çš„å¹¶å‘é—®é¢˜" class="headerlink" title="äº‹ç‰©çš„å¹¶å‘é—®é¢˜"></a>äº‹ç‰©çš„å¹¶å‘é—®é¢˜</h1><h2 id="è„è¯»"><a href="#è„è¯»" class="headerlink" title="è„è¯»"></a>è„è¯»</h2><ul><li>äº‹åŠ¡Aè¯»å–äº†äº‹åŠ¡Bæ›´æ–°çš„æ•°æ®ï¼Œç„¶åBå›æ»šæ“ä½œï¼Œé‚£ä¹ˆAè¯»å–åˆ°çš„æ•°æ®æ˜¯è„æ•°æ®</li></ul><h2 id="ä¸å¯é‡å¤è¯»"><a href="#ä¸å¯é‡å¤è¯»" class="headerlink" title="ä¸å¯é‡å¤è¯»"></a>ä¸å¯é‡å¤è¯»</h2><ul><li>äº‹åŠ¡ A å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œäº‹åŠ¡ B åœ¨äº‹åŠ¡Aå¤šæ¬¡è¯»å–çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°æ®ä½œäº†æ›´æ–°å¹¶æäº¤ï¼Œå¯¼è‡´äº‹åŠ¡Aå¤šæ¬¡è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œç»“æœ ä¸ä¸€è‡´ã€‚</li></ul><h2 id="å¹»è¯»"><a href="#å¹»è¯»" class="headerlink" title="å¹»è¯»"></a>å¹»è¯»</h2><ul><li>ç³»ç»Ÿç®¡ç†å‘˜Aå°†æ•°æ®åº“ä¸­æ‰€æœ‰å­¦ç”Ÿçš„æˆç»©ä»å…·ä½“åˆ†æ•°æ”¹ä¸ºABCDEç­‰çº§ï¼Œä½†æ˜¯ç³»ç»Ÿç®¡ç†å‘˜Bå°±åœ¨è¿™ä¸ªæ—¶å€™æ’å…¥äº†ä¸€æ¡å…·ä½“åˆ†æ•°çš„è®°å½•ï¼Œå½“ç³»ç»Ÿç®¡ç†å‘˜Aæ”¹ç»“æŸåå‘ç°è¿˜æœ‰ä¸€æ¡è®°å½•æ²¡æœ‰æ”¹è¿‡æ¥ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œè¿™å°±å«å¹»è¯»ã€‚</li></ul><h2 id="æ³¨æ„-1"><a href="#æ³¨æ„-1" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ³¨æ„ï¼šä¸å¯é‡å¤è¯»çš„å’Œå¹»è¯»å¾ˆå®¹æ˜“æ··æ·†ï¼Œä¸å¯é‡å¤è¯»ä¾§é‡äºä¿®æ”¹ï¼Œå¹»è¯»ä¾§é‡äºæ–°å¢æˆ–åˆ é™¤ã€‚è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜åªéœ€é”ä½æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œè§£å†³å¹»è¯»éœ€è¦é”è¡¨ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
          <category> Spring </category>
          
          <category> äº‹ç‰© </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> Spring </tag>
            
            <tag> äº‹ç‰© </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springbootæ’é™¤ä¾èµ–</title>
      <link href="/2020/11/04/springboot%E6%8E%92%E9%99%A4%E4%BE%9D%E8%B5%96/"/>
      <url>/2020/11/04/springboot%E6%8E%92%E9%99%A4%E4%BE%9D%E8%B5%96/</url>
      
        <content type="html"><![CDATA[<ul><li>éœ€æ±‚ï¼šç”±äºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯çˆ¶å­ç»“æ„çš„Mavené¡¹ç›®ï¼Œå¯èƒ½æˆ‘ä»¬åœ¨parenté¡¹ç›®ä¸­ä¾èµ–äº†å¾ˆå¤šåŸºç¡€åŒ…ï¼ˆå¯èƒ½åŒ…å«æœ‰redisï¼Œæ•°æ®åº“çš„ç›¸å…³åŒ…ï¼‰ï¼Œé‚£æˆ‘ä»¬çš„å­é¡¹ç›®å…¨éƒ¨ä¾èµ–parentï¼Œä½†æ˜¯å¯èƒ½æˆ‘ä»¬çš„æœåŠ¡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆä¸éœ€è¦Redis/æ•°æ®åº“ï¼‰ï¼Œå®šæ—¶ä»»åŠ¡æœåŠ¡ï¼ˆä¸éœ€è¦Redisï¼‰ç­‰ç­‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ’åºä¸éœ€è¦çš„ç»„ä»¶</li></ul><h1 id="æ’é™¤Mavenä¾èµ–ä½¿ç”¨exclusionæ ‡ç­¾"><a href="#æ’é™¤Mavenä¾èµ–ä½¿ç”¨exclusionæ ‡ç­¾" class="headerlink" title="æ’é™¤Mavenä¾èµ–ä½¿ç”¨exclusionæ ‡ç­¾"></a>æ’é™¤Mavenä¾èµ–ä½¿ç”¨exclusionæ ‡ç­¾</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;  </span><br><span class="line">    &lt;groupId&gt;com.nk&lt;/groupId&gt;  </span><br><span class="line">    &lt;artifactId&gt;system&lt;/artifactId&gt;  </span><br><span class="line">    &lt;version&gt;0.0.1&lt;/version&gt;  </span><br><span class="line">    &lt;exclusions&gt;  </span><br><span class="line">        &lt;exclusion&gt;  </span><br><span class="line">            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;  </span><br><span class="line">            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;  </span><br><span class="line">        &lt;/exclusion&gt;  </span><br><span class="line">    &lt;/exclusions&gt;  </span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h1 id="ç¦ç”¨è‡ªåŠ¨åŒ–é…ç½®é¿å…ä»Šå®‰åœ¨è‡ªåŠ¨åŒ–é…ç½®"><a href="#ç¦ç”¨è‡ªåŠ¨åŒ–é…ç½®é¿å…ä»Šå®‰åœ¨è‡ªåŠ¨åŒ–é…ç½®" class="headerlink" title="ç¦ç”¨è‡ªåŠ¨åŒ–é…ç½®é¿å…ä»Šå®‰åœ¨è‡ªåŠ¨åŒ–é…ç½®"></a>ç¦ç”¨è‡ªåŠ¨åŒ–é…ç½®é¿å…ä»Šå®‰åœ¨è‡ªåŠ¨åŒ–é…ç½®</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAutoConfiguration</span>(exclude=&#123;DataSourceAutoConfiguration.class&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springbootçš„è‡ªåŠ¨è£…é…</title>
      <link href="/2020/11/04/springboog%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/"/>
      <url>/2020/11/04/springboog%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="å¯åŠ¨æ–¹æ³•"><a href="#å¯åŠ¨æ–¹æ³•" class="headerlink" title="å¯åŠ¨æ–¹æ³•"></a>å¯åŠ¨æ–¹æ³•</h1><ul><li>Application#main()</li></ul><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(GoodsApplication.class, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>SpringApplication#run()</li></ul><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€ä¸ªé™æ€åŠ©æ‰‹é€šè¿‡ä¼ å…¥çš„sourceä½¿ç”¨é»˜è®¤é…ç½®</span></span><br><span class="line"><span class="comment"> * è¿è¡Œä¸€ä¸ªspringåº”ç”¨,è¿™ä¸ªé»˜è®¤çš„é…ç½®æ¥è‡ªäº<span class="doctag">@SpringBootApplication</span>æ³¨è§£</span></span><br><span class="line"><span class="comment"> * argså‚æ•°é€šå¸¸å°†main()æ–¹æ³•ä¸­çš„å‚æ•°ä¼ å…¥å³å¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¿”å›ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ä¸Šä¸‹æ–‡å¯¹è±¡ &#123;<span class="doctag">@link</span> ApplicationContext&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(Class&lt;?&gt; primarySource, String... args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> run(<span class="keyword">new</span> Class&lt;?&gt;[] &#123; primarySource &#125;, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Applicationå¯åŠ¨ç±»ä¸Šçš„æ³¨è§£"><a href="#Applicationå¯åŠ¨ç±»ä¸Šçš„æ³¨è§£" class="headerlink" title="Applicationå¯åŠ¨ç±»ä¸Šçš„æ³¨è§£"></a>Applicationå¯åŠ¨ç±»ä¸Šçš„æ³¨è§£</h1><ul><li>@SpringBootApplication</li></ul><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="comment">//@Configurationçš„æ´¾ç”Ÿæ³¨è§£æŒ‡å®šè¯¥ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="comment">//å¼€å¯è‡ªåŠ¨é…ç½®(é‡ç‚¹/çº¦å®šå¤§äºé…ç½®)</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="comment">//æ‰«æAppliactionç±»ä¸‹çš„æ‰€æœ‰å­åŒ…</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(excludeFilters = &#123; <span class="meta">@Filter</span>(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),<span class="meta">@Filter</span>(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)</span><br></pre></td></tr></table></figure><h1 id="EnableAutoConfiguration-çº¦å®šå¤§äºé…ç½®"><a href="#EnableAutoConfiguration-çº¦å®šå¤§äºé…ç½®" class="headerlink" title="@EnableAutoConfiguration (çº¦å®šå¤§äºé…ç½®)"></a>@EnableAutoConfiguration (çº¦å®šå¤§äºé…ç½®)</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="comment">//importå¯¼å…¥å„ç§ConfigBean  è‡ªåŠ¨è£…é…çš„é€‰æ‹©å™¨(å¯ä»¥é€‰æ‹©å¾ˆå¤šè‡ªåŠ¨è£…é…çš„ç±»)</span></span><br><span class="line"><span class="meta">@Import</span>(AutoConfigurationImportSelector.class)</span><br></pre></td></tr></table></figure><h1 id="Import-AutoConfigurationImportSelector-class-é€‰æ‹©è‡ªåŠ¨è£…é…çš„ç±»"><a href="#Import-AutoConfigurationImportSelector-class-é€‰æ‹©è‡ªåŠ¨è£…é…çš„ç±»" class="headerlink" title="@Import(AutoConfigurationImportSelector.class) é€‰æ‹©è‡ªåŠ¨è£…é…çš„ç±»"></a>@Import(AutoConfigurationImportSelector.class) é€‰æ‹©è‡ªåŠ¨è£…é…çš„ç±»</h1><ul><li><p>AutoConfigurationImportSelector#selectImports()æ˜¯è¯¥ç±»æœ€é‡è¦çš„æ–¹æ³•ï¼Œç”¨äºé€‰æ‹©éœ€è¦è£…é…çš„ç±»</p></li><li><p>AutoConfigurationImportSelector#getAutoConfigurationEntry() è·å–éœ€è¦è‡ªåŠ¨è£…é…çš„ç±»</p></li></ul><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Return the &#123;<span class="doctag">@link</span> AutoConfigurationEntry&#125; based on the &#123;<span class="doctag">@link</span> AnnotationMetadata&#125;</span></span><br><span class="line"><span class="comment"> * of the importing &#123;<span class="doctag">@link</span> Configuration <span class="doctag">@Configuration</span>&#125; class.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> autoConfigurationMetadata the auto-configuration metadata</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> annotationMetadata the annotation metadata of the configuration class</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the auto-configurations that should be imported</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> AutoConfigurationEntry <span class="title">getAutoConfigurationEntry</span><span class="params">(AutoConfigurationMetadata autoConfigurationMetadata,</span></span></span><br><span class="line"><span class="function"><span class="params">AnnotationMetadata annotationMetadata)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (!isEnabled(annotationMetadata)) &#123;</span><br><span class="line"><span class="keyword">return</span> EMPTY_ENTRY;</span><br><span class="line">&#125;</span><br><span class="line">AnnotationAttributes attributes = getAttributes(annotationMetadata);</span><br><span class="line"><span class="comment">//è·å–å€™é€‰çš„è‡ªåŠ¨è£…é…çš„ç±»</span></span><br><span class="line">List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);</span><br><span class="line">configurations = removeDuplicates(configurations);</span><br><span class="line">Set&lt;String&gt; exclusions = getExclusions(annotationMetadata, attributes);</span><br><span class="line">checkExcludedClasses(configurations, exclusions);</span><br><span class="line">configurations.removeAll(exclusions);</span><br><span class="line">configurations = filter(configurations, autoConfigurationMetadata);</span><br><span class="line">fireAutoConfigurationImportEvents(configurations, exclusions);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> AutoConfigurationEntry(configurations, exclusions);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>AutoConfigurationImportSelector#getCandidateConfigurations() è·å–å€™é€‰è‡ªåŠ¨é…ç½®</li></ul><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Return the auto-configuration class names that should be considered. By default</span></span><br><span class="line"><span class="comment"> * this method will load candidates using &#123;<span class="doctag">@link</span> SpringFactoriesLoader&#125; with</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> #getSpringFactoriesLoaderFactoryClass()&#125;.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> metadata the source metadata</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> attributes the &#123;<span class="doctag">@link</span> #getAttributes(AnnotationMetadata) annotation</span></span><br><span class="line"><span class="comment"> * attributes&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a list of candidate configurations</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> List&lt;String&gt; <span class="title">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> </span>&#123;</span><br><span class="line"><span class="comment">//å…·ä½“åœ¨è¿™é‡Œå¯ä»¥æŠ½æ—¶é—´ç»†ç»†åˆ†æ</span></span><br><span class="line">List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),</span><br><span class="line">getBeanClassLoader());</span><br><span class="line"><span class="comment">//configurationsé›†åˆä¸ºç©ºçš„è¯æŠ¥å¼‚å¸¸ï¼Œåœ¨META-INF/spring.factoriesä¸‹é¢æ‰¾ä¸åˆ°è‡ªåŠ¨è£…é…çš„ç±»ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰åŒ…è£…ï¼Œè¯·ç¡®ä¿è¯¥æ–‡ä»¶æ­£ç¡®æ— è¯¯ã€‚</span></span><br><span class="line">Assert.notEmpty(configurations, <span class="string">"No auto configuration classes found in META-INF/spring.factories. If you "</span></span><br><span class="line">+ <span class="string">"are using a custom packaging, make sure that file is correct."</span>);</span><br><span class="line"><span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="META-INF-spring-factories"><a href="#META-INF-spring-factories" class="headerlink" title="META-INF/spring.factories"></a>META-INF/spring.factories</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"># Initializers</span><br><span class="line">org.springframework.context.ApplicationContextInitializer=\</span><br><span class="line">org.springframework.boot.autoconfigure.SharedMetadataReaderFactoryContextInitializer,\</span><br><span class="line">org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener</span><br><span class="line"></span><br><span class="line"># Application Listeners</span><br><span class="line">org.springframework.context.ApplicationListener=\</span><br><span class="line">org.springframework.boot.autoconfigure.BackgroundPreinitializer</span><br><span class="line"></span><br><span class="line"># Auto Configuration Import Listeners</span><br><span class="line">org.springframework.boot.autoconfigure.AutoConfigurationImportListener=\</span><br><span class="line">org.springframework.boot.autoconfigure.condition.ConditionEvaluationReportAutoConfigurationImportListener</span><br><span class="line"></span><br><span class="line"># Auto Configuration Import Filters</span><br><span class="line">org.springframework.boot.autoconfigure.AutoConfigurationImportFilter=\</span><br><span class="line">org.springframework.boot.autoconfigure.condition.OnBeanCondition,\</span><br><span class="line">org.springframework.boot.autoconfigure.condition.OnClassCondition,\</span><br><span class="line">org.springframework.boot.autoconfigure.condition.OnWebApplicationCondition</span><br><span class="line"></span><br><span class="line"># Auto Configure</span><br><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cloud.CloudServiceConnectorsAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.jdbc.JdbcRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoReactiveDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoReactiveRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.elasticsearch.rest.RestClientAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.influx.InfluxDbAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.MongoReactiveAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.quartz.QuartzAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.reactor.core.ReactorCoreAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.task.TaskSchedulingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\</span><br><span class="line"># springäº‹ç‰©çš„è‡ªåŠ¨è£…é…,SpringApplicationé¡¹ç›®å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨è£…é…ï¼Œéœ€è¦ä½¿ç”¨äº‹ç‰©çš„åœ°æ–¹åªè¦æ·»åŠ ä¸Š@TransActionæ³¨è§£å³å¯å¼€å¯äº‹ç‰©</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration,\</span><br><span class="line">#springbootå†…ç½®Tomcatå®¹å™¨</span><br><span class="line">org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.function.client.ClientHttpConnectorAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration,\</span><br><span class="line"><span class="comment">//å†…ç½®çš„Tomcatåœ¨è¿™é‡Œè¢«å¯åŠ¨(org.apache.catalina.startup.Tomcat)</span></span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration,\</span><br><span class="line"><span class="comment">//springMvcçš„è‡ªåŠ¨è£…é…é…ç½®</span></span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.reactive.WebSocketReactiveAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.servlet.WebSocketMessagingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.webservices.client.WebServiceTemplateAutoConfiguration</span><br><span class="line"></span><br><span class="line"># Failure analyzers</span><br><span class="line">org.springframework.boot.diagnostics.FailureAnalyzer=\</span><br><span class="line">org.springframework.boot.autoconfigure.diagnostics.analyzer.NoSuchBeanDefinitionFailureAnalyzer,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceBeanCreationFailureAnalyzer,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.HikariDriverConfigurationFailureAnalyzer,\</span><br><span class="line">org.springframework.boot.autoconfigure.session.NonUniqueSessionRepositoryFailureAnalyzer</span><br><span class="line"></span><br><span class="line"># Template availability providers</span><br><span class="line">org.springframework.boot.autoconfigure.template.TemplateAvailabilityProvider=\</span><br><span class="line">org.springframework.boot.autoconfigure.freemarker.FreeMarkerTemplateAvailabilityProvider,\</span><br><span class="line">org.springframework.boot.autoconfigure.mustache.MustacheTemplateAvailabilityProvider,\</span><br><span class="line">org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAvailabilityProvider,\</span><br><span class="line">org.springframework.boot.autoconfigure.thymeleaf.ThymeleafTemplateAvailabilityProvider,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.JspTemplateAvailabilityProvider</span><br></pre></td></tr></table></figure><h1 id="EmbeddedWebServerFactoryCustomizerAutoConfiguration-class"><a href="#EmbeddedWebServerFactoryCustomizerAutoConfiguration-class" class="headerlink" title="EmbeddedWebServerFactoryCustomizerAutoConfiguration.class"></a>EmbeddedWebServerFactoryCustomizerAutoConfiguration.class</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Nested configuration if Tomcat is being used.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123; Tomcat.class, UpgradeProtocol.class &#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TomcatWebServerFactoryCustomizerConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TomcatWebServerFactoryCustomizer <span class="title">tomcatWebServerFactoryCustomizer</span><span class="params">(Environment environment,</span></span></span><br><span class="line"><span class="function"><span class="params">ServerProperties serverProperties)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> TomcatWebServerFactoryCustomizer(environment, serverProperties);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CompletableFutureæ„å»ºå¼‚æ­¥åº”ç”¨</title>
      <link href="/2020/06/05/CompletableFuture%E6%9E%84%E5%BB%BA%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/"/>
      <url>/2020/06/05/CompletableFuture%E6%9E%84%E5%BB%BA%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Futureæ¥å£çš„å±€é™æ€§"><a href="#Futureæ¥å£çš„å±€é™æ€§" class="headerlink" title="Futureæ¥å£çš„å±€é™æ€§"></a>Futureæ¥å£çš„å±€é™æ€§</h1><p>æˆ‘ä»¬çŸ¥é“Futureæ¥å£æä¾›äº†æ–¹æ³•æ¥æ£€æµ‹å¼‚æ­¥è®¡ç®—æ˜¯å¦å·²ç»ç»“æŸï¼ˆä½¿ç”¨isDoneæ–¹æ³•ï¼‰ï¼Œç­‰å¾…å¼‚æ­¥æ“ä½œç»“æŸï¼Œä»¥åŠè·å–è®¡ç®—çš„ç»“æœã€‚<br>ä½†æ˜¯è¿™äº›ç‰¹æ€§è¿˜ä¸è¶³ä»¥è®©ä½ ç¼–å†™ç®€æ´çš„å¹¶å‘ä»£ç ã€‚<br>æˆ‘ä»¬å¾ˆéš¾è¡¨è¿°Futureç»“æœä¹‹é—´çš„ä¾èµ–æ€§ï¼›ä»æ–‡å­—æè¿°ä¸Šè¿™å¾ˆç®€å•ï¼Œâ€œå½“é•¿æ—¶é—´è®¡ç®—ä»»åŠ¡å®Œæˆæ—¶ï¼Œè¯·å°†è¯¥è®¡ç®—çš„ç»“æœé€šçŸ¥åˆ°å¦ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„è®¡ç®—ä»»åŠ¡ï¼Œè¿™ä¸¤ä¸ªè®¡ç®—ä»»åŠ¡éƒ½å®Œæˆåï¼Œå°†è®¡ç®—çš„ç»“æœä¸å¦ä¸€ä¸ªæŸ¥è¯¢æ“ä½œç»“æœåˆå¹¶â€ã€‚<br>ä½¿ç”¨Futureä¸­æä¾›çš„æ–¹æ³•å®Œæˆè¿™æ ·çš„æ“ä½œåˆæ˜¯å¦å¤–ä¸€å›äº‹ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦æ›´å…·æè¿°èƒ½åŠ›çš„ç‰¹æ€§çš„åŸå› ï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›ã€‚</p><ul><li>å°†ä¸¤ä¸ªå¼‚æ­¥è®¡ç®—åˆå¹¶ä¸ºä¸€ä¸ªâ€”â€”è¿™ä¸¤ä¸ªå¼‚æ­¥è®¡ç®—ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼ŒåŒæ—¶ç¬¬äºŒä¸ªåˆä¾èµ–äºç¬¬ä¸€ä¸ªçš„ç»“æœã€‚</li><li>ç­‰å¾…Futureé›†åˆä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆã€‚</li><li>ä»…ç­‰å¾…Futureé›†åˆä¸­æœ€å¿«ç»“æŸçš„ä»»åŠ¡å®Œæˆï¼ˆæœ‰å¯èƒ½å› ä¸ºå®ƒä»¬è¯•å›¾é€šè¿‡ä¸åŒçš„æ–¹å¼è®¡ç®—åŒä¸€ä¸ªå€¼ï¼‰ï¼Œå¹¶è¿”å›å®ƒçš„ç»“æœã€‚</li><li>é€šè¿‡ç¼–ç¨‹æ–¹å¼å®Œæˆä¸€ä¸ªFutureä»»åŠ¡çš„æ‰§è¡Œï¼ˆå³ä»¥æ‰‹å·¥è®¾å®šå¼‚æ­¥æ“ä½œç»“æœçš„æ–¹å¼ï¼‰ã€‚</li><li>åº”å¯¹Futureçš„å®Œæˆäº‹ä»¶ï¼ˆå³å½“Futureçš„å®Œæˆäº‹ä»¶å‘ç”Ÿæ—¶ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œå¹¶èƒ½ä½¿ç”¨Futureè®¡ç®—çš„ç»“æœè¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œï¼Œä¸åªæ˜¯ç®€å•åœ°é˜»å¡ç­‰å¾…æ“ä½œçš„ç»“æœï¼‰ã€‚</li></ul><h1 id="åº—é“ºå®ä½“ç±»"><a href="#åº—é“ºå®ä½“ç±»" class="headerlink" title="åº—é“ºå®ä½“ç±»"></a>åº—é“ºå®ä½“ç±»</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> world.ismyfree.async.demo01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ï¼štanliyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> ï¼šCreated in 2020/6/4 21:27</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ï¼šå•†åº—å®ä½“</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shop</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line">    <span class="keyword">private</span> String shopName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setShopName</span><span class="params">(String shopName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shopName = shopName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getShopName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> shopName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Shop</span><span class="params">(String shopName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shopName = shopName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">(String product)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> calculatePrice(product);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Future&lt;Double&gt; <span class="title">getPriceAsync</span><span class="params">(String product)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> CompletableFuture.supplyAsync(() -&gt; calculatePrice(product));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">double</span> <span class="title">calculatePrice</span><span class="params">(String product)</span> </span>&#123;</span><br><span class="line">        delay();</span><br><span class="line">        <span class="keyword">return</span> random.nextDouble() * product.charAt(<span class="number">0</span>) + product.charAt(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">delay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000L</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åº—é“ºæµ‹è¯•ä»£ç "><a href="#åº—é“ºæµ‹è¯•ä»£ç " class="headerlink" title="åº—é“ºæµ‹è¯•ä»£ç "></a>åº—é“ºæµ‹è¯•ä»£ç </h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> world.ismyfree.async.demo01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadFactory;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ï¼štanliyuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> ï¼šCreated in 2020/6/5 10:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ï¼š</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShopTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å•†åº—åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Shop&gt; shops = Arrays.asList(</span><br><span class="line">            <span class="keyword">new</span> Shop(<span class="string">"BestShop"</span>),</span><br><span class="line">            <span class="keyword">new</span> Shop(<span class="string">"MyShop"</span>),</span><br><span class="line">            <span class="keyword">new</span> Shop(<span class="string">"YourShop"</span>),</span><br><span class="line">            <span class="keyword">new</span> Shop(<span class="string">"SuperShop"</span>)</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šåˆ¶å¤šçº¿ç¨‹æ‰§è¡Œå™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Executor executor = Executors.newFixedThreadPool(Math.min(shops.size(), <span class="number">100</span>), <span class="keyword">new</span> ThreadFactory() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Thread <span class="title">newThread</span><span class="params">(Runnable r)</span> </span>&#123;</span><br><span class="line">            Thread t = <span class="keyword">new</span> Thread(r);</span><br><span class="line">            t.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * CompletableFutureç‰ˆæœ¬è·å–ä»·æ ¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> product</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">getPricesCompletetableFuture</span><span class="params">(String product)</span> </span>&#123;</span><br><span class="line">        List&lt;CompletableFuture&lt;String&gt;&gt; pricesFuture = shops.stream().map(</span><br><span class="line">                s -&gt; CompletableFuture.supplyAsync(</span><br><span class="line">                        () -&gt; String.format(<span class="string">"%såœ¨%sçš„ä»·æ ¼æ˜¯%s"</span>, product, s.getShopName(), s.getPrice(product)),</span><br><span class="line">                        executor</span><br><span class="line">                )</span><br><span class="line">        ).collect(Collectors.toList());</span><br><span class="line">        System.out.println(<span class="string">"å¼‚æ­¥å¯¹è±¡å·²ç»è¿”å›,ç­‰å¾…è€—æ—¶ä»»åŠ¡è®¡ç®—å®Œæˆ"</span>);</span><br><span class="line">        <span class="keyword">return</span> pricesFuture.stream().map(CompletableFuture::join).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨é¡ºåºæµè·å–å•†å“çš„ä»·æ ¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> product</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">getPricesStream</span><span class="params">(String product)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> shops.stream().map(s -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> s.getShopName() + <span class="string">"çš„ä»·æ ¼æ˜¯"</span> + s.getPrice(product);</span><br><span class="line">        &#125;).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨å¹¶å‘æµè·å–å•†å“çš„ä»·æ ¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> product</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">getPricesParallelStream</span><span class="params">(String product)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> shops.parallelStream().map(s -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> s.getShopName() + <span class="string">"çš„ä»·æ ¼æ˜¯"</span> + s.getPrice(product);</span><br><span class="line">        &#125;).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åšä¸€äº›æœ‰æ„ä¹‰çš„äº‹æƒ…</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åšä¸€äº›å…¶ä»–æœ‰æ„ä¹‰çš„äº‹"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//System.out.println(getPricesStream("Apples"));</span></span><br><span class="line">        <span class="comment">//System.out.println(getPricesParallelStream("Apples"));</span></span><br><span class="line">        System.out.println(getPricesCompletetableFuture(<span class="string">"Apples"</span>));</span><br><span class="line">        <span class="keyword">long</span> invocationTime = System.currentTimeMillis() - start;</span><br><span class="line">        System.out.printf(<span class="string">"å¼‚æ­¥å¯¹è±¡è¿”å›æ—¶é—´%dæ¯«ç§’%n"</span>, invocationTime);</span><br><span class="line">        doSomething();</span><br><span class="line">        <span class="keyword">long</span> retrievalTime = System.currentTimeMillis() - start;</span><br><span class="line">        System.out.printf(<span class="string">"è®¡ç®—ç»“æœè¿”å›æ—¶é—´%dæ¯«ç§’%n"</span>, retrievalTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒç»­æ›´æ–°ä¸­ã€‹ã€‹ã€‹ã€‹ã€‹</p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼‚æ­¥åº”ç”¨å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå‘½ä»¤å¤§å…¨</title>
      <link href="/2019/11/17/Docker%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"/>
      <url>/2019/11/17/Docker%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†"><a href="#å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†" class="headerlink" title="å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†"></a>å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</h1><h2 id="run"><a href="#run" class="headerlink" title="run"></a>run</h2><p>docker run ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤</p><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure><h3 id="OPTIONSè¯´æ˜ï¼š"><a href="#OPTIONSè¯´æ˜ï¼š" class="headerlink" title="OPTIONSè¯´æ˜ï¼š"></a>OPTIONSè¯´æ˜ï¼š</h3><ul><li><p>-a stdin: æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼›</p></li><li><p>-d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</p></li><li><p>-i: ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›</p></li><li><p>-P: éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„é«˜ç«¯å£ï¼›</p></li><li><p>-t: ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›</p></li><li><p>â€“name=â€nginx-lbâ€: ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›</p></li><li><p>â€“dns 8.8.8.8: æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</p></li><li><p>â€“dns-search example.com: æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</p></li><li><p>-h â€œmarsâ€: æŒ‡å®šå®¹å™¨çš„hostnameï¼›</p></li><li><p>-e username=â€ritchieâ€: è®¾ç½®ç¯å¢ƒå˜é‡ï¼›</p></li><li><p>â€“env-file=[]: ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼›</p></li><li><p>â€“cpuset=â€0-2â€ or â€“cpuset=â€0,1,2â€: ç»‘å®šå®¹å™¨åˆ°æŒ‡å®šCPUè¿è¡Œï¼›</p></li><li><p>-m :è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›</p></li><li><p>â€“net=â€bridgeâ€: æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼›</p></li><li><p>â€“link=[]: æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼›</p></li><li><p>â€“expose=[]: å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼›</p></li><li><p>â€“volume , -v:    ç»‘å®šä¸€ä¸ªå·ï¼›</p></li></ul><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>ä½¿ç”¨dockeré•œåƒnginx:latestä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨å‘½åä¸ºmynginxã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mynginx -d nginx:latest</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é•œåƒnginx:latestä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨çš„80ç«¯å£æ˜ å°„åˆ°ä¸»æœºéšæœºç«¯å£ã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -P -d nginx:latest</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é•œåƒ nginx:latestï¼Œä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 80 ç«¯å£,ä¸»æœºçš„ç›®å½• /data æ˜ å°„åˆ°å®¹å™¨çš„ /dataã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 80:80 -v /data:/data -d nginx:latest</span><br></pre></td></tr></table></figure><p>ç»‘å®šå®¹å™¨çš„ 8080 ç«¯å£ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°æœ¬åœ°ä¸»æœº 127.0.0.1 çš„ 80 ç«¯å£ä¸Šã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 127.0.0.1:80:8080/tcp ubuntu bash</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é•œåƒnginx:latestä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,åœ¨å®¹å™¨å†…æ‰§è¡Œ/bin/bashå‘½ä»¤ã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it nginx:latest /bin/bash</span><br></pre></td></tr></table></figure><h2 id="start-stop-restart"><a href="#start-stop-restart" class="headerlink" title="start/stop/restart"></a>start/stop/restart</h2><p>docker start :å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»è¢«åœæ­¢çš„å®¹å™¨</p><p>docker stop :åœæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨</p><p>docker restart :é‡å¯å®¹å™¨</p><h3 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure><h3 id="OPTIONSè¯´æ˜ï¼š-1"><a href="#OPTIONSè¯´æ˜ï¼š-1" class="headerlink" title="OPTIONSè¯´æ˜ï¼š"></a>OPTIONSè¯´æ˜ï¼š</h3><ul><li><p>-a stdin: æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼›</p></li><li><p>-d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</p></li><li><p>-d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</p></li><li><p>-i: ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›</p></li><li><p>-P: éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„é«˜ç«¯å£</p></li><li><p>-p: æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£</p></li><li><p>-t: ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›</p></li><li><p>â€“name=â€nginx-lbâ€: ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›</p></li><li><p>â€“dns 8.8.8.8: æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</p></li><li><p>â€“dns-search example.com: æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</p></li><li><p>-h â€œmarsâ€: æŒ‡å®šå®¹å™¨çš„hostnameï¼›</p></li><li><p>â€“env-file=[]: ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼›</p></li><li><p>â€“cpuset=â€0-2â€ or â€“cpuset=â€0,1,2â€: ç»‘å®šå®¹å™¨åˆ°æŒ‡å®šCPUè¿è¡Œï¼›</p></li><li><p>-m :è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›</p></li><li><p>â€“net=â€bridgeâ€: æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼›</p></li><li><p>â€“link=[]: æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼›</p></li><li><p>â€“expose=[]: å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼›</p></li><li><p>â€“volume , -v:    ç»‘å®šä¸€ä¸ªå·ï¼›</p></li></ul><h3 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>ä½¿ç”¨dockeré•œåƒnginx:latestä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨å‘½åä¸ºmynginxã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mynginx -d nginx:latest</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é•œåƒnginx:latestä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨çš„80ç«¯å£æ˜ å°„åˆ°ä¸»æœºéšæœºç«¯å£ã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -P -d nginx:latest</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é•œåƒ nginx:latestï¼Œä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 80 ç«¯å£,ä¸»æœºçš„ç›®å½• /data æ˜ å°„åˆ°å®¹å™¨çš„ /dataã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 80:80 -v /data:/data -d nginx:latest</span><br></pre></td></tr></table></figure><p>ç»‘å®šå®¹å™¨çš„ 8080 ç«¯å£ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°æœ¬åœ°ä¸»æœº 127.0.0.1 çš„ 80 ç«¯å£ä¸Šã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 127.0.0.1:80:8080/tcp ubuntu bash</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é•œåƒnginx:latestä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,åœ¨å®¹å™¨å†…æ‰§è¡Œ/bin/bashå‘½ä»¤ã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it nginx:latest /bin/bash</span><br></pre></td></tr></table></figure><h2 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h2><p>docker kill :æ€æ‰ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚</p><h3 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h3 id="OPTIONSè¯´æ˜ï¼š-2"><a href="#OPTIONSè¯´æ˜ï¼š-2" class="headerlink" title="OPTIONSè¯´æ˜ï¼š"></a>OPTIONSè¯´æ˜ï¼š</h3><ul><li>-s :å‘å®¹å™¨å‘é€ä¸€ä¸ªä¿¡å·ï¼›</li></ul><h3 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>æ€æ‰è¿è¡Œä¸­çš„å®¹å™¨mynginx</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> -s KILL mynginx</span><br></pre></td></tr></table></figure><h2 id="pause-unpause"><a href="#pause-unpause" class="headerlink" title="pause/unpause"></a>pause/unpause</h2><p>docker pause :æš‚åœå®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹ã€‚</p><p>docker unpause :æ¢å¤å®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹ã€‚</p><h3 id="è¯­æ³•-3"><a href="#è¯­æ³•-3" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pause [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker unpause [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹-3"><a href="#å®ä¾‹-3" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>æš‚åœæ•°æ®åº“å®¹å™¨db01æä¾›æœåŠ¡ã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pause db01</span><br></pre></td></tr></table></figure><p>æ¢å¤æ•°æ®åº“å®¹å™¨db01æä¾›æœåŠ¡ã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker unpause db01</span><br></pre></td></tr></table></figure><h2 id="create"><a href="#create" class="headerlink" title="create"></a>create</h2><p>docker create ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ä½†ä¸å¯åŠ¨å®ƒ</p><h3 id="OPTIONSè¯´æ˜ï¼š-3"><a href="#OPTIONSè¯´æ˜ï¼š-3" class="headerlink" title="OPTIONSè¯´æ˜ï¼š"></a>OPTIONSè¯´æ˜ï¼š</h3><ul><li><p>-a stdin: æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼›</p></li><li><p>-d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</p></li><li><p>-i: ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›</p></li><li><p>-P: éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„é«˜ç«¯å£</p></li><li><p>-p: æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£</p></li><li><p>-t: ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›</p></li><li><p>â€“name=â€nginx-lbâ€: ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›</p></li><li><p>â€“dns 8.8.8.8: æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</p></li><li><p>â€“dns-search example.com: æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</p></li><li><p>-h â€œmarsâ€: æŒ‡å®šå®¹å™¨çš„hostnameï¼›</p></li><li><p>-e username=â€ritchieâ€: è®¾ç½®ç¯å¢ƒå˜é‡ï¼›</p></li><li><p>â€“env-file=[]: ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼›</p></li><li><p>â€“cpuset=â€0-2â€ or â€“cpuset=â€0,1,2â€: ç»‘å®šå®¹å™¨åˆ°æŒ‡å®šCPUè¿è¡Œï¼›</p></li><li><p>-m :è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›</p></li><li><p>â€“net=â€bridgeâ€: æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼›</p></li><li><p>â€“link=[]: æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼›</p></li><li><p>â€“expose=[]: å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼›</p></li><li><p>â€“volume , -v:    ç»‘å®šä¸€ä¸ªå· ï¼›</p></li></ul><h3 id="è¯­æ³•-4"><a href="#è¯­æ³•-4" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹-4"><a href="#å®ä¾‹-4" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>ä½¿ç”¨dockeré•œåƒnginx:lateståˆ›å»ºä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨å‘½åä¸ºmyrunoobã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create --name myrunoob nginx:latest</span><br></pre></td></tr></table></figure><h2 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h2><p>docker exec ï¼šåœ¨è¿è¡Œçš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤</p><h3 id="è¯­æ³•-5"><a href="#è¯­æ³•-5" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...]</span><br></pre></td></tr></table></figure><h3 id="OPTIONSè¯´æ˜ï¼š-4"><a href="#OPTIONSè¯´æ˜ï¼š-4" class="headerlink" title="OPTIONSè¯´æ˜ï¼š"></a>OPTIONSè¯´æ˜ï¼š</h3><ul><li><p>-d :åˆ†ç¦»æ¨¡å¼: åœ¨åå°è¿è¡Œ</p></li><li><p>-i :å³ä½¿æ²¡æœ‰é™„åŠ ä¹Ÿä¿æŒSTDIN æ‰“å¼€</p></li><li><p>-t :åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯</p></li></ul><h3 id="å®ä¾‹-5"><a href="#å®ä¾‹-5" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>åœ¨å®¹å™¨ mynginx ä¸­ä»¥äº¤äº’æ¨¡å¼æ‰§è¡Œå®¹å™¨å†… /root/runoob.sh è„šæœ¬:</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it mynginx /bin/sh /root/runoob.sh</span><br></pre></td></tr></table></figure><p>åœ¨å®¹å™¨ mynginx ä¸­å¼€å¯ä¸€ä¸ªäº¤äº’æ¨¡å¼çš„ç»ˆç«¯:</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -i -t  mynginx /bin/bash</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡ docker ps -a å‘½ä»¤æŸ¥çœ‹å·²ç»åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œç„¶åä½¿ç”¨å®¹å™¨ ID è¿›å…¥å®¹å™¨ã€‚</p><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">9df70f9a0714        openjdk             <span class="string">"/usercode/script.shâ€¦"</span> </span><br><span class="line">...</span><br></pre></td></tr></table></figure><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it 9df70f9a0714 /bin/bash</span><br></pre></td></tr></table></figure><h1 id="å®¹å™¨æ“ä½œ"><a href="#å®¹å™¨æ“ä½œ" class="headerlink" title="å®¹å™¨æ“ä½œ"></a>å®¹å™¨æ“ä½œ</h1><h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><h2 id="inspect"><a href="#inspect" class="headerlink" title="inspect"></a>inspect</h2><h2 id="top"><a href="#top" class="headerlink" title="top"></a>top</h2><h2 id="attach"><a href="#attach" class="headerlink" title="attach"></a>attach</h2><h2 id="events"><a href="#events" class="headerlink" title="events"></a>events</h2><h2 id="logs"><a href="#logs" class="headerlink" title="logs"></a>logs</h2><h2 id="wait"><a href="#wait" class="headerlink" title="wait"></a>wait</h2><h2 id="export"><a href="#export" class="headerlink" title="export"></a>export</h2><h2 id="port"><a href="#port" class="headerlink" title="port"></a>port</h2><h1 id="å®¹å™¨rootfså‘½ä»¤"><a href="#å®¹å™¨rootfså‘½ä»¤" class="headerlink" title="å®¹å™¨rootfså‘½ä»¤"></a>å®¹å™¨rootfså‘½ä»¤</h1><h2 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h2><h2 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h2><h2 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h2><h1 id="é•œåƒä»“åº“"><a href="#é•œåƒä»“åº“" class="headerlink" title="é•œåƒä»“åº“"></a>é•œåƒä»“åº“</h1><h2 id="login"><a href="#login" class="headerlink" title="login"></a>login</h2><h2 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h2><h2 id="push"><a href="#push" class="headerlink" title="push"></a>push</h2><h2 id="search"><a href="#search" class="headerlink" title="search"></a>search</h2><h1 id="æœ¬åœ°é•œåƒç®¡ç†"><a href="#æœ¬åœ°é•œåƒç®¡ç†" class="headerlink" title="æœ¬åœ°é•œåƒç®¡ç†"></a>æœ¬åœ°é•œåƒç®¡ç†</h1><h2 id="images"><a href="#images" class="headerlink" title="images"></a>images</h2><h2 id="rmi"><a href="#rmi" class="headerlink" title="rmi"></a>rmi</h2><h2 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h2><h2 id="build"><a href="#build" class="headerlink" title="build"></a>build</h2><h2 id="history"><a href="#history" class="headerlink" title="history"></a>history</h2><h2 id="save"><a href="#save" class="headerlink" title="save"></a>save</h2><h2 id="load"><a href="#load" class="headerlink" title="load"></a>load</h2><h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><h1 id="info-version"><a href="#info-version" class="headerlink" title="info/version"></a>info/version</h1><h2 id="info"><a href="#info" class="headerlink" title="info"></a>info</h2><h2 id="version"><a href="#version" class="headerlink" title="version"></a>version</h2><p>æŒç»­æ›´æ–°ä¸­ã€‹ã€‹ã€‹ã€‹ã€‹</p>]]></content>
      
      
      <categories>
          
          <category> å®¹å™¨åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu18.04ä¸Šå®‰è£…Docker</title>
      <link href="/2019/09/11/Ubuntu18-04%E4%B8%8A%E5%AE%89%E8%A3%85Docker/"/>
      <url>/2019/09/11/Ubuntu18-04%E4%B8%8A%E5%AE%89%E8%A3%85Docker/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿å½“å‰ç”¨æˆ·æˆä¸ºrootèº«ä»½"><a href="#ä½¿å½“å‰ç”¨æˆ·æˆä¸ºrootèº«ä»½" class="headerlink" title="ä½¿å½“å‰ç”¨æˆ·æˆä¸ºrootèº«ä»½"></a>ä½¿å½“å‰ç”¨æˆ·æˆä¸ºrootèº«ä»½</h1><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure><h1 id="æ£€æŸ¥å½“å‰è¿è¡Œçš„Linuxå†…æ ¸çš„ç‰ˆæœ¬"><a href="#æ£€æŸ¥å½“å‰è¿è¡Œçš„Linuxå†…æ ¸çš„ç‰ˆæœ¬" class="headerlink" title="æ£€æŸ¥å½“å‰è¿è¡Œçš„Linuxå†…æ ¸çš„ç‰ˆæœ¬"></a>æ£€æŸ¥å½“å‰è¿è¡Œçš„Linuxå†…æ ¸çš„ç‰ˆæœ¬</h1><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹çœ‹æˆ‘ä»¬ç³»ç»Ÿæ­£åœ¨ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬</p><h1 id="æ£€æŸ¥Ubuntuç‰ˆæœ¬"><a href="#æ£€æŸ¥Ubuntuç‰ˆæœ¬" class="headerlink" title="æ£€æŸ¥Ubuntuç‰ˆæœ¬"></a>æ£€æŸ¥Ubuntuç‰ˆæœ¬</h1><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/lsb-release</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤æ˜¾ç¤ºUbuntuç‰ˆæœ¬æ˜¯18.04</p><h1 id="å®‰è£…è½¯ä»¶ä¹‹å‰æ›´æ–°Ubuntu"><a href="#å®‰è£…è½¯ä»¶ä¹‹å‰æ›´æ–°Ubuntu" class="headerlink" title="å®‰è£…è½¯ä»¶ä¹‹å‰æ›´æ–°Ubuntu"></a>å®‰è£…è½¯ä»¶ä¹‹å‰æ›´æ–°Ubuntu</h1><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure><h1 id="ä»Ubuntuå­˜å‚¨åº“å®‰è£…Docker"><a href="#ä»Ubuntuå­˜å‚¨åº“å®‰è£…Docker" class="headerlink" title="ä»Ubuntuå­˜å‚¨åº“å®‰è£…Docker"></a>ä»Ubuntuå­˜å‚¨åº“å®‰è£…Docker</h1><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install docker.io</span><br></pre></td></tr></table></figure><h1 id="å¯åŠ¨Dockerå¹¶ä½¿ç”¨systemctlå‘½ä»¤å°†å…¶æ·»åŠ åˆ°å¼•å¯¼æ—¶é—´"><a href="#å¯åŠ¨Dockerå¹¶ä½¿ç”¨systemctlå‘½ä»¤å°†å…¶æ·»åŠ åˆ°å¼•å¯¼æ—¶é—´" class="headerlink" title="å¯åŠ¨Dockerå¹¶ä½¿ç”¨systemctlå‘½ä»¤å°†å…¶æ·»åŠ åˆ°å¼•å¯¼æ—¶é—´"></a>å¯åŠ¨Dockerå¹¶ä½¿ç”¨systemctlå‘½ä»¤å°†å…¶æ·»åŠ åˆ°å¼•å¯¼æ—¶é—´</h1><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure><h1 id="æ£€æŸ¥Dockerç‰ˆæœ¬"><a href="#æ£€æŸ¥Dockerç‰ˆæœ¬" class="headerlink" title="æ£€æŸ¥Dockerç‰ˆæœ¬"></a>æ£€æŸ¥Dockerç‰ˆæœ¬</h1><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br></pre></td></tr></table></figure><p>åˆ°è¿™å°±å®‰è£…å®Œæˆäº†ï¼Œä½ å¯ä»¥å°½æƒ…ç©ä½ çš„dockeräº†ï¼Œå˜»å˜»ï¼ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å®‰è£… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Servletæ‰§è¡ŒåŸç†</title>
      <link href="/2019/09/02/Servlet%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86/"/>
      <url>/2019/09/02/Servlet%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="Servletæ¦‚å¿µ"><a href="#Servletæ¦‚å¿µ" class="headerlink" title="Servletæ¦‚å¿µ"></a>Servletæ¦‚å¿µ</h1><ul><li><p>Servletå°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®šä¹‰äº†Javaç±»è¢«æµè§ˆå™¨è®¿é—®åˆ°(tomcatè¯†åˆ«)çš„è§„åˆ™ã€‚</p></li><li><p>å°†æ¥æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°Servletæ¥å£ï¼Œå¤å†™æ–¹æ³•ã€‚</p></li></ul><h1 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h1><ul><li><p>åˆ›å»ºjavaEEé¡¹ç›®</p></li><li><p>å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°servletæ¥å£</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo</span> <span class="keyword">implements</span> <span class="title">Servlet</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®ç°æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•</p></li><li><p>é…ç½®servlet<br>åœ¨web.xmlä¸­é…ç½®ï¼š</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--é…ç½®Servlet --&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;demo1&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">cn</span>.<span class="title">itcast</span>.<span class="title">web</span>.<span class="title">servlet</span>.<span class="title">ServletDemo1</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">demo1</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/<span class="title">demo1</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="æ‰§è¡ŒåŸç†"><a href="#æ‰§è¡ŒåŸç†" class="headerlink" title="æ‰§è¡ŒåŸç†"></a>æ‰§è¡ŒåŸç†</h1><ol><li>å½“æœåŠ¡å™¨æ¥å—åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨çš„è¯·æ±‚åï¼Œä¼šè§£æè¯·æ±‚URLè·¯å¾„ï¼Œè·å–è®¿é—®çš„Servletçš„èµ„æºè·¯å¾„</li><li>æŸ¥æ‰¾web.xmlæ–‡ä»¶ï¼Œæ˜¯å¦æœ‰å¯¹åº”çš„<url-pattern>æ ‡ç­¾ä½“å†…å®¹ã€‚</url-pattern></li><li>å¦‚æœæœ‰ï¼Œåˆ™åœ¨æ‰¾åˆ°å¯¹åº”çš„<servlet-class>å…¨ç±»å</servlet-class></li><li>tomcatä¼šå°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œå¹¶ä¸”åˆ›å»ºå…¶å¯¹è±¡</li><li>è°ƒç”¨å…¶æ–¹æ³•</li></ol><h1 id="Servletç”Ÿå‘½å‘¨æœŸ"><a href="#Servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Servletç”Ÿå‘½å‘¨æœŸ"></a>Servletç”Ÿå‘½å‘¨æœŸ</h1><pre><code>1. è¢«åˆ›å»ºï¼šæ‰§è¡Œinitæ–¹æ³•ï¼Œåªæ‰§è¡Œä¸€æ¬¡    * Servletä»€ä¹ˆæ—¶å€™è¢«åˆ›å»ºï¼Ÿ        * é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶ï¼ŒServletè¢«åˆ›å»º        * å¯ä»¥é…ç½®æ‰§è¡ŒServletçš„åˆ›å»ºæ—¶æœºã€‚            * åœ¨&lt;servlet&gt;æ ‡ç­¾ä¸‹é…ç½®                1. ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶ï¼Œåˆ›å»º                    * &lt;load-on-startup&gt;çš„å€¼ä¸ºè´Ÿæ•°                2. åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œåˆ›å»º                    * &lt;load-on-startup&gt;çš„å€¼ä¸º0æˆ–æ­£æ•´æ•°    * Servletçš„initæ–¹æ³•ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼Œè¯´æ˜ä¸€ä¸ªServletåœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼ŒServletæ˜¯å•ä¾‹çš„        * å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®æ—¶ï¼Œå¯èƒ½å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚        * è§£å†³ï¼šå°½é‡ä¸è¦åœ¨Servletä¸­å®šä¹‰æˆå‘˜å˜é‡ã€‚å³ä½¿å®šä¹‰äº†æˆå‘˜å˜é‡ï¼Œä¹Ÿä¸è¦å¯¹ä¿®æ”¹å€¼2. æä¾›æœåŠ¡ï¼šæ‰§è¡Œserviceæ–¹æ³•ï¼Œæ‰§è¡Œå¤šæ¬¡    * æ¯æ¬¡è®¿é—®Servletæ—¶ï¼ŒServiceæ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚3. è¢«é”€æ¯ï¼šæ‰§è¡Œdestroyæ–¹æ³•ï¼Œåªæ‰§è¡Œä¸€æ¬¡    * Servletè¢«é”€æ¯æ—¶æ‰§è¡Œã€‚æœåŠ¡å™¨å…³é—­æ—¶ï¼ŒServletè¢«é”€æ¯    * åªæœ‰æœåŠ¡å™¨æ­£å¸¸å…³é—­æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œdestroyæ–¹æ³•ã€‚    * destroyæ–¹æ³•åœ¨Servletè¢«é”€æ¯ä¹‹å‰æ‰§è¡Œï¼Œä¸€èˆ¬ç”¨äºé‡Šæ”¾èµ„æº</code></pre><ul><li><p>Servlet3.0ï¼š</p><ul><li><p>å¥½å¤„ï¼š</p><ul><li>æ”¯æŒæ³¨è§£é…ç½®ã€‚å¯ä»¥ä¸éœ€è¦web.xmläº†ã€‚</li></ul></li><li><p>æ­¥éª¤ï¼š</p><ol><li>åˆ›å»ºJavaEEé¡¹ç›®ï¼Œé€‰æ‹©Servletçš„ç‰ˆæœ¬3.0ä»¥ä¸Šï¼Œå¯ä»¥ä¸åˆ›å»ºweb.xml</li><li>å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°Servletæ¥å£</li><li>å¤å†™æ–¹æ³•</li><li>åœ¨ç±»ä¸Šä½¿ç”¨@WebServletæ³¨è§£ï¼Œè¿›è¡Œé…ç½®<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"èµ„æºè·¯å¾„"</span>)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> WebServlet &#123;</span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;<span class="comment">//ç›¸å½“äº&lt;Servlet-name&gt;</span></span><br><span class="line"></span><br><span class="line">    String[] value() <span class="keyword">default</span> &#123;&#125;;<span class="comment">//ä»£è¡¨urlPatterns()å±æ€§é…ç½®</span></span><br><span class="line"></span><br><span class="line">    String[] urlPatterns() <span class="keyword">default</span> &#123;&#125;;<span class="comment">//ç›¸å½“äº&lt;url-pattern&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">loadOnStartup</span><span class="params">()</span> <span class="keyword">default</span> -1</span>;<span class="comment">//ç›¸å½“äº&lt;load-on-startup&gt;</span></span><br><span class="line"></span><br><span class="line">    WebInitParam[] initParams() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">asyncSupported</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">smallIcon</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">largeIcon</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">description</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">displayName</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Servlet </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Servlet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ€ä¹ˆä¿è¯redisæ˜¯é«˜å¹¶å‘åŠé«˜å¯ç”¨</title>
      <link href="/2019/08/31/%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81redis%E6%98%AF%E9%AB%98%E5%B9%B6%E5%8F%91%E5%8F%8A%E9%AB%98%E5%8F%AF%E7%94%A8/"/>
      <url>/2019/08/31/%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81redis%E6%98%AF%E9%AB%98%E5%B9%B6%E5%8F%91%E5%8F%8A%E9%AB%98%E5%8F%AF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚æœredisè¦æ”¯æ’‘10ä¸‡-çš„å¹¶å‘ï¼Œé‚£åº”è¯¥æ€ä¹ˆåšï¼Ÿ"><a href="#å¦‚æœredisè¦æ”¯æ’‘10ä¸‡-çš„å¹¶å‘ï¼Œé‚£åº”è¯¥æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="å¦‚æœredisè¦æ”¯æ’‘10ä¸‡+çš„å¹¶å‘ï¼Œé‚£åº”è¯¥æ€ä¹ˆåšï¼Ÿ"></a>å¦‚æœredisè¦æ”¯æ’‘10ä¸‡+çš„å¹¶å‘ï¼Œé‚£åº”è¯¥æ€ä¹ˆåšï¼Ÿ</h1><ul><li>ç­”æ¡ˆæ˜¯ï¼šè¯»å†™åˆ†ç¦»</li></ul><p>å•æœºçš„rediså‡ ä¹ä¸å¤ªå¯èƒ½è¯´QPSè¶…è¿‡10ä¸‡+ï¼Œé™¤éä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ä½ çš„æœºå™¨æ€§èƒ½ç‰¹åˆ«å¥½ï¼Œé…ç½®ç‰¹åˆ«é«˜ï¼Œç‰©ç†æœºï¼Œç»´æŠ¤åšçš„ç‰¹åˆ«å¥½ï¼Œè€Œä¸”ä½ çš„æ•´ä½“çš„æ“ä½œä¸æ˜¯å¤ªå¤æ‚ã€‚<br><img src="/images/20190831_1redis/redis%E5%8D%95%E6%9C%BA%E7%9A%84%E7%93%B6%E9%A2%88.png" alt="rediså•æœºçš„ç“¶é¢ˆ"></p><p>è¯»å†™åˆ†ç¦»ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¯¹ç¼“å­˜ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥æ”¯æ’‘è¯»é«˜å¹¶å‘çš„ï¼Œå†™çš„è¯·æ±‚æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œå¯èƒ½å†™è¯·æ±‚ä¹Ÿå°±ä¸€ç§’é’Ÿå‡ åƒï¼Œä¸€ä¸¤åƒå¤§é‡çš„è¯·æ±‚éƒ½æ˜¯è¯»ï¼Œä¸€ç§’é’ŸäºŒåä¸‡æ¬¡è¯»ã€‚</p><p>è¯»å†™åˆ†ç¦»ï¼šä¸»ä»æ¶æ„ -&gt; è¯»å†™åˆ†ç¦» -&gt; æ”¯æ’‘10ä¸‡+è¯»QPSçš„æ¶æ„</p><p><img src="/images/20190831_1redis/redis%E4%B8%BB%E4%BB%8E%E5%AE%9E%E7%8E%B0%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E6%94%AF%E6%92%9110%E4%B8%87+%E7%9A%84%E9%AB%98%E5%B9%B6%E5%8F%91.png" alt="ä¸»ä»è¯»å†™åˆ†ç¦»å®ç°çš„é«˜å¹¶å‘"></p><h1 id="redis-replicationçš„æ ¸å¿ƒæœºåˆ¶"><a href="#redis-replicationçš„æ ¸å¿ƒæœºåˆ¶" class="headerlink" title="redis replicationçš„æ ¸å¿ƒæœºåˆ¶"></a>redis replicationçš„æ ¸å¿ƒæœºåˆ¶</h1><ul><li><p>redisé‡‡ç”¨å¼‚æ­¥æ–¹å¼å¤åˆ¶æ•°æ®åˆ°slaveèŠ‚ç‚¹ï¼Œä¸è¿‡redis 2.8å¼€å§‹ï¼Œslave nodeä¼šå‘¨æœŸæ€§åœ°ç¡®è®¤è‡ªå·±æ¯æ¬¡å¤åˆ¶çš„æ•°æ®é‡</p></li><li><p>ä¸€ä¸ªmaster nodeæ˜¯å¯ä»¥é…ç½®å¤šä¸ªslave nodeçš„</p></li><li><p>slave nodeä¹Ÿå¯ä»¥è¿æ¥å…¶ä»–çš„slave node</p></li><li><p>slave nodeåšå¤åˆ¶çš„æ—¶å€™ï¼Œæ˜¯ä¸ä¼šblock master nodeçš„æ­£å¸¸å·¥ä½œçš„</p></li><li><p>slave nodeåœ¨åšå¤åˆ¶çš„æ—¶å€™ï¼Œä¹Ÿä¸ä¼šblockå¯¹è‡ªå·±çš„æŸ¥è¯¢æ“ä½œï¼Œå®ƒä¼šç”¨æ—§çš„æ•°æ®é›†æ¥æä¾›æœåŠ¡; ä½†æ˜¯å¤åˆ¶å®Œæˆçš„æ—¶å€™ï¼Œéœ€è¦åˆ é™¤æ—§æ•°æ®é›†ï¼ŒåŠ è½½æ–°æ•°æ®é›†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæš‚åœå¯¹å¤–æœåŠ¡äº†</p></li><li><p>slave nodeä¸»è¦ç”¨æ¥è¿›è¡Œæ¨ªå‘æ‰©å®¹ï¼Œåšè¯»å†™åˆ†ç¦»ï¼Œæ‰©å®¹çš„slave nodeå¯ä»¥æé«˜è¯»çš„ååé‡</p></li><li><p>slaveï¼Œé«˜å¯ç”¨æ€§ï¼Œæœ‰å¾ˆå¤§çš„å…³ç³»</p></li></ul><h1 id="masteræŒä¹…åŒ–å¯¹äºä¸»ä»æ¶æ„çš„å®‰å…¨ä¿éšœçš„æ„ä¹‰"><a href="#masteræŒä¹…åŒ–å¯¹äºä¸»ä»æ¶æ„çš„å®‰å…¨ä¿éšœçš„æ„ä¹‰" class="headerlink" title="masteræŒä¹…åŒ–å¯¹äºä¸»ä»æ¶æ„çš„å®‰å…¨ä¿éšœçš„æ„ä¹‰"></a>masteræŒä¹…åŒ–å¯¹äºä¸»ä»æ¶æ„çš„å®‰å…¨ä¿éšœçš„æ„ä¹‰</h1><p>å¦‚æœé‡‡ç”¨äº†ä¸»ä»æ¶æ„ï¼Œé‚£ä¹ˆå»ºè®®å¿…é¡»å¼€å¯master nodeçš„æŒä¹…åŒ–ï¼</p><p>ä¸å»ºè®®ç”¨slave nodeä½œä¸ºmaster nodeçš„æ•°æ®çƒ­å¤‡ï¼Œå› ä¸ºé‚£æ ·çš„è¯ï¼Œå¦‚æœä½ å…³æ‰masterçš„æŒä¹…åŒ–ï¼Œå¯èƒ½åœ¨masterå®•æœºé‡å¯çš„æ—¶å€™æ•°æ®æ˜¯ç©ºçš„ï¼Œç„¶åå¯èƒ½ä¸€ç»è¿‡å¤åˆ¶ï¼Œsalve nodeæ•°æ®ä¹Ÿä¸¢äº†</p><p>master -&gt; RDBå’ŒAOFéƒ½å…³é—­äº† -&gt; å…¨éƒ¨åœ¨å†…å­˜ä¸­</p><p>masterå®•æœºï¼Œé‡å¯ï¼Œæ˜¯æ²¡æœ‰æœ¬åœ°æ•°æ®å¯ä»¥æ¢å¤çš„ï¼Œç„¶åå°±ä¼šç›´æ¥è®¤ä¸ºè‡ªå·±IDEæ•°æ®æ˜¯ç©ºçš„</p><p>masterå°±ä¼šå°†ç©ºçš„æ•°æ®é›†åŒæ­¥åˆ°slaveä¸Šå»ï¼Œæ‰€æœ‰slaveçš„æ•°æ®å…¨éƒ¨æ¸…ç©º</p><p>100%çš„æ•°æ®ä¸¢å¤±</p><p>masterèŠ‚ç‚¹ï¼Œå¿…é¡»è¦ä½¿ç”¨æŒä¹…åŒ–æœºåˆ¶</p><p>ç¬¬äºŒä¸ªï¼Œmasterçš„å„ç§å¤‡ä»½æ–¹æ¡ˆï¼Œè¦ä¸è¦åšï¼Œä¸‡ä¸€è¯´æœ¬åœ°çš„æ‰€æœ‰æ–‡ä»¶ä¸¢å¤±äº†; ä»å¤‡ä»½ä¸­æŒ‘é€‰ä¸€ä»½rdbå»æ¢å¤master; è¿™æ ·æ‰èƒ½ç¡®ä¿masterå¯åŠ¨çš„æ—¶å€™ï¼Œæ˜¯æœ‰æ•°æ®çš„</p><p>å³ä½¿é‡‡ç”¨äº†åç»­è®²è§£çš„é«˜å¯ç”¨æœºåˆ¶ï¼Œslave nodeå¯ä»¥è‡ªåŠ¨æ¥ç®¡master nodeï¼Œä½†æ˜¯ä¹Ÿå¯èƒ½sentinalè¿˜æ²¡æœ‰æ£€æµ‹åˆ°master failureï¼Œmaster nodeå°±è‡ªåŠ¨é‡å¯äº†ï¼Œè¿˜æ˜¯å¯èƒ½å¯¼è‡´ä¸Šé¢çš„æ‰€æœ‰slave nodeæ•°æ®æ¸…ç©ºæ•…éšœ</p><h1 id="é¢è¯•çš„å›ç­”æ–¹å¼"><a href="#é¢è¯•çš„å›ç­”æ–¹å¼" class="headerlink" title="é¢è¯•çš„å›ç­”æ–¹å¼"></a>é¢è¯•çš„å›ç­”æ–¹å¼</h1><p>redisé«˜å¹¶å‘ï¼šä¸»ä»æ¶æ„ï¼Œä¸€ä¸»å¤šä»ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¾ˆå¤šé¡¹ç›®å…¶å®å°±è¶³å¤Ÿäº†ï¼Œå•ä¸»ç”¨æ¥å†™å…¥æ•°æ®ï¼Œå•æœºå‡ ä¸‡QPSï¼Œå¤šä»ç”¨æ¥æŸ¥è¯¢æ•°æ®ï¼Œå¤šä¸ªä»å®ä¾‹å¯ä»¥æä¾›æ¯ç§’10ä¸‡çš„QPSã€‚</p><p>redisé«˜å¹¶å‘çš„åŒæ—¶ï¼Œè¿˜éœ€è¦å®¹çº³å¤§é‡çš„æ•°æ®ï¼šä¸€ä¸»å¤šä»ï¼Œæ¯ä¸ªå®ä¾‹éƒ½å®¹çº³äº†å®Œæ•´çš„æ•°æ®ï¼Œæ¯”å¦‚redisä¸»å°±10Gçš„å†…å­˜é‡ï¼Œå…¶å®ä½ å°±æœ€å¯¹åªèƒ½å®¹çº³10gçš„æ•°æ®é‡ã€‚å¦‚æœä½ çš„ç¼“å­˜è¦å®¹çº³çš„æ•°æ®é‡å¾ˆå¤§ï¼Œè¾¾åˆ°äº†å‡ ågï¼Œç”šè‡³å‡ ç™¾gï¼Œæˆ–è€…æ˜¯å‡ tï¼Œé‚£ä½ å°±éœ€è¦redisé›†ç¾¤ï¼Œè€Œä¸”ç”¨redisé›†ç¾¤ä¹‹åï¼Œå¯ä»¥æä¾›å¯èƒ½æ¯ç§’å‡ åä¸‡çš„è¯»å†™å¹¶å‘ã€‚</p><p>redisé«˜å¯ç”¨ï¼šå¦‚æœä½ åšä¸»ä»æ¶æ„éƒ¨ç½²ï¼Œå…¶å®å°±æ˜¯åŠ ä¸Šå“¨å…µå°±å¯ä»¥äº†ï¼Œå°±å¯ä»¥å®ç°ï¼Œä»»ä½•ä¸€ä¸ªå®ä¾‹å®•æœºï¼Œè‡ªåŠ¨ä¼šè¿›è¡Œä¸»å¤‡åˆ‡æ¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redisçš„è¿‡æœŸç­–ç•¥</title>
      <link href="/2019/08/31/redis%E7%9A%84%E8%BF%87%E6%9C%9F%E7%AD%96%E7%95%A5/"/>
      <url>/2019/08/31/redis%E7%9A%84%E8%BF%87%E6%9C%9F%E7%AD%96%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="redisçš„è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"><a href="#redisçš„è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="redisçš„è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"></a>redisçš„è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</h1><ul><li><p>è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆredisä¼šé‡‡ç”¨å®šæœŸåˆ é™¤ã€æƒ°æ€§åˆ é™¤çš„ç­–ç•¥ï¼‰</p></li><li><p>å®šæœŸåˆ é™¤</p></li></ul><p>æ‰€è°“å®šæœŸåˆ é™¤ï¼ŒæŒ‡çš„æ˜¯redisé»˜è®¤æ˜¯æ¯éš”100mså°±éšæœºæŠ½å–ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œæ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤ã€‚</p><p><em>æ³¨æ„ï¼š</em></p><p>å®é™…ä¸Šredisæ˜¯æ¯éš”100mséšæœºæŠ½å–ä¸€äº›keyæ¥æ£€æŸ¥å’Œåˆ é™¤çš„ï¼Œå®šæœŸåˆ é™¤å¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šè¿‡æœŸkeyåˆ°äº†æ—¶é—´å¹¶æ²¡æœ‰è¢«åˆ é™¤æ‰ã€‚è¿™é‡Œå¯ä¸æ˜¯æ¯éš”100mså°±éå†æ‰€æœ‰çš„è®¾ç½®è¿‡æœŸæ—¶é—´çš„keyï¼Œé‚£æ ·å°±æ˜¯ä¸€åœºæ€§èƒ½ä¸Šçš„ç¾éš¾ã€‚redisåŸºæœ¬ä¸Šå°±æ­»äº†ã€‚</p><ul><li>æƒ°æ€§åˆ é™¤</li></ul><p>åœ¨ä½ è·å–æŸä¸ªkeyçš„æ—¶å€™ï¼Œredisä¼šæ£€æŸ¥ä¸€ä¸‹ ï¼Œè¿™ä¸ªkeyå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´é‚£ä¹ˆæ˜¯å¦è¿‡æœŸäº†ï¼Ÿå¦‚æœè¿‡æœŸäº†æ­¤æ—¶å°±ä¼šåˆ é™¤ï¼Œä¸ä¼šç»™ä½ è¿”å›ä»»ä½•ä¸œè¥¿ã€‚å¹¶ä¸æ˜¯keyåˆ°æ—¶é—´å°±è¢«åˆ é™¤æ‰ï¼Œè€Œæ˜¯ä½ æŸ¥è¯¢è¿™ä¸ªkeyçš„æ—¶å€™ï¼Œrediså†æ‡’æƒ°çš„æ£€æŸ¥ä¸€ä¸‹ã€‚</p><ul><li><p>é€šè¿‡ä¸Šè¿°ä¸¤ç§æ‰‹æ®µç»“åˆèµ·æ¥ï¼Œä¿è¯è¿‡æœŸçš„keyä¸€å®šä¼šè¢«å¹²æ‰ã€‚</p></li><li><p>æˆ‘çš„æ•°æ®æ˜æ˜éƒ½è¿‡æœŸäº†ï¼Œæ€ä¹ˆè¿˜å ç”¨ç€å†…å­˜å•Š?</p></li></ul><p>redisä¸­çš„è¿‡æœŸkeyé å®šæœŸåˆ é™¤æ²¡æœ‰è¢«åˆ é™¤æ‰ï¼Œå¯¼è‡´å¤§é‡å ç”¨å†…å­˜ï¼Œå¯¼è‡´redisçš„å†…å­˜è£…ä¸ä¸‹æ•°æ®ï¼Œæ­¤æ—¶redisä¼šè¿›è¡Œå†…å­˜æ·˜æ±°ã€‚</p><ul><li>æˆ‘redisé‡Œå†™çš„æ•°æ®æ€ä¹ˆæ²¡äº†ï¼Ÿ</li></ul><p>å¾ˆç®€å•ä½ å†™çš„æ•°æ®å¤ªå¤šï¼Œå†…å­˜æ»¡äº†ï¼Œæˆ–è€…è§¦å‘äº†ä»€ä¹ˆæ¡ä»¶ï¼Œredis lruï¼Œè‡ªåŠ¨ç»™ä½ æ¸…ç†æ‰äº†ä¸€äº›æœ€è¿‘å¾ˆå°‘ä½¿ç”¨çš„æ•°æ®ã€‚</p><h1 id="redisçš„å†…å­˜æ·˜æ±°çš„ä¸€äº›ç­–ç•¥ï¼Ÿ"><a href="#redisçš„å†…å­˜æ·˜æ±°çš„ä¸€äº›ç­–ç•¥ï¼Ÿ" class="headerlink" title="redisçš„å†…å­˜æ·˜æ±°çš„ä¸€äº›ç­–ç•¥ï¼Ÿ"></a>redisçš„å†…å­˜æ·˜æ±°çš„ä¸€äº›ç­–ç•¥ï¼Ÿ</h1><ul><li><p>noevictionï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ï¼Œè¿™ä¸ªä¸€èˆ¬æ²¡äººç”¨å§ï¼Œå®åœ¨æ˜¯å¤ªæ¶å¿ƒäº†ã€‚</p></li><li><p>allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyï¼ˆè¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„ï¼‰ã€‚</p></li><li><p>allkeys-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ªkeyï¼Œè¿™ä¸ªä¸€èˆ¬æ²¡äººç”¨å§ï¼Œä¸ºå•¥è¦éšæœºï¼Œè‚¯å®šæ˜¯æŠŠæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyç»™å¹²æ‰å•Šã€‚</p></li><li><p>volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyï¼ˆè¿™ä¸ªä¸€èˆ¬ä¸å¤ªåˆé€‚ï¼‰ã€‚</p></li><li><p>volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ªkeyã€‚</p></li><li><p>volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„keyä¼˜å…ˆç§»é™¤ã€‚</p></li></ul><h1 id="æ‰‹å†™ä¸€ä¸‹LRUç®—æ³•ï¼Ÿ"><a href="#æ‰‹å†™ä¸€ä¸‹LRUç®—æ³•ï¼Ÿ" class="headerlink" title="æ‰‹å†™ä¸€ä¸‹LRUç®—æ³•ï¼Ÿ"></a>æ‰‹å†™ä¸€ä¸‹LRUç®—æ³•ï¼Ÿ</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> CACHE_SIZE;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œå°±æ˜¯ä¼ é€’è¿›æ¥æœ€å¤šèƒ½ç¼“å­˜å¤šå°‘æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> cacheSize)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>((<span class="keyword">int</span>) Math.ceil(cacheSize / <span class="number">0.75</span>) + <span class="number">1</span>, <span class="number">0.75f</span>, <span class="keyword">true</span>); </span><br><span class="line"><span class="comment">/*è¿™å—å°±æ˜¯è®¾ç½®ä¸€ä¸ªhashmapçš„åˆå§‹å¤§å°ï¼ŒåŒæ—¶æœ€åä¸€ä¸ªtrueæŒ‡çš„æ˜¯è®©</span></span><br><span class="line"><span class="comment">linkedhashmapæŒ‰ç…§è®¿é—®é¡ºåºæ¥è¿›è¡Œæ’åºï¼Œæœ€è¿‘è®¿é—®çš„æ”¾åœ¨å¤´ï¼Œæœ€è€è®¿é—®çš„å°±åœ¨å°¾*/</span></span><br><span class="line">CACHE_SIZE = cacheSize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">removeEldestEntry</span><span class="params">(Map.Entry eldest)</span> </span>&#123;</span><br><span class="line"><span class="comment">// è¿™ä¸ªæ„æ€å°±æ˜¯è¯´å½“mapä¸­çš„æ•°æ®é‡å¤§äºæŒ‡å®šçš„ç¼“å­˜ä¸ªæ•°çš„æ—¶å€™ï¼Œå°±è‡ªåŠ¨åˆ é™¤æœ€è€çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">return</span> size() &gt; CACHE_SIZE; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redisæœ‰å“ªäº›æ•°æ®ç±»å‹åŠä½¿ç”¨åœºæ™¯</title>
      <link href="/2019/08/30/redis%E6%9C%89%E5%93%AA%E4%BA%9B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/"/>
      <url>/2019/08/30/redis%E6%9C%89%E5%93%AA%E4%BA%9B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="å­—ç¬¦ä¸²ç±»å‹ï¼ˆStringï¼‰"><a href="#å­—ç¬¦ä¸²ç±»å‹ï¼ˆStringï¼‰" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹ï¼ˆStringï¼‰"></a>å­—ç¬¦ä¸²ç±»å‹ï¼ˆStringï¼‰</h1><ul><li>ä¸¾ä¾‹åº”ç”¨åœºæ™¯</li></ul><p>å•†å“ç¼–å·ï¼Œè®¢å•å·é‡‡ç”¨string çš„é€’å¢æ•°å­—ç‰¹æ€§ç”Ÿæˆ</p><ul><li><p>redisçš„string ç±»å‹å¯ä»¥åŒ…å«ä»»æ„æ•°æ®ï¼ŒåŒ…æ‹¬å›¾ç‰‡ç­‰äºŒè¿›åˆ¶æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ç­‰ã€‚å•ä¸ªvalueçš„å€¼æœ€å¤§ä¸Šé™ä¸º1Gå­—èŠ‚ã€‚</p></li><li><p>çº¯å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤</p><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set key1 &apos;hello redis&apos; # å­˜å€¼</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get key1 # å–å€¼</span><br><span class="line">&quot;hello redis&quot;</span><br><span class="line">127.0.0.1:6379&gt; getset key1 redis # å°†ç»™å®škey1çš„å€¼è®¾ä¸ºredisï¼Œå¹¶è¿”å›key1çš„æ—§å€¼(old value)</span><br><span class="line">&quot;hello redis&quot;</span><br><span class="line">127.0.0.1:6379&gt; get key1</span><br><span class="line">&quot;redis&quot;</span><br><span class="line">127.0.0.1:6379&gt; del key1 # åˆ é™¤ key1</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure></li><li><p>æ•´æ•°è‡ªå¢è‡ªå‡æ“ä½œå‘½ä»¤</p></li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set key2 10 # å­˜å…¥ä¸€ä¸ªå€¼ä¸º10çš„æ•´æ•°å­—ç¬¦ä¸²</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; incr key2 # è‡ªå¢</span><br><span class="line">(integer) 11</span><br><span class="line">127.0.0.1:6379&gt; incr key2 # è‡ªå¢</span><br><span class="line">(integer) 12</span><br><span class="line">127.0.0.1:6379&gt; incrby key2 5 # è‡ªå¢æŒ‡å®šæ•°å€¼ -- 5</span><br><span class="line">(integer) 17</span><br><span class="line">127.0.0.1:6379&gt; decr key2 # è‡ªå‡</span><br><span class="line">(integer) 16</span><br><span class="line">127.0.0.1:6379&gt; decr key2 # è‡ªå‡</span><br><span class="line">(integer) 15</span><br><span class="line">127.0.0.1:6379&gt;  decrby key2 5 # è‡ªå‡æŒ‡å®šæ•°å€¼ -- 5</span><br><span class="line">(integer) 10</span><br></pre></td></tr></table></figure><ul><li>å…¶ä»–æ“ä½œå‘½ä»¤</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set key1 redis</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; append key1 hello # å°† hello è¿½åŠ åˆ° key1 åŸæ¥çš„å€¼çš„æœ«å°¾,æ”¾å›è¿½åŠ åå­—ç¬¦ä¸²é•¿åº¦</span><br><span class="line">(integer) 10</span><br><span class="line">127.0.0.1:6379&gt; get key1</span><br><span class="line">&quot;redishello&quot;</span><br><span class="line">127.0.0.1:6379&gt; strlen key1 # è¿”å› key1 æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼çš„é•¿åº¦</span><br><span class="line">(integer) 10</span><br><span class="line">127.0.0.1:6379&gt; mset key1 v1 key2 v2 key3 v3 # æ‰¹é‡åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; mget key1 key2 key3 # è¿”å›æ‰€æœ‰(ä¸€ä¸ªæˆ–å¤šä¸ª)ç»™å®š key çš„å€¼</span><br><span class="line">1) &quot;v1&quot;</span><br><span class="line">2) &quot;v2&quot;</span><br><span class="line">3) &quot;v3&quot;</span><br></pre></td></tr></table></figure><h1 id="æ•£åˆ—ç±»å‹ï¼ˆHashï¼‰"><a href="#æ•£åˆ—ç±»å‹ï¼ˆHashï¼‰" class="headerlink" title="æ•£åˆ—ç±»å‹ï¼ˆHashï¼‰"></a>æ•£åˆ—ç±»å‹ï¼ˆHashï¼‰</h1><ul><li>ä¸¾ä¾‹åº”ç”¨åœºæ™¯</li></ul><p>ä¿å­˜å¤§é‡çš„å¯¹è±¡æ•°æ®</p><ul><li>redis hashä»‹ç»</li></ul><p>hash å«æ•£åˆ—ç±»å‹ã€‚ç­‰ä»·äºJava ä¸­çš„ HashMapã€‚ä½†æ˜¯åœ¨ redis ä¸­ hash çš„ key å¿…é¡»æ˜¯ string ç±»å‹ã€‚ä¸æ”¯æŒå…¶ä»–ç±»å‹ã€‚è¿™ä¸ªç‰¹æ€§éå¸¸é€‚åˆå­˜å‚¨å¯¹è±¡ã€‚å› ä¸ºä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰å¾ˆå¤šå±æ€§ï¼Œå­˜å‚¨èµ·æ¥å°±æ˜¯é”®å€¼å¯¹å½¢å¼çš„ã€‚åœ¨ Reids ä¸­ï¼Œæ¯ä¸ª Hash å¯ä»¥å­˜å‚¨å¤šè¾¾ 4 äº¿ä¸ªé”®å€¼å¯¹ã€‚</p><ul><li>ç›¸å…³æ“ä½œå‘½ä»¤</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hset user name zhangsan # ä½¿ç”¨ hset ä¸º user æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹ name = zhangsan</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hset user age 18 # ä½¿ç”¨ hset ä¸º user æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹ age = 18</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hget user name # ä½¿ç”¨ hget è·å– user ä¸­é”®ä¸º name çš„å€¼</span><br><span class="line">&quot;zhangsan&quot;</span><br><span class="line">127.0.0.1:6379&gt; hget user age # ä½¿ç”¨ hget è·å– user ä¸­é”®ä¸º age çš„å€¼</span><br><span class="line">&quot;18&quot;</span><br><span class="line">127.0.0.1:6379&gt; hgetall user # ä½¿ç”¨ hgetall è·å– user ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹</span><br><span class="line">1) &quot;name&quot;</span><br><span class="line">2) &quot;zhangsan&quot;</span><br><span class="line">3) &quot;age&quot;</span><br><span class="line">4) &quot;18&quot;</span><br><span class="line">127.0.0.1:6379&gt; hmset user name lisi age 20 # ä½¿ç”¨ hmset ä¸º user æ‰¹é‡æ·»åŠ é”®å€¼å¯¹</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; hmget user name age # ä½¿ç”¨ hmget æ‰¹é‡è·å– user ä¸­é”®çš„å€¼</span><br><span class="line">1) &quot;lisi&quot;</span><br><span class="line">2) &quot;20&quot;</span><br><span class="line">127.0.0.1:6379&gt; hdel user name# ä½¿ç”¨ hdel åˆ é™¤ user ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰é”®å€¼å¯¹</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hexists user name # ä½¿ç”¨ hexists åˆ¤æ–­ user ä¸­ name å…ƒç´ æ˜¯å¦å­˜åœ¨</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; hexists user age # ä½¿ç”¨ hexists  user ä¸­ age å…ƒç´ æ˜¯å¦å­˜åœ¨</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; hkeys user # ä½¿ç”¨ hkeys åªè·å¾— user ä¸­çš„å­—æ®µå</span><br><span class="line">1) &quot;age&quot;</span><br><span class="line">127.0.0.1:6379&gt; hvals user # ä½¿ç”¨ hvals åªè·å¾— user ä¸­çš„å­—æ®µå€¼</span><br><span class="line">1) &quot;20&quot;</span><br><span class="line">127.0.0.1:6379&gt; hlen user # ä½¿ç”¨ hlen è·å¾—  user ä¸­å­—æ®µï¼ˆé”®å€¼å¯¹ï¼‰æ•°é‡</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure><h1 id="åˆ—è¡¨ç±»å‹ï¼ˆList"><a href="#åˆ—è¡¨ç±»å‹ï¼ˆList" class="headerlink" title="åˆ—è¡¨ç±»å‹ï¼ˆList)"></a>åˆ—è¡¨ç±»å‹ï¼ˆList)</h1><ul><li>ä¸¾ä¾‹åº”ç”¨åœºæ™¯</li></ul><p>å¾®åšæŸä¸ªå¤§vçš„ç²‰ä¸å°±å¯ä»¥ä»¥listçš„æ ¼å¼æ”¾åœ¨redisé‡Œå»ç¼“å­˜</p><p>key=æŸå¤§v  value=[zhangsan, lisi, wangwu]</p><p>å•†å“ï¼Œåšå®¢ï¼Œæ–‡ç« ä¸‹é¢çš„è¯„è®ºåˆ—è¡¨ã€‚</p><ul><li>redis listä»‹ç»</li></ul><p>åœ¨ Redis ä¸­çš„ List ç±»å‹ï¼Œå…¶å†…éƒ¨ä½¿ç”¨çš„æ˜¯åŒå‘é“¾è¡¨å®ç°çš„,æ‰€ä»¥å®ƒå…·æœ‰åŒå‘é“¾è¡¨å…·æœ‰çš„ç›¸å…³ç‰¹æ€§ã€‚å…¶å¸¸ç”¨æ“ä½œå°±æ˜¯å‘åˆ—è¡¨ä¸¤ç«¯æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚è¿™ä½¿å¾— List æ—¢å¯ä»¥å½“åšæ ˆï¼ˆå…ˆè¿›åå‡ºï¼‰æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“åšé˜Ÿåˆ—ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æ¥ä½¿ç”¨ã€‚</p><ul><li>ç›¸å…³æ“ä½œå‘½ä»¤</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lpush list 1 2 3 4 # ä½¿ç”¨ lpush å°† 1 2 3 4 ä¾æ¬¡æ’å…¥åˆ° list çš„å·¦ç«¯</span><br><span class="line">(integer) 4</span><br><span class="line">127.0.0.1:6379&gt; rpush list 5 6 7 8 # ä½¿ç”¨ rpush å°† 5 6 7 8 ä¾æ¬¡æ’å…¥åˆ° list çš„å³ç«¯</span><br><span class="line">(integer) 8</span><br><span class="line">127.0.0.1:6379&gt; lrange list 0 -1 # ä½¿ç”¨ lrange è·å– æŒ‡å®šåŒºé—´ä¸Šæ‰€æœ‰å€¼ï¼ˆ0 -1 è¡¨ç¤ºè·å–å…¨éƒ¨ï¼‰</span><br><span class="line">1) &quot;4&quot;</span><br><span class="line">2) &quot;3&quot;</span><br><span class="line">3) &quot;2&quot;</span><br><span class="line">4) &quot;1&quot;</span><br><span class="line">5) &quot;5&quot;</span><br><span class="line">6) &quot;6&quot;</span><br><span class="line">7) &quot;7&quot;</span><br><span class="line">8) &quot;8&quot;</span><br><span class="line">127.0.0.1:6379&gt; lpop list # ä½¿ç”¨ lpop å¼¹å‡º list å·¦ç«¯çš„ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›å¼¹å‡ºçš„å€¼</span><br><span class="line">&quot;4&quot;</span><br><span class="line">127.0.0.1:6379&gt; lpop list </span><br><span class="line">&quot;3&quot;</span><br><span class="line">127.0.0.1:6379&gt; rpop list # ä½¿ç”¨ rpop å¼¹å‡º list å³ç«¯çš„ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›å¼¹å‡ºçš„å€¼</span><br><span class="line">&quot;8&quot;</span><br><span class="line">127.0.0.1:6379&gt; rpop list</span><br><span class="line">&quot;7&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange list 0 -1</span><br><span class="line">1) &quot;2&quot;</span><br><span class="line">2) &quot;1&quot;</span><br><span class="line">3) &quot;5&quot;</span><br><span class="line">4) &quot;6&quot;</span><br><span class="line">127.0.0.1:6379&gt; llen list # ä½¿ç”¨ llen è·å– list ä¸­å…ƒç´ ä¸ªæ•°</span><br><span class="line">(integer) 4</span><br></pre></td></tr></table></figure><h1 id="é›†åˆç±»å‹ï¼ˆSetï¼‰"><a href="#é›†åˆç±»å‹ï¼ˆSetï¼‰" class="headerlink" title="é›†åˆç±»å‹ï¼ˆSetï¼‰"></a>é›†åˆç±»å‹ï¼ˆSetï¼‰</h1><ul><li>ä¸¾ä¾‹åº”ç”¨åœºæ™¯</li></ul><p>å¯ä»¥åŸºäºsetç©å„¿äº¤é›†ã€å¹¶é›†ã€å·®é›†çš„æ“ä½œ</p><p>å¯ä»¥æŠŠä¸¤ä¸ªäººçš„ç²‰ä¸åˆ—è¡¨æ•´ä¸€ä¸ªäº¤é›†ï¼Œçœ‹çœ‹ä¿©äººçš„å…±åŒå¥½å‹æ˜¯è°</p><ul><li>ç›¸å…³æ“ä½œå‘½ä»¤</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; sadd set a b c 1 2 3  # ä½¿ç”¨ sadd å°† a b c 1 2 3 æ·»åŠ åˆ° set é›†åˆä¸­</span><br><span class="line">(integer) 6</span><br><span class="line">127.0.0.1:6379&gt; sadd set a b 2  # æ·»åŠ é‡å¤å…ƒç´ ï¼Œè¿”å›æˆåŠŸæ·»åŠ  0 ä¸ªï¼Œè¯´æ˜ set ä¸­å…ƒç´ ä¸é‡å¤</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; srem set a b 1  # ä½¿ç”¨ srem åˆ é™¤ set é›†åˆä¸­çš„ a b 1 ä¸‰ä¸ªå…ƒç´ </span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; smembers set  # ä½¿ç”¨ smembers è·å– set é›†åˆä¸­æ‰€ä»¥å…ƒç´ </span><br><span class="line">1) &quot;2&quot;</span><br><span class="line">2) &quot;c&quot;</span><br><span class="line">3) &quot;3&quot;</span><br><span class="line">127.0.0.1:6379&gt; sismember set a  # ä½¿ç”¨ sismember åˆ¤æ–­ a æ˜¯å¦åœ¨ set é›†åˆä¸­</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; sismember set c  # ä½¿ç”¨ sismember åˆ¤æ–­ c æ˜¯å¦åœ¨ set é›†åˆä¸­</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure><ul><li>é›†åˆçš„å¹¶é›†è¿ç®— A âˆª B</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; sadd seta 1 2 3</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; sadd setb 3 4 5</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; sunion seta setb # ä½¿ç”¨ sunion è®¡ç®— seta å’Œ setb çš„å¹¶é›†</span><br><span class="line">1) &quot;1&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">3) &quot;3&quot;</span><br><span class="line">4) &quot;4&quot;</span><br><span class="line">5) &quot;5&quot;</span><br></pre></td></tr></table></figure><ul><li>é›†åˆçš„äº¤é›†è¿ç®— A âˆ© B</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; sadd seta 1 2 3</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; sadd setb 3 4 5</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; sinter seta setb # ä½¿ç”¨ sinter è®¡ç®— seta å’Œ setb çš„äº¤é›†</span><br><span class="line">1) &quot;3&quot;</span><br></pre></td></tr></table></figure><ul><li>é›†åˆçš„å·®é›†è¿ç®— A - B</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; sadd seta 1 2 3</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; sadd setb 3 4 5</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; sdiff seta setb # ä½¿ç”¨ sdiff è®¡ç®— seta - setb (å±äºseta ä½†ä¸å±äº setb)</span><br><span class="line">1) &quot;1&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">127.0.0.1:6379&gt; sdiff setb seta # ä½¿ç”¨ sdiff è®¡ç®— setb - setb (å±äºsetb ä½†ä¸å±äº seta)</span><br><span class="line">1) &quot;4&quot;</span><br><span class="line">2) &quot;5&quot;</span><br></pre></td></tr></table></figure><h1 id="æœ‰åºé›†åˆç±»å‹-sorted-set"><a href="#æœ‰åºé›†åˆç±»å‹-sorted-set" class="headerlink" title="æœ‰åºé›†åˆç±»å‹ (sorted set)"></a>æœ‰åºé›†åˆç±»å‹ (sorted set)</h1><ul><li>ä¸¾ä¾‹åº”ç”¨åœºæ™¯</li></ul><p>å•†å“é”€å”®ï¼Œè½¯ä»¶ä¸‹è½½ç­‰å„ç§æ’è¡Œæ¦œ</p><p>è¿˜å¯ä»¥åˆ†é¡µæŸ¥è¯¢</p><ul><li>ç›¸å…³æ“ä½œå‘½ä»¤</li></ul><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; zadd board 81 java 75 python 90 c++ # ä½¿ç”¨ zadd å¢åŠ ä¸€åˆ°å¤šä¸ªvalue/scoreå¯¹ï¼Œscore æ”¾åœ¨å‰é¢</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; zscore board java # ä½¿ç”¨ zscore è·å– java çš„ score</span><br><span class="line">&quot;81&quot;</span><br><span class="line">127.0.0.1:6379&gt; zrange board 0 -1 # ä½¿ç”¨ zrange è·å–æŒ‡å®šåŒºé—´ï¼ˆ0 -1 è¡¨ç¤ºå…¨éƒ¨ï¼‰ä¸Šçš„é™åºæ’å</span><br><span class="line">1) &quot;python&quot;</span><br><span class="line">2) &quot;java&quot;</span><br><span class="line">3) &quot;c++&quot;</span><br><span class="line">127.0.0.1:6379&gt; zrange board 0 -1 withscores # å¸¦ä¸Š winthscores å¯ä»¥ä¸€å¹¶è·å–å…ƒç´ çš„ score</span><br><span class="line">1) &quot;python&quot; </span><br><span class="line">2) &quot;75&quot;</span><br><span class="line">3) &quot;java&quot;</span><br><span class="line">4) &quot;81&quot;</span><br><span class="line">5) &quot;c++&quot;</span><br><span class="line">6) &quot;90&quot;</span><br><span class="line">127.0.0.1:6379&gt; zrevrange board 0 -1 withscores # ä½¿ç”¨ zrevrange è·å–æŒ‡å®šåŒºé—´ï¼ˆ0 -1 è¡¨ç¤ºå…¨éƒ¨ï¼‰ä¸Šçš„å‡åºæ’å</span><br><span class="line">1) &quot;c++&quot;</span><br><span class="line">2) &quot;90&quot;</span><br><span class="line">3) &quot;java&quot;</span><br><span class="line">4) &quot;81&quot;</span><br><span class="line">5) &quot;python&quot;</span><br><span class="line">6) &quot;75&quot;</span><br><span class="line">127.0.0.1:6379&gt; zrangebyscore board -inf +inf withscores # ä½¿ç”¨ zrangebyscore è·å– è´Ÿæ— ç©·ï¼ˆ-infï¼‰åˆ° æ­£æ— ç©·ï¼ˆ+infï¼‰åŒºé—´ä¸Šæ‰€ä»¥å…ƒç´ çš„é™åºæ’å</span><br><span class="line">1) &quot;python&quot;</span><br><span class="line">2) &quot;75&quot;</span><br><span class="line">3) &quot;java&quot;</span><br><span class="line">4) &quot;81&quot;</span><br><span class="line">5) &quot;c++&quot;</span><br><span class="line">6) &quot;90&quot;</span><br><span class="line">127.0.0.1:6379&gt; zrevrangebyscore board +inf -inf withscores # ä½¿ç”¨ zrevrangebyscore è·å–æ­£æ— ç©·ï¼ˆ+infï¼‰åˆ° è´Ÿæ— ç©·ï¼ˆ-infï¼‰åŒºé—´ä¸Šæ‰€ä»¥å…ƒç´ çš„å‡åºæ’å </span><br><span class="line">1) &quot;c++&quot;</span><br><span class="line">2) &quot;90&quot;</span><br><span class="line">3) &quot;java&quot;</span><br><span class="line">4) &quot;81&quot;</span><br><span class="line">5) &quot;python&quot;</span><br><span class="line">6) &quot;75&quot;</span><br><span class="line">127.0.0.1:6379&gt; zcard board # ä½¿ç”¨ zcard è®¡ç®— board é›†åˆçš„å…ƒç´ ä¸ªæ•°</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; zrem board java python # ä½¿ç”¨ zrem åˆ é™¤ board é›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  </span><br><span class="line">(integer) 2</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redisçš„çº¿ç¨‹æ¨¡å‹</title>
      <link href="/2019/08/29/redis%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/"/>
      <url>/2019/08/29/redis%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="redisä¸memcachedæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#redisä¸memcachedæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="redisä¸memcachedæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>redisä¸memcachedæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><ul><li><p>redisçš„æ•°æ®ç±»å‹æ¯”memcachedçš„å¤š,æ”¯æŒçš„æ•°æ®ç»“æ„æ›´ä¸ºä¸°å¯Œã€‚</p></li><li><p>redisæ”¯æŒé›†ç¾¤ï¼Œè€Œmemcachedä¸æ”¯æŒé›†ç¾¤ã€‚</p></li></ul><h1 id="redisçš„çº¿ç¨‹æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#redisçš„çº¿ç¨‹æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="redisçš„çº¿ç¨‹æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>redisçš„çº¿ç¨‹æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ</h1><h2 id="æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨"><a href="#æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨" class="headerlink" title="æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨"></a>æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨</h2><p>redisåŸºäºreactoræ¨¡å¼å¼€å‘äº†ç½‘ç»œäº‹ä»¶å¤„ç†å™¨ï¼Œè¿™ä¸ªå¤„ç†å™¨å«åšæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ï¼Œfile event handlerã€‚è¿™ä¸ªæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ï¼Œæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥redisæ‰å«åšå•çº¿ç¨‹çš„æ¨¡å‹ã€‚<br>ä¸‹å›¾æ¡†èµ·æ¥çš„æ•´ä¸ªéƒ¨åˆ†æŒ‡çš„æ˜¯æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ï¼š<br><img src="/images/20190829_1redis/01_redis%E5%8D%95%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B.png" alt="rediså•çº¿ç¨‹æ¨¡å‹"></p><h1 id="ä¸ºä»€ä¹ˆå•çº¿ç¨‹çš„redisæ¯”å¤šçº¿ç¨‹çš„memcachedæ•ˆç‡é«˜ï¼ˆå•çº¿ç¨‹è¿˜æ”¯æŒé«˜å¹¶å‘-ï¼‰ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå•çº¿ç¨‹çš„redisæ¯”å¤šçº¿ç¨‹çš„memcachedæ•ˆç‡é«˜ï¼ˆå•çº¿ç¨‹è¿˜æ”¯æŒé«˜å¹¶å‘-ï¼‰ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå•çº¿ç¨‹çš„redisæ¯”å¤šçº¿ç¨‹çš„memcachedæ•ˆç‡é«˜ï¼ˆå•çº¿ç¨‹è¿˜æ”¯æŒé«˜å¹¶å‘    ï¼‰ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå•çº¿ç¨‹çš„redisæ¯”å¤šçº¿ç¨‹çš„memcachedæ•ˆç‡é«˜ï¼ˆå•çº¿ç¨‹è¿˜æ”¯æŒé«˜å¹¶å‘    ï¼‰ï¼Ÿ</h1><ul><li><p>redisçš„å„ä¸ªæ—¶é—´å¤„ç†å™¨å±äºçº¯å†…å­˜æ“ä½œï¼Œæ•ˆç‡é«˜</p></li><li><p>æ ¸å¿ƒæ˜¯åŸºäºéé˜»å¡çš„IOå¤šè·¯å¤ç”¨æœºåˆ¶</p></li><li><p>å•çº¿ç¨‹åè€Œé¿å…äº†å¤šçº¿ç¨‹çš„é¢‘ç¹ä¸Šä¸‹æ–‡åˆ‡æ¢é—®é¢˜</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¡¹ç›®ä¸­ç¼“å­˜çš„ä½¿ç”¨</title>
      <link href="/2019/08/29/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%BC%93%E5%AD%98%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/08/29/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%BC%93%E5%AD%98%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="é¡¹ç›®ä¸­çš„ç¼“å­˜æ˜¯æ€ä¹ˆä½¿ç”¨çš„ï¼Ÿ"><a href="#é¡¹ç›®ä¸­çš„ç¼“å­˜æ˜¯æ€ä¹ˆä½¿ç”¨çš„ï¼Ÿ" class="headerlink" title="é¡¹ç›®ä¸­çš„ç¼“å­˜æ˜¯æ€ä¹ˆä½¿ç”¨çš„ï¼Ÿ"></a>é¡¹ç›®ä¸­çš„ç¼“å­˜æ˜¯æ€ä¹ˆä½¿ç”¨çš„ï¼Ÿ</h1><p>ç»å…¸çš„ç”µå•†é¡¹ç›®éƒ½å–œæ¬¢å°†å¯¼èˆªæ ï¼Œèœå•æ ï¼Œä¸‰çº§åˆ†ç±»èœå•æ•°æ®æ”¾åˆ°redisç¼“å­˜ä¸­ï¼Œå› ä¸ºè¿™äº›æ•°æ®å¾€å¾€åœ¨ç”¨æˆ·è®¿é—®çš„æ—¶å€™éƒ½èƒ½è®¿é—®åˆ°ï¼Œå¦‚æœå¤§é‡ç”¨æˆ·éƒ½å»è®¿é—®æ•°æ®åº“ä¼šé€ æˆæ•°æ®åº“è®¿é—®å‹åŠ›ï¼Œç”šè‡³å®•æœºï¼Œè€Œç¼“å­˜åŸºäºå†…å­˜ï¼Œå¤©ç”Ÿå°±æ”¯æŒé«˜æ€§èƒ½é«˜å¹¶å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå°†è¿™äº›ç”¨æˆ·ç»å¸¸èƒ½è®¿é—®åˆ°çš„æ•°æ®éƒ½æ”¾åˆ°redisç¼“å­˜ä¸­ã€‚</p><h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å­˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å­˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å­˜ï¼Ÿ</h1><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬çš„é¡¹ç›®é‡Œé¢åŸºæœ¬ä¸Šä¸ä¼šæœ‰é«˜å¹¶å‘çš„åœºæ™¯ï¼Œæœ‰äº›å¤æ‚æŸ¥è¯¢çš„åœºæ™¯éœ€è¦å°†æ•°æ®æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œåç»­ä¼šå¤§å¹…åº¦æå‡è®¿é—®æ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p><h1 id="ç”¨äº†ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆä¸è‰¯çš„åæœï¼Ÿ"><a href="#ç”¨äº†ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆä¸è‰¯çš„åæœï¼Ÿ" class="headerlink" title="ç”¨äº†ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆä¸è‰¯çš„åæœï¼Ÿ"></a>ç”¨äº†ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆä¸è‰¯çš„åæœï¼Ÿ</h1><ul><li>ç¼“å­˜ä¸æ•°æ®åº“åŒå†™ä¸ä¸€è‡´</li></ul><p>æ•°æ®åº“é‡Œé¢çš„æ•°æ®æ›´æ–°è¿‡åä¸åŠæ—¶æ›´æ–°åˆ°ç¼“å­˜ä¼šå¯¼è‡´ç”¨æˆ·è·å–åˆ°ç¼“å­˜ä¸­çš„æ•°æ®ä¸æ•°æ®åº“ä¸­ä¸åŒæ­¥ã€‚</p><ul><li>ç¼“å­˜ç©¿é€</li></ul><p>ç¼“å­˜ç©¿é€æ˜¯æŒ‡ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®ï¼Œè€Œç”¨æˆ·ä¸æ–­å‘èµ·è¯·æ±‚ï¼Œå¦‚å‘èµ·ä¸ºidä¸ºâ€œ-1â€çš„æ•°æ®æˆ–idä¸ºç‰¹åˆ«å¤§ä¸å­˜åœ¨çš„æ•°æ®ã€‚è¿™æ—¶çš„ç”¨æˆ·å¾ˆå¯èƒ½æ˜¯æ”»å‡»è€…ï¼Œæ”»å‡»ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§</p><ul><li>ç¼“å­˜å‡»ç©¿</li></ul><p>ç¼“å­˜å‡»ç©¿æ˜¯æŒ‡ç¼“å­˜ä¸­æ²¡æœ‰ä½†æ•°æ®åº“ä¸­æœ‰çš„æ•°æ®ã€‚è¿™æ—¶ç”±äºå¹¶å‘ç”¨æˆ·ç‰¹åˆ«å¤šï¼ŒåŒæ—¶è¯»ç¼“å­˜æ²¡è¯»åˆ°æ•°æ®ï¼ŒåˆåŒæ—¶å»æ•°æ®åº“å»å–æ•°æ®ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›ç¬é—´å¢å¤§ï¼Œé€ æˆè¿‡å¤§å‹åŠ›ã€‚</p><ul><li>ç¼“å­˜é›ªå´©</li></ul><p>ç¼“å­˜é›ªå´©æ˜¯æŒ‡ç¼“å­˜æ•°æ®å¤§æ‰¹é‡åˆ°è¿‡æœŸæ—¶é—´ï¼Œè€ŒæŸ¥è¯¢æ•°æ®é‡å·¨å¤§ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›è¿‡å¤§ç”šè‡³downæœºã€‚å’Œç¼“å­˜å‡»ç©¿ä¸åŒçš„æ˜¯ï¼Œç¼“å­˜å‡»ç©¿æŒ‡å¹¶å‘æŸ¥åŒä¸€æ¡æ•°æ®ï¼Œç¼“å­˜é›ªå´©æ˜¯ä¸åŒæ•°æ®éƒ½è¿‡æœŸäº†ï¼Œå¾ˆå¤šæ•°æ®éƒ½æŸ¥ä¸åˆ°ä»è€ŒæŸ¥æ•°æ®åº“ã€‚</p><ul><li>ç¼“å­˜å¹¶å‘ç«äº‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿ç¨‹æ­»é”çš„åŸç†ä¸å®ç°</title>
      <link href="/2019/08/28/%E7%BA%BF%E7%A8%8B%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
      <url>/2019/08/28/%E7%BA%BF%E7%A8%8B%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿ç¨‹æ­»é”çš„åŸç†"><a href="#çº¿ç¨‹æ­»é”çš„åŸç†" class="headerlink" title="çº¿ç¨‹æ­»é”çš„åŸç†"></a>çº¿ç¨‹æ­»é”çš„åŸç†</h1><p>å½“çº¿ç¨‹ä»»åŠ¡ä¸­å‡ºç°äº†å¤šä¸ªåŒæ­¥(å¤šä¸ªé”)æ—¶ï¼Œå¦‚æœåŒæ­¥ä¸­åµŒå¥—äº†å…¶ä»–çš„åŒæ­¥ã€‚è¿™æ—¶å®¹æ˜“å¼•å‘ä¸€ç§ç°è±¡ï¼šç¨‹åºå‡ºç°æ— é™ç­‰å¾…ï¼Œè¿™ç§ç°è±¡æˆ‘ä»¬ç§°ä¸ºæ­»é”ã€‚è¿™ç§æƒ…å†µèƒ½é¿å…å°±é¿å…æ‰ã€‚<br><img src="/images/20190828_1multi-thread/%E7%BA%BF%E7%A8%8B%E6%AD%BB%E9%94%81%E7%9A%84%E5%8E%9F%E7%90%86.JPG" alt="çº¿ç¨‹æ­»é”çš„åŸç†"></p><h1 id="çº¿ç¨‹æ­»é”çš„ä»£ç å®ç°"><a href="#çº¿ç¨‹æ­»é”çš„ä»£ç å®ç°" class="headerlink" title="çº¿ç¨‹æ­»é”çš„ä»£ç å®ç°"></a>çº¿ç¨‹æ­»é”çš„ä»£ç å®ç°</h1><h2 id="å”¯ä¸€å¯¹è±¡é”A"><a href="#å”¯ä¸€å¯¹è±¡é”A" class="headerlink" title="å”¯ä¸€å¯¹è±¡é”A"></a>å”¯ä¸€å¯¹è±¡é”A</h2><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockA</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">LockA</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">final</span> LockA locka = <span class="keyword">new</span> LockA();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å”¯ä¸€å¯¹è±¡é”B"><a href="#å”¯ä¸€å¯¹è±¡é”B" class="headerlink" title="å”¯ä¸€å¯¹è±¡é”B"></a>å”¯ä¸€å¯¹è±¡é”B</h2><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockB</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">LockB</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">final</span> LockB lockb = <span class="keyword">new</span> LockB();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ­»é”ä»£ç å…·ä½“å®ç°"><a href="#æ­»é”ä»£ç å…·ä½“å®ç°" class="headerlink" title="æ­»é”ä»£ç å…·ä½“å®ç°"></a>æ­»é”ä»£ç å…·ä½“å®ç°</h2><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLock</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="comment">//å…ˆè¿›å…¥AåŒæ­¥,å†è¿›å…¥BåŒæ­¥</span></span><br><span class="line"><span class="keyword">synchronized</span>(LockA.locka)&#123;</span><br><span class="line">System.out.println(<span class="string">"if...locka"</span>);</span><br><span class="line"><span class="keyword">synchronized</span>(LockB.lockb)&#123;</span><br><span class="line">System.out.println(<span class="string">"if...lockb"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//å…ˆè¿›å…¥BåŒæ­¥,å†è¿›å…¥AåŒæ­¥</span></span><br><span class="line"><span class="keyword">synchronized</span>(LockB.lockb)&#123;</span><br><span class="line">System.out.println(<span class="string">"else...lockb"</span>);</span><br><span class="line"><span class="keyword">synchronized</span>(LockA.locka)&#123;</span><br><span class="line">System.out.println(<span class="string">"else...locka"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLockDemo</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">DeadLock dead = <span class="keyword">new</span> DeadLock();</span><br><span class="line">Thread t0 = <span class="keyword">new</span> Thread(dead);</span><br><span class="line">Thread t1 = <span class="keyword">new</span> Thread(dead);</span><br><span class="line">t0.start();</span><br><span class="line">t1.start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤šçº¿ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­»é” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•ä¾‹æ¨¡å¼çš„7ç§å†™æ³•</title>
      <link href="/2019/08/28/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%847%E7%A7%8D%E5%86%99%E6%B3%95/"/>
      <url>/2019/08/28/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%847%E7%A7%8D%E5%86%99%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼åœ¨ç±»åŠ è½½æ—¶å°±å®Œæˆäº†åˆå§‹åŒ–ï¼Œæ‰€ä»¥ç±»åŠ è½½è¾ƒæ…¢ï¼Œä½†è·å–å¯¹è±¡çš„é€Ÿåº¦å¿«ã€‚ è¿™ç§æ–¹å¼åŸºäºç±»åŠ è½½æœºåˆ¶é¿å…äº†å¤šçº¿ç¨‹çš„åŒæ­¥é—®é¢˜ï¼Œä½†æ˜¯æœ‰å…¶ä»–çš„é™æ€æ–¹æ³•å¯¼è‡´ç±»è£…è½½ï¼Œè¿™æ—¶å€™åˆå§‹åŒ–instanceæ˜¾ç„¶æ²¡æœ‰è¾¾åˆ°æ‡’åŠ è½½çš„æ•ˆæœã€‚</p><h1 id="æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰"><a href="#æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰" class="headerlink" title="æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰"></a>æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;  </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‡’æ±‰æ¨¡å¼ç”³æ˜äº†ä¸€ä¸ªé™æ€å¯¹è±¡ï¼Œåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–ï¼Œè™½ç„¶èŠ‚çº¦äº†èµ„æºï¼Œä½†ç¬¬ä¸€æ¬¡åŠ è½½æ—¶éœ€è¦å®ä¾‹åŒ–ï¼Œåæ˜ ç¨æ…¢ä¸€äº›ï¼Œè€Œä¸”åœ¨å¤šçº¿ç¨‹ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚</p><h1 id="æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"><a href="#æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰" class="headerlink" title="æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"></a>æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span>  Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•èƒ½å¤Ÿåœ¨å¤šçº¿ç¨‹ä¸­å¾ˆå¥½çš„å·¥ä½œï¼Œä½†æ˜¯æ¯æ¬¡è°ƒç”¨getInstanceæ–¹æ³•æ—¶éƒ½éœ€è¦è¿›è¡ŒåŒæ­¥ï¼Œé€ æˆä¸å¿…è¦çš„åŒæ­¥å¼€é”€ï¼Œè€Œä¸”å¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬æ˜¯ç”¨ä¸åˆ°åŒæ­¥çš„ï¼Œæ‰€ä»¥ä¸å»ºè®®ç”¨è¿™ç§æ¨¡å¼ã€‚</p><h1 id="åŒé‡æ£€æŸ¥æ¨¡å¼-ï¼ˆDCLï¼‰"><a href="#åŒé‡æ£€æŸ¥æ¨¡å¼-ï¼ˆDCLï¼‰" class="headerlink" title="åŒé‡æ£€æŸ¥æ¨¡å¼ ï¼ˆDCLï¼‰"></a>åŒé‡æ£€æŸ¥æ¨¡å¼ ï¼ˆDCLï¼‰</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (instance== <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line"><span class="keyword">if</span> (instance== <span class="keyword">null</span>) &#123;</span><br><span class="line">instance= <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> singleton;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•åœ¨getSingletonæ–¹æ³•ä¸­å¯¹singletonè¿›è¡Œäº†ä¸¤æ¬¡åˆ¤ç©ºï¼Œç¬¬ä¸€æ¬¡æ˜¯ä¸ºäº†ä¸å¿…è¦çš„åŒæ­¥ï¼Œç¬¬äºŒæ¬¡æ˜¯åœ¨singletonç­‰äºnullçš„æƒ…å†µä¸‹æ‰åˆ›å»ºå®ä¾‹ã€‚åœ¨è¿™é‡Œç”¨åˆ°äº†volatileå…³é”®å­—ï¼ŒåŒé‡æ£€æŸ¥æ¨¡å¼æ˜¯æ­£ç¡®ä½¿ç”¨volatileå…³é”®å­—çš„åœºæ™¯ä¹‹ä¸€ã€‚<br>åœ¨è¿™é‡Œä½¿ç”¨volatileä¼šæˆ–å¤šæˆ–å°‘çš„å½±å“æ€§èƒ½ï¼Œä½†è€ƒè™‘åˆ°ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œç‰ºç‰²è¿™ç‚¹æ€§èƒ½è¿˜æ˜¯å€¼å¾—çš„ã€‚ DCLä¼˜ç‚¹æ˜¯èµ„æºåˆ©ç”¨ç‡é«˜ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡ŒgetInstanceæ—¶å•ä¾‹å¯¹è±¡æ‰è¢«å®ä¾‹åŒ–ï¼Œæ•ˆç‡é«˜ã€‚ç¼ºç‚¹æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ååº”ç¨æ…¢ä¸€äº›ï¼Œåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ä¹Ÿæœ‰ä¸€å®šçš„ç¼ºé™·ï¼Œè™½ç„¶å‘ç”Ÿçš„æ¦‚ç‡å¾ˆå°ã€‚DCLè™½ç„¶åœ¨ä¸€å®šç¨‹åº¦è§£å†³äº†èµ„æºçš„æ¶ˆè€—å’Œå¤šä½™çš„åŒæ­¥ï¼Œçº¿ç¨‹å®‰å…¨ç­‰é—®é¢˜ï¼Œä½†æ˜¯ä»–è¿˜æ˜¯åœ¨æŸäº›æƒ…å†µä¼šå‡ºç°å¤±æ•ˆçš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯DCLå¤±æ•ˆï¼Œåœ¨ã€Šjavaå¹¶å‘ç¼–ç¨‹å®è·µã€‹ä¸€ä¹¦å»ºè®®ç”¨é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼æ¥æ›¿ä»£DCLã€‚</p><h1 id="é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰"><a href="#é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰"></a>é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SingletonHolder.sInstance;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton sInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡åŠ è½½Singletonç±»æ—¶å¹¶ä¸ä¼šåˆå§‹åŒ–sInstanceï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceæ–¹æ³•æ—¶è™šæ‹ŸæœºåŠ è½½SingletonHolderå¹¶åˆå§‹åŒ–sInstanceï¼Œè¿™æ ·ä¸ä»…èƒ½ç¡®ä¿çº¿ç¨‹å®‰å…¨ä¹Ÿèƒ½ä¿è¯Singletonç±»çš„å”¯ä¸€æ€§ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ã€‚</p><h1 id="æšä¸¾å•ä¾‹"><a href="#æšä¸¾å•ä¾‹" class="headerlink" title="æšä¸¾å•ä¾‹"></a>æšä¸¾å•ä¾‹</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton &#123;</span><br><span class="line">INSTANCE;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomeThing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æšä¸¾å®ä¾‹çš„åˆ›å»ºæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æ˜¯å•ä¾‹ï¼Œä¸Šè¿°è®²çš„å‡ ç§å•ä¾‹æ¨¡å¼å®ç°ä¸­ï¼Œæœ‰ä¸€ç§æƒ…å†µä¸‹ä»–ä»¬ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œé‚£å°±æ˜¯ååºåˆ—åŒ–ï¼Œå°†ä¸€ä¸ªå•ä¾‹å®ä¾‹å¯¹è±¡å†™åˆ°ç£ç›˜å†è¯»å›æ¥ï¼Œä»è€Œè·å¾—äº†ä¸€ä¸ªå®ä¾‹ã€‚ååºåˆ—åŒ–æ“ä½œæä¾›äº†readResolveæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è®©å¼€å‘äººå‘˜æ§åˆ¶å¯¹è±¡çš„ååºåˆ—åŒ–ã€‚</p><h1 id="å•ä¾‹æ¨¡å¼é¿å…ååºåˆ—åŒ–é‡æ–°åˆ›å»ºå¯¹è±¡"><a href="#å•ä¾‹æ¨¡å¼é¿å…ååºåˆ—åŒ–é‡æ–°åˆ›å»ºå¯¹è±¡" class="headerlink" title="å•ä¾‹æ¨¡å¼é¿å…ååºåˆ—åŒ–é‡æ–°åˆ›å»ºå¯¹è±¡"></a>å•ä¾‹æ¨¡å¼é¿å…ååºåˆ—åŒ–é‡æ–°åˆ›å»ºå¯¹è±¡</h1><p>åœ¨ä¸Šè¿°çš„å‡ ä¸ªæ–¹æ³•ç¤ºä¾‹ä¸­å¦‚æœè¦æœç»å•ä¾‹å¯¹è±¡è¢«ååºåˆ—åŒ–æ˜¯é‡æ–°ç”Ÿæˆå¯¹è±¡ï¼Œå°±å¿…é¡»åŠ å…¥å¦‚ä¸‹æ–¹æ³•</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Object <span class="title">readResolve</span><span class="params">()</span> <span class="keyword">throws</span> ObjectStreamException</span>&#123;</span><br><span class="line"><span class="keyword">return</span> singleton;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æšä¸¾å•ä¾‹çš„ä¼˜ç‚¹å°±æ˜¯ç®€å•ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†åº”ç”¨å¼€å‘å¾ˆå°‘ç”¨æšä¸¾ï¼Œå¯è¯»æ€§å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œä¸å»ºè®®ç”¨ã€‚</p><h1 id="ä½¿ç”¨å®¹å™¨å®ç°å•ä¾‹æ¨¡å¼"><a href="#ä½¿ç”¨å®¹å™¨å®ç°å•ä¾‹æ¨¡å¼" class="headerlink" title="ä½¿ç”¨å®¹å™¨å®ç°å•ä¾‹æ¨¡å¼"></a>ä½¿ç”¨å®¹å™¨å®ç°å•ä¾‹æ¨¡å¼</h1><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonManager</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Object&gt; objMap = <span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerService</span><span class="params">(String key, Objectinstance)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (!objMap.containsKey(key) ) &#123;</span><br><span class="line">objMap.put(key, instance) ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title">ObjectgetService</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> objMap.get(key) ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨SingletonManager å°†å¤šç§çš„å•ä¾‹ç±»ç»Ÿä¸€ç®¡ç†ï¼Œåœ¨ä½¿ç”¨æ—¶æ ¹æ®keyè·å–å¯¹è±¡å¯¹åº”ç±»å‹çš„å¯¹è±¡ã€‚è¿™ç§æ–¹å¼ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç®¡ç†å¤šç§ç±»å‹çš„å•ä¾‹ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨æ—¶å¯ä»¥é€šè¿‡ç»Ÿä¸€çš„æ¥å£è¿›è¡Œè·å–æ“ä½œï¼Œé™ä½äº†ç”¨æˆ·çš„ä½¿ç”¨æˆæœ¬ï¼Œä¹Ÿå¯¹ç”¨æˆ·éšè—äº†å…·ä½“å®ç°ï¼Œé™ä½äº†è€¦åˆåº¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†åº“åˆ†è¡¨ä¹‹åå¤„ç†ä¸»é”®idçš„åŠæ³•</title>
      <link href="/2019/08/21/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E4%B9%8B%E5%90%8E%E5%A4%84%E7%90%86%E4%B8%BB%E9%94%AEid%E7%9A%84%E5%8A%9E%E6%B3%95/"/>
      <url>/2019/08/21/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E4%B9%8B%E5%90%8E%E5%A4%84%E7%90%86%E4%B8%BB%E9%94%AEid%E7%9A%84%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“è‡ªå¢ID"><a href="#æ•°æ®åº“è‡ªå¢ID" class="headerlink" title="æ•°æ®åº“è‡ªå¢ID"></a>æ•°æ®åº“è‡ªå¢ID</h1><p>è¿™ä¸ªå°±æ˜¯è¯´ä½ çš„ç³»ç»Ÿé‡Œæ¯æ¬¡å¾—åˆ°ä¸€ä¸ªidï¼Œéƒ½æ˜¯å¾€ä¸€ä¸ªåº“çš„ä¸€ä¸ªè¡¨é‡Œæ’å…¥ä¸€æ¡æ²¡ä»€ä¹ˆä¸šåŠ¡å«ä¹‰çš„æ•°æ®ï¼Œç„¶åè·å–ä¸€ä¸ªæ•°æ®åº“è‡ªå¢çš„ä¸€ä¸ªidã€‚æ‹¿åˆ°è¿™ä¸ªidä¹‹åå†å¾€å¯¹åº”çš„åˆ†åº“åˆ†è¡¨é‡Œå»å†™å…¥ã€‚</p><p>è¿™ä¸ªæ–¹æ¡ˆçš„å¥½å¤„å°±æ˜¯æ–¹ä¾¿ç®€å•ï¼Œè°éƒ½ä¼šç”¨ï¼›ç¼ºç‚¹å°±æ˜¯å•åº“ç”Ÿæˆè‡ªå¢idï¼Œè¦æ˜¯é«˜å¹¶å‘çš„è¯ï¼Œå°±ä¼šæœ‰ç“¶é¢ˆçš„ï¼›å¦‚æœä½ ç¡¬æ˜¯è¦æ”¹è¿›ä¸€ä¸‹ï¼Œé‚£ä¹ˆå°±ä¸“é—¨å¼€ä¸€ä¸ªæœåŠ¡å‡ºæ¥ï¼Œè¿™ä¸ªæœåŠ¡æ¯æ¬¡å°±æ‹¿åˆ°å½“å‰idæœ€å¤§å€¼ï¼Œç„¶åè‡ªå·±é€’å¢å‡ ä¸ªidï¼Œä¸€æ¬¡æ€§è¿”å›ä¸€æ‰¹idï¼Œç„¶åå†æŠŠå½“å‰æœ€å¤§idå€¼ä¿®æ”¹æˆé€’å¢å‡ ä¸ªidä¹‹åçš„ä¸€ä¸ªå€¼ï¼›ä½†æ˜¯æ— è®ºæ€ä¹ˆè¯´éƒ½æ˜¯åŸºäºå•ä¸ªæ•°æ®åº“ã€‚</p><p>é€‚åˆçš„åœºæ™¯ï¼šä½ åˆ†åº“åˆ†è¡¨å°±ä¿©åŸå› ï¼Œè¦ä¸å°±æ˜¯å•åº“å¹¶å‘å¤ªé«˜ï¼Œè¦ä¸å°±æ˜¯å•åº“æ•°æ®é‡å¤ªå¤§ï¼›é™¤éæ˜¯ä½ å¹¶å‘ä¸é«˜ï¼Œä½†æ˜¯æ•°æ®é‡å¤ªå¤§å¯¼è‡´çš„åˆ†åº“åˆ†è¡¨æ‰©å®¹ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ¡ˆï¼Œå› ä¸ºå¯èƒ½æ¯ç§’æœ€é«˜å¹¶å‘æœ€å¤šå°±å‡ ç™¾ï¼Œé‚£ä¹ˆå°±èµ°å•ç‹¬çš„ä¸€ä¸ªåº“å’Œè¡¨ç”Ÿæˆè‡ªå¢ä¸»é”®å³å¯ã€‚</p><p>å¹¶å‘å¾ˆä½ï¼Œå‡ ç™¾/sï¼Œä½†æ˜¯æ•°æ®é‡å¤§ï¼Œå‡ åäº¿çš„æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦é åˆ†åº“åˆ†è¡¨æ¥å­˜æ”¾æµ·é‡çš„æ•°æ®ã€‚<br><img src="/images/20190821_1databaseIdGenerate/01_dabaseIdGenerate.png" alt="æ•°æ®åº“è‡ªå¢åŸç†åˆ†æ"></p><h1 id="UUID"><a href="#UUID" class="headerlink" title="UUID"></a>UUID</h1><p>å¥½å¤„å°±æ˜¯æœ¬åœ°ç”Ÿæˆï¼Œä¸è¦åŸºäºæ•°æ®åº“æ¥äº†ï¼›ä¸å¥½ä¹‹å¤„å°±æ˜¯ï¼Œuuidå¤ªé•¿äº†ï¼Œä½œä¸ºä¸»é”®æ€§èƒ½å¤ªå·®äº†ï¼Œä¸é€‚åˆç”¨äºä¸»é”®ã€‚</p><p>é€‚åˆçš„åœºæ™¯ï¼šå¦‚æœä½ æ˜¯è¦éšæœºç”Ÿæˆä¸ªä»€ä¹ˆæ–‡ä»¶åäº†ï¼Œç¼–å·ä¹‹ç±»çš„ï¼Œä½ å¯ä»¥ç”¨uuidï¼Œä½†æ˜¯ä½œä¸ºä¸»é”®æ˜¯ä¸èƒ½ç”¨uuidçš„ã€‚</p><p>UUID.randomUUID().toString().replace(â€œ-â€, â€œâ€) -&gt; sfsdf23423rr234sfdaf</p><h1 id="è·å–ç³»ç»Ÿå½“å‰æ—¶é—´"><a href="#è·å–ç³»ç»Ÿå½“å‰æ—¶é—´" class="headerlink" title="è·å–ç³»ç»Ÿå½“å‰æ—¶é—´"></a>è·å–ç³»ç»Ÿå½“å‰æ—¶é—´</h1><p>è¿™ä¸ªå°±æ˜¯è·å–å½“å‰æ—¶é—´å³å¯ï¼Œä½†æ˜¯é—®é¢˜æ˜¯ï¼Œå¹¶å‘å¾ˆé«˜çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸€ç§’å¹¶å‘å‡ åƒï¼Œä¼šæœ‰é‡å¤çš„æƒ…å†µï¼Œè¿™ä¸ªæ˜¯è‚¯å®šä¸åˆé€‚çš„ã€‚åŸºæœ¬å°±ä¸ç”¨è€ƒè™‘äº†ã€‚<br>é€‚åˆçš„åœºæ™¯ï¼šä¸€èˆ¬å¦‚æœç”¨è¿™ä¸ªæ–¹æ¡ˆï¼Œæ˜¯å°†å½“å‰æ—¶é—´è·Ÿå¾ˆå¤šå…¶ä»–çš„ä¸šåŠ¡å­—æ®µæ‹¼æ¥èµ·æ¥ï¼Œä½œä¸ºä¸€ä¸ªidï¼Œå¦‚æœä¸šåŠ¡ä¸Šä½ è§‰å¾—å¯ä»¥æ¥å—ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½ å¯ä»¥å°†åˆ«çš„ä¸šåŠ¡å­—æ®µå€¼è·Ÿå½“å‰æ—¶é—´æ‹¼æ¥èµ·æ¥ï¼Œç»„æˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ç¼–å·ï¼Œè®¢å•ç¼–å·ï¼Œæ—¶é—´æˆ³ + ç”¨æˆ·id + ä¸šåŠ¡å«ä¹‰ç¼–ç ã€‚</p><h1 id="snowflakeç®—æ³•"><a href="#snowflakeç®—æ³•" class="headerlink" title="snowflakeç®—æ³•"></a>snowflakeç®—æ³•</h1><p>twitterå¼€æºçš„åˆ†å¸ƒå¼idç”Ÿæˆç®—æ³•ï¼Œå°±æ˜¯æŠŠä¸€ä¸ª64ä½çš„longå‹çš„idï¼Œ1ä¸ªbitæ˜¯ä¸ç”¨çš„ï¼Œç”¨å…¶ä¸­çš„41 bitä½œä¸ºæ¯«ç§’æ•°ï¼Œç”¨10 bitä½œä¸ºå·¥ä½œæœºå™¨idï¼Œ12 bitä½œä¸ºåºåˆ—å·</p><p>1 bitï¼šä¸ç”¨ï¼Œä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºäºŒè¿›åˆ¶é‡Œç¬¬ä¸€ä¸ªbitä¸ºå¦‚æœæ˜¯1ï¼Œé‚£ä¹ˆéƒ½æ˜¯è´Ÿæ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ç”Ÿæˆçš„idéƒ½æ˜¯æ­£æ•°ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªbitç»Ÿä¸€éƒ½æ˜¯0</p><p>41 bitï¼šè¡¨ç¤ºçš„æ˜¯æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚41 bitå¯ä»¥è¡¨ç¤ºçš„æ•°å­—å¤šè¾¾2^41 - 1ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æ ‡è¯†2 ^ 41 - 1ä¸ªæ¯«ç§’å€¼ï¼Œæ¢ç®—æˆå¹´å°±æ˜¯è¡¨ç¤º69å¹´çš„æ—¶é—´ã€‚</p><p>10 bitï¼šè®°å½•å·¥ä½œæœºå™¨idï¼Œä»£è¡¨çš„æ˜¯è¿™ä¸ªæœåŠ¡æœ€å¤šå¯ä»¥éƒ¨ç½²åœ¨2^10å°æœºå™¨ä¸Šå“ªï¼Œä¹Ÿå°±æ˜¯1024å°æœºå™¨ã€‚ä½†æ˜¯10 bité‡Œ5ä¸ªbitä»£è¡¨æœºæˆ¿idï¼Œ5ä¸ªbitä»£è¡¨æœºå™¨idã€‚æ„æ€å°±æ˜¯æœ€å¤šä»£è¡¨2 ^ 5ä¸ªæœºæˆ¿ï¼ˆ32ä¸ªæœºæˆ¿ï¼‰ï¼Œæ¯ä¸ªæœºæˆ¿é‡Œå¯ä»¥ä»£è¡¨2 ^ 5ä¸ªæœºå™¨ï¼ˆ32å°æœºå™¨ï¼‰ã€‚</p><p>12 bitï¼šè¿™ä¸ªæ˜¯ç”¨æ¥è®°å½•åŒä¸€ä¸ªæ¯«ç§’å†…äº§ç”Ÿçš„ä¸åŒidï¼Œ12 bitå¯ä»¥ä»£è¡¨çš„æœ€å¤§æ­£æ•´æ•°æ˜¯2 ^ 12 - 1 = 4096ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç”¨è¿™ä¸ª12bitä»£è¡¨çš„æ•°å­—æ¥åŒºåˆ†åŒä¸€ä¸ªæ¯«ç§’å†…çš„4096ä¸ªä¸åŒçš„id</p><p>64ä½çš„longå‹çš„idï¼Œ64ä½çš„long -&gt; äºŒè¿›åˆ¶</p><p>0 | 0001100 10100010 10111110 10001001 01011100 00 | 10001 | 1 1001 | 0000 00000000</p><p>2018-01-01 10:00:00 -&gt; åšäº†ä¸€äº›è®¡ç®—ï¼Œå†æ¢ç®—æˆä¸€ä¸ªäºŒè¿›åˆ¶ï¼Œ41bitæ¥æ”¾ -&gt; 0001100 10100010 10111110 10001001 01011100 00</p><p>æœºæˆ¿idï¼Œ17 -&gt; æ¢ç®—æˆä¸€ä¸ªäºŒè¿›åˆ¶ -&gt; 10001</p><p>æœºå™¨idï¼Œ25 -&gt; æ¢ç®—æˆä¸€ä¸ªäºŒè¿›åˆ¶ -&gt; 11001</p><p>snowflakeç®—æ³•æœåŠ¡ï¼Œä¼šåˆ¤æ–­ä¸€ä¸‹ï¼Œå½“å‰è¿™ä¸ªè¯·æ±‚æ˜¯å¦æ˜¯ï¼Œæœºæˆ¿17çš„æœºå™¨25ï¼Œåœ¨2175/11/7 12:12:14æ—¶é—´ç‚¹å‘é€è¿‡æ¥çš„ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€ä¸ªè¯·æ±‚</p><p>å‡è®¾ï¼Œåœ¨2175/11/7 12:12:14æ—¶é—´é‡Œï¼Œæœºæˆ¿17çš„æœºå™¨25ï¼Œå‘é€äº†ç¬¬äºŒæ¡æ¶ˆæ¯ï¼Œsnowflakeç®—æ³•æœåŠ¡ï¼Œä¼šå‘ç°è¯´æœºæˆ¿17çš„æœºå™¨25ï¼Œåœ¨2175/11/7 12:12:14æ—¶é—´é‡Œï¼Œåœ¨è¿™ä¸€æ¯«ç§’ï¼Œä¹‹å‰å·²ç»ç”Ÿæˆè¿‡ä¸€ä¸ªidäº†ï¼Œæ­¤æ—¶å¦‚æœä½ åŒä¸€ä¸ªæœºæˆ¿ï¼ŒåŒä¸€ä¸ªæœºå™¨ï¼Œåœ¨åŒä¸€ä¸ªæ¯«ç§’å†…ï¼Œå†æ¬¡è¦æ±‚ç”Ÿæˆä¸€ä¸ªidï¼Œæ­¤æ—¶æˆ‘åªèƒ½æŠŠåŠ 1</p><p>0 | 0001100 10100010 10111110 10001001 01011100 00 | 10001 | 1 1001 | 0000 00000001</p><p>æ¯”å¦‚æˆ‘ä»¬æ¥è§‚å¯Ÿä¸Šé¢çš„é‚£ä¸ªï¼Œå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„äºŒè¿›åˆ¶çš„64ä½çš„idï¼Œæ¢ç®—æˆ10è¿›åˆ¶å°±æ˜¯910499571847892992ã€‚</p><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.management.ManagementFactory;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.NetworkInterface;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;åç§°ï¼šIdWorker.java&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;æè¿°ï¼šåˆ†å¸ƒå¼è‡ªå¢é•¿ID&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     Twitterçš„ Snowflakeã€€JAVAå®ç°æ–¹æ¡ˆ</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> * æ ¸å¿ƒä»£ç ä¸ºå…¶IdWorkerè¿™ä¸ªç±»å®ç°ï¼Œå…¶åŸç†ç»“æ„å¦‚ä¸‹ï¼Œæˆ‘åˆ†åˆ«ç”¨ä¸€ä¸ª0è¡¨ç¤ºä¸€ä½ï¼Œç”¨â€”åˆ†å‰²å¼€éƒ¨åˆ†çš„ä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment"> * 1||0---0000000000 0000000000 0000000000 0000000000 0 --- 00000 ---00000 ---000000000000</span></span><br><span class="line"><span class="comment"> * åœ¨ä¸Šé¢çš„å­—ç¬¦ä¸²ä¸­ï¼Œç¬¬ä¸€ä½ä¸ºæœªä½¿ç”¨ï¼ˆå®é™…ä¸Šä¹Ÿå¯ä½œä¸ºlongçš„ç¬¦å·ä½ï¼‰ï¼Œæ¥ä¸‹æ¥çš„41ä½ä¸ºæ¯«ç§’çº§æ—¶é—´ï¼Œ</span></span><br><span class="line"><span class="comment"> * ç„¶å5ä½datacenteræ ‡è¯†ä½ï¼Œ5ä½æœºå™¨IDï¼ˆå¹¶ä¸ç®—æ ‡è¯†ç¬¦ï¼Œå®é™…æ˜¯ä¸ºçº¿ç¨‹æ ‡è¯†ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment"> * ç„¶å12ä½è¯¥æ¯«ç§’å†…çš„å½“å‰æ¯«ç§’å†…çš„è®¡æ•°ï¼ŒåŠ èµ·æ¥åˆšå¥½64ä½ï¼Œä¸ºä¸€ä¸ªLongå‹ã€‚</span></span><br><span class="line"><span class="comment"> * è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œæ•´ä½“ä¸ŠæŒ‰ç…§æ—¶é—´è‡ªå¢æ’åºï¼Œå¹¶ä¸”æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå†…ä¸ä¼šäº§ç”ŸIDç¢°æ’ï¼ˆç”±datacenterå’Œæœºå™¨IDä½œåŒºåˆ†ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment"> * å¹¶ä¸”æ•ˆç‡è¾ƒé«˜ï¼Œç»æµ‹è¯•ï¼Œsnowflakeæ¯ç§’èƒ½å¤Ÿäº§ç”Ÿ26ä¸‡IDå·¦å³ï¼Œå®Œå…¨æ»¡è¶³éœ€è¦ã€‚</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 64ä½ID (42(æ¯«ç§’)+5(æœºå™¨ID)+5(ä¸šåŠ¡ç¼–ç )+12(é‡å¤ç´¯åŠ ))</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Polim</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IdWorker</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ—¶é—´èµ·å§‹æ ‡è®°ç‚¹ï¼Œä½œä¸ºåŸºå‡†ï¼Œä¸€èˆ¬å–ç³»ç»Ÿçš„æœ€è¿‘æ—¶é—´ï¼ˆä¸€æ—¦ç¡®å®šä¸èƒ½å˜åŠ¨ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> twepoch = <span class="number">1288834974657L</span>;</span><br><span class="line">    <span class="comment">// æœºå™¨æ ‡è¯†ä½æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> workerIdBits = <span class="number">5L</span>;</span><br><span class="line">    <span class="comment">// æ•°æ®ä¸­å¿ƒæ ‡è¯†ä½æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> datacenterIdBits = <span class="number">5L</span>;</span><br><span class="line">    <span class="comment">// æœºå™¨IDæœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> maxWorkerId = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; workerIdBits);</span><br><span class="line">    <span class="comment">// æ•°æ®ä¸­å¿ƒIDæœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> maxDatacenterId = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; datacenterIdBits);</span><br><span class="line">    <span class="comment">// æ¯«ç§’å†…è‡ªå¢ä½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> sequenceBits = <span class="number">12L</span>;</span><br><span class="line">    <span class="comment">// æœºå™¨IDåå·¦ç§»12ä½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> workerIdShift = sequenceBits;</span><br><span class="line">    <span class="comment">// æ•°æ®ä¸­å¿ƒIDå·¦ç§»17ä½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> datacenterIdShift = sequenceBits + workerIdBits;</span><br><span class="line">    <span class="comment">// æ—¶é—´æ¯«ç§’å·¦ç§»22ä½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> timestampLeftShift = sequenceBits + workerIdBits + datacenterIdBits;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> sequenceMask = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; sequenceBits);</span><br><span class="line">    <span class="comment">/* ä¸Šæ¬¡ç”Ÿäº§idæ—¶é—´æˆ³ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> lastTimestamp = -<span class="number">1L</span>;</span><br><span class="line">    <span class="comment">// 0ï¼Œå¹¶å‘æ§åˆ¶</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> sequence = <span class="number">0L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> workerId;</span><br><span class="line">    <span class="comment">// æ•°æ®æ ‡è¯†idéƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> datacenterId;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IdWorker</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.datacenterId = getDatacenterId(maxDatacenterId);</span><br><span class="line">        <span class="keyword">this</span>.workerId = getMaxWorkerId(datacenterId, maxWorkerId);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> workerId</span></span><br><span class="line"><span class="comment">     *            å·¥ä½œæœºå™¨ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datacenterId</span></span><br><span class="line"><span class="comment">     *            åºåˆ—å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IdWorker</span><span class="params">(<span class="keyword">long</span> workerId, <span class="keyword">long</span> datacenterId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (workerId &gt; maxWorkerId || workerId &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(String.format(<span class="string">"worker Id can't be greater than %d or less than 0"</span>, maxWorkerId));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (datacenterId &gt; maxDatacenterId || datacenterId &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(String.format(<span class="string">"datacenter Id can't be greater than %d or less than 0"</span>, maxDatacenterId));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.workerId = workerId;</span><br><span class="line">        <span class="keyword">this</span>.datacenterId = datacenterId;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¸‹ä¸€ä¸ªID</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">long</span> <span class="title">nextId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> timestamp = timeGen();</span><br><span class="line">        <span class="keyword">if</span> (timestamp &lt; lastTimestamp) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(String.format(<span class="string">"Clock moved backwards.  Refusing to generate id for %d milliseconds"</span>, lastTimestamp - timestamp));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (lastTimestamp == timestamp) &#123;</span><br><span class="line">            <span class="comment">// å½“å‰æ¯«ç§’å†…ï¼Œåˆ™+1</span></span><br><span class="line">            sequence = (sequence + <span class="number">1</span>) &amp; sequenceMask;</span><br><span class="line">            <span class="keyword">if</span> (sequence == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// å½“å‰æ¯«ç§’å†…è®¡æ•°æ»¡äº†ï¼Œåˆ™ç­‰å¾…ä¸‹ä¸€ç§’</span></span><br><span class="line">                timestamp = tilNextMillis(lastTimestamp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sequence = <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        lastTimestamp = timestamp;</span><br><span class="line">        <span class="comment">// IDåç§»ç»„åˆç”Ÿæˆæœ€ç»ˆçš„IDï¼Œå¹¶è¿”å›ID</span></span><br><span class="line">        <span class="keyword">long</span> nextId = ((timestamp - twepoch) &lt;&lt; timestampLeftShift)</span><br><span class="line">                | (datacenterId &lt;&lt; datacenterIdShift)</span><br><span class="line">                | (workerId &lt;&lt; workerIdShift) | sequence;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> nextId;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">long</span> <span class="title">tilNextMillis</span><span class="params">(<span class="keyword">final</span> <span class="keyword">long</span> lastTimestamp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> timestamp = <span class="keyword">this</span>.timeGen();</span><br><span class="line">        <span class="keyword">while</span> (timestamp &lt;= lastTimestamp) &#123;</span><br><span class="line">            timestamp = <span class="keyword">this</span>.timeGen();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> timestamp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">long</span> <span class="title">timeGen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * è·å– maxWorkerId</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">getMaxWorkerId</span><span class="params">(<span class="keyword">long</span> datacenterId, <span class="keyword">long</span> maxWorkerId)</span> </span>&#123;</span><br><span class="line">        StringBuffer mpid = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        mpid.append(datacenterId);</span><br><span class="line">        String name = ManagementFactory.getRuntimeMXBean().getName();</span><br><span class="line">        <span class="keyword">if</span> (!name.isEmpty()) &#123;</span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">          * GET jvmPid</span></span><br><span class="line"><span class="comment">          */</span></span><br><span class="line">            mpid.append(name.split(<span class="string">"@"</span>)[<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">       * MAC + PID çš„ hashcode è·å–16ä¸ªä½ä½</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">        <span class="keyword">return</span> (mpid.toString().hashCode() &amp; <span class="number">0xffff</span>) % (maxWorkerId + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * æ•°æ®æ ‡è¯†idéƒ¨åˆ†</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">getDatacenterId</span><span class="params">(<span class="keyword">long</span> maxDatacenterId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> id = <span class="number">0L</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InetAddress ip = InetAddress.getLocalHost();</span><br><span class="line">            NetworkInterface network = NetworkInterface.getByInetAddress(ip);</span><br><span class="line">            <span class="keyword">if</span> (network == <span class="keyword">null</span>) &#123;</span><br><span class="line">                id = <span class="number">1L</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">byte</span>[] mac = network.getHardwareAddress();</span><br><span class="line">                id = ((<span class="number">0x000000FF</span> &amp; (<span class="keyword">long</span>) mac[mac.length - <span class="number">1</span>])</span><br><span class="line">                        | (<span class="number">0x0000FF00</span> &amp; (((<span class="keyword">long</span>) mac[mac.length - <span class="number">2</span>]) &lt;&lt; <span class="number">8</span>))) &gt;&gt; <span class="number">6</span>;</span><br><span class="line">                id = id % (maxDatacenterId + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">" getDatacenterId: "</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> snowflake </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkdownåŸºæœ¬è¯­æ³•</title>
      <link href="/2019/07/31/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2019/07/31/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Markdownæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Markdownæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Markdownæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. Markdown<em>æ˜¯ä»€ä¹ˆ</em>ï¼Ÿ</h1><p><strong>Markdown</strong>æ˜¯ä¸€ç§è½»é‡çº§<strong>æ ‡è®°è¯­è¨€</strong>ï¼Œå®ƒä»¥çº¯æ–‡æœ¬å½¢å¼(<em>æ˜“è¯»ã€æ˜“å†™ã€æ˜“æ›´æ”¹</em>)ç¼–å†™æ–‡æ¡£ï¼Œå¹¶æœ€ç»ˆä»¥HTMLæ ¼å¼å‘å¸ƒã€‚<br><strong>Markdown</strong>ä¹Ÿå¯ä»¥ç†è§£ä¸ºå°†ä»¥MARKDOWNè¯­æ³•ç¼–å†™çš„è¯­è¨€è½¬æ¢æˆHTMLå†…å®¹çš„å·¥å…·ã€‚    </p><h1 id="2-è°åˆ›é€ äº†å®ƒï¼Ÿ"><a href="#2-è°åˆ›é€ äº†å®ƒï¼Ÿ" class="headerlink" title="2. è°åˆ›é€ äº†å®ƒï¼Ÿ"></a>2. <em>è°</em>åˆ›é€ äº†å®ƒï¼Ÿ</h1><p>å®ƒç”±<a href="http://www.aaronsw.com/" target="_blank" rel="noopener"><strong>Aaron Swartz</strong></a>å’Œ<strong>John Gruber</strong>å…±åŒè®¾è®¡ï¼Œ<strong>Aaron Swartz</strong>å°±æ˜¯é‚£ä½äºå»å¹´ï¼ˆ<em>2013å¹´1æœˆ11æ—¥</em>ï¼‰è‡ªæ€,æœ‰ç€<strong>å¼€æŒ‚</strong>ä¸€èˆ¬äººç”Ÿç»å†çš„ç¨‹åºå‘˜ã€‚ç»´åŸºç™¾ç§‘å¯¹ä»–çš„<a href="http://zh.wikipedia.org/wiki/%E4%BA%9A%E4%BC%A6%C2%B7%E6%96%AF%E6%B2%83%E8%8C%A8" target="_blank" rel="noopener">ä»‹ç»</a>æ˜¯ï¼š<strong>è½¯ä»¶å·¥ç¨‹å¸ˆã€ä½œå®¶ã€æ”¿æ²»ç»„ç»‡è€…ã€äº’è”ç½‘æ´»åŠ¨å®¶ã€ç»´åŸºç™¾ç§‘äºº</strong>ã€‚    </p><p>ä»–æœ‰ç€è¶³ä»¥è®©ä½ è·ªæ‹œçš„äººç”Ÿç»å†ï¼š    </p><ul><li><strong>14å²</strong>å‚ä¸RSS 1.0è§„æ ¼æ ‡å‡†çš„åˆ¶è®¢ã€‚     </li><li><strong>2004</strong>å¹´å…¥è¯»<strong>æ–¯å¦ç¦</strong>ï¼Œä¹‹åé€€å­¦ã€‚   </li><li><strong>2005</strong>å¹´åˆ›å»º<a href="http://infogami.org/" target="_blank" rel="noopener">Infogami</a>ï¼Œä¹‹åä¸<a href="http://www.reddit.com/" target="_blank" rel="noopener">Reddit</a>åˆå¹¶æˆä¸ºå…¶åˆä¼™äººã€‚   </li><li><strong>2010</strong>å¹´åˆ›ç«‹æ±‚è¿›ä¼šï¼ˆDemand Progressï¼‰ï¼Œç§¯æå‚ä¸ç¦æ­¢ç½‘ç»œç›—ç‰ˆæ³•æ¡ˆï¼ˆSOPAï¼‰æ´»åŠ¨ï¼Œæœ€ç»ˆè¯¥ææ¡ˆè¢«æ’¤å›ã€‚   </li><li><strong>2011</strong>å¹´7æœˆ19æ—¥ï¼Œå› è¢«æ§ä»MITå’ŒJSTORä¸‹è½½480ä¸‡ç¯‡å­¦æœ¯è®ºæ–‡å¹¶ä»¥å…è´¹å½¢å¼ä¸Šä¼ äºç½‘ç»œè¢«æ•ã€‚     </li><li><strong>2013</strong>å¹´1æœˆè‡ªæ€èº«äº¡ã€‚    </li></ul><p><img src="/images/Aaron_Swartz.jpg" alt="Aaron Swartz"></p><p>å¤©æ‰éƒ½æœ‰æ—©é€çš„å½’é€”ã€‚</p><h1 id="3-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ"><a href="#3-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ" class="headerlink" title="3. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ"></a>3. <em>ä¸ºä»€ä¹ˆ</em>è¦ä½¿ç”¨å®ƒï¼Ÿ</h1><ul><li>å®ƒæ˜¯æ˜“è¯»ï¼ˆçœ‹èµ·æ¥èˆ’æœï¼‰ã€æ˜“å†™ï¼ˆè¯­æ³•ç®€å•ï¼‰ã€æ˜“æ›´æ”¹<strong>çº¯æ–‡æœ¬</strong>ã€‚å¤„å¤„ä½“ç°ç€<strong>æç®€ä¸»ä¹‰</strong>çš„å½±å­ã€‚</li><li>å…¼å®¹HTMLï¼Œå¯ä»¥è½¬æ¢ä¸ºHTMLæ ¼å¼å‘å¸ƒã€‚</li><li>è·¨å¹³å°ä½¿ç”¨ã€‚</li><li>è¶Šæ¥è¶Šå¤šçš„ç½‘ç«™æ”¯æŒMarkdownã€‚</li><li>æ›´æ–¹ä¾¿æ¸…æ™°åœ°ç»„ç»‡ä½ çš„ç”µå­é‚®ä»¶ã€‚ï¼ˆMarkdown-here, Airmailï¼‰</li><li>æ‘†è„±Wordï¼ˆæˆ‘ä¸æ˜¯è®¤çœŸçš„ï¼‰ã€‚</li></ul><h1 id="4-æ€ä¹ˆä½¿ç”¨ï¼Ÿ"><a href="#4-æ€ä¹ˆä½¿ç”¨ï¼Ÿ" class="headerlink" title="4. æ€ä¹ˆä½¿ç”¨ï¼Ÿ"></a>4. <em>æ€ä¹ˆ</em>ä½¿ç”¨ï¼Ÿ</h1><p>å¦‚æœä¸ç®—<strong>æ‰©å±•</strong>ï¼ŒMarkdownçš„è¯­æ³•ç»å¯¹<strong>ç®€å•</strong>åˆ°è®©ä½ çˆ±ä¸é‡Šæ‰‹ã€‚</p><p>Markdownè¯­æ³•ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ å¤§éƒ¨åˆ†ï¼š<br><strong>æ ‡é¢˜</strong>ï¼Œ<strong>æ®µè½</strong>ï¼Œ<strong>åŒºå—å¼•ç”¨</strong>ï¼Œ<strong>ä»£ç åŒºå—</strong>ï¼Œ<strong>å¼ºè°ƒ</strong>ï¼Œ<strong>åˆ—è¡¨</strong>ï¼Œ<strong>åˆ†å‰²çº¿</strong>ï¼Œ<strong>é“¾æ¥</strong>ï¼Œ<strong>å›¾ç‰‡</strong>ï¼Œ<strong>åæ–œæ  <code>\</code></strong>ï¼Œ<strong>ç¬¦å·â€™`â€™</strong>ã€‚</p><h4 id="4-1-æ ‡é¢˜"><a href="#4-1-æ ‡é¢˜" class="headerlink" title="4.1 æ ‡é¢˜"></a>4.1 æ ‡é¢˜</h4><p>ä¸¤ç§å½¢å¼ï¼š<br>1ï¼‰ä½¿ç”¨<code>=</code>å’Œ<code>-</code>æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜ã€‚</p><blockquote><p>ä¸€çº§æ ‡é¢˜<br><code>=========</code><br>äºŒçº§æ ‡é¢˜<br><code>---------</code></p></blockquote><p>æ•ˆæœï¼š</p><blockquote><h1 id="ä¸€çº§æ ‡é¢˜"><a href="#ä¸€çº§æ ‡é¢˜" class="headerlink" title="ä¸€çº§æ ‡é¢˜   "></a>ä¸€çº§æ ‡é¢˜   </h1><h2 id="äºŒçº§æ ‡é¢˜"><a href="#äºŒçº§æ ‡é¢˜" class="headerlink" title="äºŒçº§æ ‡é¢˜"></a>äºŒçº§æ ‡é¢˜</h2></blockquote><p>2ï¼‰ä½¿ç”¨<code>#</code>ï¼Œå¯è¡¨ç¤º1-6çº§æ ‡é¢˜ã€‚</p><blockquote><p># ä¸€çº§æ ‡é¢˜<br>## äºŒçº§æ ‡é¢˜<br>### ä¸‰çº§æ ‡é¢˜<br>#### å››çº§æ ‡é¢˜<br>##### äº”çº§æ ‡é¢˜<br>###### å…­çº§æ ‡é¢˜    </p></blockquote><p>æ•ˆæœï¼š</p><blockquote><h1 id="ä¸€çº§æ ‡é¢˜-1"><a href="#ä¸€çº§æ ‡é¢˜-1" class="headerlink" title="ä¸€çº§æ ‡é¢˜"></a>ä¸€çº§æ ‡é¢˜</h1><h2 id="äºŒçº§æ ‡é¢˜-1"><a href="#äºŒçº§æ ‡é¢˜-1" class="headerlink" title="äºŒçº§æ ‡é¢˜"></a>äºŒçº§æ ‡é¢˜</h2><h3 id="ä¸‰çº§æ ‡é¢˜"><a href="#ä¸‰çº§æ ‡é¢˜" class="headerlink" title="ä¸‰çº§æ ‡é¢˜"></a>ä¸‰çº§æ ‡é¢˜</h3><h4 id="å››çº§æ ‡é¢˜"><a href="#å››çº§æ ‡é¢˜" class="headerlink" title="å››çº§æ ‡é¢˜"></a>å››çº§æ ‡é¢˜</h4><h5 id="äº”çº§æ ‡é¢˜"><a href="#äº”çº§æ ‡é¢˜" class="headerlink" title="äº”çº§æ ‡é¢˜"></a>äº”çº§æ ‡é¢˜</h5><h6 id="å…­çº§æ ‡é¢˜"><a href="#å…­çº§æ ‡é¢˜" class="headerlink" title="å…­çº§æ ‡é¢˜"></a>å…­çº§æ ‡é¢˜</h6></blockquote><h4 id="4-2-æ®µè½"><a href="#4-2-æ®µè½" class="headerlink" title="4.2 æ®µè½"></a>4.2 æ®µè½</h4><p>æ®µè½çš„å‰åè¦æœ‰ç©ºè¡Œï¼Œæ‰€è°“çš„ç©ºè¡Œæ˜¯æŒ‡æ²¡æœ‰æ–‡å­—å†…å®¹ã€‚è‹¥æƒ³åœ¨æ®µå†…å¼ºåˆ¶æ¢è¡Œçš„æ–¹å¼æ˜¯ä½¿ç”¨<strong>ä¸¤ä¸ªä»¥ä¸Š</strong>ç©ºæ ¼åŠ ä¸Šå›è½¦ï¼ˆå¼•ç”¨ä¸­æ¢è¡Œçœç•¥å›è½¦ï¼‰ã€‚</p><h4 id="4-3-åŒºå—å¼•ç”¨"><a href="#4-3-åŒºå—å¼•ç”¨" class="headerlink" title="4.3 åŒºå—å¼•ç”¨"></a>4.3 åŒºå—å¼•ç”¨</h4><p>åœ¨æ®µè½çš„æ¯è¡Œæˆ–è€…åªåœ¨ç¬¬ä¸€è¡Œä½¿ç”¨ç¬¦å·<code>&gt;</code>,è¿˜å¯ä½¿ç”¨å¤šä¸ªåµŒå¥—å¼•ç”¨ï¼Œå¦‚ï¼š</p><blockquote><p>&gt; åŒºå—å¼•ç”¨<br>&gt;&gt; åµŒå¥—å¼•ç”¨  </p></blockquote><p>æ•ˆæœï¼š</p><blockquote><p>åŒºå—å¼•ç”¨  </p><blockquote><p>åµŒå¥—å¼•ç”¨</p></blockquote></blockquote><h4 id="4-4-ä»£ç åŒºå—"><a href="#4-4-ä»£ç åŒºå—" class="headerlink" title="4.4 ä»£ç åŒºå—"></a>4.4 ä»£ç åŒºå—</h4><p>ä»£ç åŒºå—çš„å»ºç«‹æ˜¯åœ¨æ¯è¡ŒåŠ ä¸Š4ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼ˆå¦‚åŒå†™ä»£ç ä¸€æ ·ï¼‰ã€‚å¦‚<br>æ™®é€šæ®µè½ï¼š</p><p>void main()<br>{<br>    printf(â€œHello, Markdown.â€);<br>}    </p><p>ä»£ç åŒºå—ï¼š</p><pre><code>void main(){    printf(&quot;Hello, Markdown.&quot;);}</code></pre><p><strong>æ³¨æ„</strong>:éœ€è¦å’Œæ™®é€šæ®µè½ä¹‹é—´å­˜åœ¨ç©ºè¡Œã€‚</p><h4 id="4-5-å¼ºè°ƒ"><a href="#4-5-å¼ºè°ƒ" class="headerlink" title="4.5 å¼ºè°ƒ"></a>4.5 å¼ºè°ƒ</h4><p>åœ¨å¼ºè°ƒå†…å®¹ä¸¤ä¾§åˆ†åˆ«åŠ ä¸Š<code>*</code>æˆ–è€…<code>_</code>ï¼Œå¦‚ï¼š</p><blockquote><p>*æ–œä½“*ï¼Œ_æ–œä½“_<br>**ç²—ä½“**ï¼Œ__ç²—ä½“__</p></blockquote><p>æ•ˆæœï¼š</p><blockquote><p><em>æ–œä½“</em>ï¼Œ<em>æ–œä½“</em><br><strong>ç²—ä½“</strong>ï¼Œ<strong>ç²—ä½“</strong></p></blockquote><h4 id="4-6-åˆ—è¡¨"><a href="#4-6-åˆ—è¡¨" class="headerlink" title="4.6 åˆ—è¡¨"></a>4.6 åˆ—è¡¨</h4><p>ä½¿ç”¨<code>Â·</code>ã€<code>+</code>ã€æˆ–<code>-</code>æ ‡è®°æ— åºåˆ—è¡¨ï¼Œå¦‚ï¼š</p><blockquote><p>-ï¼ˆ+*ï¼‰ ç¬¬ä¸€é¡¹<br>-ï¼ˆ+*ï¼‰ ç¬¬äºŒé¡¹<br>- ï¼ˆ+*ï¼‰ç¬¬ä¸‰é¡¹</p></blockquote><p><strong>æ³¨æ„</strong>ï¼šæ ‡è®°åé¢æœ€å°‘æœ‰ä¸€ä¸ª_ç©ºæ ¼<em>æˆ–</em>åˆ¶è¡¨ç¬¦_ã€‚è‹¥ä¸åœ¨å¼•ç”¨åŒºå—ä¸­ï¼Œå¿…é¡»å’Œå‰æ–¹æ®µè½ä¹‹é—´å­˜åœ¨ç©ºè¡Œã€‚</p><p>æ•ˆæœï¼š</p><blockquote><ul><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ul></blockquote><p>æœ‰åºåˆ—è¡¨çš„æ ‡è®°æ–¹å¼æ˜¯å°†ä¸Šè¿°çš„ç¬¦å·æ¢æˆæ•°å­—,å¹¶è¾…ä»¥<code>.</code>ï¼Œå¦‚ï¼š</p><blockquote><p>1 . ç¬¬ä¸€é¡¹<br>2 . ç¬¬äºŒé¡¹<br>3 . ç¬¬ä¸‰é¡¹    </p></blockquote><p>æ•ˆæœï¼š</p><blockquote><ol><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ol></blockquote><h4 id="4-7-åˆ†å‰²çº¿"><a href="#4-7-åˆ†å‰²çº¿" class="headerlink" title="4.7 åˆ†å‰²çº¿"></a>4.7 åˆ†å‰²çº¿</h4><p>åˆ†å‰²çº¿æœ€å¸¸ä½¿ç”¨å°±æ˜¯ä¸‰ä¸ªæˆ–ä»¥ä¸Š<code>*</code>ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>-</code>å’Œ<code>_</code>ã€‚</p><h4 id="4-8-é“¾æ¥"><a href="#4-8-é“¾æ¥" class="headerlink" title="4.8 é“¾æ¥"></a>4.8 é“¾æ¥</h4><p>é“¾æ¥å¯ä»¥ç”±ä¸¤ç§å½¢å¼ç”Ÿæˆï¼š<strong>è¡Œå†…å¼</strong>å’Œ<strong>å‚è€ƒå¼</strong>ã€‚<br><strong>è¡Œå†…å¼</strong>ï¼š</p><blockquote><p>[younghzçš„Markdownåº“](https:://github.com/younghz/Markdown â€œMarkdownâ€)ã€‚</p></blockquote><p>æ•ˆæœï¼š</p><blockquote><p><a href="https:://github.com/younghz/Markdown" title="Markdown" target="_blank" rel="noopener">younghzçš„Markdownåº“</a>ã€‚</p></blockquote><p><strong>å‚è€ƒå¼</strong>ï¼š</p><blockquote><p>[younghzçš„Markdownåº“1][1]<br>[younghzçš„Markdownåº“2][2]<br>[1]:https:://github.com/younghz/Markdown â€œMarkdownâ€<br>[2]:https:://github.com/younghz/Markdown â€œMarkdownâ€    </p></blockquote><p>æ•ˆæœï¼š</p><blockquote><p><a href="https:://github.com/younghz/Markdown" title="Markdown" target="_blank" rel="noopener">younghzçš„Markdownåº“1</a><br><a href="https:://github.com/younghz/Markdown" title="Markdown" target="_blank" rel="noopener">younghzçš„Markdownåº“2</a></p></blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸Šè¿°çš„<code>[1]:https:://github.com/younghz/Markdown &quot;Markdown&quot;</code>ä¸å‡ºç°åœ¨åŒºå—ä¸­ã€‚</p><h4 id="4-9-å›¾ç‰‡"><a href="#4-9-å›¾ç‰‡" class="headerlink" title="4.9 å›¾ç‰‡"></a>4.9 å›¾ç‰‡</h4><p>æ·»åŠ å›¾ç‰‡çš„å½¢å¼å’Œé“¾æ¥ç›¸ä¼¼ï¼Œåªéœ€åœ¨é“¾æ¥çš„åŸºç¡€ä¸Šå‰æ–¹åŠ ä¸€ä¸ª<code>ï¼</code>ã€‚</p><h4 id="4-10-åæ–œæ "><a href="#4-10-åæ–œæ " class="headerlink" title="4.10 åæ–œæ \"></a>4.10 åæ–œæ <code>\</code></h4><p>ç›¸å½“äº<strong>åè½¬ä¹‰</strong>ä½œç”¨ã€‚ä½¿ç¬¦å·æˆä¸ºæ™®é€šç¬¦å·ã€‚</p><h4 id="4-11-ç¬¦å·â€™-â€™"><a href="#4-11-ç¬¦å·â€™-â€™" class="headerlink" title="4.11 ç¬¦å·â€™`â€™"></a>4.11 ç¬¦å·â€™`â€™</h4><p>èµ·åˆ°æ ‡è®°ä½œç”¨ã€‚å¦‚ï¼š</p><blockquote><p>`ctrl+a`</p></blockquote><p>æ•ˆæœï¼š</p><blockquote><p><code>ctrl+a</code>    </p></blockquote><h1 id="5-è°åœ¨ç”¨ï¼Ÿ"><a href="#5-è°åœ¨ç”¨ï¼Ÿ" class="headerlink" title="5. è°åœ¨ç”¨ï¼Ÿ"></a>5. <em>è°</em>åœ¨ç”¨ï¼Ÿ</h1><p>Markdownçš„ä½¿ç”¨è€…ï¼š</p><ul><li>GitHub</li><li>ç®€ä¹¦</li><li>Stack Overflow</li><li>Apollo</li><li>Moodle</li><li>Reddit</li><li>ç­‰ç­‰</li></ul><h1 id="6-å°è¯•ä¸€ä¸‹"><a href="#6-å°è¯•ä¸€ä¸‹" class="headerlink" title="6. å°è¯•ä¸€ä¸‹"></a>6. å°è¯•ä¸€ä¸‹</h1><ul><li><strong>Chrome</strong>ä¸‹çš„æ’ä»¶è¯¸å¦‚<code>stackedit</code>ä¸<code>markdown-here</code>ç­‰éå¸¸æ–¹ä¾¿ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå¹³å°å—é™ã€‚</li><li><strong>åœ¨çº¿</strong>çš„dillinger.ioè¯„ä»·ä¹Ÿä¸é”™   </li><li><strong>Windowns</strong>ä¸‹çš„MarkdownPadä¹Ÿç”¨è¿‡ï¼Œä¸è¿‡å…è´¹ç‰ˆçš„ä½“éªŒä¸æ˜¯å¾ˆå¥½ã€‚    </li><li><strong>Mac</strong>ä¸‹çš„Mouæ˜¯å›½äººè´¡çŒ®çš„ï¼Œå£ç¢‘å¾ˆå¥½ã€‚</li><li><strong>Linux</strong>ä¸‹çš„ReTextä¸é”™ã€‚    </li></ul><p><strong>å½“ç„¶ï¼Œæœ€ç»ˆå¢ƒç•Œæ°¸è¿œéƒ½æ˜¯ç¬”ä¸‹æ˜¯è¯­æ³•ï¼Œå¿ƒä¸­æ ¼å¼åŒ– :)ã€‚</strong></p><hr><p><strong>æ³¨æ„</strong>ï¼šä¸åŒçš„Markdownè§£é‡Šå™¨æˆ–å·¥å…·å¯¹ç›¸åº”è¯­æ³•ï¼ˆæ‰©å±•è¯­æ³•ï¼‰çš„è§£é‡Šæ•ˆæœä¸å°½ç›¸åŒï¼Œå…·ä½“å¯å‚è§å·¥å…·çš„ä½¿ç”¨è¯´æ˜ã€‚<br>è™½ç„¶æœ‰äººæƒ³å‡ºé¢æä¸€ä¸ªæ‰€è°“çš„æ ‡å‡†åŒ–çš„Markdownï¼Œ[æ²¡æƒ³åˆ°è¿˜æƒ¹æ€’äº†å¥åœ¨çš„åˆ›å§‹äººJohn Gruber]<br>(<a href="http://blog.codinghorror.com/standard-markdown-is-now-common-markdown/" target="_blank" rel="noopener">http://blog.codinghorror.com/standard-markdown-is-now-common-markdown/</a> )ã€‚</p><hr><p>ä»¥ä¸ŠåŸºæœ¬æ˜¯æ‰€æœ‰traditonal markdownçš„è¯­æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯­æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/07/20/hello-world/"/>
      <url>/2019/07/20/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>æ–‡ç« åˆ†ç±»</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/solarized-dark.css"/>
      <url>/css/solarized-dark.css</url>
      
        <content type="html"><![CDATA[/*Orginal Style from ethanschoonover.com/solarized (c) Jeremy Hull <sourdrums@gmail.com>*/.hljs {  display: block;  overflow-x: auto;  padding: 0.5em;  background: #002b36;  color: #839496;}.hljs-comment,.hljs-quote {  color: #586e75;}/* Solarized Green */.hljs-keyword,.hljs-selector-tag,.hljs-addition {  color: #859900;}/* Solarized Cyan */.hljs-number,.hljs-string,.hljs-meta .hljs-meta-string,.hljs-literal,.hljs-doctag,.hljs-regexp {  color: #2aa198;}/* Solarized Blue */.hljs-title,.hljs-section,.hljs-name,.hljs-selector-id,.hljs-selector-class {  color: #268bd2;}/* Solarized Yellow */.hljs-attribute,.hljs-attr,.hljs-variable,.hljs-template-variable,.hljs-class .hljs-title,.hljs-type {  color: #b58900;}/* Solarized Orange */.hljs-symbol,.hljs-bullet,.hljs-subst,.hljs-meta,.hljs-meta .hljs-keyword,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-link {  color: #cb4b16;}/* Solarized Red */.hljs-built_in,.hljs-deletion {  color: #dc322f;}.hljs-formula {  background: #073642;}.hljs-emphasis {  font-style: italic;}.hljs-strong {  font-weight: bold;}</sourdrums@gmail.com>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‡ç­¾</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<h1 id="I-am-in-Beijing-I-am-not-crazy-yet"><a href="#I-am-in-Beijing-I-am-not-crazy-yet" class="headerlink" title="I am in Beijing, I am not crazy yet."></a>I am in Beijing, I am not crazy yet.</h1><figure class="hljs highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line">          _____                                                                                                          </span><br><span class="line">         /\    \</span><br><span class="line">        /::\    \</span><br><span class="line">        \:::\    \</span><br><span class="line">         \:::\    \</span><br><span class="line">          \:::\    \</span><br><span class="line">           \:::\    \</span><br><span class="line">           /::::\    \</span><br><span class="line">  ____    /::::::\    \</span><br><span class="line"> /\   \  /:::/\:::\    \</span><br><span class="line">/::\   \/:::/  \:::\____\</span><br><span class="line">\:::\  /:::/    \::/    /                                                                                                </span><br><span class="line"> \:::\/:::/    / \/____/                                                                                                 </span><br><span class="line">  \::::::/    /                                                                                                          </span><br><span class="line">   \::::/____/                                                                                                           </span><br><span class="line">    \:::\    \</span><br><span class="line">     \:::\    \</span><br><span class="line">      \:::\    \</span><br><span class="line">       \:::\____\</span><br><span class="line">        \::/    /                                                                                                        </span><br><span class="line">         \/____/                                                                                                         </span><br><span class="line">                                                                                                                         </span><br><span class="line">          _____                    _____                                                                                 </span><br><span class="line">         /\    \                  /\    \</span><br><span class="line">        /::\    \                /::\____\</span><br><span class="line">       /::::\    \              /::::|   |                                                                               </span><br><span class="line">      /::::::\    \            /:::::|   |                                                                               </span><br><span class="line">     /:::/\:::\    \          /::::::|   |                                                                               </span><br><span class="line">    /:::/__\:::\    \        /:::/|::|   |                                                                               </span><br><span class="line">   /::::\   \:::\    \      /:::/ |::|   |                                                                               </span><br><span class="line">  /::::::\   \:::\    \    /:::/  |::|___|______                                                                         </span><br><span class="line"> /:::/\:::\   \:::\    \  /:::/   |::::::::\    \</span><br><span class="line">/:::/  \:::\   \:::\____\/:::/    |:::::::::\____\</span><br><span class="line">\::/    \:::\  /:::/    /\::/    / ~~~~~/:::/    /                                                                       </span><br><span class="line"> \/____/ \:::\/:::/    /  \/____/      /:::/    /                                                                        </span><br><span class="line">          \::::::/    /               /:::/    /                                                                         </span><br><span class="line">           \::::/    /               /:::/    /                                                                          </span><br><span class="line">           /:::/    /               /:::/    /                                                                           </span><br><span class="line">          /:::/    /               /:::/    /                                                                            </span><br><span class="line">         /:::/    /               /:::/    /                                                                             </span><br><span class="line">        /:::/    /               /:::/    /                                                                              </span><br><span class="line">        \::/    /                \::/    /                                                                               </span><br><span class="line">         \/____/                  \/____/                                                                                </span><br><span class="line">                                                                                                                         </span><br><span class="line">          _____                    _____                                                                                 </span><br><span class="line">         /\    \                  /\    \</span><br><span class="line">        /::\    \                /::\____\</span><br><span class="line">        \:::\    \              /::::|   |                                                                               </span><br><span class="line">         \:::\    \            /:::::|   |                                                                               </span><br><span class="line">          \:::\    \          /::::::|   |                                                                               </span><br><span class="line">           \:::\    \        /:::/|::|   |                                                                               </span><br><span class="line">           /::::\    \      /:::/ |::|   |                                                                               </span><br><span class="line">  ____    /::::::\    \    /:::/  |::|   | _____                                                                         </span><br><span class="line"> /\   \  /:::/\:::\    \  /:::/   |::|   |/\    \</span><br><span class="line">/::\   \/:::/  \:::\____\/:: /    |::|   /::\____\</span><br><span class="line">\:::\  /:::/    \::/    /\::/    /|::|  /:::/    /                                                                       </span><br><span class="line"> \:::\/:::/    / \/____/  \/____/ |::| /:::/    /                                                                        </span><br><span class="line">  \::::::/    /                   |::|/:::/    /                                                                         </span><br><span class="line">   \::::/____/                    |::::::/    /                                                                          </span><br><span class="line">    \:::\    \                    |:::::/    /                                                                           </span><br><span class="line">     \:::\    \                   |::::/    /                                                                            </span><br><span class="line">      \:::\    \                  /:::/    /                                                                             </span><br><span class="line">       \:::\____\                /:::/    /                                                                              </span><br><span class="line">        \::/    /                \::/    /                                                                               </span><br><span class="line">         \/____/                  \/____/                                                                                </span><br><span class="line">                                                                                                                         </span><br><span class="line">          _____                    _____                    _____                                                        </span><br><span class="line">         /\    \                  /\    \                  /\    \</span><br><span class="line">        /::\    \                /::\    \                /::\    \</span><br><span class="line">       /::::\    \              /::::\    \               \:::\    \</span><br><span class="line">      /::::::\    \            /::::::\    \               \:::\    \</span><br><span class="line">     /:::/\:::\    \          /:::/\:::\    \               \:::\    \</span><br><span class="line">    /:::/__\:::\    \        /:::/__\:::\    \               \:::\    \</span><br><span class="line">   /::::\   \:::\    \      /::::\   \:::\    \              /::::\    \</span><br><span class="line">  /::::::\   \:::\    \    /::::::\   \:::\    \    ____    /::::::\    \</span><br><span class="line"> /:::/\:::\   \:::\ ___\  /:::/\:::\   \:::\    \  /\   \  /:::/\:::\    \</span><br><span class="line">/:::/__\:::\   \:::|    |/:::/__\:::\   \:::\____\/::\   \/:::/  \:::\____\</span><br><span class="line">\:::\   \:::\  /:::|____|\:::\   \:::\   \::/    /\:::\  /:::/    \::/    /                                              </span><br><span class="line"> \:::\   \:::\/:::/    /  \:::\   \:::\   \/____/  \:::\/:::/    / \/____/                                               </span><br><span class="line">  \:::\   \::::::/    /    \:::\   \:::\    \       \::::::/    /                                                        </span><br><span class="line">   \:::\   \::::/    /      \:::\   \:::\____\       \::::/____/                                                         </span><br><span class="line">    \:::\  /:::/    /        \:::\   \::/    /        \:::\    \</span><br><span class="line">     \:::\/:::/    /          \:::\   \/____/          \:::\    \</span><br><span class="line">      \::::::/    /            \:::\    \               \:::\    \</span><br><span class="line">       \::::/    /              \:::\____\               \:::\____\</span><br><span class="line">        \::/____/                \::/    /                \::/    /                                                      </span><br><span class="line">         ~~                       \/____/                  \/____/                                                       </span><br><span class="line">                                                                                                                         </span><br><span class="line">          _____                    _____                    _____                    _____                               </span><br><span class="line">         /\    \                  /\    \                  /\    \                  /\    \</span><br><span class="line">        /::\    \                /::\    \                /::\____\                /::\    \</span><br><span class="line">        \:::\    \               \:::\    \              /::::|   |               /::::\    \</span><br><span class="line">         \:::\    \               \:::\    \            /:::::|   |              /::::::\    \</span><br><span class="line">          \:::\    \               \:::\    \          /::::::|   |             /:::/\:::\    \</span><br><span class="line">           \:::\    \               \:::\    \        /:::/|::|   |            /:::/  \:::\    \</span><br><span class="line">           /::::\    \              /::::\    \      /:::/ |::|   |           /:::/    \:::\    \</span><br><span class="line">  _____   /::::::\    \    ____    /::::::\    \    /:::/  |::|   | _____    /:::/    / \:::\    \</span><br><span class="line"> /\    \ /:::/\:::\    \  /\   \  /:::/\:::\    \  /:::/   |::|   |/\    \  /:::/    /   \:::\ ___\</span><br><span class="line">/::\    /:::/  \:::\____\/::\   \/:::/  \:::\____\/:: /    |::|   /::\____\/:::/____/  ___\:::|    |                     </span><br><span class="line">\:::\  /:::/    \::/    /\:::\  /:::/    \::/    /\::/    /|::|  /:::/    /\:::\    \ /\  /:::|____|                     </span><br><span class="line"> \:::\/:::/    / \/____/  \:::\/:::/    / \/____/  \/____/ |::| /:::/    /  \:::\    /::\ \::/    /                      </span><br><span class="line">  \::::::/    /            \::::::/    /                   |::|/:::/    /    \:::\   \:::\ \/____/                       </span><br><span class="line">   \::::/    /              \::::/____/                    |::::::/    /      \:::\   \:::\____\</span><br><span class="line">    \::/    /                \:::\    \                    |:::::/    /        \:::\  /:::/    /                         </span><br><span class="line">     \/____/                  \:::\    \                   |::::/    /          \:::\/:::/    /                          </span><br><span class="line">                               \:::\    \                  /:::/    /            \::::::/    /                           </span><br><span class="line">                                \:::\____\                /:::/    /              \::::/    /                            </span><br><span class="line">                                 \::/    /                \::/    /                \::/____/                             </span><br><span class="line">                                  \/____/                  \/____/                                                       </span><br><span class="line">                                                                                                                         </span><br><span class="line">          _____                                                                                                          </span><br><span class="line">         /\    \</span><br><span class="line">        /::\    \</span><br><span class="line">        \:::\    \</span><br><span class="line">         \:::\    \</span><br><span class="line">          \:::\    \</span><br><span class="line">           \:::\    \</span><br><span class="line">           /::::\    \</span><br><span class="line">  ____    /::::::\    \</span><br><span class="line"> /\   \  /:::/\:::\    \</span><br><span class="line">/::\   \/:::/  \:::\____\</span><br><span class="line">\:::\  /:::/    \::/    /                                                                                                </span><br><span class="line"> \:::\/:::/    / \/____/                                                                                                 </span><br><span class="line">  \::::::/    /                                                                                                          </span><br><span class="line">   \::::/____/                                                                                                           </span><br><span class="line">    \:::\    \</span><br><span class="line">     \:::\    \</span><br><span class="line">      \:::\    \</span><br><span class="line">       \:::\____\</span><br><span class="line">        \::/    /                                                                                                        </span><br><span class="line">         \/____/                                                                                                         </span><br><span class="line">                                                                                                                         </span><br><span class="line">          _____                    _____                                                                                 </span><br><span class="line">         /\    \                  /\    \</span><br><span class="line">        /::\    \                /::\____\</span><br><span class="line">       /::::\    \              /::::|   |                                                                               </span><br><span class="line">      /::::::\    \            /:::::|   |                                                                               </span><br><span class="line">     /:::/\:::\    \          /::::::|   |                                                                               </span><br><span class="line">    /:::/__\:::\    \        /:::/|::|   |                                                                               </span><br><span class="line">   /::::\   \:::\    \      /:::/ |::|   |                                                                               </span><br><span class="line">  /::::::\   \:::\    \    /:::/  |::|___|______                                                                         </span><br><span class="line"> /:::/\:::\   \:::\    \  /:::/   |::::::::\    \</span><br><span class="line">/:::/  \:::\   \:::\____\/:::/    |:::::::::\____\</span><br><span class="line">\::/    \:::\  /:::/    /\::/    / ~~~~~/:::/    /                                                                       </span><br><span class="line"> \/____/ \:::\/:::/    /  \/____/      /:::/    /                                                                        </span><br><span class="line">          \::::::/    /               /:::/    /                                                                         </span><br><span class="line">           \::::/    /               /:::/    /                                                                          </span><br><span class="line">           /:::/    /               /:::/    /                                                                           </span><br><span class="line">          /:::/    /               /:::/    /                                                                            </span><br><span class="line">         /:::/    /               /:::/    /                                                                             </span><br><span class="line">        /:::/    /               /:::/    /                                                                              </span><br><span class="line">        \::/    /                \::/    /                                                                               </span><br><span class="line">         \/____/                  \/____/                                                                                </span><br><span class="line">                                                                                                                         </span><br><span class="line">          _____                   _______               _____                                                            </span><br><span class="line">         /\    \                 /::\    \             /\    \</span><br><span class="line">        /::\____\               /::::\    \           /::\    \</span><br><span class="line">       /::::|   |              /::::::\    \          \:::\    \</span><br><span class="line">      /:::::|   |             /::::::::\    \          \:::\    \</span><br><span class="line">     /::::::|   |            /:::/~~\:::\    \          \:::\    \</span><br><span class="line">    /:::/|::|   |           /:::/    \:::\    \          \:::\    \</span><br><span class="line">   /:::/ |::|   |          /:::/    / \:::\    \         /::::\    \</span><br><span class="line">  /:::/  |::|   | _____   /:::/____/   \:::\____\       /::::::\    \</span><br><span class="line"> /:::/   |::|   |/\    \ |:::|    |     |:::|    |     /:::/\:::\    \</span><br><span class="line">/:: /    |::|   /::\____\|:::|____|     |:::|    |    /:::/  \:::\____\</span><br><span class="line">\::/    /|::|  /:::/    / \:::\    \   /:::/    /    /:::/    \::/    /                                                  </span><br><span class="line"> \/____/ |::| /:::/    /   \:::\    \ /:::/    /    /:::/    / \/____/                                                   </span><br><span class="line">         |::|/:::/    /     \:::\    /:::/    /    /:::/    /                                                            </span><br><span class="line">         |::::::/    /       \:::\__/:::/    /    /:::/    /                                                             </span><br><span class="line">         |:::::/    /         \::::::::/    /     \::/    /                                                              </span><br><span class="line">         |::::/    /           \::::::/    /       \/____/                                                               </span><br><span class="line">         /:::/    /             \::::/    /                                                                              </span><br><span class="line">        /:::/    /               \::/____/                                                                               </span><br><span class="line">        \::/    /                 ~~                                                                                     </span><br><span class="line">         \/____/                                                                                                         </span><br><span class="line">                                                                                                                         </span><br><span class="line">          _____                    _____                    _____                    _____                _____          </span><br><span class="line">         /\    \                  /\    \                  /\    \                  /\    \              |\    \</span><br><span class="line">        /::\    \                /::\    \                /::\    \                /::\    \             |:\____\</span><br><span class="line">       /::::\    \              /::::\    \              /::::\    \               \:::\    \            |::|   |        </span><br><span class="line">      /::::::\    \            /::::::\    \            /::::::\    \               \:::\    \           |::|   |        </span><br><span class="line">     /:::/\:::\    \          /:::/\:::\    \          /:::/\:::\    \               \:::\    \          |::|   |        </span><br><span class="line">    /:::/  \:::\    \        /:::/__\:::\    \        /:::/__\:::\    \               \:::\    \         |::|   |        </span><br><span class="line">   /:::/    \:::\    \      /::::\   \:::\    \      /::::\   \:::\    \               \:::\    \        |::|   |        </span><br><span class="line">  /:::/    / \:::\    \    /::::::\   \:::\    \    /::::::\   \:::\    \               \:::\    \       |::|___|______  </span><br><span class="line"> /:::/    /   \:::\    \  /:::/\:::\   \:::\____\  /:::/\:::\   \:::\    \               \:::\    \      /::::::::\    \</span><br><span class="line">/:::/____/     \:::\____\/:::/  \:::\   \:::|    |/:::/  \:::\   \:::\____\_______________\:::\____\    /::::::::::\____\</span><br><span class="line">\:::\    \      \::/    /\::/   |::::\  /:::|____|\::/    \:::\  /:::/    /\::::::::::::::::::/    /   /:::/~~~~/~~      </span><br><span class="line"> \:::\    \      \/____/  \/____|:::::\/:::/    /  \/____/ \:::\/:::/    /  \::::::::::::::::/____/   /:::/    /         </span><br><span class="line">  \:::\    \                    |:::::::::/    /            \::::::/    /    \:::\~~~~\~~~~~~        /:::/    /          </span><br><span class="line">   \:::\    \                   |::|\::::/    /              \::::/    /      \:::\    \            /:::/    /           </span><br><span class="line">    \:::\    \                  |::| \::/____/               /:::/    /        \:::\    \           \::/    /            </span><br><span class="line">     \:::\    \                 |::|  ~|                    /:::/    /          \:::\    \           \/____/             </span><br><span class="line">      \:::\    \                |::|   |                   /:::/    /            \:::\    \</span><br><span class="line">       \:::\____\               \::|   |                  /:::/    /              \:::\____\</span><br><span class="line">        \::/    /                \:|   |                  \::/    /                \::/    /                             </span><br><span class="line">         \/____/                  \|___|                   \/____/                  \/____/                              </span><br><span class="line">                                                                                                                         </span><br><span class="line">      _____                    _____                _____                                                                </span><br><span class="line">     |\    \                  /\    \              /\    \</span><br><span class="line">     |:\____\                /::\    \            /::\    \</span><br><span class="line">     |::|   |               /::::\    \           \:::\    \</span><br><span class="line">     |::|   |              /::::::\    \           \:::\    \</span><br><span class="line">     |::|   |             /:::/\:::\    \           \:::\    \</span><br><span class="line">     |::|   |            /:::/__\:::\    \           \:::\    \</span><br><span class="line">     |::|   |           /::::\   \:::\    \          /::::\    \</span><br><span class="line">     |::|___|______    /::::::\   \:::\    \        /::::::\    \</span><br><span class="line">     /::::::::\    \  /:::/\:::\   \:::\    \      /:::/\:::\    \</span><br><span class="line">    /::::::::::\____\/:::/__\:::\   \:::\____\    /:::/  \:::\____\</span><br><span class="line">   /:::/~~~~/~~      \:::\   \:::\   \::/    /   /:::/    \::/    /                                                      </span><br><span class="line">  /:::/    /          \:::\   \:::\   \/____/   /:::/    / \/____/                                                       </span><br><span class="line"> /:::/    /            \:::\   \:::\    \      /:::/    /                                                                </span><br><span class="line">/:::/    /              \:::\   \:::\____\    /:::/    /                                                                 </span><br><span class="line">\::/    /                \:::\   \::/    /    \::/    /                                                                  </span><br><span class="line"> \/____/                  \:::\   \/____/      \/____/                                                                   </span><br><span class="line">                           \:::\    \</span><br><span class="line">                            \:::\____\</span><br><span class="line">                             \::/    /                                                                                   </span><br><span class="line">                              \/____/</span><br></pre></td></tr></table></figure>]]></content>
      
    </entry>
    
    
  
</search>
