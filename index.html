<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color>
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="DeveloperTanliyuan" type="application/atom+xml">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/[object Object].css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/clipboard.min.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var cb = null;
      var els = $(".post figure.highlight");
      if (els.length) {
        // Enabled Hexo highlight line number.
        $(els).each(function (i, e) {
          $(e).before("<button class=\"copy button\">å¤åˆ¶</button>");
        });
        cb = new ClipboardJS("button.copy", {
          "target": function (trigger) {
              // Get target element by DOM API.
              // nextElementSibling is figure,highlight.
              // And following is the sequence of Hexo's internal
              // highlight layout with line number.
              return trigger.nextElementSibling.firstChild.firstChild.firstChild.lastChild.firstChild.firstChild;
          }
        });
      } else {
        // Disabled Hexo highlight line number.
        els = $(".post pre code");
        $(els).each(function (i, e) {
          // Add button before pre, not code.
          $(e).parent().before("<button class=\"copy button\">å¤åˆ¶</button>");
        });
        cb = new ClipboardJS("button.copy", {
          "target": function (trigger) {
              // Get target element by DOM API.
              // nextElementSibling is figure,highlight.
              // And following is the sequence of Hexo's internal
              // highlight layout without line number.
              return trigger.nextElementSibling.firstChild;
          }
        });
      }
      cb.on("success", function (e) {
        e.clearSelection();
        var trigger = e.trigger;
        // Change button text as a user tip.
        trigger.innerHTML = "å·²å¤åˆ¶";
        $(trigger).addClass("copied");
        // Change button text back;
        setTimeout(function () {
          trigger.innerHTML = "å¤åˆ¶";
          $(trigger).removeClass("copied");
        }, 1500);
      });
    });
    </script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>DeveloperTanliyuan - ç¼–ç¨‹å¼€å‘ã€åˆ†äº«ç”Ÿæ´»ã€åˆ†äº«æŠ€æœ¯</title>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN" data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">DeveloperTanliyuan</a></h1>
        <h2 class="subtitle">ç¼–ç¨‹å¼€å‘ã€åˆ†äº«ç”Ÿæ´»ã€åˆ†äº«æŠ€æœ¯</h2>
      </div>
      
      <div class="logo">
        <img src="/images/dog.gif" alt="logo">
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="åˆ‡æ¢å¯¼èˆªæ "></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/" class="current"><i class="fas fa-home"></i><span class="menu-text">é¦–é¡µ</span></a></li>
        
        <li role="menuitem"><a href="/archives/"><i class="fas fa-archive"></i><span class="menu-text">å½’æ¡£</span></a></li>
        
        <li role="menuitem"><a href="/categories/"><i class="fas fa-th-list"></i><span class="menu-text">åˆ†ç±»</span></a></li>
        
        <li role="menuitem"><a href="/tags/"><i class="fas fa-tags"></i><span class="menu-text">æ ‡ç­¾</span></a></li>
        
        <li role="menuitem"><a href="/about/"><i class="fas fa-user-edit"></i>favicons<span class="menu-text">å…³äº</span></a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            

<div id="index" class="index page">
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2021/03/01/mysqlæŸ¥è¯¢æ—¶é—´æ—¥æœŸè½¬æ¢/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2021/03/01/mysqlæŸ¥è¯¢æ—¶é—´æ—¥æœŸè½¬æ¢/" itemprop="url">mysqlæŸ¥è¯¢æ—¶é—´æ—¥æœŸè½¬æ¢</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2021-03-01T23:09:04+08:00">2021-03-01 23:09:04</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <blockquote>
<p>è½¬æ¢ç¤ºä¾‹å¦‚ä¸‹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	order_id orderId,</span><br><span class="line">	REPLACE(REPLACE(FROM_UNIXTIME(order_time/1000,&apos;%Y%m%D%H:%i&apos;),&apos;th&apos;,&apos;&apos;),&apos;:&apos;,&apos;&apos;) AS orderTime,</span><br><span class="line">	&quot;202102&quot; AS orderMonth </span><br><span class="line">FROM</span><br><span class="line">	mall_order_sku_202102 as t1</span><br><span class="line">WHERE</span><br><span class="line">	sku_id = 10023919984358 </span><br><span class="line">	AND order_time &gt;= 1614355200000 </span><br><span class="line">	AND order_time &lt; 1614441600000</span><br></pre></td></tr></table></figure>
      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2021/01/28/ä½¿ç”¨Nginxé…ç½®HTTPSåŸŸåè¯ä¹¦/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2021/01/28/ä½¿ç”¨Nginxé…ç½®HTTPSåŸŸåè¯ä¹¦/" itemprop="url">ä½¿ç”¨Nginxé…ç½®HTTPSåŸŸåè¯ä¹¦</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2021-01-28T14:43:23+08:00">2021-01-28 14:43:23</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="é…ç½®sslåŸŸåè¯ä¹¦"><a href="#é…ç½®sslåŸŸåè¯ä¹¦" class="headerlink" title="é…ç½®sslåŸŸåè¯ä¹¦"></a>é…ç½®sslåŸŸåè¯ä¹¦</h1><blockquote>
<p>å‚è€ƒé˜¿é‡Œäº‘å¸®åŠ©æ–‡æ¡£<a href="https://help.aliyun.com/document_detail/98728.html?spm=5176.11065259.1996646101.searchclickresult.7f092f78xxRTpU" target="_blank" rel="noopener">åœ¨Nginxï¼ˆæˆ–Tengineï¼‰æœåŠ¡å™¨ä¸Šå®‰è£…è¯ä¹¦</a></p>
</blockquote>
<h2 id="ä¸‹è½½è¯ä¹¦åˆ°æœ¬åœ°"><a href="#ä¸‹è½½è¯ä¹¦åˆ°æœ¬åœ°" class="headerlink" title="ä¸‹è½½è¯ä¹¦åˆ°æœ¬åœ°"></a>ä¸‹è½½è¯ä¹¦åˆ°æœ¬åœ°</h2><blockquote>
<p>å»åŸŸåæœåŠ¡æä¾›å•†ç”³è¯·åŸŸåè¯ä¹¦ï¼ˆè…¾è®¯äº‘ä¸é˜¿é‡Œäº‘éƒ½å¯ä»¥ç”³è¯·å…è´¹çš„åŸŸåè¯ä¹¦ï¼‰</p>
</blockquote>
<p><img src="/images/img_41.png" alt="ä¸‹è½½åŸŸåè¯ä¹¦"></p>
<h2 id="ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨"><a href="#ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨" class="headerlink" title="ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨"></a>ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨</h2><blockquote>
<p>ä¾‹å¦‚ä½¿ç”¨CRTé™„å¸¦çš„æ–‡ä»¶ä¸Šä¼ å·¥å…·å°†è¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ°/usr/local/nginx/conf/certç›®å½•ä¸‹é¢</p>
</blockquote>
<blockquote>
<p>åœ¨nginxé…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼ˆå¦‚ä¸‹é…ç½®æ˜¯æ ¹æ®nginxæ³¨é‡Šæ‰çš„é»˜è®¤é…ç½®ç›´æ¥ä¿®æ”¹è€Œæ¥,æˆ–å‚è€ƒä¸Šé¢æåˆ°çš„é˜¿é‡Œäº‘çš„æ–‡æ¡£ï¼‰</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl;</span><br><span class="line">    server_name  www.ismyfree.world;</span><br><span class="line"></span><br><span class="line">    ssl_certificate      /usr/local/nginx/conf/cert/4810494_www.ismyfree.world.pem;</span><br><span class="line">    ssl_certificate_key  /usr/local/nginx/conf/cert/4810494_www.ismyfree.world.key;</span><br><span class="line"></span><br><span class="line">    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æœ¬æ¬¡æ¼”ç¤ºåŸºäºæœ¬åœ°æœåŠ¡å™¨ï¼ˆæ— æ„ä¹‰ï¼‰ï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯é€šè¿‡ç°æœ‰çš„ä¸æœåŠ¡å™¨è¿›è¡Œé…ç½®ã€‚</p>
</blockquote>
<h2 id="ä¸ºä»€ä¹ˆè¦é…ç½®httpsåŸŸåè¯ä¹¦"><a href="#ä¸ºä»€ä¹ˆè¦é…ç½®httpsåŸŸåè¯ä¹¦" class="headerlink" title="ä¸ºä»€ä¹ˆè¦é…ç½®httpsåŸŸåè¯ä¹¦"></a>ä¸ºä»€ä¹ˆè¦é…ç½®httpsåŸŸåè¯ä¹¦</h2><blockquote>
<p>ç¬¦åˆè‹¹æœappå®¡æ ¸çš„å¿…è¦æ¡ä»¶</p>
</blockquote>
<blockquote>
<p>åŒç†å®‰å“æˆ–å¾®ä¿¡å°ç¨‹åºå®¡æ ¸ä¹Ÿæ˜¯è¦ç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„</p>
</blockquote>

      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2021/01/12/CentOS7é…ç½®JAVAç¯å¢ƒå˜é‡/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2021/01/12/CentOS7é…ç½®JAVAç¯å¢ƒå˜é‡/" itemprop="url">CentOS7é…ç½®JAVAç¯å¢ƒå˜é‡</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2021-01-12T10:24:00+08:00">2021-01-12 10:24:00</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <blockquote>
<p>åœ¨/etc/profile.d/è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåä¸ºjava.sh</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile.d/java.sh</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ç¯å¢ƒé…ç½®å†…å®¹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_251</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ä¹‹å¯è¿è¡Œ</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/profile.d/java.sh</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æœ€åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ°¸ä¹…è®¾ç½®ç¯å¢ƒå˜é‡</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile.d/java.sh</span><br></pre></td></tr></table></figure>
      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/ç¯å¢ƒå˜é‡/" rel="tag"><i class="fas fa-tags"></i>ç¯å¢ƒå˜é‡</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2020/12/14/Ideaä»¥debugæ–¹å¼å¯åŠ¨æ—¶æŠ¥é”™/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2020/12/14/Ideaä»¥debugæ–¹å¼å¯åŠ¨æ—¶æŠ¥é”™/" itemprop="url">Ideaä»¥debugæ–¹å¼å¯åŠ¨æ—¶æŠ¥é”™ Command line is too long</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2020-12-14T15:44:04+08:00">2020-12-14 15:44:04</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="é”™è¯¯æè¿°ä¿¡æ¯"><a href="#é”™è¯¯æè¿°ä¿¡æ¯" class="headerlink" title="é”™è¯¯æè¿°ä¿¡æ¯"></a>é”™è¯¯æè¿°ä¿¡æ¯</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error running &apos;SaleAdminApplication&apos;: Command line is too long. Shorten command line for SaleAdminApplication or also for Spring Boot default configuration.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™ä¸ªé”™è¯¯ä¿¡æ¯åœ¨runè¿è¡Œæ–¹å¼ä¸å‡ºç°ï¼Œåœ¨debugçš„è¿è¡Œæ–¹å¼æ‰ä¼šå‡ºç°</p>
</blockquote>
<h1 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h1><blockquote>
<p>ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€å·¥ä½œç›®å½•ä¸‹çš„æ–‡ä»¶ â€”&gt; .idea\workspace.xml</p>
</blockquote>
<blockquote>
<p>æ‰¾åˆ°æ ‡ç­¾</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;component name=&quot;PropertiesComponent&quot;&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ ‡ç­¾ä¸­æ·»åŠ å†…å®¹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;property name=&quot;dynamic.classpath&quot; value=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>
      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2020/12/11/mysqlè¡¨å¤‡ä»½åŠæ³•/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2020/12/11/mysqlè¡¨å¤‡ä»½åŠæ³•/" itemprop="url">mysqlè¡¨å¤‡ä»½åŠæ³•</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2020-12-11T23:15:08+08:00">2020-12-11 23:15:08</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="å¤åˆ¶è¡¨ç»“æ„å¯¼å…¥æ—§è¡¨æ•°æ®"><a href="#å¤åˆ¶è¡¨ç»“æ„å¯¼å…¥æ—§è¡¨æ•°æ®" class="headerlink" title="å¤åˆ¶è¡¨ç»“æ„å¯¼å…¥æ—§è¡¨æ•°æ®"></a>å¤åˆ¶è¡¨ç»“æ„å¯¼å…¥æ—§è¡¨æ•°æ®</h1><h2 id="æ–°å»ºæ–°è¡¨ä¸æ—§è¡¨è¡¨ç»“æ„ç›¸åŒ"><a href="#æ–°å»ºæ–°è¡¨ä¸æ—§è¡¨è¡¨ç»“æ„ç›¸åŒ" class="headerlink" title="æ–°å»ºæ–°è¡¨ä¸æ—§è¡¨è¡¨ç»“æ„ç›¸åŒ"></a>æ–°å»ºæ–°è¡¨ä¸æ—§è¡¨è¡¨ç»“æ„ç›¸åŒ</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table new_table like old_table;</span><br></pre></td></tr></table></figure>

<h2 id="å°†æ—§è¡¨æ•°æ®å¯¼å…¥æ–°è¡¨"><a href="#å°†æ—§è¡¨æ•°æ®å¯¼å…¥æ–°è¡¨" class="headerlink" title="å°†æ—§è¡¨æ•°æ®å¯¼å…¥æ–°è¡¨"></a>å°†æ—§è¡¨æ•°æ®å¯¼å…¥æ–°è¡¨</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into new_table select * from old_table;</span><br></pre></td></tr></table></figure>
      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2020/12/04/gitä¸­tagæ ‡ç­¾çš„ä½¿ç”¨/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2020/12/04/gitä¸­tagæ ‡ç­¾çš„ä½¿ç”¨/" itemprop="url">gitä¸­tagæ ‡ç­¾çš„ä½¿ç”¨</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2020-12-04T16:08:47+08:00">2020-12-04 16:08:47</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="ä»€ä¹ˆæ˜¯tag"><a href="#ä»€ä¹ˆæ˜¯tag" class="headerlink" title="ä»€ä¹ˆæ˜¯tag"></a>ä»€ä¹ˆæ˜¯tag</h1><blockquote>
<p>tagæ˜¯gitç‰ˆæœ¬åº“çš„ä¸€ä¸ªæ ‡è®°ï¼ŒæŒ‡å‘æŸä¸ªcommitçš„æŒ‡é’ˆã€‚</p>
</blockquote>
<blockquote>
<p>tagä¸»è¦ç”¨äºå‘å¸ƒç‰ˆæœ¬çš„ç®¡ç†ï¼Œä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºgitæ‰“ä¸Š v.1.0.1 v.1.0.2 â€¦è¿™æ ·çš„æ ‡ç­¾ã€‚</p>
</blockquote>
<blockquote>
<p>tagæ„Ÿè§‰è·Ÿbranchæœ‰ç‚¹ç›¸ä¼¼ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå’Œåˆ†å·¥ä¸Šæ˜¯ä¸åŒçš„ï¼š</p>
</blockquote>
<blockquote>
<p>tag å¯¹åº”æŸæ¬¡commit, æ˜¯ä¸€ä¸ªç‚¹ï¼Œæ˜¯ä¸å¯ç§»åŠ¨çš„ã€‚</p>
</blockquote>
<blockquote>
<p>branch å¯¹åº”ä¸€ç³»åˆ—commitï¼Œæ˜¯å¾ˆå¤šç‚¹è¿æˆçš„ä¸€æ ¹çº¿ï¼Œæœ‰ä¸€ä¸ªHEAD æŒ‡é’ˆï¼Œæ˜¯å¯ä»¥ä¾é  HEAD æŒ‡é’ˆç§»åŠ¨çš„ã€‚</p>
</blockquote>
<h1 id="åˆ›å»ºtag"><a href="#åˆ›å»ºtag" class="headerlink" title="åˆ›å»ºtag"></a>åˆ›å»ºtag</h1><h2 id="åˆ›å»ºæœ¬åœ°tag"><a href="#åˆ›å»ºæœ¬åœ°tag" class="headerlink" title="åˆ›å»ºæœ¬åœ°tag"></a>åˆ›å»ºæœ¬åœ°tag</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag &lt;tagName&gt;</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºtagæŒ‡å®šmessage"><a href="#åˆ›å»ºtagæŒ‡å®šmessage" class="headerlink" title="åˆ›å»ºtagæŒ‡å®šmessage"></a>åˆ›å»ºtagæŒ‡å®šmessage</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &lt;tagname&gt; -m &quot;message&quot;</span><br></pre></td></tr></table></figure>

<h2 id="æŒ‡å®šæŸä¸ªcommit-idåˆ›å»ºtag"><a href="#æŒ‡å®šæŸä¸ªcommit-idåˆ›å»ºtag" class="headerlink" title="æŒ‡å®šæŸä¸ªcommit idåˆ›å»ºtag"></a>æŒ‡å®šæŸä¸ªcommit idåˆ›å»ºtag</h2><p><strong>å…ˆæŸ¥çœ‹å†å²çš„comitId</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=oneline</span><br></pre></td></tr></table></figure>

<p><strong>æŒ‡å®šæŸä¸ªcommitIdåˆ›å»ºtag</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &lt;tagName&gt; &lt;commitId&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“</h2><h3 id="æŒ‡å®štagæ¨é€åˆ°è¿œç«¯"><a href="#æŒ‡å®štagæ¨é€åˆ°è¿œç«¯" class="headerlink" title="æŒ‡å®štagæ¨é€åˆ°è¿œç«¯"></a>æŒ‡å®štagæ¨é€åˆ°è¿œç«¯</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin &lt;tagName&gt;</span><br></pre></td></tr></table></figure>

<h3 id="æ¨é€æ‰€æœ‰tagåˆ°è¿œç«¯"><a href="#æ¨é€æ‰€æœ‰tagåˆ°è¿œç«¯" class="headerlink" title="æ¨é€æ‰€æœ‰tagåˆ°è¿œç«¯"></a>æ¨é€æ‰€æœ‰tagåˆ°è¿œç«¯</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure>

<h1 id="æŸ¥çœ‹tag"><a href="#æŸ¥çœ‹tag" class="headerlink" title="æŸ¥çœ‹tag"></a>æŸ¥çœ‹tag</h1><p><strong>æŸ¥çœ‹æœ¬åœ°æŸä¸ª tag çš„è¯¦ç»†ä¿¡æ¯</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show &lt;tagName&gt;</span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰ tag</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag æˆ–è€… git tag -l</span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥çœ‹è¿œç¨‹æ‰€æœ‰ tag</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-remote --tags origin</span><br></pre></td></tr></table></figure>

<h1 id="åˆ é™¤æ ‡ç­¾"><a href="#åˆ é™¤æ ‡ç­¾" class="headerlink" title="åˆ é™¤æ ‡ç­¾"></a>åˆ é™¤æ ‡ç­¾</h1><h2 id="æœ¬åœ°æ ‡ç­¾åˆ é™¤"><a href="#æœ¬åœ°æ ‡ç­¾åˆ é™¤" class="headerlink" title="æœ¬åœ°æ ‡ç­¾åˆ é™¤"></a>æœ¬åœ°æ ‡ç­¾åˆ é™¤</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -d &lt;tagName&gt;</span><br></pre></td></tr></table></figure>

<h2 id="è¿œç¨‹-tag-çš„åˆ é™¤"><a href="#è¿œç¨‹-tag-çš„åˆ é™¤" class="headerlink" title="è¿œç¨‹ tag çš„åˆ é™¤"></a>è¿œç¨‹ tag çš„åˆ é™¤</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin :&lt;tagName&gt;</span><br></pre></td></tr></table></figure>

<h1 id="æ£€å‡ºæ ‡ç­¾"><a href="#æ£€å‡ºæ ‡ç­¾" class="headerlink" title="æ£€å‡ºæ ‡ç­¾"></a>æ£€å‡ºæ ‡ç­¾</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;branchName&gt; &lt;tagName&gt;</span><br></pre></td></tr></table></figure>
      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2020/11/24/golangå­¦ä¹ ç¬”è®°/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2020/11/24/golangå­¦ä¹ ç¬”è®°/" itemprop="url">golangå­¦ä¹ ç¬”è®°</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2020-11-24T11:00:00+08:00">2020-11-24 11:00:00</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h1><h2 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰"></a>å˜é‡å®šä¹‰</h2><blockquote>
<p><strong>ä½¿ç”¨varå…³é”®å­—</strong></p>
<blockquote>
<p>var a,b,c bool<br>var s1,s2 string = â€œhelloâ€,â€worldâ€<br>å¯ä»¥æ”¾åœ¨å‡½æ•°å†…ï¼Œæˆ–ç›´æ¥æ”¾åœ¨åŒ…å†…<br>ä½¿ç”¨var()é›†ä¸­å®šä¹‰å˜é‡</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>ä½¿ç”¨:=å®šä¹‰å˜é‡</strong></p>
<blockquote>
<p>a,b,i,s1,s2 := true,false,3,â€helloâ€,â€worldâ€ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨å†³å®šç¼–è¯‘ç±»å‹<br>åªèƒ½åœ¨å‡½æ•°å†…ä½¿ç”¨</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>å˜é‡å®šä¹‰æ³¨æ„äº‹é¡¹</strong></p>
<blockquote>
<p>å®šä¹‰è¿‡å¾—å˜é‡ä¸€å®šè¦ä½¿ç”¨ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™<br>å­—ç¬¦ä¸²ç±»å‹çš„å˜é‡åˆå§‹å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼ˆä¸åƒjavaä¸ºnullï¼‰<br>å˜é‡å®šä¹‰çš„æ—¶å€™èµ‹å€¼å¯ä»¥ä¸ç”¨å®šä¹‰æ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»å‹æ¨æ–­ï¼Œç”šè‡³åœ¨åŒä¸€è¡Œä»£ç å®šä¹‰ä¸åŒç±»å‹çš„å˜é‡éƒ½æ˜¯å¯ä»¥çš„<br>åœ¨å‡½æ•°å¤–é¢å®šä¹‰å˜é‡ä¸èƒ½ä½¿ç”¨:=æ¥å®šä¹‰å˜é‡ï¼Œåªèƒ½ä½¿ç”¨varå…³é”®å­—è¿›è¡Œå˜é‡å®šä¹‰<br>å‡½æ•°å¤–é¢å®šä¹‰å˜é‡ä½œç”¨åŸŸåœ¨åŒ…å†…éƒ¨ï¼Œæ²¡æœ‰å…¨å±€å˜é‡çš„è¯´æ³•</p>
</blockquote>
</blockquote>
<h2 id="å†…å»ºå˜é‡ç±»å‹"><a href="#å†…å»ºå˜é‡ç±»å‹" class="headerlink" title="å†…å»ºå˜é‡ç±»å‹"></a>å†…å»ºå˜é‡ç±»å‹</h2><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><blockquote>
<p><strong>bool</strong>:å¸ƒå°”</p>
</blockquote>
<blockquote>
<p><strong>string</strong>å­—ç¬¦ä¸²</p>
</blockquote>
<blockquote>
<p><strong>int</strong>æ•´å½¢</p>
<blockquote>
<p><strong>(u)int</strong>  æ ¹æ®æ“ä½œç³»ç»Ÿä½æ•°å†³å®šé•¿åº¦(32ä½ç³»ç»Ÿé•¿åº¦(u)int32/64ä½ç³»ç»Ÿ(u)int64)<br><strong>(u)int8</strong><br><strong>(u)int16</strong><br><strong>(u)int32</strong><br><strong>(u)int64</strong></p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>uinttpr</strong>æŒ‡é’ˆ</p>
</blockquote>
<blockquote>
<p><strong>byte</strong>å­—èŠ‚</p>
</blockquote>
<blockquote>
<p><strong>rune</strong>å­—ç¬¦(32bit)</p>
</blockquote>
<blockquote>
<p><strong>float</strong>(æµ®ç‚¹)</p>
<blockquote>
<p><strong>float32</strong><br><strong>float64</strong></p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>complex</strong>(å¤æ•°)</p>
<blockquote>
<p><strong>complex64</strong>  å®éƒ¨å’Œè™šéƒ¨å„32ä½æµ®ç‚¹æ•°<br><strong>complex128</strong>  å®éƒ¨å’Œè™šéƒ¨å„64ä½æµ®ç‚¹æ•°</p>
</blockquote>
</blockquote>
<h3 id="å¤æ•°å›é¡¾"><a href="#å¤æ•°å›é¡¾" class="headerlink" title="å¤æ•°å›é¡¾"></a>å¤æ•°å›é¡¾</h3><p><strong>ä»€ä¹ˆæ˜¯å¤æ•°</strong>:å¤æ•°æ˜¯å½¢å¦‚ a ï¼‹ b içš„æ•°.å¼ä¸­a,b ä¸º å®æ•°,iæ˜¯ä¸€ä¸ªæ»¡è¶³<strong>i^2 ï¼ï¼1</strong>çš„æ•°,å› ä¸ºä»»ä½•å®æ•°çš„å¹³æ–¹ä¸ç­‰äºï¼1,æ‰€ä»¥iä¸æ˜¯å®æ•°,è€Œæ˜¯å®æ•°ä»¥å¤–çš„æ–°çš„æ•°.</p>
<p><strong>|3+4i| = 5 ï¼Ÿåˆ°åº•æ˜¯æ€ä¹ˆç®—çš„ï¼Ÿæœ‰çŸ¥é“çš„å¯ä»¥å‘Šè¯‰æˆ‘ä¸€ä¸‹ï¼Œæˆ‘ä¸ä¼šç®—ğŸ˜¢</strong>å¼€å§‹è¿˜ä»¥ä¸ºè¿™ä¸ªå…¬å¼æœ‰é—®é¢˜ï¼Œç»“æœç¨‹åºè·‘å‡ºæ¥çš„ç»“æœå°±æ˜¯è¿™ä¹ˆå¤šğŸ˜«</p>
<p><img src="/images/img_5.png" alt="å¤æ•°"></p>
<p><strong>i^0 = 1</strong></p>
<p><strong>i^1 = i</strong></p>
<p><strong>i^2 = -1</strong></p>
<p><strong>i^3 = -i</strong></p>
<p><strong>i^4 = 1</strong></p>
<p><strong>i^5 = i</strong></p>
<p><strong>i^6 = -1</strong></p>
<p><strong>æˆ‘ä»¬å‘ç°</strong>æ¯å¢åŠ ä¸€ä¸ªæ¬¡æ–¹å°±é€†æ—¶é’ˆæ—‹è½¬90åº¦</p>
<p><img src="/images/img_6.png" alt="æ¬§æ‹‰å…¬å¼çš„ç”±æ¥"></p>
<p><img src="/images/img_7.png" alt="æœ€ç¾å…¬å¼-æ¬§æ‹‰å…¬å¼"></p>
<h2 id="å¸¸é‡ä¸æšä¸¾"><a href="#å¸¸é‡ä¸æšä¸¾" class="headerlink" title="å¸¸é‡ä¸æšä¸¾"></a>å¸¸é‡ä¸æšä¸¾</h2><h3 id="å¸¸é‡å®šä¹‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰"><a href="#å¸¸é‡å®šä¹‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰" class="headerlink" title="å¸¸é‡å®šä¹‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰"></a>å¸¸é‡å®šä¹‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰</h3><blockquote>
<p>å¸¸é‡å¯ä»¥è§„å®šæ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥è®©ç¼–è¯‘å™¨è‡ªä¸»æ¨æ–­ç±»å‹</p>
</blockquote>
<blockquote>
<p>å¸¸é‡ä¹Ÿå¯ä»¥å®šä¹‰åœ¨const()é‡Œé¢è¡¨ç¤ºå®šä¹‰ä¸€ç»„å¸¸é‡</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€çš„å¸¸é‡åç§°å®šä¹‰ä¸€èˆ¬ä¸å¤§å†™ï¼Œå¤§å†™Fä»£è¡¨public</p>
</blockquote>
<h3 id="æšä¸¾ç±»å‹ä½¿ç”¨const-å®šä¹‰"><a href="#æšä¸¾ç±»å‹ä½¿ç”¨const-å®šä¹‰" class="headerlink" title="æšä¸¾ç±»å‹ä½¿ç”¨const()å®šä¹‰"></a>æšä¸¾ç±»å‹ä½¿ç”¨const()å®šä¹‰</h3><blockquote>
<p>goè¯­è¨€ä¸­æ²¡æœ‰ä¸“é—¨çš„æšä¸¾ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»¥å¸¸é‡ç»„ä½œä¸ºæšä¸¾ç±»å‹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const (</span><br><span class="line">	zero = 0</span><br><span class="line">	one = 1</span><br><span class="line">	two = 2</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>goè¯­è¨€æä¾›äº†iotaå…³é”®å­—æ˜¯æšä¸¾å€¼çš„è‡ªå¢è¡¨è¾¾å¼,ä½¿ç”¨_ä¸‹åˆ’çº¿è·³è¿‡</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const (</span><br><span class="line">	cpp = iota</span><br><span class="line">	_</span><br><span class="line">	python</span><br><span class="line">	golang</span><br><span class="line">	javascript</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæšä¸¾å¸¸é‡çš„å€¼ä¸ºcpp:0/_:1/python:2/golang:3/javascript:4</p>
<blockquote>
<p>è¿˜èƒ½ä»¥iotaå…³é”®ä¹‹å®šä¹‰ç£ç›˜å®¹é‡è¡¨è¾¾å¼å¦‚ä¸‹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const (</span><br><span class="line">	b 1 &lt;&lt; (10 * iota)</span><br><span class="line">	kb</span><br><span class="line">	mb</span><br><span class="line">	gb</span><br><span class="line">	tb</span><br><span class="line">	pb</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h2><h3 id="ifæ¡ä»¶è¯­å¥"><a href="#ifæ¡ä»¶è¯­å¥" class="headerlink" title="ifæ¡ä»¶è¯­å¥"></a>ifæ¡ä»¶è¯­å¥</h3><blockquote>
<p><strong>ç¤ºä¾‹</strong>ï¼šè¯»å–æ–‡ä»¶</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;io/ioutil&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	const filename = &quot;abc.txt&quot;</span><br><span class="line">	//goè¯­è¨€çš„å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼</span><br><span class="line">	file, err := ioutil.ReadFile(filename)</span><br><span class="line">	//é”™è¯¯ä¸ä¸ºç©ºæ‰“å°é”™è¯¯</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		//æ²¡æœ‰é”™è¯¯æ‰“å°æ–‡æœ¬æ–‡ä»¶å†…å®¹</span><br><span class="line">		fmt.Printf(&quot;%s\n\n&quot;, file)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šgoè¯­è¨€çš„ifè¯­å¥å¯ä»¥åƒå…¶å®ƒè¯­è¨€çš„forè¯­å¥çš„å†™æ³•ï¼Œå…ˆåˆå§‹åŒ–èµ‹å€¼ï¼ˆå®šä¹‰å˜é‡ï¼‰ï¼Œå†è¿›è¡Œæ¡ä»¶åˆ¤æ–­,ä½¿ç”¨åˆ†å·åˆ†éš”ï¼Œä½œç”¨åŸŸåœ¨ifä»¥å†…ï¼Œå†™æ³•å¦‚ä¸‹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;io/ioutil&quot;</span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">	const filename = &quot;abc.txt&quot;</span><br><span class="line">	if file, err := ioutil.ReadFile(filename); err != nil &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		fmt.Printf(&quot;%s\n\n&quot;, file)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="switchæ¡ä»¶è¯­å¥"><a href="#switchæ¡ä»¶è¯­å¥" class="headerlink" title="switchæ¡ä»¶è¯­å¥"></a>switchæ¡ä»¶è¯­å¥</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">func eval(a int, b int, op string) int &#123;</span><br><span class="line">	var result int</span><br><span class="line">	switch op &#123;</span><br><span class="line">	case &quot;+&quot;:</span><br><span class="line">		result = a+b</span><br><span class="line">	case &quot;-&quot;:</span><br><span class="line">		result = a-b</span><br><span class="line">	case &quot;*&quot;:</span><br><span class="line">		result = a*b</span><br><span class="line">	case &quot;/&quot;:</span><br><span class="line">		result = a/b</span><br><span class="line">	default:</span><br><span class="line">		panic(&quot;unsupported operator&quot; + op)</span><br><span class="line">	&#125;</span><br><span class="line">	return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>çœ‹çœ‹è¿™æ®µ</strong></p>
<blockquote>
<p>switchä»£ç å—ä¸­çš„caseä¼šè‡ªåŠ¨breakï¼Œå¦‚æœä¸é€‚ç”¨breakä½¿ç”¨fallthroughï¼Œä¹Ÿå°±æ˜¯å…¶å®ƒé¢„å‹çš„caseç©¿é€ã€‚</p>
</blockquote>
<blockquote>
<p>panicæ˜¯goè¯­è¨€ä¸­çš„æŠ¥é”™ï¼ŒæŠ¥é”™ä¼šè®©ç¨‹åºåœä¸‹æ¥ã€‚</p>
</blockquote>
<p><strong>switché‡Œé¢å¦‚æœæ²¡æœ‰è¡¨è¾¾å¼ä¹Ÿå¯ä»¥å°†æ¡ä»¶æ”¾åˆ°caseè¯­å¥é‡Œé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</strong></p>
<figure class="hljs highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">grade</span><span class="params">(score <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	g := <span class="string">""</span></span><br><span class="line">	<span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> score &lt; <span class="number">60</span>:</span><br><span class="line">		g = <span class="string">"F"</span></span><br><span class="line">	<span class="keyword">case</span> score &lt; <span class="number">80</span>:</span><br><span class="line">		g = <span class="string">"C"</span></span><br><span class="line">	<span class="keyword">case</span> score &lt; <span class="number">90</span>:</span><br><span class="line">		g = <span class="string">"B"</span></span><br><span class="line">	<span class="keyword">case</span> score &lt;= <span class="number">100</span>:</span><br><span class="line">		g = <span class="string">"A"</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="built_in">panic</span>(fmt.Sprintf(<span class="string">"Wrong score:%d"</span>,score))</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> g</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p><strong>ä¸€ä¸ªç®€å•çš„forå¾ªç¯</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func loopdemo() &#123;</span><br><span class="line">	sum := 1</span><br><span class="line">	for i := 0; i &lt; 100; i++ &#123;</span><br><span class="line">		sum+=1</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>forè¯­å¥çš„æ¡ä»¶é‡Œä¸éœ€è¦æ‹¬å·</p>
</blockquote>
<blockquote>
<p>forçš„æ¡ä»¶é‡Œé¢å¯ä»¥çœç•¥åˆå§‹æ¡ä»¶ï¼Œç»“æŸæ¡ä»¶ï¼Œé€’å¢è¡¨è¾¾å¼</p>
</blockquote>
<p><strong>æ²¡æœ‰åˆå§‹åŒ–æ¡ä»¶çš„å†™æ³•</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//å°†æ•°å­—è½¬æ¢ä¸º2è¿›åˆ¶å­—ç¬¦</span><br><span class="line">func convertToBin(number int) string &#123;</span><br><span class="line">	result := &quot;&quot;</span><br><span class="line">	for ; number &gt; 0; number /= 2 &#123;</span><br><span class="line">		lsb := number % 2</span><br><span class="line">		result = strconv.Itoa(lsb) + result</span><br><span class="line">	&#125;</span><br><span class="line">	return result</span><br><span class="line">&#125;</span><br><span class="line">//goè¯­è¨€å¯¹æ¢è¡Œæœ‰æ‰€è®²ç©¶ï¼Œéœ€è¦åŠ ä¸Šé€—å·</span><br><span class="line">func main() &#123;</span><br><span class="line">	fmt.Println(</span><br><span class="line">		convertToBin(2),</span><br><span class="line">		convertToBin(3),</span><br><span class="line">		convertToBin(4),</span><br><span class="line">	)</span><br><span class="line">	//æ‰“å°ç»“æœä¸º10 11 100</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>åˆå§‹åŒ–æ¡ä»¶åŠé€’å¢è¡¨è¾¾å¼åŒæ—¶çœç•¥ï¼ˆç›¸å½“äºwhileï¼Œä½†æ˜¯goè¯­è¨€ä¸­æ²¡æœ‰whileï¼‰</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func printFile(filename string) &#123;</span><br><span class="line">	file, err := os.Open(filename)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	scanner := bufio.NewScanner(file)</span><br><span class="line">	for scanner.Scan() &#123;</span><br><span class="line">		fmt.Println(scanner.Text())</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	printFile(&quot;abc.txt&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ­»å¾ªç¯å†™æ³•(å¹¶å‘ç¼–ç¨‹ç›¸äº’é€šä¿¡ä¼šç”¨åˆ°æ­»å¾ªç¯)</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">func forever() &#123;</span><br><span class="line">	for true &#123;</span><br><span class="line">		fmt.Println(&quot;æ­»å¾ªç¯&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	forever()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><blockquote>
<p>å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼</p>
</blockquote>
<blockquote>
<p>å‡½æ•°è¿”å›å¤šä¸ªå€¼æ—¶å¯ä»¥èµ·åå­—ï¼ˆä»…é™äºéå¸¸ç®€å•çš„å‡½æ•°ï¼Œä½†å¯¹äºè°ƒç”¨è€…å¯ä»¥éšä¾¿èµ·åï¼‰</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€å‡½æ•°æ˜¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå‡½æ•°é‡Œé¢çš„å‚æ•°ã€è¿”å›å€¼ã€å‡½æ•°ä½“éƒ½å¯ä»¥æœ‰å‡½æ•°</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€æ²¡æœ‰èŠ±å“¨çš„lambdaè¡¨è¾¾å¼ï¼Œæ˜¯éœ€è¦å°†åŒ¿åå‡½æ•°å†™å‡ºå³å¯</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€æ²¡æœ‰é»˜è®¤å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰æ–¹æ³•é‡è½½</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€å‡½æ•°æœ‰å¯å˜å‚æ•°åˆ—è¡¨</p>
</blockquote>
<h3 id="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°3çš„4æ¬¡æ–¹"><a href="#ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°3çš„4æ¬¡æ–¹" class="headerlink" title="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°3çš„4æ¬¡æ–¹"></a>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°3çš„4æ¬¡æ–¹</h3><p><strong>ä»£ç å¦‚ä¸‹</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//é‡æ–°å®šä¹‰powå‡½æ•°æ¥æ”¶intç±»å‹</span><br><span class="line">func pow(a, b int) int &#123;</span><br><span class="line">	return int(math.Pow(float64(a), float64(b)))</span><br><span class="line">&#125;</span><br><span class="line">//opå®šä¹‰äº†è°ƒç”¨æ–¹ä¼ é€’çš„å‡½æ•°</span><br><span class="line">func apply(op func(int, int) int, a int, b int) (result int) &#123;</span><br><span class="line">	//åå°„è·å–åˆ°ä¼ é€’è¿‡æ¥çš„å‡½æ•°çš„æŒ‡é’ˆ</span><br><span class="line">	pointer := reflect.ValueOf(op).Pointer()</span><br><span class="line">	//é€šè¿‡æŒ‡é’ˆè·å–å‡½æ•°åç§°</span><br><span class="line">	name := runtime.FuncForPC(pointer).Name()</span><br><span class="line">	//æ‰“å°ä¼ é€’çš„å‡½æ•°åç§°åŠå‚æ•°</span><br><span class="line">	fmt.Printf(&quot;calling function is %s with args (%d,%d) \n&quot;, name, a, b)</span><br><span class="line">	//è¿”å›å€¼ç”±ä¼ å…¥çš„å‡½æ•°å¤„ç†åçš„ç»“æœå†³å®š</span><br><span class="line">	return op(a, b)</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">	//è®¡ç®—3çš„4æ¬¡æ–¹ç­‰äº81,ä¼ çš„çš„å‡½æ•°å¼æ“ä½œä¸ºpow,açš„bæ¬¡æ–¹</span><br><span class="line">	fmt.Println(apply(pow, 3, 4))</span><br><span class="line">	//ä¹Ÿå¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°çš„æ–¹å¼ï¼Œè®¡ç®—2çš„3æ¬¡æ–¹</span><br><span class="line">	fmt.Println(apply(</span><br><span class="line">		func(a int, b int) int &#123;</span><br><span class="line">			return int(math.Pow(float64(a), float64(b)))</span><br><span class="line">		&#125;, 2, 3))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œç»“æœ</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">calling function is main.pow with args (3,4) </span><br><span class="line">81</span><br><span class="line">calling function is main.main.func1 with args (2,3) </span><br><span class="line">8</span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°çš„å¯å˜å‚ç¤ºä¾‹"><a href="#å‡½æ•°çš„å¯å˜å‚ç¤ºä¾‹" class="headerlink" title="å‡½æ•°çš„å¯å˜å‚ç¤ºä¾‹"></a>å‡½æ•°çš„å¯å˜å‚ç¤ºä¾‹</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func sum(numbers ...int) int &#123;</span><br><span class="line">	sum := 0</span><br><span class="line">	for i := range numbers &#123;</span><br><span class="line">		sum += numbers[i]</span><br><span class="line">	&#125;</span><br><span class="line">	return sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h2><p><strong>å…ˆçœ‹ä¸€æ®µä»£ç </strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func pointer() &#123;</span><br><span class="line">	//å®šä¹‰å˜é‡aèµ‹å€¼ä¸º2</span><br><span class="line">	var a int = 2</span><br><span class="line">	//å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆpaï¼Œç±»å‹ä¸º*intï¼ˆæŒ‡é’ˆå‹intï¼‰ï¼ŒæŒ‡å‘å˜é‡açš„åœ°å€å€¼</span><br><span class="line">	var pa *int = &amp;a</span><br><span class="line">	//å°†æŒ‡é’ˆ*paæŒ‡å‘çš„åœ°å€å€¼èµ‹å€¼ä¸º3,ä¹Ÿå°±æ˜¯å°†å˜é‡aèµ‹å€¼ä¸º3</span><br><span class="line">	*pa = 3</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">	//æ‰“å°ç»“æœä¸º3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>goè¯­è¨€çš„æŒ‡é’ˆä¸èƒ½è¿›è¡Œè¿ç®—</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€åªæœ‰å€¼ä¼ é€’ä¸€ç§æ–¹å¼ï¼ˆå€¼ä¼ é€’ä¼šcopyä¸€ä»½æ•°æ®è¿›è¡Œæ“ä½œ/å¼•ç”¨ä¼ é€’ä¼šæ“ä½œä¼ é€’çš„å€¼ï¼‰</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€é€šè¿‡æŒ‡é’ˆä¼ é€’èƒ½æ‰“åˆ°å¼•ç”¨ä¼ é€’çš„æ•ˆæœ</p>
</blockquote>
<blockquote>
<p>è‡ªå®šä¹‰ç±»å‹éœ€è¦è€ƒè™‘è¯¥ç±»å‹æ˜¯éœ€è¦ä½œä¸ºæŒ‡é’ˆä½¿ç”¨è¿˜æ˜¯ä½œä¸ºå€¼æ¥ä½¿ç”¨</p>
</blockquote>
<h3 id="ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ"><a href="#ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ" class="headerlink" title="ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ"></a>ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func swap(a *int, b *int) &#123;</span><br><span class="line">	*a, *b = *b, *a</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">	a := 3</span><br><span class="line">	b := 4</span><br><span class="line">	//ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ</span><br><span class="line">	swap(&amp;a, &amp;b)</span><br><span class="line">	fmt.Println(a,b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ä½¿ç”¨æŒ‡é’ˆå°†æ“ä½œåçš„ç»“æœè¿”å›æˆ–è®¸æ›´å¥½"><a href="#ä¸ä½¿ç”¨æŒ‡é’ˆå°†æ“ä½œåçš„ç»“æœè¿”å›æˆ–è®¸æ›´å¥½" class="headerlink" title="ä¸ä½¿ç”¨æŒ‡é’ˆå°†æ“ä½œåçš„ç»“æœè¿”å›æˆ–è®¸æ›´å¥½"></a>ä¸ä½¿ç”¨æŒ‡é’ˆå°†æ“ä½œåçš„ç»“æœè¿”å›æˆ–è®¸æ›´å¥½</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func swap(a int, b int) (resa int, resb int) &#123;</span><br><span class="line">	return b, a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	a := 3</span><br><span class="line">	b := 4</span><br><span class="line">	//ä½¿ç”¨æŒ‡é’ˆå¯¹å˜é‡è¿›è¡Œæ“ä½œ</span><br><span class="line">	a, b = swap(a, b)</span><br><span class="line">	fmt.Println(a,b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å†…å»ºå®¹å™¨"><a href="#å†…å»ºå®¹å™¨" class="headerlink" title="å†…å»ºå®¹å™¨"></a>å†…å»ºå®¹å™¨</h1><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><blockquote>
<p><strong>æ•°ç»„æ˜¯å€¼ç±»å‹</strong>ï¼Œåœ¨å‡½æ•°ä¸­æ‰§è¡Œçš„æ—¶å€™è¿›è¡Œæ‹·è´ä¸€ä»½å†å¤„ç†</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€ä¸­è®¤ä¸º[3]intç±»å‹ä¸[5]intè®¤ä¸ºæ˜¯ä¸åŒçš„ç±»å‹ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™æ•°ç»„é•¿åº¦ä¸ä¸€è‡´goä¼šè®¤ä¸ºæ˜¯ä¸åŒç±»å‹</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€ä¸­æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä½¿ç”¨æ•°ç»„ï¼Œä¹Ÿä¸ä½¿ç”¨æ•°ç»„çš„æŒ‡é’ˆï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ‡ç‰‡Slice</p>
</blockquote>
<p><strong>æ•°ç»„çš„å®šä¹‰æ–¹æ³•</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰å®¹é‡ä¸º5å…ƒç´ ç±»å‹ä¸ºintçš„æ•°ç»„(å…ƒç´ åˆå§‹å€¼ä¸º0)</span><br><span class="line">var array1 [5]int</span><br><span class="line">//å®šä¹‰å®¹é‡ä¸º3å…ƒç´ ç±»å‹ä¸ºintçš„æ•°ç»„(æŒ‡å®šå…ƒç´ åˆå§‹å€¼)</span><br><span class="line">array2 := [3]int&#123;1,2,3&#125;</span><br><span class="line">//å®¹é‡ä¸ºç¼–è¯‘å™¨æ¥ç¡®å®šç±»å‹ä¸ºintçš„æ•°ç»„</span><br><span class="line">array3 := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">//å®šä¹‰4è¡Œ5åˆ—çš„intç±»å‹äºŒç»´æ•°ç»„(å…ƒç´ åˆå§‹å€¼ä¸º0)</span><br><span class="line">var grid [4][5]int</span><br></pre></td></tr></table></figure>

<p><strong>æ™®é€šforå¾ªç¯éå†æ•°ç»„</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func foreachArr() &#123;</span><br><span class="line">	arr := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">	for i := 0; i &lt; len(arr); i++ &#123;</span><br><span class="line">		fmt.Println(arr[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>for i := rangeéå†æ•°ç»„</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func foreachArr() &#123;</span><br><span class="line">	arr := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">	//è¿™é‡Œçš„iå–åˆ°çš„æ˜¯arrçš„ç´¢å¼•</span><br><span class="line">	for i := range arr&#123;</span><br><span class="line">		fmt.Println(arr[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>for i := rangeéå†æ•°ç»„åŒæ—¶å–ç´¢å¼•å’Œå€¼</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func foreachArr() &#123;</span><br><span class="line">	arr := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">	//è¿™é‡Œçš„iå–åˆ°çš„æ˜¯arrçš„ç´¢å¼•ï¼Œvå–åˆ°çš„æ˜¯å€¼</span><br><span class="line">	for i,v := range arr&#123;</span><br><span class="line">		fmt.Println(i,v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>for i := rangeéå†æ•°ç»„åªè·å–å€¼</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func foreachArr() &#123;</span><br><span class="line">	arr := [...]int&#123;2,4,6,8,10&#125;</span><br><span class="line">	//è¿™é‡Œçš„ç´¢å¼•ä»¥ä¸‹æ ‡_æ›¿æ¢ä»£è¡¨ä¸å–ç´¢å¼•ï¼Œvå–åˆ°çš„æ˜¯å€¼ï¼ˆä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ä¸‹æ ‡_çœç•¥å˜é‡ï¼‰</span><br><span class="line">	for _,v := range arr&#123;</span><br><span class="line">		fmt.Println(v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åˆ‡ç‰‡-Slice"><a href="#åˆ‡ç‰‡-Slice" class="headerlink" title="åˆ‡ç‰‡(Slice)"></a>åˆ‡ç‰‡(Slice)</h2><p><strong>æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼Œçœ‹çœ‹ä»€ä¹ˆæ˜¯åˆ‡ç‰‡</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">s := arr[2:6]</span><br><span class="line">//è¿™é‡Œçš„så°±æ˜¯åˆ‡ç‰‡,ä¸€ä¸ªå·¦é—­å³å¼€çš„åŒº(æ•°å­¦é‡Œé¢çš„é—­åŒºé—´æ˜¯å–ç­‰çš„)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Sliceå…¶å®æ˜¯æ•°ç»„çš„ä¸€ä¸ªè§†å›¾</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr[2:6] = [2 3 4 5]</span><br><span class="line">arr[:6] = [0 1 2 3 4 5]</span><br><span class="line">arr[2:] = [2 3 4 5 6 7]</span><br><span class="line">arr[:] = [0 1 2 3 4 5 6 7]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Sliceæœ¬èº«æ²¡æœ‰æ•°æ®ï¼Œæ˜¯å¯¹åº•å±‚arrayçš„ä¸€ä¸ªview</p>
</blockquote>
<h3 id="Reslice"><a href="#Reslice" class="headerlink" title="Reslice"></a>Reslice</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">s2 := arr[:]</span><br><span class="line">//[0 1 2 3 4 5 6 7]</span><br><span class="line">s2 = s2[:5]</span><br><span class="line">//[0 1 2 3 4]</span><br><span class="line">s2 = s2[2:]</span><br><span class="line">//[2 3 4]</span><br></pre></td></tr></table></figure>

<h3 id="sliceçš„æ‰©å±•"><a href="#sliceçš„æ‰©å±•" class="headerlink" title="sliceçš„æ‰©å±•"></a>sliceçš„æ‰©å±•</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">//ä¸Šé¢æ˜¯å…ƒç´ æ•°æ®</span><br><span class="line">s1 := arr[2:6]</span><br><span class="line">//[2 3 4 5]</span><br><span class="line">//fmt.Pringln(s1[4])</span><br><span class="line">//ä¸Šé¢è¿™è¡Œæ³¨é‡Šçš„ä»£ç ä¼šæŠ¥ç´¢å¼•è¶Šç•Œå¼‚å¸¸ï¼Œç”¨ä¸‹é¢çš„slice(s2)å¯ä»¥ç»“å±€è¿™ä¸ªé—®é¢˜ï¼Œgolangçš„sliceæœ‰capçš„æ¦‚å¿µ</span><br><span class="line">s2 := s1[3:5]</span><br><span class="line">//[5 6]</span><br></pre></td></tr></table></figure>

<p><strong>ä¸Šé¢è¿™ä¸€å—çš„ä»£ç å›¾è§£å¦‚ä¸‹</strong></p>
<p><img src="/images/img_8.png" alt="sliceæ‰©å±•"></p>
<h3 id="sliceçš„å®ç°"><a href="#sliceçš„å®ç°" class="headerlink" title="sliceçš„å®ç°"></a>sliceçš„å®ç°</h3><p><img src="/images/img_9.png" alt="sliceçš„å®ç°"></p>
<blockquote>
<p>sliceåº•å±‚æœ‰ä¸€ä¸ªarray</p>
</blockquote>
<blockquote>
<p>ptræŒ‡å‘äº†sliceå¼€å¤´çš„å…ƒç´ </p>
</blockquote>
<blockquote>
<p>lenæŒ‡å‘äº†sliceçš„é•¿åº¦ï¼Œä½¿ç”¨slice[n]åªèƒ½å–lené•¿åº¦é‡Œé¢çš„å€¼ï¼Œè¶…è¿‡é•¿åº¦å€¼ä¼šæŠ¥ç´¢å¼•è¶Šç•Œ</p>
</blockquote>
<blockquote>
<p>capä»£è¡¨äº†ä»ptrå¼€å§‹æ•´ä¸ªæ•°ç»„çš„é•¿åº¦ï¼Œæ‰©å±•çš„æ—¶å€™åªè¦ä¸è¶…è¿‡capçš„é•¿åº¦å°±å¯ä»¥</p>
</blockquote>
<blockquote>
<p>sliceå¯ä»¥å‘åæ‰©å±•ï¼Œä½†æ˜¯ä¸å¯ä»¥å¾€å‰æ‰©å±•ï¼Œå‘åæ‰©å±•ä¸å¯ä»¥è¶…è¿‡capçš„é•¿åº¦</p>
</blockquote>
<blockquote>
<p>len(slice)å¯ä»¥å–åˆ°è¿™ä¸ªsliceçš„é•¿åº¦ï¼Œcap(slice)å¯ä»¥å–åˆ°è¿™ä¸ªsliceçš„capé•¿åº¦</p>
</blockquote>
<h2 id="åˆ‡ç‰‡-slice-çš„æ“ä½œ"><a href="#åˆ‡ç‰‡-slice-çš„æ“ä½œ" class="headerlink" title="åˆ‡ç‰‡(slice)çš„æ“ä½œ"></a>åˆ‡ç‰‡(slice)çš„æ“ä½œ</h2><h3 id="sliceçš„appendæ“ä½œ"><a href="#sliceçš„appendæ“ä½œ" class="headerlink" title="sliceçš„appendæ“ä½œ"></a>sliceçš„appendæ“ä½œ</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">arr := [...]int&#123;0,1,2,3,4,5,6,7&#125;</span><br><span class="line">//ä¸Šé¢æ˜¯å…ƒç´ æ•°æ®</span><br><span class="line">s1 := arr[2:6]</span><br><span class="line">//s1---&gt;[2 3 4 5]</span><br><span class="line">//fmt.Pringln(s1[4])</span><br><span class="line">//ä¸Šé¢è¿™è¡Œæ³¨é‡Šçš„ä»£ç ä¼šæŠ¥ç´¢å¼•è¶Šç•Œå¼‚å¸¸ï¼Œç”¨ä¸‹é¢çš„slice(s2)å¯ä»¥ç»“å±€è¿™ä¸ªé—®é¢˜ï¼Œgolangçš„sliceæœ‰capçš„æ¦‚å¿µ</span><br><span class="line">s2 := s1[3:5]</span><br><span class="line">//s2---&gt;[5 6]</span><br><span class="line">s3 := appent(s2,10)</span><br><span class="line">//s3---&gt;[5 6 10]</span><br><span class="line">s4 := appent(s3,11)</span><br><span class="line">//s4---&gt;[5 6 10 11]</span><br><span class="line">s5 := appent(s4,12)</span><br><span class="line">//s5---&gt;[5 6 10 11 12]</span><br><span class="line"></span><br><span class="line">//arræœ€ç»ˆçš„å€¼ä¸º[0 1 2 3 4 5 6 10],arrçš„é•¿åº¦å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œè€Œs4åŠs5æ˜¯å¯¹è¢«æ‰©å±•çš„æ•°ç»„çš„ä¸€ä¸ªviewï¼Œæˆ‘ä»¬æ‹¿ä¸åˆ°æ‰©å±•çš„æ•°ç»„ï¼Œs3 appentè¿‡åä½†æ˜¯ä»–å¹¶æ²¡æœ‰è¶…è¿‡arré•¿åº¦ï¼Œæ‰€ä»¥å¯¹åº•å±‚arrç›¸åº”ç´¢å¼•ä½ç½®çš„æ•°æ®è¿›è¡Œäº†ä¿®æ”¹</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ·»åŠ å…ƒç´ æ—¶å¦‚æœè¶…è¿‡capçš„é•¿åº¦ï¼Œç³»ç»Ÿä¼šé‡æ–°åˆ†é…æ›´å¤§çš„åº•å±‚æ•°ç»„ä½œä¸ºæ–°sliceçš„view</p>
</blockquote>
<blockquote>
<p>å¦‚æœåŸæ¥çš„æ•°ç»„æœ‰ç”¨ç³»ç»Ÿä¼šä¿ç•™ï¼Œå¦‚æœæ²¡ç”¨ä¼šè¢«goçš„åƒåœ¾å›æ”¶æœºåˆ¶ç»™å›æ”¶æ‰</p>
</blockquote>
<blockquote>
<p>ç”±äºå€¼ä¼ é€’çš„å…³ç³»å¿…é¡»æ¥å—appentçš„è¿”å›å€¼ s = append(s,val)</p>
</blockquote>
<h3 id="sliceçš„å…¶å®ƒæ“ä½œ"><a href="#sliceçš„å…¶å®ƒæ“ä½œ" class="headerlink" title="sliceçš„å…¶å®ƒæ“ä½œ"></a>sliceçš„å…¶å®ƒæ“ä½œ</h3><h4 id="sliceçš„åˆ›å»º"><a href="#sliceçš„åˆ›å»º" class="headerlink" title="sliceçš„åˆ›å»º"></a>sliceçš„åˆ›å»º</h4><p><strong>å®šä¹‰ä¸€ä¸ªç©ºçš„sliceé•¿åº¦ä¸º0</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var s []int</span><br></pre></td></tr></table></figure>

<p><strong>å®šä¹‰æŒ‡å®šå…ƒç´ å†…å®¹çš„slice</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s1 := []int&#123;2,4,6,8&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å†…å»ºå‡½æ•°å®šä¹‰lenä¸º16çš„slice</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s2 := make([]int,16)</span><br></pre></td></tr></table></figure>

<p><strong>å†…å»ºå‡½æ•°å®šä¹‰lenä¸º10 capä¸º32 çš„slice</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s3 := make([]int,10,32)</span><br></pre></td></tr></table></figure>

<h4 id="sliceçš„copyåŠå…ƒç´ removeæ“ä½œ"><a href="#sliceçš„copyåŠå…ƒç´ removeæ“ä½œ" class="headerlink" title="sliceçš„copyåŠå…ƒç´ removeæ“ä½œ"></a>sliceçš„copyåŠå…ƒç´ removeæ“ä½œ</h4><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s1 := []int&#123;2,4,6,8&#125;</span><br><span class="line">//s1---&gt;[2 4 6 8]</span><br><span class="line">s2 := make([]int,16)</span><br><span class="line">//s2---&gt;[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]</span><br><span class="line">copy(s2,s1)</span><br><span class="line">//s2---&gt;[2 4 6 8 0 0 0 0 0 0 0 0 0 0 0 0]</span><br></pre></td></tr></table></figure>

<p><strong>å¦‚æœæˆ‘ä»¬æƒ³è¦æŠŠs2ä¸­çš„å…ƒç´ 8åˆ æ‰æ€ä¹ˆæ“ä½œå‘¢</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//s2---&gt;[2 4 6 8 0 0 0 0 0 0 0 0 0 0 0 0]</span><br><span class="line">s2 = append(s2[:3],s2[4:]...)//s2æ‰€åœ¨çš„å‚æ•°åˆ—è¡¨æ˜¯ä¸€ä¸ªå¯å˜å‚ï¼Œå¦‚æœéœ€è¦å°†s2ç´¢å¼•4å³é¢çš„æ‰€æœ‰å…ƒç´ éƒ½é€ä¸ªå®ƒéœ€è¦åŠ ä¸Š...çš„è¯­æ³•</span><br><span class="line">//s2---&gt;[2 4 6 0 0 0 0 0 0 0 0 0 0 0 0]</span><br></pre></td></tr></table></figure>

<p><strong>å»æ‰s2çš„é¦–å°¾æ“ä½œ</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//s2---&gt;[2 4 6 0 0 0 0 0 0 0 0 0 0 0 0]</span><br><span class="line">//è·å–é¦–å…ƒç´ çš„å€¼ï¼Œå¯ä»¥ç”¨äºæ‰“å°</span><br><span class="line">front := s2[0]</span><br><span class="line">//è·å–å°¾å…ƒç´ ï¼Œå¯ä»¥ç”¨äºæ‰“å°</span><br><span class="line">tail := s2[len(s2)-1]</span><br><span class="line">//å‰”é™¤é¦–ä½æ“ä½œ</span><br><span class="line">s2 := s2[1:]</span><br><span class="line">s2 := s2[:len(s2)-1]</span><br><span class="line">//s2---&gt;[4 6 0 0 0 0 0 0 0 0 0 0 0]</span><br></pre></td></tr></table></figure>

<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="Mapçš„åˆ›å»º"><a href="#Mapçš„åˆ›å»º" class="headerlink" title="Mapçš„åˆ›å»º"></a>Mapçš„åˆ›å»º</h3><blockquote>
<p>map[Key]Value åˆ›å»ºå•å±‚Key/Valueç±»å‹çš„Map</p>
</blockquote>
<blockquote>
<p>map[Key1]map[Key2]Value åˆ›å»ºå¤åˆå¤šå±‚çº§Map</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mapDemo := map[string]string&#123;</span><br><span class="line">	&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">	&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">	&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">	&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(mapDemo)</span><br></pre></td></tr></table></figure>

<p><strong>ç©ºmapçš„åˆ›å»º</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//ä½¿ç”¨make</span><br><span class="line">m1 := make(map[string]int)</span><br><span class="line">//m1---&gt;map[] (m1 == empty)</span><br><span class="line">//æˆ–è€…ä½¿ç”¨</span><br><span class="line">var m2 map[string]int</span><br><span class="line">//m2---&gt;map[] (m2 == nil)</span><br><span class="line"></span><br><span class="line">//goè¯­è¨€ä¸­çš„nilåŠemptyæ˜¯å¯ä»¥å‚ä¸è¿ç®—çš„ï¼Œè·Ÿå…¶å®ƒè¯­è¨€æœ‰æ‰€åŒºåˆ«ï¼Œå€¼æ˜¯nilä¹Ÿå¯ä»¥å¾ˆå®‰å…¨çš„ä½¿ç”¨</span><br></pre></td></tr></table></figure>

<h3 id="Mapçš„è¿­ä»£"><a href="#Mapçš„è¿­ä»£" class="headerlink" title="Mapçš„è¿­ä»£"></a>Mapçš„è¿­ä»£</h3><p><strong>ä½¿ç”¨rangeå¯¹mapè¿›è¡Œè¿­ä»£</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func mapIterate() &#123;</span><br><span class="line">	mapDemo := map[string]string&#123;</span><br><span class="line">		&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">		&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">		&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">		&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(mapDemo)</span><br><span class="line">	for k,v := range mapDemo&#123;</span><br><span class="line">		fmt.Println(k,v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//mapæ‰“å°å‡ºæ¥çš„å€¼æˆ‘ä»¬å‘ç°mapä¸­çš„å…ƒç´ æ˜¯æ— åºçš„</span><br></pre></td></tr></table></figure>

<h3 id="mapè·å–æŒ‡å®šå…ƒç´ "><a href="#mapè·å–æŒ‡å®šå…ƒç´ " class="headerlink" title="mapè·å–æŒ‡å®šå…ƒç´ "></a>mapè·å–æŒ‡å®šå…ƒç´ </h3><p><strong>é€šè¿‡keyè·å–mapä¸­valueçš„å€¼</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func mapDemo() &#123;</span><br><span class="line">	mapDemo := map[string]string&#123;</span><br><span class="line">		&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">		&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">		&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">		&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">	&#125;</span><br><span class="line">	courseName := mapDemo[&quot;course&quot;]</span><br><span class="line">	fmt.Println(courseName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœmapä¸­æ²¡æœ‰è¿™ä¸ªkeyçš„è¯è·å–mapçš„å€¼ä¸ä¼šæŠ¥é”™ï¼Œä»–æ˜¯ä¸€ä¸ªç©ºä¸²ï¼ŒPrintlnä»–ä¼šæ‰“å°ä¸€ä¸ªç©ºè¡Œ</p>
</blockquote>
<h3 id="åˆ¤æ–­mapä¸­çš„æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­mapä¸­çš„æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­mapä¸­çš„æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­mapä¸­çš„æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨</h3><p><strong>åˆ¤æ–­å…ƒç´ åœ¨mapä¸­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™æ‰“å°ï¼Œä¸å­˜åœ¨ä¸æ‰“å°</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func mapDemo() &#123;</span><br><span class="line">	mapDemo := map[string]string&#123;</span><br><span class="line">		&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">		&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">		&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">		&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">	&#125;</span><br><span class="line">	if courseName, ok := mapDemo[&quot;course&quot;]; ok &#123;</span><br><span class="line">		fmt.Println(courseName)</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		fmt.Println(&quot;key does not exist&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="mapåˆ é™¤æŒ‡å®šå…ƒç´ "><a href="#mapåˆ é™¤æŒ‡å®šå…ƒç´ " class="headerlink" title="mapåˆ é™¤æŒ‡å®šå…ƒç´ "></a>mapåˆ é™¤æŒ‡å®šå…ƒç´ </h3><p><strong>åˆ é™¤mapä¸­çš„æŒ‡å®škey</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func mapDemo() &#123;</span><br><span class="line">	mapDemo := map[string]string&#123;</span><br><span class="line">		&quot;name&quot;:    &quot;anakin&quot;,</span><br><span class="line">		&quot;course&quot;:  &quot;java&quot;,</span><br><span class="line">		&quot;site&quot;:    &quot;imooc&quot;,</span><br><span class="line">		&quot;quality&quot;: &quot;notbad&quot;,</span><br><span class="line">	&#125;</span><br><span class="line">	delete(mapDemo,&quot;name&quot;)</span><br><span class="line">	//åˆ é™¤keyä¸ºnameçš„å…ƒç´ ï¼Œåé¢çš„key does not existæç¤ºå°†ä¼šè¢«æ‰“å°</span><br><span class="line">	if courseName, ok := mapDemo[&quot;name&quot;]; ok &#123;</span><br><span class="line">		fmt.Println(courseName)</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		fmt.Println(&quot;key does not exist&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹æ‰èƒ½ä½œä¸ºmapçš„keyå‘¢"><a href="#ä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹æ‰èƒ½ä½œä¸ºmapçš„keyå‘¢" class="headerlink" title="ä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹æ‰èƒ½ä½œä¸ºmapçš„keyå‘¢"></a>ä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹æ‰èƒ½ä½œä¸ºmapçš„keyå‘¢</h3><blockquote>
<p>mapä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œå¿…é¡»å¯ä»¥æ¯”è¾ƒç›¸ç­‰</p>
</blockquote>
<blockquote>
<p>é™¤äº†sliceï¼Œmapï¼Œfunctionçš„å†…å»ºç±»å‹éƒ½å¯ä»¥ä½œä¸ºkey</p>
</blockquote>
<blockquote>
<p>Struct(è‡ªå»º)ç±»å‹ä¸åŒ…å«ä¸Šè¿°å­—æ®µä¹Ÿå¯ä»¥ä½œä¸ºkey</p>
</blockquote>
<blockquote>
<p>goåœ¨ç¼–è¯‘å™¨ä¼šå¯¹ä¸Šè¿°æ¡ä»¶è¿›è¡Œæ£€æŸ¥</p>
</blockquote>
<h3 id="mapå®ç°leetCodeç®—æ³•3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#mapå®ç°leetCodeç®—æ³•3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="mapå®ç°leetCodeç®—æ³•3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a>mapå®ç°leetCodeç®—æ³•3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h3><p><strong>è‹±æ–‡ç‰ˆ</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func lengthOfLongestSubstring(s string) int &#123;</span><br><span class="line">    //è®°å½•æ¯ä¸ªå­—æ¯æœ€åå‡ºç°çš„ä½ç½®</span><br><span class="line">    lastOccurred := make(map[byte]int)</span><br><span class="line">    start := 0</span><br><span class="line">    maxLenght := 0</span><br><span class="line">    for i,ch := range []byte(s) &#123;</span><br><span class="line">        //æœ‰å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªmapè·å–å‡ºæ¥çš„å€¼æ˜¯0,è€Œ0åˆæ˜¯ä¸€ä¸ªåˆæ³•çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥è¦åˆ¤æ–­è¿™ä¸ªkeyæ˜¯å¦å­˜åœ¨</span><br><span class="line">        if lastI,ok := lastOccurred[ch] ; ok &amp;&amp; lastI &gt;= start &#123;</span><br><span class="line">            start = lastOccurred[ch] +1</span><br><span class="line">        &#125;</span><br><span class="line">        if i - start +1 &gt; maxLenght &#123;</span><br><span class="line">            maxLenght = i - start + 1</span><br><span class="line">        &#125;</span><br><span class="line">        lastOccurred[ch] = i</span><br><span class="line">    &#125;</span><br><span class="line">    return maxLenght</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å›½é™…ç‰ˆ</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func lengthOfLongestSubstring(s string) int &#123;</span><br><span class="line">    //è®°å½•æ¯ä¸ªå­—æ¯æœ€åå‡ºç°çš„ä½ç½®</span><br><span class="line"> Â  Â lastOccurred := make(map[rune]int)</span><br><span class="line">    start := 0</span><br><span class="line">    maxLenght := 0</span><br><span class="line"> Â  Â for i,ch := range []rune(s) &#123;</span><br><span class="line">        //æœ‰å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªmapè·å–å‡ºæ¥çš„å€¼æ˜¯0,è€Œ0åˆæ˜¯ä¸€ä¸ªåˆæ³•çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥è¦åˆ¤æ–­è¿™ä¸ªkeyæ˜¯å¦å­˜åœ¨</span><br><span class="line">        if lastI,ok := lastOccurred[ch] ; ok &amp;&amp; lastI &gt;= start &#123;</span><br><span class="line">            start = lastOccurred[ch] +1</span><br><span class="line">        &#125;</span><br><span class="line">        if i - start +1 &gt; maxLenght &#123;</span><br><span class="line">            maxLenght = i - start + 1</span><br><span class="line">        &#125;</span><br><span class="line">        lastOccurred[ch] = i</span><br><span class="line">    &#125;</span><br><span class="line">    return maxLenght</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h1><blockquote>
<p>goè¯­è¨€ä»…æ”¯æŒå°è£…ï¼Œä¸æ”¯æŒç»§æ‰¿å’Œå¤šæ€</p>
</blockquote>
<blockquote>
<p>goè¯­è¨€æ²¡æœ‰classï¼Œåªæœ‰struct</p>
</blockquote>
<h2 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h2><h3 id="ç»“æ„ä½“å®šä¹‰"><a href="#ç»“æ„ä½“å®šä¹‰" class="headerlink" title="ç»“æ„ä½“å®šä¹‰"></a>ç»“æ„ä½“å®šä¹‰</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰ç»“æ„ä½“</span><br><span class="line">type TreeNode struct &#123;</span><br><span class="line">	value int</span><br><span class="line">	left,right *TreeNode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å¯¹ç»“æ„ä½“æ•°æ®è¿›è¡Œå¤„ç†</span><br><span class="line">func main() &#123;</span><br><span class="line">	node1 := TreeNode&#123;value: 3&#125;</span><br><span class="line">	left := TreeNode&#123;value: 1&#125;</span><br><span class="line">	right := TreeNode&#123;value: 2&#125;</span><br><span class="line">	node1.left = &amp;left</span><br><span class="line">	node1.right = &amp;right</span><br><span class="line">	fmt.Println(node1)</span><br><span class="line">&#125;</span><br><span class="line">//æ‰“å°ç»“æœ</span><br><span class="line">&#123;3 0xc000004480 0xc0000044a0&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>goè¯­è¨€æ²¡æœ‰æ„é€ å‡½æ•°çš„è¯´æ³•,ä½†æ˜¯å¯ä»¥ä½¿ç”¨funcå®ç°è‡ªå®šä¹‰å·¥å‚æ„é€ å‡½æ•°</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func createNode(value int) *TreeNode &#123;</span><br><span class="line">	//c**å‡½æ•°è¿”å›å±€éƒ¨å˜é‡ä¸å¯ç”¨ï¼Œä¸è¿‡åœ¨goè¯­è¨€ä¸­æ˜¯å¯ä»¥çš„</span><br><span class="line">	//æ³¨æ„è¿”å›çš„æ˜¯å±€éƒ¨å˜é‡çš„åœ°å€</span><br><span class="line">	return &amp;TreeNode&#123;value: value&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•"><a href="#ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•" class="headerlink" title="ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•"></a>ä¸ºç»“æ„ä½“å®šä¹‰æ–¹æ³•</h3><blockquote>
<p>ç»“æ„ä½“çš„æ–¹æ³•æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒåœ¨å‡½æ•°åå‰é¢å¤šäº†ä¸€ä¸ªæ¥æ”¶è€…</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰ç»“æ„ä½“æ–¹æ³•</span><br><span class="line">func (node TreeNode) print() &#123;</span><br><span class="line">	fmt.Print(node.value)</span><br><span class="line">&#125;</span><br><span class="line">//ä½¿ç”¨ç»“æ„ä½“æ–¹æ³•</span><br><span class="line">func main() &#123;</span><br><span class="line">	node := TreeNode&#123;value: 3&#125;</span><br><span class="line">	node.print()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>goè¯­è¨€ä¸­æ‰€æœ‰æ–¹æ³•å‚æ•°çš„ä¼ é€’éƒ½æ˜¯å€¼ä¼ é€’ï¼Œå‚æ•°ä¼šè¢«copyæ‰§è¡Œï¼Œæ‰§è¡Œè¿‡åä¼ é€’çš„å‚æ•°å¹¶æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå¦‚éœ€ä¿®æ”¹éœ€è¦ä½¿ç”¨æŒ‡é’ˆ</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">type TreeNode struct &#123;</span><br><span class="line">	value int</span><br><span class="line">	left,right *TreeNode</span><br><span class="line">&#125;</span><br><span class="line">func (node TreeNode) print() &#123;</span><br><span class="line">	fmt.Println(node.value)</span><br><span class="line">&#125;</span><br><span class="line">func (node TreeNode) setVal(value int)  &#123;</span><br><span class="line">	node.value = value</span><br><span class="line">&#125;</span><br><span class="line">//è§£å†³å€¼ä¼ é€’é—®é¢˜éœ€è¦åŠ *å·ä»¥æŒ‡é’ˆçš„æ–¹å¼å³å¯ä¿®æ”¹ä¼ é€’è¿‡æ¥çš„å€¼</span><br><span class="line">func (node *TreeNode) setValue(value int)  &#123;</span><br><span class="line">	node.value = value</span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">	node := TreeNode&#123;&#125;</span><br><span class="line">	node.print()</span><br><span class="line">	//æ‰“å°å€¼ä¸º0</span><br><span class="line">	node.setVal(1)</span><br><span class="line">	node.print()</span><br><span class="line">	//æ‰“å°å€¼ä¸º0</span><br><span class="line">	node.setValue(2)</span><br><span class="line">	node.print()</span><br><span class="line">	//æ‰“å°å€¼ä¸º2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ–¹æ³•çš„å€¼æ¥æ”¶è€…ä¸æŒ‡é’ˆæ¥æ”¶è€…åŸåˆ™"><a href="#æ–¹æ³•çš„å€¼æ¥æ”¶è€…ä¸æŒ‡é’ˆæ¥æ”¶è€…åŸåˆ™" class="headerlink" title="æ–¹æ³•çš„å€¼æ¥æ”¶è€…ä¸æŒ‡é’ˆæ¥æ”¶è€…åŸåˆ™"></a>æ–¹æ³•çš„å€¼æ¥æ”¶è€…ä¸æŒ‡é’ˆæ¥æ”¶è€…åŸåˆ™</h3><blockquote>
<p>è¦æ”¹å˜å†…å®¹å¿…é¡»ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…</p>
</blockquote>
<blockquote>
<p>ç»“æ„è¿‡å¤§ä¹Ÿè¦è€ƒè™‘ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…</p>
</blockquote>
<blockquote>
<p>ä¸€è‡´æ€§ï¼šå¦‚æœæœ‰æŒ‡é’ˆæ¥æ”¶è€…ï¼Œæœ€å¥½éƒ½æ˜¯ç”¨æŒ‡é’ˆæ¥æ”¶è€…</p>
</blockquote>
<blockquote>
<p><strong>å€¼æ¥æ”¶è€…</strong>æ˜¯goè¯­è¨€ç‰¹æœ‰</p>
</blockquote>
<blockquote>
<p>å€¼/æŒ‡é’ˆæ¥æ”¶è€…æ—¢å¯ä»¥æ¥æ”¶å€¼ä¹Ÿå¯ä»¥æ¥æ”¶æŒ‡é’ˆ</p>
</blockquote>
<h3 id="éå†æ ‘"><a href="#éå†æ ‘" class="headerlink" title="éå†æ ‘"></a>éå†æ ‘</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">type TreeNode struct &#123;</span><br><span class="line">	value int</span><br><span class="line">	left,right *TreeNode</span><br><span class="line">&#125;</span><br><span class="line">func (node TreeNode) print() &#123;</span><br><span class="line">	fmt.Print(node.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (node *TreeNode) traverse() &#123;</span><br><span class="line">	if node == nil &#123;</span><br><span class="line">		return</span><br><span class="line">	&#125;</span><br><span class="line">	node.left.traverse()</span><br><span class="line">	node.print()</span><br><span class="line">	node.right.traverse()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	root := TreeNode&#123;value:3&#125;</span><br><span class="line">	root.left = &amp;TreeNode&#123;&#125;</span><br><span class="line">	root.right = &amp;TreeNode&#123;value: 5&#125;</span><br><span class="line">	root.left.right = &amp;TreeNode&#123;value: 2&#125;</span><br><span class="line">	root.right.left = &amp;TreeNode&#123;value: 4&#125;</span><br><span class="line">	root.traverse()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰§è¡Œç»“æœ 0 2 3 4 5</p>
</blockquote>
<p><strong>éå†æ ‘å›¾è§£</strong></p>
<p><img src="/images/img_10.png" alt="éå†æ ‘"></p>
<blockquote>
<p>traverse()å‡½æ•°å…ˆéå†å·¦è¾¹å†éå†è‡ªå·±å†éå†å³è¾¹å¾€å¤é€’å½’</p>
</blockquote>
<h2 id="å°è£…å’ŒåŒ…"><a href="#å°è£…å’ŒåŒ…" class="headerlink" title="å°è£…å’ŒåŒ…"></a>å°è£…å’ŒåŒ…</h2><h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p><strong>å®šä¹‰å®Œæ–¹æ³•æˆ‘ä»¬ä¸€èˆ¬è¦è¿›è¡Œå°è£…</strong></p>
<blockquote>
<p>goè¯­è¨€åå­—ä¸€èˆ¬ä½¿ç”¨CamelCase</p>
</blockquote>
<blockquote>
<p>æ–¹æ³•ç»“æ„å¸¸é‡ç­‰å®šä¹‰é¦–å­—æ¯å¤§å†™ä»£è¡¨ï¼špublic(é’ˆå¯¹åŒ…)ï¼Œ</p>
</blockquote>
<blockquote>
<p>æ–¹æ³•ç»“æ„å¸¸é‡ç­‰å®šä¹‰é¦–å­—æ¯å°å†™ä»£è¡¨ï¼šprivate(é’ˆå¯¹åŒ…)ï¼Œ</p>
</blockquote>
<h3 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h3><blockquote>
<p>æ¯ä¸ªç›®å½•åªèƒ½æœ‰ä¸€ä¸ªåŒ…ï¼ŒåŒ…åä¸ä¸€å®šå’Œç›®å½•åä¸€æ ·</p>
</blockquote>
<blockquote>
<p>mainåŒ…åŒ…å«å’Œæ‰§è¡Œå…¥å£</p>
</blockquote>
<blockquote>
<p>ä¸€ä¸ªç›®å½•ä¸‹é¢mainå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªmainåŒ…,å¦åˆ™æˆ‘ä»¬éœ€è¦ç»™ç›®å½•èµ·ä¸€ä¸ªå…¶å®ƒçš„åå­—</p>
</blockquote>
<blockquote>
<p>ä¸ºç»“æ„å®šä¹‰æ–¹æ³•å¿…é¡»æ”¾åœ¨åŒä¸€ä¸ªåŒ…å†…ï¼Œä½†æ˜¯å¯ä»¥æ˜¯ä¸åŒçš„æ–‡ä»¶</p>
</blockquote>
<h3 id="æ‰©å±•å·²æœ‰ç±»å‹"><a href="#æ‰©å±•å·²æœ‰ç±»å‹" class="headerlink" title="æ‰©å±•å·²æœ‰ç±»å‹"></a>æ‰©å±•å·²æœ‰ç±»å‹</h3><blockquote>
<p>æ‰©å±•å·²æœ‰ç±»å‹å¯ä»¥<u><strong>å®šä¹‰åˆ«å</strong></u>æˆ–è€…<u><strong>ä½¿ç”¨ç»„åˆ</strong></u></p>
</blockquote>
<p><strong>åŒ…è£…TreeNodeä¸ºMyTreeNodeå®ç°æ–°çš„éå†æ–¹å¼</strong>è¿™é‡Œä½¿ç”¨çš„æ–¹å¼æ˜¯<u><strong>ç»„åˆ</strong></u></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/tree&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type MyTreeNode struct &#123;</span><br><span class="line">	node *tree.Node</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (myNode *MyTreeNode) postOrder() &#123;</span><br><span class="line">	if myNode == nil || myNode.node == nil &#123;</span><br><span class="line">		return</span><br><span class="line">	&#125;</span><br><span class="line">	left := MyTreeNode&#123;myNode.node.Left&#125;</span><br><span class="line">	left.postOrder()</span><br><span class="line">	right := MyTreeNode&#123;myNode.node.Right&#125;</span><br><span class="line">	right.postOrder()</span><br><span class="line">	myNode.node.Print()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	root := tree.Node&#123;Value: 3&#125;</span><br><span class="line">	root.Left = &amp;tree.Node&#123;&#125;</span><br><span class="line">	root.Right = &amp;tree.Node&#123;Value: 5&#125;</span><br><span class="line">	root.Left.Right = &amp;tree.Node&#123;Value: 2&#125;</span><br><span class="line">	root.Right.Left = &amp;tree.Node&#123;Value: 4&#125;</span><br><span class="line">	root.Traverse()</span><br><span class="line">	fmt.Println()</span><br><span class="line">	node := MyTreeNode&#123;&amp;root&#125;</span><br><span class="line">	node.postOrder()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ ‘è¿˜æ˜¯ä¹‹å‰çš„æ ‘ï¼Œå°±ä¸å›¾è§£äº†ï¼Œéå†ç»“æœä¸º 2 0 4 5 3</p>
</blockquote>
<p><strong>å®šä¹‰sliceçš„åˆ«åå®ç°ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Queue.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package queue</span><br><span class="line"></span><br><span class="line">//å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—ï¼Œxianï¼Œå®ƒæ˜¯ä¸€ä¸ªintç±»å‹çš„slice</span><br><span class="line">type Queue []int</span><br><span class="line"></span><br><span class="line">//æ¨è¿›é˜Ÿåˆ—</span><br><span class="line">func (q *Queue) Push(v int) &#123;</span><br><span class="line">	*q = append(*q,v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å¼¹å‡ºé˜Ÿåˆ—</span><br><span class="line">func (q *Queue) Pop() int &#123;</span><br><span class="line">	head := (*q)[0]</span><br><span class="line">	*q = (*q)[1:]</span><br><span class="line">	return head</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//é˜Ÿåˆ—å…ƒç´ æ˜¯å¦ä¸ºç©º</span><br><span class="line">func (q *Queue) IsEmpty() bool &#123;</span><br><span class="line">	return len(*q) == 0</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/queue&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	q := queue.Queue&#123;1&#125;</span><br><span class="line">	q.Push(2)</span><br><span class="line">	q.Push(3)</span><br><span class="line">	fmt.Println(q.Pop())</span><br><span class="line">	fmt.Println(q.Pop())</span><br><span class="line">	fmt.Println(q.IsEmpty())</span><br><span class="line">	fmt.Println(q.Pop())</span><br><span class="line">	fmt.Println(q.IsEmpty())</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p><strong>æ‰“å°ç»“æœ</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">false</span><br><span class="line">3</span><br><span class="line">true</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…ç¬¬ä¸‰æ–¹åŒ…goimports"><a href="#å®‰è£…ç¬¬ä¸‰æ–¹åŒ…goimports" class="headerlink" title="å®‰è£…ç¬¬ä¸‰æ–¹åŒ…goimports"></a>å®‰è£…ç¬¬ä¸‰æ–¹åŒ…goimports</h3><blockquote>
<p>ç§»åŠ¨åˆ°ä¸€ä¸‹ç›®å½•%GOPATH%/src/golang.org/xä»githubä¸Šdownloadä»¥ä¸‹åŒ…</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:golang/tools.git</span><br></pre></td></tr></table></figure>

<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:golang/mod.git</span><br></pre></td></tr></table></figure>

<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:golang/xerrors.git</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œå‘½ä»¤å®‰è£…goimports</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//è¯·å°†%GOPATH%æ›¿æ¢ä¸ºç»å¯¹è·¯å¾„åæ‰§è¡Œå‘½ä»¤</span><br><span class="line">go install %GOPATH%/src/golang.org/x/tools/cmd/goimports</span><br></pre></td></tr></table></figure>

<p><strong>å°è¯•ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;golang.org/x/tools/container/intsets&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func testSparse() &#123;</span><br><span class="line">	sparse := intsets.Sparse&#123;&#125;</span><br><span class="line">	sparse.Insert(1)</span><br><span class="line">	sparse.Insert(2)</span><br><span class="line">	sparse.Insert(3)</span><br><span class="line">	sparse.Insert(4)</span><br><span class="line">	fmt.Println(sparse.Has(5))</span><br><span class="line">	fmt.Println(sparse.Has(4))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	testSparse()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="GOPATHç›®å½•ç»“æ„"><a href="#GOPATHç›®å½•ç»“æ„" class="headerlink" title="GOPATHç›®å½•ç»“æ„"></a>GOPATHç›®å½•ç»“æ„</h3><blockquote>
<p><strong>go build</strong>è¿›è¡Œç¼–è¯‘</p>
</blockquote>
<blockquote>
<p><strong>go install</strong>äº§ç”Ÿpkgæ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶</p>
</blockquote>
<blockquote>
<p><strong>go run</strong>ç›´æ¥ç¼–è¯‘è¿è¡Œ</p>
</blockquote>
<blockquote>
<p>src</p>
<blockquote>
<p>git repository1<br>git repository2</p>
</blockquote>
</blockquote>
<blockquote>
<p>pkg</p>
<blockquote>
<p>git repository1<br>git repository2</p>
</blockquote>
</blockquote>
<blockquote>
<p>bin</p>
<blockquote>
<p>å¯æ‰§è¡Œæ–‡ä»¶1ï¼Œ2ï¼Œ3</p>
</blockquote>
</blockquote>
<h1 id="é¢å‘æ¥å£"><a href="#é¢å‘æ¥å£" class="headerlink" title="é¢å‘æ¥å£"></a>é¢å‘æ¥å£</h1><blockquote>
<p>goè¯­è¨€çš„æ¥å£æ˜¯<strong>ä½¿ç”¨è€…å®šä¹‰çš„</strong></p>
</blockquote>
<blockquote>
<p>æ¥å£å®ç°æ˜¯éšå¼çš„ï¼Œæ— éœ€æ³¨æ˜å®ç°äº†å“ªä¸ªæ¥å£ï¼Œåªéœ€æ‹¥æœ‰æ¥å£åŒæ ·çš„æ–¹æ³•</p>
</blockquote>
<blockquote>
<p>æ¥å£å˜é‡è‡ªå¸¦æŒ‡é’ˆ</p>
</blockquote>
<blockquote>
<p>æ¥å£å˜é‡åŒæ ·é‡‡ç”¨å€¼ä¼ é€’ï¼Œå‡ ä¹ä¸éœ€è¦ä½¿ç”¨æ¥å£çš„æŒ‡é’ˆ</p>
</blockquote>
<blockquote>
<p>æŒ‡é’ˆæ¥æ”¶è€…å®ç°åªèƒ½ä»¥æŒ‡é’ˆçš„æ–¹å¼ä½¿ç”¨ï¼›å€¼æ¥æ”¶è€…ä¸¤è€…éƒ½å¯ä»¥</p>
</blockquote>
<blockquote>
<p>æ¥å£å˜é‡å¼ºåˆ¶è½¬æ¢ç”¨å˜é‡æ¥æ”¶ååé¢åŠ â€™,okâ€™,å¯ä»¥ä½¿ç”¨okåˆ¤æ–­æ˜¯å¦è¯¥ç±»å‹ï¼Œå­¦åå«<strong>Type assertion</strong></p>
</blockquote>
<blockquote>
<p>é™¤äº†ä½¿ç”¨<strong>Type assertion</strong>æ–¹å¼åˆ¤æ–­ç±»å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<strong>switch case</strong>è¯­å¥çš„æ–¹å¼æ¥åˆ¤æ–­ç±»å‹å¹¶æ‰§è¡Œç›¸å…³é€»è¾‘</p>
</blockquote>
<blockquote>
<p>interface{} å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹</p>
</blockquote>
<h2 id="æ¥å£å®šä¹‰"><a href="#æ¥å£å®šä¹‰" class="headerlink" title="æ¥å£å®šä¹‰"></a>æ¥å£å®šä¹‰</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">mockretriever.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package mock</span><br><span class="line"></span><br><span class="line">type Retriever struct &#123;</span><br><span class="line">	Contents string</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰æ¥å£å®ç°ï¼Œæ— éœ€æŒ‡æ˜å®ç°äº†å“ªä¸ªæ¥å£ï¼Œæ–¹æ³•åªéœ€è¦å®ç°æ¥å£ä¸­çš„æ–¹æ³•</span><br><span class="line">func (r Retriever) Get(url string) string &#123;</span><br><span class="line">	return r.Contents</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">realretriever.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package rel</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;net/http/httputil&quot;</span><br><span class="line">	&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type Retriever struct &#123;</span><br><span class="line">	UserAgent string</span><br><span class="line">	TimeOut time.Duration</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰æ¥å£å®ç°ï¼Œæ— éœ€æŒ‡æ˜å®ç°äº†å“ªä¸ªæ¥å£ï¼Œæ–¹æ³•åªéœ€è¦å®ç°æ¥å£ä¸­çš„æ–¹æ³•</span><br><span class="line">func (r Retriever) Get(url string) string &#123;</span><br><span class="line">	resp, err := http.Get(url)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	result, err := httputil.DumpResponse(resp, true)</span><br><span class="line">	resp.Body.Close()</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	return string(result)</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/retriever/mock&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/retriever/rel&quot;</span><br><span class="line">)</span><br><span class="line">//å®šä¹‰æ¥å£</span><br><span class="line">type Retriever interface &#123;</span><br><span class="line">	Get(url string) string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func download(r Retriever) string &#123;</span><br><span class="line">	return r.Get(&quot;http://www.baidu.com&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	//æ¥å£å˜é‡(é‡Œé¢æœ‰æ˜¯é—²ç€ç±»å‹/å®ç°è€…çš„å€¼æˆ–å®ç°è€…çš„æŒ‡é’ˆ(å®ƒæŒ‡å‘äº†ä¸€ä¸ªå®ç°è€…))</span><br><span class="line">	//ä¸è¦ä½¿ç”¨æ¥å£å˜é‡çš„åœ°å€ï¼Œå› ä¸ºæ¥å£å˜é‡æœ¬èº«å¯ä»¥åŒ…å«æŒ‡é’ˆï¼Œå†…éƒ¨æŒ‡å‘å®ç°è€…å³å¯</span><br><span class="line">	var r Retriever</span><br><span class="line">	//å‡çš„retriever</span><br><span class="line">	r = mock.Retriever&#123;Contents: &quot;this is a fack imooc.com&quot;&#125;</span><br><span class="line">	fmt.Println(download(r))</span><br><span class="line">	//çœŸå®çš„retriever</span><br><span class="line">	r = rel.Retriever&#123;&#125;</span><br><span class="line">	fmt.Println(download(r))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¥å£ç»„åˆ"><a href="#æ¥å£ç»„åˆ" class="headerlink" title="æ¥å£ç»„åˆ"></a>æ¥å£ç»„åˆ</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">mockretriever.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package mock</span><br><span class="line"></span><br><span class="line">type (</span><br><span class="line">	Retriever struct &#123;</span><br><span class="line">		Contents string</span><br><span class="line">	&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func (r *Retriever) Post(url string, form map[string]string) string &#123;</span><br><span class="line">	r.Contents = form[&quot;contents&quot;]</span><br><span class="line">	return &quot;ok&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (r *Retriever) Get(url string) string &#123;</span><br><span class="line">	return r.Contents</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/retriever/mock&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type Retriever interface &#123;</span><br><span class="line">	Get(url string) string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Poster interface &#123;</span><br><span class="line">	Post(url string,form map[string]string) string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func download(r Retriever) string &#123;</span><br><span class="line">	return r.Get(&quot;http://www.baidu.com&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func post(poster Poster) &#123;</span><br><span class="line">	poster.Post(&quot;http:www.baidu.com&quot;, map[string]string&#123;&quot;name&quot;:&quot;zhangsan&quot;,&quot;course&quot;:&quot;java&quot;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type RetrieverPoster interface &#123;</span><br><span class="line">	Retriever</span><br><span class="line">	Poster</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const url = &quot;http://www.baidu.com&quot;</span><br><span class="line">func session(s RetrieverPoster) string&#123;</span><br><span class="line">	s.Post(url, map[string]string&#123;&quot;contents&quot;:&quot;anather faked imooc.com&quot;&#125;)</span><br><span class="line">	return s.Get(url)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	var r RetrieverPoster</span><br><span class="line">	r = &amp;mock.Retriever&#123;Contents: &quot;this is a fack imooc.com&quot;&#125;</span><br><span class="line">	//type assertion</span><br><span class="line">	if mockRetriever,ok := r.(*mock.Retriever); ok&#123;</span><br><span class="line">		fmt.Println(mockRetriever.Contents)</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		fmt.Println(&quot;not a mock retriever&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(session(r))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¸¸ç”¨æ ‡å‡†æ¥å£"><a href="#å¸¸ç”¨æ ‡å‡†æ¥å£" class="headerlink" title="å¸¸ç”¨æ ‡å‡†æ¥å£"></a>å¸¸ç”¨æ ‡å‡†æ¥å£</h2><h3 id="print-go-â€”-gt-fmt-Stringer-String-string"><a href="#print-go-â€”-gt-fmt-Stringer-String-string" class="headerlink" title="print.go â€”&gt; fmt.Stringer#String() (string)"></a>print.go â€”&gt; fmt.Stringer#String() (string)</h3><blockquote>
<p>è¯¥æ¥å£ç›¸å½“äºå…¶å®ƒè¯­è¨€ä¸­çš„toString</p>
</blockquote>
<h3 id="io-go-â€”-gt-io-Reader-Read-p-byte-n-int-err-error"><a href="#io-go-â€”-gt-io-Reader-Read-p-byte-n-int-err-error" class="headerlink" title="io.go â€”&gt; io.Reader#Read(p []byte) (n int, err error)"></a>io.go â€”&gt; io.Reader#Read(p []byte) (n int, err error)</h3><blockquote>
<p>æ–‡ä»¶ã€ç½‘ç»œã€byteã€sliceã€stringç­‰ç­‰éƒ½ä¼šç”¨Reader#Read</p>
</blockquote>
<h3 id="io-go-â€”-gt-io-Writer-Write-p-byte-n-int-err-error"><a href="#io-go-â€”-gt-io-Writer-Write-p-byte-n-int-err-error" class="headerlink" title="io.go â€”&gt; io.Writer#Write(p []byte) (n int, err error)"></a>io.go â€”&gt; io.Writer#Write(p []byte) (n int, err error)</h3><blockquote>
<p>æ–‡ä»¶ã€ç½‘ç»œã€byteã€sliceã€stringç­‰ç­‰éƒ½ä¼šç”¨Reader#Write</p>
</blockquote>
<h3 id="ä½¿ç”¨io-go-â€”-gt-io-Reader-Read-p-byte-ä»£æ›¿fileç¤ºä¾‹"><a href="#ä½¿ç”¨io-go-â€”-gt-io-Reader-Read-p-byte-ä»£æ›¿fileç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨io.go â€”&gt; io.Reader#Read(p []byte)ä»£æ›¿fileç¤ºä¾‹"></a>ä½¿ç”¨io.go â€”&gt; io.Reader#Read(p []byte)ä»£æ›¿fileç¤ºä¾‹</h3><blockquote>
<p>è¿™é‡Œä¸ä»…å¯ä»¥ä½¿ç”¨æ–‡ä»¶è¿˜å¯ä»¥ä½¿ç”¨å…¶å®ƒå­—ç¬¦ä¸²ç­‰æ•°æ®ç±»å‹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">func printFile(filename string) &#123;</span><br><span class="line">	file, err := os.Open(filename)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	printFileContents(file)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func printFileContents(reader io.Reader) &#123;</span><br><span class="line">	scanner := bufio.NewScanner(reader)</span><br><span class="line">	for scanner.Scan() &#123;</span><br><span class="line">		fmt.Println(scanner.Text())</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	printFile(&quot;basic/loop/abc.txt&quot;)</span><br><span class="line">	s := `abc&quot;d&quot;</span><br><span class="line">	kkkk</span><br><span class="line">	123</span><br><span class="line">	p`</span><br><span class="line">	printFileContents(strings.NewReader(s))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a>å‡½æ•°å¼ç¼–ç¨‹</h1><blockquote>
<p>å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼šå‚æ•°ã€å˜é‡ã€è¿”å›å€¼ç­‰éƒ½å¯ä»¥æ˜¯å‡½æ•°,å¯ä»¥ç»™å‡½æ•°å®ç°æ¥å£</p>
</blockquote>
<blockquote>
<p>é«˜é˜¶å‡½æ•°ï¼šå‡½æ•°çš„å‚æ•°è¿˜æ˜¯ä¸€ä¸ªå‡½æ•°</p>
</blockquote>
<blockquote>
<p>å‡½æ•°â€”&gt;é—­åŒ…</p>
</blockquote>
<blockquote>
<p>æ­£ç»Ÿå‡½æ•°å¼ç¼–ç¨‹</p>
<blockquote>
<p>ä¸å¯å˜æ€§ï¼šä¸èƒ½æœ‰çŠ¶æ€ï¼Œåªæœ‰å¸¸é‡å’Œå‡½æ•°<br>æ­£ç»Ÿå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°<br>goè¯­è¨€å¼é€šç”¨è¯­è¨€ï¼Œä¸ä¼šå†æ­£ç»Ÿå‡½æ•°å¼åšæ–‡ç« </p>
</blockquote>
</blockquote>
<h2 id="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªç´¯åŠ å™¨-é—­åŒ…"><a href="#ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªç´¯åŠ å™¨-é—­åŒ…" class="headerlink" title="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªç´¯åŠ å™¨(é—­åŒ…)"></a>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªç´¯åŠ å™¨(é—­åŒ…)</h2><p><strong>ä»£ç </strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">//å®šä¹‰å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°</span><br><span class="line">func adder() func(int) int &#123;</span><br><span class="line">	sum := 0</span><br><span class="line">	//è¿™é‡Œçš„væ—¢æ˜¯ä¸€ä¸ªå‚æ•°åˆæ˜¯å‡½æ•°ä½“çš„ä¸€ä¸ªå±€éƒ¨å˜é‡</span><br><span class="line">	return  func(v int) int &#123;</span><br><span class="line">		sum += v</span><br><span class="line">		//è¿™é‡Œçš„sumæ˜¯è¿™ä¸ªå‡½æ•°ä½“å¤–é¢å®šä¹‰çš„ï¼Œä»–æ˜¯ä¸€ä¸ªè‡ªæœ‰å˜é‡</span><br><span class="line">		return sum</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	//è¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°å®ä¾‹ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡å‡½æ•°å®ä¾‹å°†å¯¹å®ä¾‹çš„è¿”å›å€¼è¿›è¡Œç´¯åŠ </span><br><span class="line">	funcAdder := adder()</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		fmt.Printf(&quot;0+...+%d = %d\n&quot;,i,funcAdder(i))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œç»“æœ</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">0+...+0 = 0</span><br><span class="line">0+...+1 = 1</span><br><span class="line">0+...+2 = 3</span><br><span class="line">0+...+3 = 6</span><br><span class="line">0+...+4 = 10</span><br><span class="line">0+...+5 = 15</span><br><span class="line">0+...+6 = 21</span><br><span class="line">0+...+7 = 28</span><br><span class="line">0+...+8 = 36</span><br><span class="line">0+...+9 = 45</span><br></pre></td></tr></table></figure>

<p><img src="/images/img_11.png" alt="é—­åŒ…"></p>
<blockquote>
<p><strong>è‡ªç”±å˜é‡</strong>ä¸æ–­åœ°æ‰¾ä¸<strong>å±€éƒ¨å˜é‡</strong>çš„è”ç³»ç„¶åæ•´ä½“è¿”å›ä¸€ä¸ª<strong>é—­åŒ…</strong></p>
</blockquote>
<h2 id="ä»¥æ­£ç»Ÿå‡½æ•°æ–¹å¼å®ç°ç´¯åŠ å™¨"><a href="#ä»¥æ­£ç»Ÿå‡½æ•°æ–¹å¼å®ç°ç´¯åŠ å™¨" class="headerlink" title="ä»¥æ­£ç»Ÿå‡½æ•°æ–¹å¼å®ç°ç´¯åŠ å™¨"></a>ä»¥æ­£ç»Ÿå‡½æ•°æ–¹å¼å®ç°ç´¯åŠ å™¨</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">type innerAdder func(int) (int, innerAdder)</span><br><span class="line"></span><br><span class="line">func adder(base int) innerAdder &#123;</span><br><span class="line">	return func(v int) (int, innerAdder) &#123;</span><br><span class="line">		return base + v, adder(base + v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	innerAdder := adder(0)</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		var s int</span><br><span class="line">		s, innerAdder = innerAdder(i)</span><br><span class="line">		fmt.Printf(&quot;0+...+%d = %d\n&quot;,i,s)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="javaä¸­çš„é—­åŒ…å®ç°ç´¯åŠ å™¨"><a href="#javaä¸­çš„é—­åŒ…å®ç°ç´¯åŠ å™¨" class="headerlink" title="javaä¸­çš„é—­åŒ…å®ç°ç´¯åŠ å™¨"></a>javaä¸­çš„é—­åŒ…å®ç°ç´¯åŠ å™¨</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    private static Function&lt;Integer, Integer&gt; adder() &#123;</span><br><span class="line">        final Holder&lt;Integer&gt; sum = new Holder&lt;&gt;(0);</span><br><span class="line">        return (Integer value) -&gt; &#123;</span><br><span class="line">            sum.value += value;</span><br><span class="line">            return sum.value;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Function&lt;Integer, Integer&gt; adder = adder();</span><br><span class="line">        for (int i = 0; i &lt; 10; i++) &#123;</span><br><span class="line">            System.out.println(adder.apply(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>java8åï¼šä½¿ç”¨Functionæ¥å£å’Œlambdaè¡¨è¾¾å¼æ¥åˆ›å»ºå‡½æ•°å¯¹è±¡</p>
</blockquote>
<blockquote>
<p>åŒ¿åç±»æˆ–è€…lambdaè¡¨è¾¾å¼å‡æ”¯æŒé—­åŒ…</p>
</blockquote>
<h2 id="æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨"><a href="#æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨" class="headerlink" title="æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨"></a>æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">//æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨</span><br><span class="line">func fibonacci() func() int &#123;</span><br><span class="line">	a,b := 0,1</span><br><span class="line">	return func() int &#123;</span><br><span class="line">		a,b = b,a+b</span><br><span class="line">		return a</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	generate := fibonacci()</span><br><span class="line">	fmt.Println(generate())</span><br><span class="line">	fmt.Println(generate())</span><br><span class="line">	fmt.Println(generate())</span><br><span class="line">	fmt.Println(generate())</span><br><span class="line">	fmt.Println(generate())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°io-Readeréå†æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ä¸­çš„æ•°æ®"><a href="#å®ç°io-Readeréå†æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ä¸­çš„æ•°æ®" class="headerlink" title="å®ç°io.Readeréå†æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ä¸­çš„æ•°æ®"></a>å®ç°io.Readeréå†æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ä¸­çš„æ•°æ®</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;bufio&quot;</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;io&quot;</span><br><span class="line">	&quot;strings&quot;</span><br><span class="line">)</span><br><span class="line">//å®šä¹‰å‡½æ•°ç±»å‹</span><br><span class="line">type intGen func() int</span><br><span class="line">//ä¸ºå‡½æ•°ç±»å‹å®ç°æ¥å£</span><br><span class="line">func (g intGen) Read(p []byte) (n int, err error) &#123;</span><br><span class="line">	next := g()</span><br><span class="line">	//æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨æ°¸è¿œè¯»ä¸å®Œåšä¸€ä¸ªé™åˆ¶</span><br><span class="line">	if next &gt; 10000 &#123;</span><br><span class="line">		return 0,io.EOF</span><br><span class="line">	&#125;</span><br><span class="line">	s := fmt.Sprintf(&quot;%d\n&quot;, next)</span><br><span class="line">	//TODO: å¦‚æœpå¤ªå°åˆ™ä¸æ­£ç¡®</span><br><span class="line">	return strings.NewReader(s).Read(p)</span><br><span class="line">&#125;</span><br><span class="line">//æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨(æ›¿æ¢å®šä¹‰ç±»å‹ï¼Œå®ƒå®ç°äº†io.Readeræ¥å£)</span><br><span class="line">func fibonacci() intGen &#123;</span><br><span class="line">	a,b := 0,1</span><br><span class="line">	return func() int &#123;</span><br><span class="line">		a,b = b,a+b</span><br><span class="line">		return a</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//ä¼ é€’readerå®ç°</span><br><span class="line">func printFileContents(reader io.Reader) &#123;</span><br><span class="line">	scanner := bufio.NewScanner(reader)</span><br><span class="line">	//éå†ç”Ÿæˆå™¨ä¸­çš„æ•°æ®</span><br><span class="line">	for scanner.Scan() &#123;</span><br><span class="line">		fmt.Println(scanner.Text())</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//ä¸»å‡½æ•°</span><br><span class="line">func main() &#123;</span><br><span class="line">	//å®ç°readerçš„æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨</span><br><span class="line">	generate := fibonacci()</span><br><span class="line">	//è¯»å–æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨çš„æ•°æ®</span><br><span class="line">	printFileContents(generate)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="éå†äºŒå‰æ ‘ä¼ é€’éå†è¿‡ç¨‹ä¸­çš„æ“ä½œ"><a href="#éå†äºŒå‰æ ‘ä¼ é€’éå†è¿‡ç¨‹ä¸­çš„æ“ä½œ" class="headerlink" title="éå†äºŒå‰æ ‘ä¼ é€’éå†è¿‡ç¨‹ä¸­çš„æ“ä½œ"></a>éå†äºŒå‰æ ‘ä¼ é€’éå†è¿‡ç¨‹ä¸­çš„æ“ä½œ</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">node.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package tree</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func (node Node) setVal(value int)  &#123;</span><br><span class="line">	node.Value = value</span><br><span class="line">&#125;</span><br><span class="line">func (node *Node) setValue(value int)  &#123;</span><br><span class="line">	node.Value = value</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰ç±»å‹</span><br><span class="line">type Node struct &#123;</span><br><span class="line">	Value      int</span><br><span class="line">	Left,Right *Node</span><br><span class="line">&#125;</span><br><span class="line">//å®šä¹‰print</span><br><span class="line">func (node Node) Print() &#123;</span><br><span class="line">	fmt.Print(node.Value,&quot; &quot;)</span><br><span class="line">&#125;</span><br><span class="line">//éå†æ ‘</span><br><span class="line">func (node *Node) Traverse() &#123;</span><br><span class="line">	node.TraverseFunc(func(n *Node) &#123;</span><br><span class="line">		if node == nil &#123;</span><br><span class="line">			return</span><br><span class="line">		&#125;</span><br><span class="line">		n.Print()</span><br><span class="line">	&#125;)</span><br><span class="line">	fmt.Println()</span><br><span class="line">&#125;</span><br><span class="line">//éå†æ ‘åŒæ—¶åšä»€ä¹ˆæ“ä½œç”±ä¼ é€’çš„å‡½æ•°å†³å®š</span><br><span class="line">func (node *Node) TraverseFunc(f func(node *Node)) &#123;</span><br><span class="line">	if node == nil &#123;</span><br><span class="line">		return</span><br><span class="line">	&#125;</span><br><span class="line">	node.Left.TraverseFunc(f)</span><br><span class="line">	f(node)</span><br><span class="line">	node.Right.TraverseFunc(f)</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/tree&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	root := tree.Node&#123;Value: 3&#125;</span><br><span class="line">	root.Left = &amp;tree.Node&#123;&#125;</span><br><span class="line">	root.Right = &amp;tree.Node&#123;Value: 5&#125;</span><br><span class="line">	root.Left.Right = &amp;tree.Node&#123;Value: 2&#125;</span><br><span class="line">	root.Right.Left = &amp;tree.Node&#123;Value: 4&#125;</span><br><span class="line">	root.Traverse()</span><br><span class="line">	count := 0</span><br><span class="line">	root.TraverseFunc(func(node *tree.Node) &#123;</span><br><span class="line">		count++</span><br><span class="line">	&#125;)</span><br><span class="line">	fmt.Println(&quot;Noce count&quot;,count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="é”™è¯¯å¤„ç†ä¸èµ„æºç®¡ç†"><a href="#é”™è¯¯å¤„ç†ä¸èµ„æºç®¡ç†" class="headerlink" title="é”™è¯¯å¤„ç†ä¸èµ„æºç®¡ç†"></a>é”™è¯¯å¤„ç†ä¸èµ„æºç®¡ç†</h1><h2 id="deferè°ƒç”¨"><a href="#deferè°ƒç”¨" class="headerlink" title="deferè°ƒç”¨"></a>deferè°ƒç”¨</h2><blockquote>
<p>deferç¡®ä¿åœ¨å‡½æ•°ç»“æŸæ—¶å‘ç”Ÿè°ƒç”¨</p>
</blockquote>
<blockquote>
<p>å‚æ•°åœ¨deferè¯­å¥æ—¶è®¡ç®—(for loop ä¼šæ ˆæ‰§è¡Œ)</p>
</blockquote>
<blockquote>
<p>deferè°ƒç”¨é‡Œé¢æ—¶æ ˆå­˜å‚¨ï¼Œå…ˆè¿›åå‡º</p>
</blockquote>
<h3 id="deferè°ƒç”¨ä½¿ç”¨æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨å†™å…¥æ–‡ä»¶å…³é—­èµ„æºæ“ä½œ"><a href="#deferè°ƒç”¨ä½¿ç”¨æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨å†™å…¥æ–‡ä»¶å…³é—­èµ„æºæ“ä½œ" class="headerlink" title="deferè°ƒç”¨ä½¿ç”¨æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨å†™å…¥æ–‡ä»¶å…³é—­èµ„æºæ“ä½œ"></a>deferè°ƒç”¨ä½¿ç”¨æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨å†™å…¥æ–‡ä»¶å…³é—­èµ„æºæ“ä½œ</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">fib.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package fib</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;io&quot;</span><br><span class="line">	&quot;strings&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type fibIntGen func() int</span><br><span class="line"></span><br><span class="line">//ä¸ºå‡½æ•°ç±»å‹å®ç°æ¥å£</span><br><span class="line">func (g fibIntGen) Read(p []byte) (n int, err error) &#123;</span><br><span class="line">	next := g()</span><br><span class="line">	//æ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨æ°¸è¿œè¯»ä¸å®Œåšä¸€ä¸ªé™åˆ¶</span><br><span class="line">	if next &gt; 10000 &#123;</span><br><span class="line">		return 0, io.EOF</span><br><span class="line">	&#125;</span><br><span class="line">	s := fmt.Sprintf(&quot;%d\n&quot;, next)</span><br><span class="line">	return strings.NewReader(s).Read(p)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func Fibonacci() fibIntGen &#123;</span><br><span class="line">	a, b := 0, 1</span><br><span class="line">	return func() int &#123;</span><br><span class="line">		a, b = b, a+b</span><br><span class="line">		return a</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;bufio&quot;</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/functional/fibonacci/fib&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func writeFile(filename string) &#123;</span><br><span class="line">	file, err := os.Create(filename)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	//å…³é—­æ–‡ä»¶èµ„æº</span><br><span class="line">	defer file.Close()</span><br><span class="line">	writer := bufio.NewWriter(file)</span><br><span class="line">	//å°†æ•°æ®å†™å…¥æ–‡ä»¶</span><br><span class="line">	defer writer.Flush()</span><br><span class="line">	fibonacci := fib.Fibonacci()</span><br><span class="line">	for i := 0; i &lt; 20; i++ &#123;</span><br><span class="line">		fmt.Fprintln(writer,fibonacci())</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	writeFile(&quot;fib.txt&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç”±äºdeferè°ƒç”¨æ˜¯æ ˆç±»å‹ï¼Œwriter.Flush()ä¼šæ¯”file.Close()å…ˆæ‰§è¡Œ</p>
</blockquote>
<blockquote>
<p>deferåœ¨å†™ä»£ç çš„æ—¶å€™å°±æƒ³åˆ°åˆ›å»ºfileå°±è¦å…³é—­ï¼Œåˆ›å»ºwriterå°±è¦æƒ³åˆ°flush</p>
</blockquote>
<h3 id="ä½•æ—¶ä½¿ç”¨deferè°ƒç”¨"><a href="#ä½•æ—¶ä½¿ç”¨deferè°ƒç”¨" class="headerlink" title="ä½•æ—¶ä½¿ç”¨deferè°ƒç”¨"></a>ä½•æ—¶ä½¿ç”¨deferè°ƒç”¨</h3><h4 id="Open-Close"><a href="#Open-Close" class="headerlink" title="Open/Close"></a>Open/Close</h4><h4 id="Lock-Unlock"><a href="#Lock-Unlock" class="headerlink" title="Lock/Unlock"></a>Lock/Unlock</h4><h4 id="PrintHeader-PrintFooter"><a href="#PrintHeader-PrintFooter" class="headerlink" title="PrintHeader/PrintFooter"></a>PrintHeader/PrintFooter</h4><h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;bufio&quot;</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/functional/fibonacci/fib&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func writeFile(filename string) &#123;</span><br><span class="line">	// If there is an error, it will be of type *PathError.</span><br><span class="line">	file, err := os.OpenFile(filename, os.O_EXCL|os.O_CREATE, 0666)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		//å¦‚æœæ˜¯*os.PathErrorï¼Œæ‰“å°æŒ‡å®šä¿¡æ¯</span><br><span class="line">		if pathError,ok := err.(*os.PathError); ok &#123;</span><br><span class="line">			fmt.Println(pathError.Op,pathError.Path,pathError.Err)</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			//å¦åˆ™æ‰“å°æ­£å¸¸é”™è¯¯ä¿¡æ¯</span><br><span class="line">			panic(err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	defer file.Close()</span><br><span class="line"></span><br><span class="line">	writer := bufio.NewWriter(file)</span><br><span class="line">	defer writer.Flush()</span><br><span class="line"></span><br><span class="line">	fibonacci := fib.Fibonacci()</span><br><span class="line">	for i := 0; i &lt; 20; i++ &#123;</span><br><span class="line">		fmt.Fprintln(writer,fibonacci())</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	writeFile(&quot;fib.txt&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç»Ÿä¸€é”™è¯¯å¤„ç†"><a href="#ç»Ÿä¸€é”™è¯¯å¤„ç†" class="headerlink" title="ç»Ÿä¸€é”™è¯¯å¤„ç†"></a>ç»Ÿä¸€é”™è¯¯å¤„ç†</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">handler.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package filelisting</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;io/ioutil&quot;</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//åŒ…è£…ä¸ºhttp.HandleFunc(pattern string, handler func(ResponseWriter, *Request))çš„ç¬¬äºŒä¸ªå‚æ•°</span><br><span class="line">func HandleFileList(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	path := request.URL.Path[len(&quot;/list/&quot;):]</span><br><span class="line">	file, err := os.Open(path)</span><br><span class="line">	//é”™è¯¯æ–‡ä»¶è·¯å¾„ä¼šæ§åˆ¶å°ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é”™è¯¯è¿›è¡Œç»Ÿä¸€å¤„ç†</span><br><span class="line">	//panic serving [::1]:55751: open fib.txt1: The system cannot find the file specified.</span><br><span class="line">	/*if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;*/</span><br><span class="line">	//å†…éƒ¨é”™è¯¯å±•ç¤ºç»™ç”¨æˆ·ä¸å¤ªå¥½ï¼Œéœ€è¦è¿›è¡ŒåŒ…è£…</span><br><span class="line">	/*if err != nil &#123;</span><br><span class="line">		http.Error(writer,</span><br><span class="line">			err.Error(),</span><br><span class="line">			http.StatusInternalServerError)</span><br><span class="line">		return</span><br><span class="line">	&#125;*/</span><br><span class="line">	//é”™è¯¯ç›´æ¥è¿”å›ä½¿ç”¨é€šç”¨å¤„ç†æ–¹æ³•</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		return err</span><br><span class="line">	&#125;</span><br><span class="line">	defer file.Close()</span><br><span class="line">	content, err := ioutil.ReadAll(file)</span><br><span class="line">	if  err != nil &#123;</span><br><span class="line">		return err</span><br><span class="line">	&#125;</span><br><span class="line">	writer.Write(content)</span><br><span class="line">	return nil</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/errhanding/filelistingserver/filelisting&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//å®šä¹‰å‡½æ•°ç±»å‹å¯¹å‡½æ•°è¿›è¡ŒåŒ…è£…</span><br><span class="line">type appHandler func(writer http.ResponseWriter, request *http.Request) error</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">ç»Ÿä¸€é”™è¯¯å¤„ç†æ–¹æ³•</span><br><span class="line">1.http.HandleFunå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">2.ä½¿ç”¨errWrapperæ–¹æ³•å¯¹å…¶è¿›è¡ŒåŒ…è£…è¿”å›ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">3.handler(writer,request)æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœæŠ¥é”™å°±ä¼šè¿”å›errï¼Œç„¶åå¯¹errè¿›è¡Œå¤„ç†</span><br><span class="line">*/</span><br><span class="line">func errWrapper(handler appHandler) func(http.ResponseWriter, *http.Request) &#123;</span><br><span class="line">	//åŒ…è£…ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿”å›ä¸€ä¸ªæ— è¿”å›å€¼çš„å‡½æ•°ä¸­è¿›è¡Œå¤„ç†</span><br><span class="line">	return func(writer http.ResponseWriter, request *http.Request) &#123;</span><br><span class="line">		//è¿™ä¸ªhandlerå®è´¨å°±æ˜¯filelisting.HandleFileList</span><br><span class="line">		err := handler(writer, request)</span><br><span class="line">		if err != nil &#123;</span><br><span class="line">			//æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯</span><br><span class="line">			log.Warn(&quot;Error handling request: %s&quot;,err.Error())</span><br><span class="line">			//èµ‹å€¼é»˜è®¤å€¼</span><br><span class="line">			code := http.StatusOK</span><br><span class="line">			switch &#123;</span><br><span class="line">			//æ–‡ä»¶ä¸å­˜åœ¨code</span><br><span class="line">			case os.IsNotExist(err):</span><br><span class="line">				code = http.StatusNotFound</span><br><span class="line">			//æƒé™ä¸å¤Ÿç¦æ­¢è®¿é—®</span><br><span class="line">			case os.IsPermission(err):</span><br><span class="line">				code = http.StatusForbidden</span><br><span class="line">			//é»˜è®¤ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸code</span><br><span class="line">			default:</span><br><span class="line">				code = http.StatusInternalServerError</span><br><span class="line">			&#125;</span><br><span class="line">			//å°†é”™è¯¯æ¶ˆæ¯å“åº”ç»™å®¢æˆ·ç«¯</span><br><span class="line">			http.Error(writer, http.StatusText(code), code)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	http.HandleFunc(&quot;/list/&quot;, errWrapper(filelisting.HandleFileList))</span><br><span class="line"></span><br><span class="line">	err := http.ListenAndServe(&quot;:8888&quot;, nil)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="panicä¸recover"><a href="#panicä¸recover" class="headerlink" title="panicä¸recover"></a>panicä¸recover</h2><h3 id="panic-ææ…Œ"><a href="#panic-ææ…Œ" class="headerlink" title="panic(ææ…Œ)"></a>panic(ææ…Œ)</h3><p><img src="/images/img_12.png" alt="çœ‹åˆ°panicæƒ³åˆ°è¿™å¹…å›¾(é‡)"></p>
<blockquote>
<p>panicæ˜¯ä¸€ä¸ªå¾ˆé‡çš„è¯ï¼Œå°½é‡å°‘ç”¨</p>
</blockquote>
<blockquote>
<p>åœæ­¢å½“å‰å‡½æ•°æ‰§è¡Œ(è·Ÿå…¶å®ƒè¯­è¨€çš„throw Exceptionæœ‰ç‚¹åƒ)</p>
</blockquote>
<blockquote>
<p>ä¸€è‡´å‘ä¸Šè¿”å›ï¼Œæ‰§è¡Œæ¯ä¸€å±‚çš„deferè°ƒç”¨</p>
</blockquote>
<blockquote>
<p>å¦‚æœæ²¡æœ‰é‡è§recoverï¼Œç¨‹åºé€€å‡º</p>
</blockquote>
<h3 id="recover-æ¢å¤"><a href="#recover-æ¢å¤" class="headerlink" title="recover(æ¢å¤)"></a>recover(æ¢å¤)</h3><blockquote>
<p>ä»…åœ¨deferè°ƒç”¨ä¸­ä½¿ç”¨</p>
</blockquote>
<blockquote>
<p>åœ¨deferè°ƒç”¨recoveré‡Œé¢å¯ä»¥è·å–panicçš„å€¼è¿›è¡Œå¤„ç†</p>
</blockquote>
<blockquote>
<p>å¦‚æœåœ¨deferè°ƒç”¨ä¸­æ— æ³•å¤„ç†panicçš„å€¼ï¼Œå¯ä»¥é‡æ–°panic</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	tryRecover()</span><br><span class="line">	fmt.Println(&quot;test&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func tryRecover() &#123;</span><br><span class="line">	//åŒ¿åå‡½æ•°</span><br><span class="line">	defer func() &#123;</span><br><span class="line">		//deferè°ƒç”¨é‡è§recover</span><br><span class="line">		r := recover()</span><br><span class="line">		//å¦‚æœæ˜¯ä¸€ä¸ªé”™è¯¯å¯¹é”™è¯¯è¿›è¡Œå¤„ç†</span><br><span class="line">		if err, ok := r.(error); ok &#123;</span><br><span class="line">			fmt.Println(&quot;Error occurred:&quot;, err)</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			//å¦åˆ™é‡æ–°panic</span><br><span class="line">			//panic(r)</span><br><span class="line">			panic(fmt.Sprintf(&quot;I don&apos;t know what to do: %v&quot;,err))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;() //å¤§æ‹¬å·æ˜¯åŒ¿åå‡½æ•°çš„å‡½æ•°ä½“ï¼Œæˆ‘ä»¬éœ€è¦åŒ¿åå‡½æ•°è¢«è°ƒç”¨åœ¨å‡½æ•°ä½“åé¢éœ€è¦åŠ ä¸Šå°æ‹¬å·</span><br><span class="line">	//recoverè¿™ä¸ªé”™è¯¯æˆ‘ä»¬åœ¨deferä¸­è°ƒç”¨</span><br><span class="line">	//panic(errors.New(&quot;this is an error&quot;))</span><br><span class="line">	//b := 0</span><br><span class="line">	//a := 5 / b</span><br><span class="line">	//fmt.Println(a)</span><br><span class="line">	panic(123)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¯¹ç»Ÿä¸€é”™è¯¯å¤„ç†è¿›è¡Œæ”¹è¿› ä½¿ç”¨deverè°ƒç”¨recover</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">//http.HandleFuncè°ƒç”¨åˆ°server.goæ–‡ä»¶ä¸­çš„func (c *conn) serve(ctx context.Context)æ–¹æ³•èµ°äº†deferè°ƒç”¨recover</span><br><span class="line">	defer func() &#123;</span><br><span class="line">		if err := recover(); err != nil &amp;&amp; err != ErrAbortHandler &#123;</span><br><span class="line">			const size = 64 &lt;&lt; 10</span><br><span class="line">			buf := make([]byte, size)</span><br><span class="line">			buf = buf[:runtime.Stack(buf, false)]</span><br><span class="line">			c.server.logf(&quot;http: panic serving %v: %v\n%s&quot;, c.remoteAddr, err, buf)</span><br><span class="line">		&#125;</span><br><span class="line">		if !c.hijacked() &#123;</span><br><span class="line">			c.close()</span><br><span class="line">			c.setState(c.rwc, StateClosed)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">//æˆ‘ä»¬æ‰‹åŠ¨å¤„ç†æ›´å‹å¥½ï¼Œå¤„ç†æœªçŸ¥é”™è¯¯ï¼Œå‹å¥½ç›¸åº”ç»™å®¢æˆ·ç«¯</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;log&quot;</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/errhanding/filelistingserver/filelisting&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//å®šä¹‰å‡½æ•°ç±»å‹å¯¹å‡½æ•°è¿›è¡ŒåŒ…è£…</span><br><span class="line">type appHandler func(writer http.ResponseWriter, request *http.Request) error</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">ç»Ÿä¸€é”™è¯¯å¤„ç†æ–¹æ³•</span><br><span class="line">1.http.HandleFunå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">2.ä½¿ç”¨errWrapperæ–¹æ³•å¯¹å…¶è¿›è¡ŒåŒ…è£…è¿”å›ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">3.handler(writer,request)æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœæŠ¥é”™å°±ä¼šè¿”å›errï¼Œç„¶åå¯¹errè¿›è¡Œå¤„ç†</span><br><span class="line">*/</span><br><span class="line">func errWrapper(handler appHandler) func(http.ResponseWriter, *http.Request) &#123;</span><br><span class="line">	//åŒ…è£…ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿”å›ä¸€ä¸ªæ— è¿”å›å€¼çš„å‡½æ•°ä¸­è¿›è¡Œå¤„ç†</span><br><span class="line">	return func(writer http.ResponseWriter, request *http.Request) &#123;</span><br><span class="line">		//deferå¯¹æœªçŸ¥é”™è¯¯è¿›è¡Œå¤„ç†ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span><br><span class="line">		defer func() &#123;</span><br><span class="line">			if r := recover(); r != nil &#123;</span><br><span class="line">				log.Printf(&quot;Panic: %v&quot;, r)</span><br><span class="line">				http.Error(writer, http.StatusText(http.StatusInternalServerError), http.StatusInternalServerError)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;()</span><br><span class="line"></span><br><span class="line">		//è¿™ä¸ªhandlerå®è´¨å°±æ˜¯filelisting.HandleFileList</span><br><span class="line">		err := handler(writer, request)</span><br><span class="line">		if err != nil &#123;</span><br><span class="line">			//æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯</span><br><span class="line">			log.Printf(&quot;Error occurred handling request: %s&quot;, err.Error())</span><br><span class="line">			//èµ‹å€¼é»˜è®¤å€¼</span><br><span class="line">			code := http.StatusOK</span><br><span class="line">			switch &#123;</span><br><span class="line">			//æ–‡ä»¶ä¸å­˜åœ¨code</span><br><span class="line">			case os.IsNotExist(err):</span><br><span class="line">				code = http.StatusNotFound</span><br><span class="line">			//æƒé™ä¸å¤Ÿç¦æ­¢è®¿é—®</span><br><span class="line">			case os.IsPermission(err):</span><br><span class="line">				code = http.StatusForbidden</span><br><span class="line">			//é»˜è®¤ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸code</span><br><span class="line">			default:</span><br><span class="line">				code = http.StatusInternalServerError</span><br><span class="line">			&#125;</span><br><span class="line">			//å°†é”™è¯¯æ¶ˆæ¯å“åº”ç»™å®¢æˆ·ç«¯</span><br><span class="line">			http.Error(writer, http.StatusText(code), code)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	http.HandleFunc(&quot;/&quot;, errWrapper(filelisting.HandleFileList))</span><br><span class="line"></span><br><span class="line">	err := http.ListenAndServe(&quot;:8888&quot;, nil)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è‡ªå®šä¹‰ç”¨æˆ·é”™è¯¯å¤„ç†æœªçŸ¥é”™è¯¯ç»™å‰ç«¯å‹å¥½æç¤º(ç»ˆæç‰ˆ)</strong></p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">handler.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package filelisting</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;io/ioutil&quot;</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">	&quot;strings&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const prefix = &quot;/list/&quot;</span><br><span class="line"></span><br><span class="line">type userError string</span><br><span class="line">//erroræ¥å£æœ‰ä¸€ä¸ªErroræ–¹æ³•ç›¸å½“äºå®ç°äº†erroræ¥å£</span><br><span class="line">func (e userError) Error() string &#123;</span><br><span class="line">	return e.Message()</span><br><span class="line">&#125;</span><br><span class="line">//userErroråŒ…è£…äº†ä¸€ä¸ªMessageæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ç›¸å½“äºå®ç°äº†userErroræ¥å£åŠerroræ¥å£</span><br><span class="line">func (e userError) Message() string &#123;</span><br><span class="line">	return string(e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åŒ…è£…ä¸ºhttp.HandleFunc(pattern string, handler func(ResponseWriter, *Request))çš„ç¬¬äºŒä¸ªå‚æ•°</span><br><span class="line">func HandleFileList(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	if strings.Index(request.URL.Path, prefix) != 0 &#123;</span><br><span class="line">		//return errors.New(&quot;path mast start with :&quot; + prefix)</span><br><span class="line">		return userError(&quot;path must start with: &quot;+prefix)</span><br><span class="line">	&#125;</span><br><span class="line">	path := request.URL.Path[len(prefix):]</span><br><span class="line">	file, err := os.Open(path)</span><br><span class="line">	//é”™è¯¯æ–‡ä»¶è·¯å¾„ä¼šæ§åˆ¶å°ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é”™è¯¯è¿›è¡Œç»Ÿä¸€å¤„ç†</span><br><span class="line">	//panic serving [::1]:55751: open fib.txt1: The system cannot find the file specified.</span><br><span class="line">	/*if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;*/</span><br><span class="line">	//å†…éƒ¨é”™è¯¯å±•ç¤ºç»™ç”¨æˆ·ä¸å¤ªå¥½ï¼Œéœ€è¦è¿›è¡ŒåŒ…è£…</span><br><span class="line">	/*if err != nil &#123;</span><br><span class="line">		http.Error(writer,</span><br><span class="line">			err.Error(),</span><br><span class="line">			http.StatusInternalServerError)</span><br><span class="line">		return</span><br><span class="line">	&#125;*/</span><br><span class="line">	//é”™è¯¯ç›´æ¥è¿”å›ä½¿ç”¨é€šç”¨å¤„ç†æ–¹æ³•</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		return err</span><br><span class="line">	&#125;</span><br><span class="line">	defer file.Close()</span><br><span class="line">	content, err := ioutil.ReadAll(file)</span><br><span class="line">	if  err != nil &#123;</span><br><span class="line">		return err</span><br><span class="line">	&#125;</span><br><span class="line">	writer.Write(content)</span><br><span class="line">	return nil</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;log&quot;</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/errhanding/filelistingserver/filelisting&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//å®šä¹‰å‡½æ•°ç±»å‹å¯¹å‡½æ•°è¿›è¡ŒåŒ…è£…</span><br><span class="line">type appHandler func(writer http.ResponseWriter, request *http.Request) error</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">ç»Ÿä¸€é”™è¯¯å¤„ç†æ–¹æ³•</span><br><span class="line">1.http.HandleFunå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">2.ä½¿ç”¨errWrapperæ–¹æ³•å¯¹å…¶è¿›è¡ŒåŒ…è£…è¿”å›ä¸€ä¸ªfunc(ResponseWriter, *Request)</span><br><span class="line">3.handler(writer,request)æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœæŠ¥é”™å°±ä¼šè¿”å›errï¼Œç„¶åå¯¹errè¿›è¡Œå¤„ç†</span><br><span class="line">*/</span><br><span class="line">func errWrapper(handler appHandler) func(http.ResponseWriter, *http.Request) &#123;</span><br><span class="line">	//åŒ…è£…ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿”å›ä¸€ä¸ªæ— è¿”å›å€¼çš„å‡½æ•°ä¸­è¿›è¡Œå¤„ç†</span><br><span class="line">	return func(writer http.ResponseWriter, request *http.Request) &#123;</span><br><span class="line">		//deferå¯¹æœªçŸ¥é”™è¯¯è¿›è¡Œå¤„ç†ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span><br><span class="line">		defer func() &#123;</span><br><span class="line">			if r := recover(); r != nil &#123;</span><br><span class="line">				log.Printf(&quot;Panic: %v&quot;, r)</span><br><span class="line">				http.Error(writer, http.StatusText(http.StatusInternalServerError), http.StatusInternalServerError)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;()</span><br><span class="line"></span><br><span class="line">		//è¿™ä¸ªhandlerå®è´¨å°±æ˜¯filelisting.HandleFileList</span><br><span class="line">		err := handler(writer, request)</span><br><span class="line">		if err != nil &#123;</span><br><span class="line">			//æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯</span><br><span class="line">			log.Printf(&quot;Error occurred handling request: %s&quot;, err.Error())</span><br><span class="line">			//å¦‚æœé”™è¯¯æ˜¯å¸Œæœ›å±•ç¤ºç»™ç”¨æˆ·çš„é”™è¯¯</span><br><span class="line">			if userError, ok := err.(userError); ok &#123;</span><br><span class="line">				http.Error(writer,userError.Message(),http.StatusBadRequest)</span><br><span class="line">				return</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			//èµ‹å€¼é»˜è®¤å€¼</span><br><span class="line">			code := http.StatusOK</span><br><span class="line">			switch &#123;</span><br><span class="line">			//æ–‡ä»¶ä¸å­˜åœ¨code</span><br><span class="line">			case os.IsNotExist(err):</span><br><span class="line">				code = http.StatusNotFound</span><br><span class="line">			//æƒé™ä¸å¤Ÿç¦æ­¢è®¿é—®</span><br><span class="line">			case os.IsPermission(err):</span><br><span class="line">				code = http.StatusForbidden</span><br><span class="line">			//é»˜è®¤ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸code</span><br><span class="line">			default:</span><br><span class="line">				code = http.StatusInternalServerError</span><br><span class="line">			&#125;</span><br><span class="line">			//å°†é”™è¯¯æ¶ˆæ¯å“åº”ç»™å®¢æˆ·ç«¯</span><br><span class="line">			http.Error(writer, http.StatusText(code), code)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å®šä¹‰èƒ½ç»™ç”¨æˆ·çœ‹çš„é”™è¯¯</span><br><span class="line">type userError interface &#123;</span><br><span class="line">	error</span><br><span class="line">	Message() string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	http.HandleFunc(&quot;/&quot;, errWrapper(filelisting.HandleFileList))</span><br><span class="line"></span><br><span class="line">	err := http.ListenAndServe(&quot;:8888&quot;, nil)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜"><a href="#æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜" class="headerlink" title="æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜"></a>æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜</h1><h2 id="è¡¨æ ¼é©±åŠ¨æµ‹è¯•"><a href="#è¡¨æ ¼é©±åŠ¨æµ‹è¯•" class="headerlink" title="è¡¨æ ¼é©±åŠ¨æµ‹è¯•"></a>è¡¨æ ¼é©±åŠ¨æµ‹è¯•</h2><blockquote>
<p>æ–¹æ³•åç§°ä»¥func TestXxx(t *testing.T)æ ¼å¼</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;math&quot;</span><br><span class="line">	&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//æµ‹è¯•æ–¹æ³•å‚æ•°éœ€è¦æ·»åŠ *testing.Tä½œä¸ºæ–¹æ³•å‚æ•°</span><br><span class="line">func TestTriangle(t *testing.T) &#123;</span><br><span class="line">	tests := []struct&#123; a, b, c int &#125;&#123;</span><br><span class="line">		&#123;3, 4, 6&#125;,</span><br><span class="line">		&#123;5, 12, 13&#125;,</span><br><span class="line">		&#123;8, 15, 17&#125;,</span><br><span class="line">		&#123;30000, 40000, 50000&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	for _, element := range tests &#123;</span><br><span class="line">		if actual := calcTriangle(element.a, element.b); actual != element.c &#123;</span><br><span class="line">			t.Errorf(&quot;calcTriangle(%d,%d) got %d ; expected %d&quot;,element.a,element.b,actual,element.c)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è®¡ç®—å‹¾è‚¡å®šç†</span><br><span class="line">func calcTriangle(a int, b int) int &#123;</span><br><span class="line">	var c int</span><br><span class="line">	c = int(math.Sqrt(float64(a*a + b*b)))</span><br><span class="line">	return c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ‰“å°ç»“æœ</span><br><span class="line">------------------------------------------------------</span><br><span class="line">API server listening at: [::]:50325</span><br><span class="line">=== RUN   TestTriangle</span><br><span class="line">    add_test.go:17: calcTriangle(3,4) got 5 ; expected 6</span><br><span class="line">--- FAIL: TestTriangle (0.00s)</span><br><span class="line">FAIL</span><br><span class="line"></span><br><span class="line">Debugger finished with exit code 0</span><br><span class="line">------------------------------------------------------</span><br></pre></td></tr></table></figure>

<h2 id="æŸ¥çœ‹ä»£ç è¦†ç›–ç‡"><a href="#æŸ¥çœ‹ä»£ç è¦†ç›–ç‡" class="headerlink" title="æŸ¥çœ‹ä»£ç è¦†ç›–ç‡"></a>æŸ¥çœ‹ä»£ç è¦†ç›–ç‡</h2><blockquote>
<p>å…ˆç”Ÿæˆä»£ç è¦†ç›–ç‡æ–‡ä»¶</p>
</blockquote>
 <figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go test -coverprofile=c.out</span><br></pre></td></tr></table></figure>


<blockquote>
<p>ä½¿ç”¨å¯è§†åŒ–å·¥å…·æŸ¥çœ‹æ–‡ä»¶</p>
</blockquote>
 <figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go tool cover -html=c.out</span><br></pre></td></tr></table></figure>


<p><img src="/images/img_13.png" alt="ä»£ç è¦†ç›–ç‡å¯è§†åŒ–æŸ¥çœ‹"></p>
<blockquote>
<p>çº¢è‰²æ˜¯æ²¡æœ‰è¦†ç›–çš„ä»£ç </p>
</blockquote>
<blockquote>
<p>ç»¿è‰²æ˜¯è¦†ç›–çš„ä»£ç </p>
</blockquote>
<h2 id="ä»£ç æ€§èƒ½æµ‹è¯•"><a href="#ä»£ç æ€§èƒ½æµ‹è¯•" class="headerlink" title="ä»£ç æ€§èƒ½æµ‹è¯•"></a>ä»£ç æ€§èƒ½æµ‹è¯•</h2><blockquote>
<p>æ–¹æ³•åç§°ä»¥func Benchmark(b *testing.B)æ ¼å¼</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;math&quot;</span><br><span class="line">	&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line">//æ€§èƒ½æµ‹è¯•ä»£ç </span><br><span class="line">func BenchmarkSubStr(b *testing.B) &#123;</span><br><span class="line">	s := &quot;é»‘åŒ–è‚¥æŒ¥å‘å‘ç°ä¼šèŠ±é£ç°åŒ–è‚¥æŒ¥å‘å‘é»‘ä¼šé£èŠ±&quot;</span><br><span class="line">	ans := 8</span><br><span class="line">	//b.Nè®©ç³»ç»Ÿå†³å®šä»£ç æ€§èƒ½æ‰§è¡Œçš„æ¬¡æ•°</span><br><span class="line">	for i := 0; i &lt; b.N; i++ &#123;</span><br><span class="line">		actual := lengthOfLongestSubstring(s)</span><br><span class="line">		if actual != ans &#123;</span><br><span class="line">			b.Errorf(&quot;got %d for input %s; expected %d&quot;, actual,s,ans)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//éœ€è¦è¿›è¡Œæ€§èƒ½æµ‹è¯•çš„æ–¹æ³•å¿«</span><br><span class="line">func lengthOfLongestSubstring(s string) int &#123;</span><br><span class="line">	//è®°å½•æ¯ä¸ªå­—æ¯æœ€åå‡ºç°çš„ä½ç½®</span><br><span class="line">	lastOccurred := make(map[rune]int)</span><br><span class="line">	start := 0</span><br><span class="line">	maxLenght := 0</span><br><span class="line">	for i,ch := range []rune(s) &#123;</span><br><span class="line">		//æœ‰å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªmapè·å–å‡ºæ¥çš„å€¼æ˜¯0,è€Œ0åˆæ˜¯ä¸€ä¸ªåˆæ³•çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥è¦åˆ¤æ–­è¿™ä¸ªkeyæ˜¯å¦å­˜åœ¨</span><br><span class="line">		if lastI,ok := lastOccurred[ch] ; ok &amp;&amp; lastI &gt;= start &#123;</span><br><span class="line">			start = lastOccurred[ch] +1</span><br><span class="line">		&#125;</span><br><span class="line">		if i - start +1 &gt; maxLenght &#123;</span><br><span class="line">			maxLenght = i - start + 1</span><br><span class="line">		&#125;</span><br><span class="line">		lastOccurred[ch] = i</span><br><span class="line">	&#125;</span><br><span class="line">	return maxLenght</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ‰“å°ç»“æœ</span><br><span class="line">------------------------------------------------------</span><br><span class="line">API server listening at: [::]:62673</span><br><span class="line">goos: windows</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: world.ismyfree/go-learning/basic/loop</span><br><span class="line">BenchmarkSubStr</span><br><span class="line">BenchmarkSubStr-8   	  523216	      2315 ns/op</span><br><span class="line">PASS</span><br><span class="line"></span><br><span class="line">Debugger finished with exit code 0</span><br><span class="line">------------------------------------------------------</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå¯¹ä»£ç è¿›è¡Œæµ‹è¯•</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go test -bench .</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç”Ÿæˆæ€§èƒ½æµ‹è¯•ç”ŸæˆcpuæŠ¥å‘Š</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go test -bench . -cpuprofile cpu.out</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨pprofå·¥å…·æŸ¥çœ‹cpu-outæŠ¥å‘Šæ–‡ä»¶"><a href="#ä½¿ç”¨pprofå·¥å…·æŸ¥çœ‹cpu-outæŠ¥å‘Šæ–‡ä»¶" class="headerlink" title="ä½¿ç”¨pprofå·¥å…·æŸ¥çœ‹cpu.outæŠ¥å‘Šæ–‡ä»¶"></a>ä½¿ç”¨pprofå·¥å…·æŸ¥çœ‹cpu.outæŠ¥å‘Šæ–‡ä»¶</h3><blockquote>
<p>è¾“å…¥å‘½ä»¤è¿›å…¥å·¥å…·å‘½ä»¤è¡Œ</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go tool pprof cpu.out</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿›å…¥å‘½ä»¤è¡Œå·¥å…·åè¾“å…¥webå‘½ä»¤å³å¯ä»¥å›¾å½¢åŒ–ç½‘é¡µå½¢å¼å±•ç¤ºæ€§èƒ½é—®é¢˜ï¼Œé’ˆå¯¹é—®é¢˜è¿›è¡Œè°ƒä¼˜</p>
</blockquote>
<blockquote>
<p>è¾“å…¥helpå¯æŸ¥çœ‹å¸®åŠ©å‘½ä»¤</p>
</blockquote>
<blockquote>
<p>å„ç§æŠ¥é”™æ²¡èƒ½æˆåŠŸï¼Œæœ‰æ—¶é—´å†ç ”ç©¶</p>
</blockquote>
<h2 id="httpæµ‹è¯•"><a href="#httpæµ‹è¯•" class="headerlink" title="httpæµ‹è¯•"></a>httpæµ‹è¯•</h2><h3 id="ä»…å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•-æ›´åƒå•å…ƒæµ‹è¯•"><a href="#ä»…å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•-æ›´åƒå•å…ƒæµ‹è¯•" class="headerlink" title="ä»…å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•(æ›´åƒå•å…ƒæµ‹è¯•)"></a>ä»…å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•(æ›´åƒå•å…ƒæµ‹è¯•)</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">errorwrapper_test.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;errors&quot;</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;io/ioutil&quot;</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;net/http/httptest&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">	&quot;strings&quot;</span><br><span class="line">	&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type testingUserError string</span><br><span class="line"></span><br><span class="line">//erroræ¥å£æœ‰ä¸€ä¸ªErroræ–¹æ³•ç›¸å½“äºå®ç°äº†erroræ¥å£</span><br><span class="line">func (e testingUserError) Error() string &#123;</span><br><span class="line">	return e.Message()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//testingUserErroråŒ…è£…äº†ä¸€ä¸ªMessageæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ç›¸å½“äºå®ç°äº†testingUserErroræ¥å£åŠerroræ¥å£</span><br><span class="line">func (e testingUserError) Message() string &#123;</span><br><span class="line">	return string(e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errPanic(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	panic(123)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errUserError(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	return testingUserError(&quot;user error&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errNotFound(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	return os.ErrNotExist</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errNoPermission(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	return os.ErrPermission</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errUnknown(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	return errors.New(&quot;unknown error&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func noError(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	fmt.Fprintln(writer, &quot;no error&quot;)</span><br><span class="line">	return nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestErrWrapper(t *testing.T) &#123;</span><br><span class="line">	tests := []struct &#123;</span><br><span class="line">		h       appHandler</span><br><span class="line">		code    int</span><br><span class="line">		message string</span><br><span class="line">	&#125;&#123;</span><br><span class="line">		&#123;errPanic, 500, &quot;Internal Server Error&quot;&#125;,</span><br><span class="line">		&#123;errUserError, 400, &quot;user error&quot;&#125;,</span><br><span class="line">		&#123;errNotFound, 404, &quot;Not Found&quot;&#125;,</span><br><span class="line">		&#123;errNoPermission, 403, &quot;Forbidden&quot;&#125;,</span><br><span class="line">		&#123;errUnknown, 500, &quot;Internal Server Error&quot;&#125;,</span><br><span class="line">		&#123;noError,200,&quot;no error&quot;&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	for _, tt := range tests &#123;</span><br><span class="line">		f := errWrapper(tt.h)</span><br><span class="line">		response := httptest.NewRecorder()</span><br><span class="line">		request := httptest.NewRequest(http.MethodGet, &quot;http://localhost:8888/list/fib.txt&quot;, nil)</span><br><span class="line">		f(response, request)</span><br><span class="line">		b, _ := ioutil.ReadAll(response.Body)</span><br><span class="line">		body := strings.Trim(string(b), &quot;\n&quot;)</span><br><span class="line">		if response.Code != tt.code || body != tt.message &#123;</span><br><span class="line">			t.Errorf(&quot;expect (%d,%s); got (%d, %s)&quot;, tt.code, tt.message, response.Code, body)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line">å“åº”ç»“æœ</span><br><span class="line">------------------------------------------------------</span><br><span class="line">API server listening at: [::]:50904</span><br><span class="line">=== RUN   TestErrWrapper</span><br><span class="line">2020/12/28 17:26:00 Panic: 123</span><br><span class="line">2020/12/28 17:26:00 Error occurred handling request: user error</span><br><span class="line">2020/12/28 17:26:00 Error occurred handling request: file does not exist</span><br><span class="line">2020/12/28 17:26:00 Error occurred handling request: permission denied</span><br><span class="line">2020/12/28 17:26:00 Error occurred handling request: unknown error</span><br><span class="line">--- PASS: TestErrWrapper (0.01s)</span><br><span class="line">PASS</span><br><span class="line"></span><br><span class="line">Debugger finished with exit code 0</span><br><span class="line">------------------------------------------------------</span><br></pre></td></tr></table></figure>

<h3 id="å¼€ä¸€ä¸ªæœåŠ¡å™¨å¯¹httpè¿›è¡Œæµ‹è¯•-é›†æˆåº¦æ›´é«˜"><a href="#å¼€ä¸€ä¸ªæœåŠ¡å™¨å¯¹httpè¿›è¡Œæµ‹è¯•-é›†æˆåº¦æ›´é«˜" class="headerlink" title="å¼€ä¸€ä¸ªæœåŠ¡å™¨å¯¹httpè¿›è¡Œæµ‹è¯•(é›†æˆåº¦æ›´é«˜)"></a>å¼€ä¸€ä¸ªæœåŠ¡å™¨å¯¹httpè¿›è¡Œæµ‹è¯•(é›†æˆåº¦æ›´é«˜)</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">errorwrapper_test.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;errors&quot;</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;io/ioutil&quot;</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;net/http/httptest&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">	&quot;strings&quot;</span><br><span class="line">	&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type testingUserError string</span><br><span class="line"></span><br><span class="line">//erroræ¥å£æœ‰ä¸€ä¸ªErroræ–¹æ³•ç›¸å½“äºå®ç°äº†erroræ¥å£</span><br><span class="line">func (e testingUserError) Error() string &#123;</span><br><span class="line">	return e.Message()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//testingUserErroråŒ…è£…äº†ä¸€ä¸ªMessageæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ç›¸å½“äºå®ç°äº†testingUserErroræ¥å£åŠerroræ¥å£</span><br><span class="line">func (e testingUserError) Message() string &#123;</span><br><span class="line">	return string(e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errPanic(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	panic(123)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errUserError(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	return testingUserError(&quot;user error&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errNotFound(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	return os.ErrNotExist</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errNoPermission(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	return os.ErrPermission</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func errUnknown(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	return errors.New(&quot;unknown error&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func noError(writer http.ResponseWriter, request *http.Request) error &#123;</span><br><span class="line">	fmt.Fprintln(writer, &quot;no error&quot;)</span><br><span class="line">	return nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestErrWrapperInServer(t *testing.T) &#123;</span><br><span class="line">	tests := []struct &#123;</span><br><span class="line">		h       appHandler</span><br><span class="line">		code    int</span><br><span class="line">		message string</span><br><span class="line">	&#125;&#123;</span><br><span class="line">		&#123;errPanic, 500, &quot;Internal Server Error&quot;&#125;,</span><br><span class="line">		&#123;errUserError, 400, &quot;user error&quot;&#125;,</span><br><span class="line">		&#123;errNotFound, 404, &quot;Not Found&quot;&#125;,</span><br><span class="line">		&#123;errNoPermission, 403, &quot;Forbidden&quot;&#125;,</span><br><span class="line">		&#123;errUnknown, 500, &quot;Internal Server Error&quot;&#125;,</span><br><span class="line">		&#123;noError, 200, &quot;no error&quot;&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	for _, tt := range tests &#123;</span><br><span class="line">		f := errWrapper(tt.h)</span><br><span class="line">		server := httptest.NewServer(http.HandlerFunc(f))</span><br><span class="line">		resp, _ := http.Get(server.URL)</span><br><span class="line">		verifyResponse(resp,tt.code,tt.message,t)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func verifyResponse(resp *http.Response,expectCode int,expectMessage string,t *testing.T) &#123;</span><br><span class="line">	b, _ := ioutil.ReadAll(resp.Body)</span><br><span class="line">	body := strings.Trim(string(b), &quot;\n&quot;)</span><br><span class="line">	if resp.StatusCode != expectCode || body != expectMessage &#123;</span><br><span class="line">		t.Errorf(&quot;expect (%d,%s); got (%d, %s)&quot;, expectCode, expectMessage, resp.StatusCode, body)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æŸ¥çœ‹æ¥å£æ–‡æ¡£"><a href="#æŸ¥çœ‹æ¥å£æ–‡æ¡£" class="headerlink" title="æŸ¥çœ‹æ¥å£æ–‡æ¡£"></a>æŸ¥çœ‹æ¥å£æ–‡æ¡£</h2><blockquote>
<p>éœ€è¦å®‰è£…godocå·¥å…·</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go install golang.org/x/tools/cmd/godoc</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹æ¥å£æ–‡æ¡£</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">godoc -http=:6060</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰“å¼€æœ¬åœ°ç«¯å£ç½‘é¡µ6060æŸ¥çœ‹(æ‰€æœ‰æ¥å£æ–‡æ¡£,åŒ…å«æœ¬åœ°åŠå®˜æ–¹)</p>
</blockquote>
<p><img src="/images/img_14.png" alt="webé¡µé¢æ¥å£æ–‡æ¡£"></p>
<h1 id="å¹¶å‘ç¼–ç¨‹"><a href="#å¹¶å‘ç¼–ç¨‹" class="headerlink" title="å¹¶å‘ç¼–ç¨‹"></a>å¹¶å‘ç¼–ç¨‹</h1><h2 id="åç¨‹Coroutine"><a href="#åç¨‹Coroutine" class="headerlink" title="åç¨‹Coroutine"></a>åç¨‹Coroutine</h2><blockquote>
<p>è½»é‡çº§â€çº¿ç¨‹â€</p>
</blockquote>
<blockquote>
<p><strong>éæŠ¢å å¼</strong>å¤šä»»åŠ¡å¤„ç†ï¼Œç”±åç¨‹ä¸»åŠ¨äº¤å‡ºæ§åˆ¶æƒ</p>
</blockquote>
<blockquote>
<p>ç¼–è¯‘å™¨/è§£é‡Šå™¨/è™šæ‹Ÿæœºå±‚çš„å¤šä»»åŠ¡</p>
</blockquote>
<blockquote>
<p>å¤šä¸ªåç¨‹å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ</p>
</blockquote>
<blockquote>
<p>å­ç¨‹åºæ˜¯åç¨‹çš„ä¸€ä¸ªç‰¹ä¾‹(åç¨‹æ˜¯æ¯”å­ç¨‹åºæ›´å®½æ³›çš„ä¸€ä¸ªæ¦‚å¿µ)</p>
</blockquote>
<p><img src="/images/img_15.png" alt="åç¨‹ä¸æ™®é€šå‡½æ•°çš„å¯¹æ¯”"></p>
<h3 id="åç¨‹ç®€å•æ¼”ç¤ºgo-func"><a href="#åç¨‹ç®€å•æ¼”ç¤ºgo-func" class="headerlink" title="åç¨‹ç®€å•æ¼”ç¤ºgo func"></a>åç¨‹ç®€å•æ¼”ç¤ºgo func</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;runtime&quot;</span><br><span class="line">	&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	var a [10]int</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		//åç¨‹</span><br><span class="line">		go func(i int) &#123;</span><br><span class="line">			for true &#123;</span><br><span class="line">				//idæ“ä½œåç¨‹ä¹‹é—´ä¼šåˆ‡æ¢</span><br><span class="line">				//fmt.Printf(&quot;hello from goroutine %d&quot;,i)</span><br><span class="line">				a[i]++</span><br><span class="line">				//æ‰‹åŠ¨äº¤å‡ºåç¨‹æ§åˆ¶æƒ</span><br><span class="line">				runtime.Gosched()</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;(i)</span><br><span class="line">	&#125;</span><br><span class="line">	time.Sleep(time.Millisecond)</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤æ®µä»£ç æœ‰æ•°æ®è®¿é—®å†²çª,å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ£€æµ‹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go run -race xxx.go</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">==================</span><br><span class="line">WARNING: DATA RACE</span><br><span class="line">//è¯»</span><br><span class="line">Read at 0x00c0001300f0 by main goroutine:</span><br><span class="line">  main.main()</span><br><span class="line"> Â  Â  Â D:/goProject/src/world.ismyfree/go-learning/goroutine/goroutine.go:24 +0x104</span><br><span class="line">//å†™</span><br><span class="line">Previous write at 0x00c0001300f0 by goroutine 7:</span><br><span class="line">  main.main.func1()</span><br><span class="line">      D:/goProject/src/world.ismyfree/go-learning/goroutine/goroutine.go:17 +0x6f</span><br><span class="line"></span><br><span class="line">Goroutine 7 (running) created at:</span><br><span class="line">  main.main()</span><br><span class="line">      D:/goProject/src/world.ismyfree/go-learning/goroutine/goroutine.go:13 +0xca</span><br><span class="line">==================</span><br><span class="line">[4400 3695 3707 3321 3159 2643 2964 2641 2969 2490]</span><br><span class="line">Found 1 data race(s)</span><br><span class="line">exit status 66</span><br></pre></td></tr></table></figure>

<h3 id="goroutine"><a href="#goroutine" class="headerlink" title="goroutine"></a>goroutine</h3><p><img src="/images/img_16.png" alt="goroutineæŠ½è±¡å›¾"></p>
<blockquote>
<p>ä»»ä½•å‡½æ•°åªè¦åŠ ä¸Šgoå°±èƒ½é€ç»™è°ƒåº¦å™¨è¿è¡Œ</p>
</blockquote>
<blockquote>
<p>ä¸éœ€è¦åœ¨å®šä¹‰æ˜¯åŒºåˆ†æ˜¯å¦æ˜¯å¼‚æ­¥å‡½æ•°</p>
</blockquote>
<blockquote>
<p>è°ƒåº¦å™¨åœ¨åˆé€‚çš„ç‚¹è¿›è¡Œåˆ‡æ¢</p>
</blockquote>
<blockquote>
<p>ä½¿ç”¨-raceå¯ä»¥æ£€æµ‹æ•°æ®è®¿é—®å†²çª</p>
</blockquote>
<blockquote>
<p>è°ƒåº¦å™¨ä¼šå°†å„ä¸ªåç¨‹æ˜ å°„åˆ°ç‰©ç†æœºçš„å„ä¸ªçº¿ç¨‹</p>
</blockquote>
<h3 id="goroutineå¯èƒ½åˆ‡æ¢çš„å‚è€ƒç‚¹"><a href="#goroutineå¯èƒ½åˆ‡æ¢çš„å‚è€ƒç‚¹" class="headerlink" title="goroutineå¯èƒ½åˆ‡æ¢çš„å‚è€ƒç‚¹"></a>goroutineå¯èƒ½åˆ‡æ¢çš„å‚è€ƒç‚¹</h3><blockquote>
<p>I/O,select (å¦‚print)<br>d<br>channel</p>
</blockquote>
<blockquote>
<p>ç­‰å¾…é”</p>
</blockquote>
<blockquote>
<p>å‡½æ•°è°ƒç”¨(æœ‰æ—¶)</p>
</blockquote>
<blockquote>
<p>runtime.Gosched()(æ‰‹åŠ¨äº¤å‡ºåç¨‹æ§åˆ¶æƒ)</p>
</blockquote>
<h2 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h2><p><img src="/images/img_17.png" alt="channel"></p>
<blockquote>
<p>goroutineä¸goroutineä¹‹é—´åŒå‘çš„é€šé“å°±æ˜¯channel</p>
</blockquote>
<blockquote>
<p>channelæ˜¯goroutineä¸goroutineä¹‹é—´çš„äº¤äº’ï¼Œä¸€ä¸ªgoroutineå‘é€æ•°æ®å°±è¦æœ‰ä¸€ä¸ªgoroutineæ¥æ”¶æ•°æ®ï¼Œæ²¡æœ‰goroutineæ¥æ”¶æ•°æ®ä¼šå‘ç”Ÿdadelock</p>
</blockquote>
<blockquote>
<p>channel</p>
<blockquote>
<p>channel<br>buffered channel<br>range</p>
<blockquote>
<p>ç†è®ºåŸºç¡€ï¼šCommunication Sequential Process (CSPæ¨¡å‹)</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<p>ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡;<strong>é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜</strong></p>
</blockquote>
<h3 id="channelçš„ç¤ºä¾‹"><a href="#channelçš„ç¤ºä¾‹" class="headerlink" title="channelçš„ç¤ºä¾‹"></a>channelçš„ç¤ºä¾‹</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func worker(id int, c chan int) &#123;</span><br><span class="line">	/*for true &#123;</span><br><span class="line">		//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">		if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">			break</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;*/</span><br><span class="line">	for n := range c &#123;</span><br><span class="line">		fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int) chan&lt;- int &#123;</span><br><span class="line">	c := make(chan int)</span><br><span class="line">	//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">	go worker(id, c)</span><br><span class="line">	//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">	return c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//channelç¤ºä¾‹ä»£ç </span><br><span class="line">func chanDemo() &#123;</span><br><span class="line">	var channels [10]chan&lt;- int</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		//åˆ›å»ºä¸€ä¸ªchannelï¼ˆchannelæ˜¯ä¸€ç­‰å…¬æ°‘,èƒ½ä½œä¸ºå‚æ•°ä¹Ÿèƒ½ä½œä¸ºè¿”å›å€¼ï¼‰</span><br><span class="line">		//channels[i] = make(chan int)</span><br><span class="line">		//åˆ›å»ºä¸€ä¸ªgoroutineæ¥æ”¶channelä¸­çš„æ•°æ®</span><br><span class="line">		channels[i] = createWorker(i)</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		channels[i] &lt;- &apos;a&apos; + i</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		channels[i] &lt;- &apos;A&apos; + i</span><br><span class="line">	&#125;</span><br><span class="line">	time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//bufferedChannel</span><br><span class="line">func bufferedChannel() &#123;</span><br><span class="line">	c := make(chan int, 3)</span><br><span class="line">	go worker(0, c)</span><br><span class="line">	c &lt;- &apos;A&apos;</span><br><span class="line">	c &lt;- &apos;B&apos;</span><br><span class="line">	c &lt;- &apos;C&apos;</span><br><span class="line">	c &lt;- &apos;C&apos;</span><br><span class="line">	c &lt;- &apos;C&apos;</span><br><span class="line">	time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//bufferedChannel</span><br><span class="line">func channelClose() &#123;</span><br><span class="line">	c := make(chan int, 3)</span><br><span class="line">	go worker(0, c)</span><br><span class="line">	c &lt;- &apos;A&apos;</span><br><span class="line">	c &lt;- &apos;B&apos;</span><br><span class="line">	c &lt;- &apos;C&apos;</span><br><span class="line">	c &lt;- &apos;C&apos;</span><br><span class="line">	c &lt;- &apos;C&apos;</span><br><span class="line">	close(c)</span><br><span class="line">	time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//main</span><br><span class="line">func main() &#123;</span><br><span class="line">	fmt.Println(&quot;Channel as first-class citizen&quot;)</span><br><span class="line">	chanDemo()</span><br><span class="line">	fmt.Println(&quot;Buffered channel&quot;)</span><br><span class="line">	bufferedChannel()</span><br><span class="line">	fmt.Println(&quot;Channel close and range&quot;)</span><br><span class="line">	channelClose()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="channelç¤ºä¾‹ä¼˜åŒ–-é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜"><a href="#channelç¤ºä¾‹ä¼˜åŒ–-é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜" class="headerlink" title="channelç¤ºä¾‹ä¼˜åŒ–(é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜)"></a>channelç¤ºä¾‹ä¼˜åŒ–(é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜)</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func doWorker(id int, c chan int, done chan bool) &#123;</span><br><span class="line">	/*for true &#123;</span><br><span class="line">		//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">		if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">			break</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;*/</span><br><span class="line">	for n := range c &#123;</span><br><span class="line">		fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">		//é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜é€šçŸ¥å¤–é¢æ‰“å°å®Œæˆ</span><br><span class="line">		//done &lt;- true</span><br><span class="line">		//channelå‘é€æ•°æ®éœ€è¦åœ¨å¦å¤–çš„goroutineä¸­åš,å¦åˆ™ä¼šå‘ç”Ÿé˜»å¡</span><br><span class="line">		//go func() &#123;done&lt;-true&#125;()</span><br><span class="line">		done &lt;- true</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int) worker &#123;</span><br><span class="line">	w := worker&#123;</span><br><span class="line">		in:   make(chan int),</span><br><span class="line">		done: make(chan bool),</span><br><span class="line">	&#125;</span><br><span class="line">	//c := make(chan int)</span><br><span class="line">	//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">	go doWorker(id, w.in, w.done)</span><br><span class="line">	//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">	return w</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type worker struct &#123;</span><br><span class="line">	in   chan int</span><br><span class="line">	done chan bool</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//channelç¤ºä¾‹ä»£ç </span><br><span class="line">func chanDemo() &#123;</span><br><span class="line">	var workers [10]worker</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		//åˆ›å»ºä¸€ä¸ªchannelï¼ˆchannelæ˜¯ä¸€ç­‰å…¬æ°‘,èƒ½ä½œä¸ºå‚æ•°ä¹Ÿèƒ½ä½œä¸ºè¿”å›å€¼ï¼‰</span><br><span class="line">		//channels[i] = make(chan int)</span><br><span class="line">		//åˆ›å»ºä¸€ä¸ªgoroutineæ¥æ”¶channelä¸­çš„æ•°æ®</span><br><span class="line">		workers[i] = createWorker(i)</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		workers[i].in &lt;- &apos;a&apos; + i</span><br><span class="line">		//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">		//&lt;-workers[i].done</span><br><span class="line">	&#125;</span><br><span class="line">	for _, worker := range workers &#123;</span><br><span class="line">		&lt;-worker.done</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		workers[i].in &lt;- &apos;A&apos; + i</span><br><span class="line">		//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">		//&lt;-workers[i].done</span><br><span class="line">	&#125;</span><br><span class="line">	for _, worker := range workers &#123;</span><br><span class="line">		&lt;-worker.done</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/*for _,worker := range workers&#123;</span><br><span class="line">		&lt;-worker.done</span><br><span class="line">		&lt;-worker.done</span><br><span class="line">	&#125;*/</span><br><span class="line">	//sleepçš„æ–¹å¼å¾ˆä¸å¥½,æˆ‘ä»¬éœ€è¦é€šçŸ¥åˆ°å¤–é¢å·²ç»æ‰“å°å®Œæˆ</span><br><span class="line">	//time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//main</span><br><span class="line">func main() &#123;</span><br><span class="line">	chanDemo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨goæä¾›çš„waitGroupæ”¹è¿›ç¤ºä¾‹"><a href="#ä½¿ç”¨goæä¾›çš„waitGroupæ”¹è¿›ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨goæä¾›çš„waitGroupæ”¹è¿›ç¤ºä¾‹"></a>ä½¿ç”¨goæä¾›çš„waitGroupæ”¹è¿›ç¤ºä¾‹</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;sync&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func doWorker(id int, c chan int, wg *sync.WaitGroup) &#123;</span><br><span class="line">	/*for true &#123;</span><br><span class="line">		//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">		if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">			break</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;*/</span><br><span class="line">	for n := range c &#123;</span><br><span class="line">		fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">		//é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜é€šçŸ¥å¤–é¢æ‰“å°å®Œæˆ</span><br><span class="line">		//done &lt;- true</span><br><span class="line">		//channelå‘é€æ•°æ®éœ€è¦åœ¨å¦å¤–çš„goroutineä¸­åš,å¦åˆ™ä¼šå‘ç”Ÿé˜»å¡</span><br><span class="line">		//go func() &#123;done&lt;-true&#125;()</span><br><span class="line">		//done &lt;- true</span><br><span class="line">		wg.Done()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int,wg *sync.WaitGroup) worker &#123;</span><br><span class="line">	w := worker&#123;</span><br><span class="line">		in:   make(chan int),</span><br><span class="line">		wg: wg,</span><br><span class="line">	&#125;</span><br><span class="line">	//c := make(chan int)</span><br><span class="line">	//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">	go doWorker(id, w.in, wg)</span><br><span class="line">	//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">	return w</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type worker struct &#123;</span><br><span class="line">	in   chan int</span><br><span class="line">	wg *sync.WaitGroup</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//channelç¤ºä¾‹ä»£ç </span><br><span class="line">func chanDemo() &#123;</span><br><span class="line">	//goæä¾›çš„ç­‰å¾…å¤šä»»åŠ¡å®Œæˆçš„æ–¹æ³•</span><br><span class="line">	var wg sync.WaitGroup</span><br><span class="line">	var workers [10]worker</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		//åˆ›å»ºä¸€ä¸ªchannelï¼ˆchannelæ˜¯ä¸€ç­‰å…¬æ°‘,èƒ½ä½œä¸ºå‚æ•°ä¹Ÿèƒ½ä½œä¸ºè¿”å›å€¼ï¼‰</span><br><span class="line">		//channels[i] = make(chan int)</span><br><span class="line">		//åˆ›å»ºä¸€ä¸ªgoroutineæ¥æ”¶channelä¸­çš„æ•°æ®</span><br><span class="line">		workers[i] = createWorker(i,&amp;wg)</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		workers[i].in &lt;- &apos;a&apos; + i</span><br><span class="line">		//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">		//&lt;-workers[i].done</span><br><span class="line">		wg.Add(1)</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		workers[i].in &lt;- &apos;A&apos; + i</span><br><span class="line">		//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">		//&lt;-workers[i].done</span><br><span class="line">		wg.Add(1)</span><br><span class="line">	&#125;</span><br><span class="line">	wg.Wait()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//main</span><br><span class="line">func main() &#123;</span><br><span class="line">	chanDemo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¤ºä¾‹è¿›è¡ŒæŠ½è±¡é‡æ„"><a href="#ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¤ºä¾‹è¿›è¡ŒæŠ½è±¡é‡æ„" class="headerlink" title="ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¤ºä¾‹è¿›è¡ŒæŠ½è±¡é‡æ„"></a>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¤ºä¾‹è¿›è¡ŒæŠ½è±¡é‡æ„</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;sync&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func doWorker(id int, w worker) &#123;</span><br><span class="line">	/*for true &#123;</span><br><span class="line">		//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">		if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">			break</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;*/</span><br><span class="line">	for n := range w.in &#123;</span><br><span class="line">		fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">		//é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜é€šçŸ¥å¤–é¢æ‰“å°å®Œæˆ</span><br><span class="line">		//done &lt;- true</span><br><span class="line">		//channelå‘é€æ•°æ®éœ€è¦åœ¨å¦å¤–çš„goroutineä¸­åš,å¦åˆ™ä¼šå‘ç”Ÿé˜»å¡</span><br><span class="line">		//go func() &#123;done&lt;-true&#125;()</span><br><span class="line">		//done &lt;- true</span><br><span class="line">		w.done()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int, wg *sync.WaitGroup) worker &#123;</span><br><span class="line">	w := worker&#123;</span><br><span class="line">		in: make(chan int),</span><br><span class="line">		done: func() &#123;</span><br><span class="line">			wg.Done()</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	//c := make(chan int)</span><br><span class="line">	//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">	go doWorker(id, w)</span><br><span class="line">	//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">	return w</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type worker struct &#123;</span><br><span class="line">	in   chan int</span><br><span class="line">	done func()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//channelç¤ºä¾‹ä»£ç </span><br><span class="line">func chanDemo() &#123;</span><br><span class="line">	//goæä¾›çš„ç­‰å¾…å¤šä»»åŠ¡å®Œæˆçš„æ–¹æ³•</span><br><span class="line">	var wg sync.WaitGroup</span><br><span class="line">	var workers [10]worker</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		//åˆ›å»ºä¸€ä¸ªchannelï¼ˆchannelæ˜¯ä¸€ç­‰å…¬æ°‘,èƒ½ä½œä¸ºå‚æ•°ä¹Ÿèƒ½ä½œä¸ºè¿”å›å€¼ï¼‰</span><br><span class="line">		//channels[i] = make(chan int)</span><br><span class="line">		//åˆ›å»ºä¸€ä¸ªgoroutineæ¥æ”¶channelä¸­çš„æ•°æ®</span><br><span class="line">		workers[i] = createWorker(i, &amp;wg)</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		workers[i].in &lt;- &apos;a&apos; + i</span><br><span class="line">		//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">		//&lt;-workers[i].done</span><br><span class="line">		wg.Add(1)</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€channelé‡Œé¢å‘é€æ•°æ®</span><br><span class="line">	for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">		workers[i].in &lt;- &apos;A&apos; + i</span><br><span class="line">		//ç°åœ¨æ²¡æœ‰sleepä¹Ÿèƒ½æ‰“å°å®Œæˆï¼Œä½†æ˜¯æ˜¯é¡ºåºæ‰“å°çš„</span><br><span class="line">		//&lt;-workers[i].done</span><br><span class="line">		wg.Add(1)</span><br><span class="line">	&#125;</span><br><span class="line">	wg.Wait()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//main</span><br><span class="line">func main() &#123;</span><br><span class="line">	chanDemo()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨channelå®ç°æ ‘çš„éå†"><a href="#ä½¿ç”¨channelå®ç°æ ‘çš„éå†" class="headerlink" title="ä½¿ç”¨channelå®ç°æ ‘çš„éå†"></a>ä½¿ç”¨channelå®ç°æ ‘çš„éå†</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">Node.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package tree</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func (node Node) setVal(value int) &#123;</span><br><span class="line">	node.Value = value</span><br><span class="line">&#125;</span><br><span class="line">func (node *Node) setValue(value int) &#123;</span><br><span class="line">	node.Value = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å®šä¹‰ç±»å‹</span><br><span class="line">type Node struct &#123;</span><br><span class="line">	Value       int</span><br><span class="line">	Left, Right *Node</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å®šä¹‰print</span><br><span class="line">func (node Node) Print() &#123;</span><br><span class="line">	fmt.Print(node.Value, &quot; &quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//éå†æ ‘</span><br><span class="line">func (node *Node) Traverse() &#123;</span><br><span class="line">	node.TraverseFunc(func(n *Node) &#123;</span><br><span class="line">		if node == nil &#123;</span><br><span class="line">			return</span><br><span class="line">		&#125;</span><br><span class="line">		n.Print()</span><br><span class="line">	&#125;)</span><br><span class="line">	fmt.Println()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//éå†æ ‘åŒæ—¶åšä»€ä¹ˆæ“ä½œç”±ä¼ é€’çš„å‡½æ•°å†³å®š</span><br><span class="line">func (node *Node) TraverseFunc(f func(node *Node)) &#123;</span><br><span class="line">	if node == nil &#123;</span><br><span class="line">		return</span><br><span class="line">	&#125;</span><br><span class="line">	node.Left.TraverseFunc(f)</span><br><span class="line">	f(node)</span><br><span class="line">	node.Right.TraverseFunc(f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨channelå¯¹æ ‘è¿›è¡Œéå†</span><br><span class="line">func (node *Node) TraverseWithChannel() chan *Node &#123;</span><br><span class="line">	out := make(chan *Node)</span><br><span class="line">	go func() &#123;</span><br><span class="line">		node.TraverseFunc(</span><br><span class="line">			func(node *Node) &#123;</span><br><span class="line">				out &lt;- node</span><br><span class="line">			&#125;,</span><br><span class="line">		)</span><br><span class="line">		close(out)</span><br><span class="line">	&#125;()</span><br><span class="line">	return out</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"></span><br><span class="line">main.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;world.ismyfree/go-learning/tree&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	root := tree.Node&#123;Value: 3&#125;</span><br><span class="line">	root.Left = &amp;tree.Node&#123;&#125;</span><br><span class="line">	root.Right = &amp;tree.Node&#123;Value: 5&#125;</span><br><span class="line">	root.Left.Right = &amp;tree.Node&#123;Value: 2&#125;</span><br><span class="line">	root.Right.Left = &amp;tree.Node&#123;Value: 4&#125;</span><br><span class="line">	root.Traverse()</span><br><span class="line">	count := 0</span><br><span class="line">	root.TraverseFunc(func(node *tree.Node) &#123;</span><br><span class="line">		count++</span><br><span class="line">	&#125;)</span><br><span class="line">	fmt.Println(&quot;Node count: &quot;, count)</span><br><span class="line"></span><br><span class="line">	//ä½¿ç”¨channeléå†æ ‘è·å–æœ€å¤§å€¼</span><br><span class="line">	c := root.TraverseWithChannel()</span><br><span class="line">	maxNode := 0</span><br><span class="line">	for node := range c &#123;</span><br><span class="line">		if node.Value &gt; maxNode &#123;</span><br><span class="line">			maxNode = node.Value</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(&quot;Max node value:&quot;, maxNode)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨selectæ–¹å¼å¯¹chnnelè¿›è¡Œè°ƒåº¦"><a href="#ä½¿ç”¨selectæ–¹å¼å¯¹chnnelè¿›è¡Œè°ƒåº¦" class="headerlink" title="ä½¿ç”¨selectæ–¹å¼å¯¹chnnelè¿›è¡Œè°ƒåº¦"></a>ä½¿ç”¨selectæ–¹å¼å¯¹chnnelè¿›è¡Œè°ƒåº¦</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;math/rand&quot;</span><br><span class="line">	&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//workeræ˜¯ä¸€ä¸ªgoroutine</span><br><span class="line">func worker(id int, c chan int) &#123;</span><br><span class="line">	/*for true &#123;</span><br><span class="line">		//ä»channelä¸­è·å–æ•°æ®å¹¶æ‰“å°ï¼ˆä¸€èˆ¬æ‰“å°çš„æ•°æ®éƒ½æ˜¯ä¹±åºï¼Œè°ƒåº¦å™¨éšæ„é€‰æ‹©è°ƒåº¦çš„goroutineï¼‰</span><br><span class="line">		if n, ok := &lt;-c; !ok &#123;</span><br><span class="line">			break</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			fmt.Printf(&quot;worker %d received %c\n&quot;, id, n)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;*/</span><br><span class="line">	for n := range c &#123;</span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">		fmt.Printf(&quot;worker %d received %d\n&quot;, id, n)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºworker</span><br><span class="line">func createWorker(id int) chan&lt;- int &#123;</span><br><span class="line">	c := make(chan int)</span><br><span class="line">	//è¿™éƒ¨åˆ†æ“ä½œéœ€è¦äº¤ç»™ä¸€ä¸ªgoroutine</span><br><span class="line">	go worker(id, c)</span><br><span class="line">	//è¿”å›ä¸€ä¸ªchannel</span><br><span class="line">	return c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func generator() chan int &#123;</span><br><span class="line">	out := make(chan int)</span><br><span class="line">	go func() &#123;</span><br><span class="line">		i := 0</span><br><span class="line">		for true &#123;</span><br><span class="line">			time.Sleep(time.Duration(rand.Intn(1500)) * time.Millisecond)</span><br><span class="line">			out &lt;- i</span><br><span class="line">			i++</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	return out</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	var c1, c2 = generator(), generator()</span><br><span class="line">	var worker = createWorker(0)</span><br><span class="line">	var values []int</span><br><span class="line">	//10såå¾€è¿™ä¸ªchannelå‘é€æ—¶é—´</span><br><span class="line">	afterTenSecond := time.After(10 * time.Second)</span><br><span class="line">	//æ¯ç§’å¾€è¿™ä¸ª</span><br><span class="line">	tick := time.Tick(time.Second)</span><br><span class="line">	for true &#123;</span><br><span class="line">		var activeWorker chan&lt;- int</span><br><span class="line">		var activeValue int</span><br><span class="line">		if len(values) &gt; 0 &#123;</span><br><span class="line">			activeWorker = worker</span><br><span class="line">			activeValue = values[0]</span><br><span class="line">		&#125;</span><br><span class="line">		select &#123;</span><br><span class="line">		case n := &lt;-c1:</span><br><span class="line">			values = append(values, n)</span><br><span class="line">		case n := &lt;-c2:</span><br><span class="line">			values = append(values, n)</span><br><span class="line">		case activeWorker &lt;- activeValue:</span><br><span class="line">			values = values[1:]</span><br><span class="line">		case &lt;-time.After(500 * time.Millisecond):</span><br><span class="line">			//æ¯æ¬¡è¿›å¯»é­‚ç”Ÿæˆæ•°æ®è¶…è¿‡500æ¯«ç§’æ‰“å°time out</span><br><span class="line">			fmt.Println(&quot;time out&quot;)</span><br><span class="line">		case &lt;-tick:</span><br><span class="line">			fmt.Println(&quot;queue len = &quot;, len(values))</span><br><span class="line">		case &lt;-afterTenSecond:</span><br><span class="line">			//10såå†²è¿™ä¸ªchannelè·å–åˆ°æ•°æ®ç»“æŸç¨‹åº</span><br><span class="line">			fmt.Println(&quot;Bye&quot;)</span><br><span class="line">			return</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¼ ç»ŸåŒæ­¥æœºåˆ¶"><a href="#ä¼ ç»ŸåŒæ­¥æœºåˆ¶" class="headerlink" title="ä¼ ç»ŸåŒæ­¥æœºåˆ¶"></a>ä¼ ç»ŸåŒæ­¥æœºåˆ¶</h3><blockquote>
<p>WaitGroup</p>
</blockquote>
<blockquote>
<p>Mutex(äº’æ–¥é‡)</p>
</blockquote>
<blockquote>
<p>cond(æ¡ä»¶å˜é‡)</p>
</blockquote>
<h4 id="Mutexç¤ºä¾‹-çœŸå®æ“ä½œè¯·ä½¿ç”¨ç³»ç»Ÿåº“æä¾›çš„åŸå­æ“ä½œï¼Œè¿™é‡Œä»…ä½œä¸ºç¤ºä¾‹"><a href="#Mutexç¤ºä¾‹-çœŸå®æ“ä½œè¯·ä½¿ç”¨ç³»ç»Ÿåº“æä¾›çš„åŸå­æ“ä½œï¼Œè¿™é‡Œä»…ä½œä¸ºç¤ºä¾‹" class="headerlink" title="Mutexç¤ºä¾‹(çœŸå®æ“ä½œè¯·ä½¿ç”¨ç³»ç»Ÿåº“æä¾›çš„åŸå­æ“ä½œï¼Œè¿™é‡Œä»…ä½œä¸ºç¤ºä¾‹)"></a>Mutexç¤ºä¾‹(çœŸå®æ“ä½œè¯·ä½¿ç”¨ç³»ç»Ÿåº“æä¾›çš„åŸå­æ“ä½œï¼Œè¿™é‡Œä»…ä½œä¸ºç¤ºä¾‹)</h4><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;sync&quot;</span><br><span class="line">	&quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type atomicInt struct &#123;</span><br><span class="line">	value int</span><br><span class="line">	lock sync.Mutex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (a *atomicInt) increment() &#123;</span><br><span class="line">	fmt.Println(&quot;safe increment&quot;)</span><br><span class="line">	func()&#123;</span><br><span class="line">		a.lock.Lock()</span><br><span class="line">		defer a.lock.Unlock()</span><br><span class="line">		a.value++</span><br><span class="line">	&#125;()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (a *atomicInt) get() int &#123;</span><br><span class="line">	a.lock.Lock()</span><br><span class="line">	defer a.lock.Unlock()</span><br><span class="line">	return a.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	var a atomicInt</span><br><span class="line">	a.increment()</span><br><span class="line">	go func() &#123;</span><br><span class="line">		a.increment()</span><br><span class="line">	&#125;()</span><br><span class="line">	time.Sleep(time.Millisecond)</span><br><span class="line">	fmt.Println(a.get())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="httpåŠå…¶å®ƒæ ‡å‡†åº“"><a href="#httpåŠå…¶å®ƒæ ‡å‡†åº“" class="headerlink" title="httpåŠå…¶å®ƒæ ‡å‡†åº“"></a>httpåŠå…¶å®ƒæ ‡å‡†åº“</h1><h2 id="httpClientç¤ºä¾‹"><a href="#httpClientç¤ºä¾‹" class="headerlink" title="httpClientç¤ºä¾‹"></a>httpClientç¤ºä¾‹</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;net/http&quot;</span><br><span class="line">	&quot;net/http/httputil&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	request, err := http.NewRequest(http.MethodGet, &quot;https://www.imooc.com&quot;, nil)</span><br><span class="line">	//æ§åˆ¶è¯·æ±‚çš„å¤´éƒ¨ä¿¡æ¯</span><br><span class="line">	request.Header.Add(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1&quot;)</span><br><span class="line">	//è‡ªå·±æ„å»ºå®¢æˆ·ç«¯æ‰“å°é‡å®šå‘æ—¶å€™çš„æ“ä½œ</span><br><span class="line">	client := http.Client&#123;</span><br><span class="line">		CheckRedirect: func(req *http.Request, via []*http.Request) error &#123;</span><br><span class="line">			fmt.Println(&quot;Redirect&quot;, req)</span><br><span class="line">			return nil</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	//æˆ‘ä»¬ä½¿ç”¨è‡ªå·±æ„å»ºçš„client</span><br><span class="line">	resp, err := client.Do(request)</span><br><span class="line">	//resp, err := http.DefaultClient.Do(request)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	defer resp.Body.Close()</span><br><span class="line">	//ä½¿ç”¨httputilç®€åŒ–å·¥ä½œ</span><br><span class="line">	s, err := httputil.DumpResponse(resp, true)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(&quot;%s\n&quot;,s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="httpServeræ€§èƒ½åˆ†æ"><a href="#httpServeræ€§èƒ½åˆ†æ" class="headerlink" title="httpServeræ€§èƒ½åˆ†æ"></a>httpServeræ€§èƒ½åˆ†æ</h2><blockquote>
<p>åœ¨ç¨‹åºä¸­import _ â€œnet/http/pprofâ€</p>
</blockquote>
<blockquote>
<p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ¥å£è·¯å¾„ä¸º/debug/pprof/çš„è¯·æ±‚</p>
</blockquote>
<p><img src="/images/img_18.png" alt="http pprofå·¥å…·"></p>
<blockquote>
<p>ä½¿ç”¨å‘½ä»¤è¡Œpprofå·¥å…·è·å¾—ç¨‹åº30ç§’çš„æ€§èƒ½è®¿é—®æƒé™(30ç§’å†…éšæ„è®¿é—®æœåŠ¡çš„æ¥å£)</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go tool pprof http://localhost:8888/debug/pprof/profile</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»¥ä¸Šå‘½ä»¤æ“ä½œå®Œåè¾“å…¥webä»¥å›¾å½¢åŒ–ç•Œé¢è¿›è¡Œåˆ†æç¨‹åºï¼ˆéœ€è¦å®‰è£…Graphvizï¼‰</p>
</blockquote>
<blockquote>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go tool pprof http://localhost:8888/debug/pprof/profile</span><br></pre></td></tr></table></figure>

<h2 id="å…¶å®ƒæ ‡å‡†åº“"><a href="#å…¶å®ƒæ ‡å‡†åº“" class="headerlink" title="å…¶å®ƒæ ‡å‡†åº“"></a>å…¶å®ƒæ ‡å‡†åº“</h2><h3 id="å¸¸ç”¨æ ‡å‡†åº“"><a href="#å¸¸ç”¨æ ‡å‡†åº“" class="headerlink" title="å¸¸ç”¨æ ‡å‡†åº“"></a>å¸¸ç”¨æ ‡å‡†åº“</h3><blockquote>
<p>bufio</p>
</blockquote>
<blockquote>
<p>log</p>
</blockquote>
<blockquote>
<p>encoding/json</p>
</blockquote>
<blockquote>
<p>regexp</p>
</blockquote>
<blockquote>
<p>time</p>
</blockquote>
<blockquote>
<p>strings/math/rand</p>
</blockquote>
<h3 id="èµ·ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£"><a href="#èµ·ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£" class="headerlink" title="èµ·ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£"></a>èµ·ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹æ ‡å‡†åº“æ–‡æ¡£</h3><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">godoc -http=:6060</span><br></pre></td></tr></table></figure>

<h3 id="ä¸­æ–‡æ ‡å‡†åº“ç½‘å€"><a href="#ä¸­æ–‡æ ‡å‡†åº“ç½‘å€" class="headerlink" title="ä¸­æ–‡æ ‡å‡†åº“ç½‘å€"></a>ä¸­æ–‡æ ‡å‡†åº“ç½‘å€</h3><p>ç‚¹æ­¤è¿›è¡Œè·³è½¬<strong><a href="https://studygolang.com/pkgdoc" target="_blank" rel="noopener">goä¸­æ–‡api</a></strong></p>
<h1 id="è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢"><a href="#è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢"></a>è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢</h1><p><img src="/images/img_19.png" alt="è¿·å®«ç¤ºæ„å›¾"></p>
<blockquote>
<p>0ä»£è¡¨å¯ä»¥èµ°çš„åœ°æ–¹</p>
</blockquote>
<blockquote>
<p>1ä»£è¡¨å¢™</p>
</blockquote>
<blockquote>
<p>äººä¸ºè§„å®šå…¥å£å’Œå‡ºå£ä¸ºå·¦ä¸Šè§’å’Œå³ä¸‹è§’</p>
</blockquote>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><blockquote>
<p>æƒ³æƒ³æˆ‘ä»¬åœ¨ä¸€ä¸ªæœªçŸ¥çš„ä¸–ç•Œ</p>
</blockquote>
<p><img src="/images/img_20.png" alt="ç¬¬0æ­¥"></p>
<blockquote>
<p>é¡ºåºæ¢ç´¢å¹¶æ”¾å…¥æœªæ¢ç´¢é˜Ÿåˆ—å½“ä¸­(ä¸Šå·¦ä¸‹å³)</p>
</blockquote>
<p><img src="/images/img_21.png" alt="ç¬¬1æ­¥"></p>
<blockquote>
<p>æ¯æ¢ç´¢ä¸€ä¸ªç§»é™¤æœªæ¢ç´¢é˜Ÿåˆ—å¹¶å°†æ–°æ¢ç´¢åˆ°æœªæ¢ç´¢çš„åŠ å…¥é˜Ÿåˆ—ä¸­</p>
</blockquote>
<p><img src="/images/img_22.png" alt="ç¬¬2æ­¥ä¸Š"></p>
<p><img src="/images/img_23.png" alt="ç¬¬2æ­¥å·¦"></p>
<p><img src="/images/img_24.png" alt="ç¬¬2æ­¥ä¸‹"></p>
<p><img src="/images/img_25.png" alt="ç¬¬2æ­¥å³"></p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line">maze.in</span><br><span class="line">------------------------------------------------------</span><br><span class="line">6 5</span><br><span class="line">0 1 0 0 0</span><br><span class="line">0 0 0 1 0</span><br><span class="line">0 1 0 1 0</span><br><span class="line">1 1 1 0 0</span><br><span class="line">0 1 0 0 1</span><br><span class="line">0 1 0 0 0</span><br><span class="line">------------------------------------------------------</span><br><span class="line">maze.go</span><br><span class="line">------------------------------------------------------</span><br><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;os&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//è¯»å–è¿·å®«æ–‡ä»¶</span><br><span class="line">func readMaze(filename string) [][]int &#123;</span><br><span class="line">	file, err := os.Open(filename)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		panic(err)</span><br><span class="line">	&#125;</span><br><span class="line">	//å®šä¹‰è¡Œåˆ—ä¸´æ—¶å˜é‡</span><br><span class="line">	var row, col int</span><br><span class="line">	//æ‰«æç¬¬ä¸€è¡Œè·å–æ–‡ä»¶çš„è¡Œåˆ—æ•°(\nè¯»æ¢è¡Œ)</span><br><span class="line">	fmt.Fscanf(file, &quot;%d %d\n&quot;, &amp;row, &amp;col)</span><br><span class="line">	//åˆ›å»ºç¬¬ä¸€ç»´slice</span><br><span class="line">	maze := make([][]int, row)</span><br><span class="line">	for i := range maze &#123;</span><br><span class="line">		//åˆ›å»ºç¬¬äºŒç»´slice</span><br><span class="line">		maze[i] = make([]int, col)</span><br><span class="line">		//å°†æ•°æ®æ”¾åˆ°äºŒç»´sliceä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸­</span><br><span class="line">		for j := range maze[i] &#123;</span><br><span class="line">			a := &amp;maze[i][j]</span><br><span class="line">			if j == len(maze[i])-1 &#123;</span><br><span class="line">				//(\nè¯»æ¢è¡Œ)</span><br><span class="line">				fmt.Fscanf(file, &quot;%d\n&quot;, a)</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				fmt.Fscanf(file, &quot;%d&quot;, a)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return maze</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type point struct &#123;</span><br><span class="line">	i, j int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç§»åŠ¨(ä¸Šå·¦ä¸‹å³)</span><br><span class="line">var dirs = [4]point&#123;</span><br><span class="line">	&#123;-1, 0&#125;,</span><br><span class="line">	&#123;0, -1&#125;,</span><br><span class="line">	&#123;1, 0&#125;,</span><br><span class="line">	&#123;0, 1&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç§»åŠ¨add</span><br><span class="line">func (p point) add(r point) point &#123;</span><br><span class="line">	return point&#123;p.i + r.i, p.j + r.j&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//atæ ¡éªŒå½“å‰ä½ç½®</span><br><span class="line">func (p point) at(grid [][]int) (int, bool) &#123;</span><br><span class="line">	//å¾€ä¸Šèµ°æˆ–è€…å¾€ä¸‹èµ°è¶Šç•Œçš„æ—¶å€™</span><br><span class="line">	if p.i &lt; 0 || p.i &gt;= len(grid) &#123;</span><br><span class="line">		return 0, false</span><br><span class="line">	&#125;</span><br><span class="line">	//å¾€å·¦èµ°æˆ–è€…å¾€å³èµ°è¶Šç•Œçš„æ—¶å€™</span><br><span class="line">	if p.j &lt; 0 || p.j &gt;= len(grid[p.i]) &#123;</span><br><span class="line">		return 0, false</span><br><span class="line">	&#125;</span><br><span class="line">	return grid[p.i][p.j],true</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//èµ°è¿·å®«</span><br><span class="line">func walk(maze [][]int, start, end point) [][]int&#123;</span><br><span class="line">	//è¦èµ°çš„æ¯ä¸€æ­¥</span><br><span class="line">	steps := make([][]int, len(maze))</span><br><span class="line">	for i := range steps &#123;</span><br><span class="line">		steps[i] = make([]int, len(maze[i]))</span><br><span class="line">	&#125;</span><br><span class="line">	//å°†èµ·ç‚¹æ”¾å…¥é˜Ÿåˆ—å½“ä¸­</span><br><span class="line">	Q := []point&#123;start&#125;</span><br><span class="line"></span><br><span class="line">	for len(Q) &gt; 0 &#123;</span><br><span class="line">		//å–å‡ºé˜Ÿåˆ—ä¸­å½“å‰çš„ä½ç½®ä½œä¸ºè¦æ¢ç´¢çš„ç‚¹</span><br><span class="line">		cur := Q[0]</span><br><span class="line">		Q = Q[1:]</span><br><span class="line">		//åˆ¤æ–­å½“å‰æ¢ç´¢ç‚¹æ˜¯å¦æ˜¯ç»ˆç‚¹</span><br><span class="line">		if cur == end &#123;</span><br><span class="line">			break</span><br><span class="line">		&#125;</span><br><span class="line">		for _, dir := range dirs &#123;</span><br><span class="line">			next := cur.add(dir)</span><br><span class="line">			//å¦‚æœè¶Šç•Œæˆ–è€…æ’å¢™,ç»§ç»­æ¢ç´¢</span><br><span class="line">			val, ok := next.at(maze)</span><br><span class="line">			if !ok || val == 1 &#123;</span><br><span class="line">				continue</span><br><span class="line">			&#125;</span><br><span class="line">			//å¦‚æœå½“å‰æœ‰å€¼è¯´æ˜å·²ç»æœ‰å€¼äº†ï¼Œç»§ç»­æ¢ç´¢</span><br><span class="line">			val, ok = next.at(steps)</span><br><span class="line">			if !ok || val != 0 &#123;</span><br><span class="line">				continue</span><br><span class="line">			&#125;</span><br><span class="line">			//å¦‚æœå½“å‰ç‚¹åœ¨èµ·ç‚¹ç»§ç»­æ¢ç´¢</span><br><span class="line">			if next == start &#123;</span><br><span class="line">				continue</span><br><span class="line">			&#125;</span><br><span class="line">			//æ¢ç´¢(éœ€è¦åšçš„äº‹ï¼š1.æ¢ç´¢åˆ°çš„ä¸‹ä¸€æ­¥å¡«ä¸Šæ˜¯ç¬¬å‡ æ­¥2.å°†æ¢ç´¢åˆ°çš„ä¸‹ä¸€æ­¥åŠ å…¥åˆ°é˜Ÿåˆ—)</span><br><span class="line">			curSteps, _ := cur.at(steps)</span><br><span class="line">			steps[next.i][next.j] = curSteps + 1</span><br><span class="line">			Q = append(Q, next)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return steps</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	maze := readMaze(&quot;maze/maze.in&quot;)</span><br><span class="line">	fmt.Println(&quot;print maze&quot;)</span><br><span class="line">	fmt.Println(&quot;-----------------------&quot;)</span><br><span class="line">	//æ‰“å°è¯»å–å‡ºæ¥çš„æ•°æ®</span><br><span class="line">	for _, row := range maze &#123;</span><br><span class="line">		for _, val := range row &#123;</span><br><span class="line">			fmt.Printf(&quot;%d &quot;, val)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(&quot;-----------------------&quot;)</span><br><span class="line">	fmt.Println(&quot;print steps&quot;)</span><br><span class="line">	fmt.Println(&quot;-----------------------&quot;)</span><br><span class="line">	//èµ°è¿·å®«</span><br><span class="line">	steps := walk(maze, point&#123;0, 0&#125;, point&#123;len(maze) - 1, len(maze[0]) - 1&#125;)</span><br><span class="line">	for _,row := range steps &#123;</span><br><span class="line">		for _, val := range row &#123;</span><br><span class="line">			fmt.Printf(&quot;%3d &quot;,val)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(&quot;-----------------------&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰“å°ç»“æœ</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">print maze</span><br><span class="line">-----------------------</span><br><span class="line">0 1 0 0 0 </span><br><span class="line">0 0 0 1 0 </span><br><span class="line">0 1 0 1 0 </span><br><span class="line">1 1 1 0 0 </span><br><span class="line">0 1 0 0 1 </span><br><span class="line">0 1 0 0 0 </span><br><span class="line">-----------------------</span><br><span class="line">print steps</span><br><span class="line">-----------------------</span><br><span class="line">  0   0   4   5   6 </span><br><span class="line">  1   2   3   0   7 </span><br><span class="line">  2   0   4   0   8 </span><br><span class="line">  0   0   0  10   9 </span><br><span class="line">  0   0  12  11   0 </span><br><span class="line">  0   0  13  12  13 </span><br><span class="line">-----------------------</span><br></pre></td></tr></table></figure>
      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2020/11/23/Keepalivedå®ç°nginxåŒjæœºä¸»å¤‡æˆ–åŒæœºçƒ­å¤‡é«˜å¯ç”¨/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2020/11/23/Keepalivedå®ç°nginxåŒjæœºä¸»å¤‡æˆ–åŒæœºçƒ­å¤‡é«˜å¯ç”¨/" itemprop="url">Keepalivedå®ç°nginxåŒæœºä¸»å¤‡æˆ–åŒæœºçƒ­å¤‡é«˜å¯ç”¨</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2020-11-23T14:55:30+08:00">2020-11-23 14:55:30</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="HAé«˜å¯ç”¨"><a href="#HAé«˜å¯ç”¨" class="headerlink" title="HAé«˜å¯ç”¨"></a>HAé«˜å¯ç”¨</h1><p><img src="/images/img_45.png" alt="HAé«˜å¯ç”¨æ¶æ„å›¾"></p>
<h1 id="Keepalivedä»‹ç»"><a href="#Keepalivedä»‹ç»" class="headerlink" title="Keepalivedä»‹ç»"></a>Keepalivedä»‹ç»</h1><blockquote>
<p>è§£å†³å•ç‚¹æ•…éšœ</p>
</blockquote>
<blockquote>
<p>ç»„ä»¶å…è´¹</p>
</blockquote>
<blockquote>
<p>å¯ä»¥å®ç°é«˜å¯ç”¨HAæœºåˆ¶</p>
</blockquote>
<blockquote>
<p>åŸºäºVRRPåè®®</p>
<blockquote>
<p>æ£€æµ‹nginxçŠ¶æ€ï¼Œå‘ç”Ÿæ•…éšœåˆ‡æ¢åˆ°å¤‡ç”¨æœºï¼Œè¿˜å¯é‚®ä»¶é€šçŸ¥ç®¡ç†å‘˜ã€‚<br>ä¸»æœºä¿®å¤å®Œæˆå¯ä»¥é€šè¿‡keepalivedè‡ªåŠ¨åŠ å…¥å†…ç½‘ï¼Œé‡æ–°æˆä¸ºä¸»æœºï¼Œå¤‡ç”¨æœºä¼šè®©ä¸»æœºç»§ç»­å·¥ä½œ<br>ä¸€åˆ‡è¿‡ç¨‹ç”±keepalivedå¤„ç†ï¼Œäººå·¥å¹²é¢„çš„åªæœ‰ä¿®å¤å‡ºæ•…éšœçš„nginxèŠ‚ç‚¹</p>
</blockquote>
</blockquote>
<h2 id="VRRPåè®®"><a href="#VRRPåè®®" class="headerlink" title="VRRPåè®®"></a>VRRPåè®®</h2><blockquote>
<p>Virtual Router Redundance Protocolï¼ˆè™šæ‹Ÿè·¯ç”±å†—ä½™åè®®ï¼‰</p>
</blockquote>
<blockquote>
<p>è§£å†³å†…ç½‘å•æœºæ•…éšœçš„è·¯ç”±åè®®</p>
</blockquote>
<blockquote>
<p>æ„å»ºæœ‰å¤šä¸ªè·¯ç”±å™¨ MASTER BACKUP</p>
</blockquote>
<blockquote>
<p>è™šæ‹ŸIP - VIP ï¼ˆVirtual IP Addressï¼‰</p>
</blockquote>
<h2 id="keepaliveåŒæœºä¸»å¤‡åŸç†"><a href="#keepaliveåŒæœºä¸»å¤‡åŸç†" class="headerlink" title="keepaliveåŒæœºä¸»å¤‡åŸç†"></a>keepaliveåŒæœºä¸»å¤‡åŸç†</h2><p><img src="/images/img_46.png" alt="KeepAlivedåŒæœºä¸»å¤‡åŸç†"></p>
<blockquote>
<p>ç”¨æˆ·è¯·æ±‚è™šæ‹Ÿipè™šæ‹Ÿipä¸nginxç»‘å®šåˆ°ä¸€èµ·ã€‚</p>
</blockquote>
<blockquote>
<p>ç”±äºkeepalivedä¼šè¿›è¡Œå¿ƒè·³æ£€æµ‹nginxæŒ‚äº†åè™šæ‹Ÿipä¼šä¸æˆ‘ä»¬çš„å¤‡ç”¨nginxç»‘å®šåˆ°ä¸€èµ·ã€‚</p>
</blockquote>
<blockquote>
<p>ä¸»å¤‡èŠ‚ç‚¹é…ç½®éœ€è¦ä¿æŒä¸€è‡´}ï¼ˆå¦‚æœå¤‡ç”¨èŠ‚ç‚¹æœºå™¨é…ç½®ä½äºä¸»èŠ‚ç‚¹æœºå™¨å¯èƒ½å‘ç”Ÿç¬é—´å®•æœºçš„æƒ…å†µï¼‰</p>
</blockquote>
<h1 id="å®‰è£…Keepalived"><a href="#å®‰è£…Keepalived" class="headerlink" title="å®‰è£…Keepalived"></a>å®‰è£…Keepalived</h1><blockquote>
<p>å®‰è£…libnl/libnl-3ä¾èµ–</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libnl libnl-devel</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰“å¼€<a href="https://www.keepalived.org/" target="_blank" rel="noopener">keepalivedå®˜ç½‘</a>é€‰æ‹©downloadé€‰æ‹©å“åº”çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p>
</blockquote>
<blockquote>
<p>è§£å‹å®‰è£…åŒ…</p>
</blockquote>
<blockquote>
<p>è¿›å…¥ç›®å½•æ‰§è¡Œå‘½ä»¤è¿›è¡Œé…ç½®ç”Ÿæˆé…ç½®æ–‡ä»¶</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/keepalived --sysconf=/etc</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å„ä¸ªå‚æ•°ä»£è¡¨çš„å«ä¹‰</p>
</blockquote>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>â€“prefix</td>
<td>æŒ‡å®škeepalivedå®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>â€“sysconf</td>
<td>æ ¸å¿ƒé…ç½®æ–‡ä»¶è·¯å¾„(è¦æ˜¯ä¸è®¾ç½®åˆ°è¿™ä¸ªç›®å½•ä¸‹é¢çš„è¯åé¢æ—¥å¿—ä¼šæŠ¥ä¸€ä¸ªé”™åœ¨/etcç›®å½•ä¸‹æ‰¾ä¸åˆ°keepalived,æ ¸å¿ƒé…ç½®æ–‡ä»¶è·¯å¾„ä¸º/etc/keepalived/keepalived.conf)</td>
</tr>
</tbody></table>
<h1 id="ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶</h1><blockquote>
<p>ä¸»èŠ‚ç‚¹é…ç½®æ–‡ä»¶</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">global_defs &#123;</span><br><span class="line">    # è·¯ç”±idï¼šå½“å‰å®‰è£…keepalivedçš„èŠ‚ç‚¹ä¸»æœºæ ‡è¯†ç¬¦ï¼Œä¿è¯å…¨å±€å”¯ä¸€</span><br><span class="line">    router_id keep_001</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    # è¡¨ç¤ºçŠ¶æ€æ˜¯MASTERä¸»æœºè¿˜æ˜¯å¤‡ç”¨æœºBACKUP</span><br><span class="line">    state MASTER</span><br><span class="line">    # è¯¥å®ä¾‹ç»‘å®šçš„ç½‘å¡ï¼ˆå¯ä»¥ä½¿ç”¨ ip addr æ‰§è¡ŒæŸ¥çœ‹ï¼‰</span><br><span class="line">    interface ens33</span><br><span class="line">    # è™šæ‹Ÿè·¯ç”±Idï¼Œä¿è¯ä¸»å¤‡èŠ‚ç‚¹ä¸€è‡´å³å¯</span><br><span class="line">    virtual_router_id 101</span><br><span class="line">    # æƒé‡ï¼Œmasteræƒé‡ä¸€èˆ¬é«˜äºbackupï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé‚£å°±æ˜¯é€‰ä¸¾ï¼Œè°çš„æƒé‡é«˜ï¼Œè°å°±å½“é€‰</span><br><span class="line">    priority 100</span><br><span class="line">    # ä¸»å¤‡ä¹‹é—´åŒæ­¥æ£€æŸ¥æ—¶é—´é—´éš”ï¼Œå•ä½ç§’</span><br><span class="line">    advert_int 1</span><br><span class="line">    # è®¤è¯æƒé™å¯†ç ï¼Œé˜²æ­¢éæ³•èŠ‚ç‚¹è¿›å…¥</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    # è™šæ‹Ÿå‡ºæ¥çš„ipï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼ˆvipï¼‰</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.88.88</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¤‡ç”¨èŠ‚ç‚¹é…ç½®æ–‡ä»¶</p>
</blockquote>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">global_defs &#123;</span><br><span class="line">    # è·¯ç”±idï¼šå½“å‰å®‰è£…keepalivedçš„èŠ‚ç‚¹ä¸»æœºæ ‡è¯†ç¬¦ï¼Œä¿è¯å…¨å±€å”¯ä¸€</span><br><span class="line">    router_id keep_002</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    # è¡¨ç¤ºçŠ¶æ€æ˜¯MASTERä¸»æœºè¿˜æ˜¯å¤‡ç”¨æœºBACKUP</span><br><span class="line">    state BACKUP</span><br><span class="line">    # è¯¥å®ä¾‹ç»‘å®šçš„ç½‘å¡ï¼ˆå¯ä»¥ä½¿ç”¨ ip addr æ‰§è¡ŒæŸ¥çœ‹ï¼‰</span><br><span class="line">    interface ens33</span><br><span class="line">    # è™šæ‹Ÿè·¯ç”±Idï¼Œä¿è¯ä¸»å¤‡èŠ‚ç‚¹ä¸€è‡´å³å¯</span><br><span class="line">    virtual_router_id 101</span><br><span class="line">    # æƒé‡ï¼Œmasteræƒé‡ä¸€èˆ¬é«˜äºbackupï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé‚£å°±æ˜¯é€‰ä¸¾ï¼Œè°çš„æƒé‡é«˜ï¼Œè°å°±å½“é€‰</span><br><span class="line">    priority 80</span><br><span class="line">    # ä¸»å¤‡ä¹‹é—´åŒæ­¥æ£€æŸ¥æ—¶é—´é—´éš”ï¼Œå•ä½ç§’</span><br><span class="line">    advert_int 1</span><br><span class="line">    # è®¤è¯æƒé™å¯†ç ï¼Œé˜²æ­¢éæ³•èŠ‚ç‚¹è¿›å…¥</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    # è™šæ‹Ÿå‡ºæ¥çš„ipï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼ˆvipï¼‰</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.88.88</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2020/11/13/linuxæ·»åŠ å®šæ—¶ä»»åŠ¡/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2020/11/13/linuxæ·»åŠ å®šæ—¶ä»»åŠ¡/" itemprop="url">linuxæ·»åŠ å®šæ—¶ä»»åŠ¡</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2020-11-13T20:30:00+08:00">2020-11-13 20:30:00</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="å®‰è£…å®šæ—¶ä»»åŠ¡"><a href="#å®‰è£…å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®‰è£…å®šæ—¶ä»»åŠ¡"></a>å®‰è£…å®šæ—¶ä»»åŠ¡</h1><ul>
<li>å®‰è£…å®šæ—¶ä»»åŠ¡(centos6æˆ–centos7å·²ç»å­å¼¹)</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install crontabs</span><br></pre></td></tr></table></figure>

<h1 id="æŸ¥çœ‹å½“å‰å·²ç»å­˜åœ¨çš„å®šæ—¶ä»»åŠ¡"><a href="#æŸ¥çœ‹å½“å‰å·²ç»å­˜åœ¨çš„å®šæ—¶ä»»åŠ¡" class="headerlink" title="æŸ¥çœ‹å½“å‰å·²ç»å­˜åœ¨çš„å®šæ—¶ä»»åŠ¡"></a>æŸ¥çœ‹å½“å‰å·²ç»å­˜åœ¨çš„å®šæ—¶ä»»åŠ¡</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br></pre></td></tr></table></figure>

<h1 id="ç¼–è¾‘å®šæ—¶ä»»åŠ¡"><a href="#ç¼–è¾‘å®šæ—¶ä»»åŠ¡" class="headerlink" title="ç¼–è¾‘å®šæ—¶ä»»åŠ¡"></a>ç¼–è¾‘å®šæ—¶ä»»åŠ¡</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<h1 id="ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡"><a href="#ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡" class="headerlink" title="ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡"></a>ç¼–è¾‘å¹¶æ·»åŠ ä¸€è¡Œæ–°çš„ä»»åŠ¡</h1><ul>
<li>å‰é¢æ˜¯è¡¨è¾¾å¼,åé¢æ˜¯è¦å®šæ—¶æ‰§è¡Œçš„è„šæœ¬<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * /usr/local/nginx/sbin/cut_my_log.sh</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="é‡å¯å®šæ—¶ä»»åŠ¡"><a href="#é‡å¯å®šæ—¶ä»»åŠ¡" class="headerlink" title="é‡å¯å®šæ—¶ä»»åŠ¡"></a>é‡å¯å®šæ—¶ä»»åŠ¡</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service crond restart</span><br></pre></td></tr></table></figure>

<h1 id="å®šæ—¶ä»»åŠ¡å¸¸ç”¨å‘½ä»¤"><a href="#å®šæ—¶ä»»åŠ¡å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å®šæ—¶ä»»åŠ¡å¸¸ç”¨å‘½ä»¤"></a>å®šæ—¶ä»»åŠ¡å¸¸ç”¨å‘½ä»¤</h1><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>service crond restart</td>
<td>å¯åŠ¨æœåŠ¡</td>
</tr>
<tr>
<td>service crond stop</td>
<td>å…³é—­æœåŠ¡</td>
</tr>
<tr>
<td>service crond restart</td>
<td>é‡å¯æœåŠ¡</td>
</tr>
<tr>
<td>service crond reload</td>
<td>é‡æ–°è½½å…¥é…ç½®</td>
</tr>
<tr>
<td>crontab -e</td>
<td>ç¼–è¾‘ä»»åŠ¡</td>
</tr>
<tr>
<td>crontab -l</td>
<td>æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨</td>
</tr>
</tbody></table>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/å®šæ—¶ä»»åŠ¡/" rel="tag"><i class="fas fa-tags"></i>å®šæ—¶ä»»åŠ¡</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://developertanliyuan.github.io/2020/11/12/Nginxæ ¸å¿ƒé…ç½®åŠè¿›ç¨‹äº‹ä»¶æ¨¡å‹/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Tan Liyuan">
        <meta itemprop="description" content="ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©">
        <meta itemprop="image" content="/images/tanliyuan_katong.jpg">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="DeveloperTanliyuan">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2020/11/12/Nginxæ ¸å¿ƒé…ç½®åŠè¿›ç¨‹äº‹ä»¶æ¨¡å‹/" itemprop="url">Nginxæ ¸å¿ƒé…ç½®åŠè¿›ç¨‹äº‹ä»¶æ¨¡å‹</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2020-11-12T16:17:39+08:00">2020-11-12 16:17:39</time></span>
        </span>
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <h1 id="nginxé»˜è®¤é…ç½®æ–‡ä»¶"><a href="#nginxé»˜è®¤é…ç½®æ–‡ä»¶" class="headerlink" title="nginxé»˜è®¤é…ç½®æ–‡ä»¶"></a>nginxé»˜è®¤é…ç½®æ–‡ä»¶</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line">#userå¯ä»¥é…ç½®æ–‡ä»¶ç›®å½•è®¿é—®çš„ç”¨æˆ·</span><br><span class="line">#user  nobody;</span><br><span class="line"># worker_processeså¯ä»¥æŒ‡å®šå·¥ä½œè¿›ç¨‹çš„æ•°é‡</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">#error_log  logs/error.log;</span><br><span class="line">#error_log  logs/error.log  notice;</span><br><span class="line">#error_log  logs/error.log  info;</span><br><span class="line"></span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">#äº‹ä»¶å¤„ç†</span><br><span class="line">events &#123;</span><br><span class="line"> Â  Â use epoll;						#é»˜è®¤ä½¿ç”¨epoll</span><br><span class="line"> Â  Â worker_connections  1024;</span><br><span class="line"> Â  Â #æ¯ä¸ªworkerå·¥ä½œè¿›ç¨‹å…è®¸è¿æ¥å®¢æˆ·ç«¯çš„æœ€å¤§è¿æ¥æ•°ï¼ˆå¯ä»¥é…ç½®ï¼‰</span><br><span class="line"> Â  Â #nginxä¹‹æ‰€ä»¥èƒ½å¤„ç†é«˜å¹¶å‘å°±æ˜¯å› ä¸ºè¿™é‡ŒåŠnginxçš„äº‹ä»¶å¤„ç†æ¨¡å‹</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line"> Â  Â #includeåŒ…å«å¯¼å…¥å¤–éƒ¨æ–‡ä»¶ï¼ˆmime.typesåœ¨configç›®å½•ä¸‹ï¼ŒåŒ…å«äº†å¹³æ—¶è¯·æ±‚åŒ…å«çš„ç±»å‹ï¼‰ï¼Œæé«˜å¯è¯»æ€§</span><br><span class="line"> Â  Â #æˆ‘ä»¬è‡ªå·±é€šè¿‡includeå¯¼å…¥serveré…ç½®ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„(å¯¼å…¥é…ç½®ä¸€å®šè¦è®°å¾—åŠ åˆ†å·)</span><br><span class="line"> Â  Â include Â  Â  Â  mime.types;</span><br><span class="line"> Â  Â #é»˜è®¤çš„typeç±»å‹</span><br><span class="line"> Â  Â default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line"> Â  Â #æ—¥å¿—æ ¼å¼çš„é…ç½®ï¼ˆé»˜è®¤è‡ªå¸¦æ—¥å¿—æ ¼å¼ä¸éœ€è¦é…ç½®/å¦‚æœéœ€è¦å®šåˆ¶åŒ–æ—¥å¿—æ ¼å¼å¯ä»¥å¯¹å…¶è¿›è¡Œé…ç½®ï¼‰</span><br><span class="line"> Â  Â #log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">    #                  &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">    #                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line">    </span><br><span class="line"> Â  Â #httpè¯·æ±‚æ—¥å¿—è·¯å¾„ï¼ŒåŒæ—¶ä»£è¡¨æˆ‘ä»¬nginxçš„æ€§èƒ½ä¹Ÿå¾—åˆ°äº†æå‡</span><br><span class="line"> Â  Â #access_log  logs/access.log  main;</span><br><span class="line"> Â  Â #æ‰“å¼€sendfileå¯å¼€å¯æ–‡ä»¶çš„é«˜æ•ˆä¼ è¾“</span><br><span class="line"> Â  Â sendfile Â  Â  Â   on;</span><br><span class="line"> Â  Â #å¼€å¯sendfileæ‰å¯ä»¥å¼€å¯tcp_nopush,è¡¨ç¤ºæ•°æ®åŒ…ç´¯ç§¯åˆ°ä¸€å®šå¤§å°è¿‡åå†å¼€å§‹å‘é€ï¼Œæå‡æ–‡ä»¶ä¼ è¾“çš„æ•ˆç‡ï¼ˆç±»æ¯”å¤–å–å°å“¥æ‰“åŒ…é€é¤æ”¾åˆ°é›†è£…ç®±æé«˜å·¥ä½œæ•ˆç‡ï¼‰/ä¸å¼€å¯åˆ™ä½¿ç”¨åŒæ­¥é˜»å¡çš„æ–¹å¼ï¼Œæ•ˆç‡æ˜¯æå…¶ä½ä¸‹çš„ã€‚</span><br><span class="line"> Â  Â #tcp_nopush Â  Â  on;</span><br><span class="line"></span><br><span class="line"> Â  Â #keepalive_timeoutå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨å¯ä»¥ä¿æŒè¿æ¥çš„æ—¶é—´</span><br><span class="line"> Â  Â #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â #å†…å®¹ä¼ è¾“è¿›è¡Œå‹ç¼©ï¼ŒèŠ‚çº¦æœåŠ¡å™¨å¸¦å®½çš„å¼€é”€ï¼Œä¸è¿‡å‹ç¼©è‚¯å®šä¼šæ¶ˆè€—æœåŠ¡å™¨çš„æ€§èƒ½</span><br><span class="line"> Â  Â #gzip  on;</span><br><span class="line">    </span><br><span class="line"> Â  Â #é™åˆ¶æœ€å°å‹ç¼©ï¼Œæ–‡ä»¶å†…å®¹å°äº1ä¸ªå­—èŠ‚å°±ä¸ä¼šå¯¹å…¶è¿›è¡Œå‹ç¼©</span><br><span class="line"> Â  Â #gzip_min_length 1;</span><br><span class="line">    </span><br><span class="line"> Â  Â #å®šä¹‰å‹ç¼©çš„çº§åˆ«ï¼ˆå‹ç¼©æ¯”ï¼Œæ–‡ä»¶è¶Šå¤§ï¼Œå‹ç¼©è¶Šå¤šï¼Œä½†æ˜¯cpuæ¶ˆè€—å°±æ›´å¤šï¼‰</span><br><span class="line">    #gzip_min_lenght 3;</span><br><span class="line">    </span><br><span class="line"> Â  Â #å®šä¹‰å‹ç¼©æ–‡ä»¶çš„ç±»å‹</span><br><span class="line"> Â  Â #gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/json</span><br><span class="line"></span><br><span class="line"> Â  Â #ä¸ºè™šæ‹Ÿä¸»æœºé…ç½®ç›‘å¬ä¿¡æ¯ï¼ˆå¯ä»¥é…ç½®å¤šå—ï¼‰</span><br><span class="line"> Â  Â server &#123;</span><br><span class="line"> Â  Â  Â  Â #ç›‘å¬çš„ç«¯å£å·</span><br><span class="line"> Â  Â  Â  Â listen Â  Â  Â  80;</span><br><span class="line"> Â  Â  Â  Â #æœåŠ¡å™¨åç§°ï¼ˆå¯ä»¥æ˜¯å¤‡æ¡ˆè¿‡ååŸŸåæˆ–ipæˆ–è€…æ˜¯localhostï¼‰</span><br><span class="line"> Â  Â  Â  Â server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line"> Â  Â  Â  Â #è·¯ç”±ï¼Œæ‰¾åˆ°å¯¹åº”çš„é¡µé¢</span><br><span class="line"> Â  Â  Â  Â location / &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â #èµ„æºè·¯å¾„ï¼ˆå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œè¿™é‡Œæ˜¯ç›¸å¯¹è·¯å¾„ï¼‰</span><br><span class="line"> Â  Â  Â  Â  Â  Â root Â  html;</span><br><span class="line"> Â  Â  Â  Â  Â  Â #æ ¹è·¯å¾„é»˜è®¤è®¿é—®çš„èµ„æº</span><br><span class="line"> Â  Â  Â  Â  Â  Â index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">			</span><br><span class="line"> Â  Â  Â  Â #é”™è¯¯é¡µé¢å±•ç¤º</span><br><span class="line"> Â  Â  Â  Â #error_page  404 Â  Â  Â  Â  Â  Â   /404.html;</span><br><span class="line"></span><br><span class="line"> Â  Â  Â  Â #å‘ç”Ÿ50xé”™è¯¯çš„æ—¶å€™é‡å®šå‘åˆ°ç›¸å…³é”™è¯¯é¡µé¢</span><br><span class="line"> Â  Â  Â  Â # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache&apos;s document root</span><br><span class="line">        # concurs with nginx&apos;s one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line"> Â  Â  Â  Â #ä»¥ä¸Šé…ç½®å¤šä¸ªèµ„æºè·¯å¾„</span><br><span class="line">        </span><br><span class="line"> Â  Â  Â  Â #ä»¥åˆ«åå½¢å¼é…ç½®è·¯å¾„(éšè—çœŸå®èµ„æºè·¯å¾„)</span><br><span class="line"> Â  Â  Â  Â #location /resource &#123;</span><br><span class="line"> Â  Â  Â  Â # Â  Â #å°†èµ„æºè·¯å¾„resourceæ˜ å°„åˆ°/xxx/xxx/xxx/resourceè·¯å¾„ä¸‹</span><br><span class="line"> Â  Â  Â  Â # Â  Â alias /xxx/xxx/xxx/resource;</span><br><span class="line"> Â  Â  Â  Â #&#125;</span><br><span class="line"></span><br><span class="line"> Â  Â &#125;</span><br><span class="line"> Â  Â #é…ç½®ä¸Šæ¸¸æœåŠ¡å™¨</span><br><span class="line"> Â  Â upstream tomcats &#123;</span><br><span class="line"> Â  Â  Â  Â #é»˜è®¤ä½¿ç”¨è½®è¯¢ç­–ç•¥ï¼Œæ·»åŠ weightæ ¹æ®æƒé‡é€‰æ‹©æ‰§è¡Œçš„æœºå™¨</span><br><span class="line"> Â  Â  Â  Â server 192.168.1.101:8080 weight=1;</span><br><span class="line">        server 192.168.1.102:8080;</span><br><span class="line">        server 192.168.1.103:8080;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"> Â  Â #å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸï¼Œ*ä»£è¡¨æ‰€æœ‰</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Origin&apos; *;</span><br><span class="line"> Â  Â #å…è®¸å¸¦ä¸Šcookieè¯·æ±‚</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Credentials&apos; &apos;true&apos;;</span><br><span class="line"> Â  Â #å…è®¸è¯·æ±‚çš„æ–¹æ³•get/post/put/delete</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Method&apos; *;</span><br><span class="line"> Â  Â #å…è®¸è¯·æ±‚çš„header</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Header&apos; *;</span><br><span class="line"> Â  Â #å¯¹æºç«™ç‚¹éªŒè¯(é™æ€èµ„æºé˜²ç›—é“¾)</span><br><span class="line"> Â  Â #valid_referers *.xxx.com;</span><br><span class="line">    #if($invalid_refer) &#123;</span><br><span class="line"> Â  Â # Â  Â return 404;</span><br><span class="line"> Â  Â #&#125;</span><br><span class="line"> Â  Â # Â   add_header &apos;Access-Control-Allow-Header&apos; *;</span><br><span class="line"> Â  Â # Â   location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line"> Â  Â # Â  Â  Â   #é™æ€èµ„æºè®¿é—®ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œæ–‡ä»¶å‘ç”Ÿæ›´æ”¹ä¹Ÿä¼šä¸ä½¿ç”¨ç¼“å­˜ã€‚</span><br><span class="line"> Â  Â # Â  Â  Â   expires 10s;</span><br><span class="line"> Â  Â # Â  Â  Â   #æŒ‡å®šç¼“å­˜è¿‡æœŸæ—¶é—´ä¸º22ç‚¹30åˆ†</span><br><span class="line"> Â  Â # Â  Â  Â   expires @22h30m</span><br><span class="line"> Â  Â # Â  Â  Â   #ç¼“å­˜åœ¨1ä¸ªå°æ—¶ä¹‹å‰å·²ç»è¿‡æœŸ</span><br><span class="line"> Â  Â # Â  Â  Â   expires -1h</span><br><span class="line"> Â  Â # Â  Â  Â   #ä¸è®¾ç½®ç¼“å­˜</span><br><span class="line"> Â  Â # Â  Â  Â   expires epoch</span><br><span class="line"> Â  Â # Â  Â  Â   #å…³é—­nginxç¼“å­˜ï¼ˆé»˜è®¤ï¼‰ï¼Œæµè§ˆå™¨è¿˜æ˜¯æœ‰ç¼“å­˜æœºåˆ¶</span><br><span class="line"> Â  Â # Â  Â  Â   expires off</span><br><span class="line"> Â  Â # Â  Â  Â   #æœ€å¤§è¿‡æœŸæ—¶é—´ï¼ˆç›¸å½“äºæ°¸ä¸è¿‡æœŸï¼‰</span><br><span class="line"> Â  Â # Â  Â  Â   expires max</span><br><span class="line"> Â  Â # Â   &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       443 ssl;</span><br><span class="line">    #    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #    ssl_certificate      cert.pem;</span><br><span class="line">    #    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    #    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    #    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    #    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="nginxé…ç½®ç»“æ„"><a href="#nginxé…ç½®ç»“æ„" class="headerlink" title="nginxé…ç½®ç»“æ„"></a>nginxé…ç½®ç»“æ„</h1><p><img src="/images/QQDVHSPWSN.png" alt="nginxé…ç½®ç»“æ„"></p>
<h1 id="æ ¡éªŒnginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®"><a href="#æ ¡éªŒnginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®" class="headerlink" title="æ ¡éªŒnginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®"></a>æ ¡éªŒnginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -t</span><br></pre></td></tr></table></figure>

<h1 id="ä¿®æ”¹é…ç½®æ–‡ä»¶è¿‡åéœ€è¦é‡æ–°è£…è½½nginx"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶è¿‡åéœ€è¦é‡æ–°è£…è½½nginx" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶è¿‡åéœ€è¦é‡æ–°è£…è½½nginx"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶è¿‡åéœ€è¦é‡æ–°è£…è½½nginx</h1><ul>
<li>é‡æ–°è£…è½½nginxçš„å‘½ä»¤å¦‚ä¸‹</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure>

<h1 id="Nginxè¿›ç¨‹æ¨¡å‹"><a href="#Nginxè¿›ç¨‹æ¨¡å‹" class="headerlink" title="Nginxè¿›ç¨‹æ¨¡å‹"></a>Nginxè¿›ç¨‹æ¨¡å‹</h1><h2 id="æŸ¥çœ‹nginxè¿›ç¨‹"><a href="#æŸ¥çœ‹nginxè¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹nginxè¿›ç¨‹"></a>æŸ¥çœ‹nginxè¿›ç¨‹</h2><ul>
<li>æŸ¥çœ‹nginxè¿›ç¨‹å‘½ä»¤</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>å‘½ä»¤æ‰§è¡Œç»“æœ</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root       4640      1  0 13:59 ?        00:00:00 nginx: master process ./nginx</span><br><span class="line">nobody     4641   4640  0 13:59 ?        00:00:00 nginx: worker process</span><br><span class="line">root       4723   4668  0 15:22 pts/0    00:00:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®å‘½ä»¤æ‰§è¡Œç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€å…±æ˜¯æœ‰ä¸¤ä¸ªnginxçš„è¿›ç¨‹ï¼Œç¬¬1ä¸ªæ˜¯nginx:masterä¸»è¿›ç¨‹ï¼Œç¬¬2ä¸ªæ˜¯nginx:workerå·¥ä½œè¿›ç¨‹ï¼Œå®é™…ä¸Šæˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šnginx:workerçš„å·¥ä½œè¿›ç¨‹çš„æ•°é‡çš„ï¼Œé…ç½®æ–‡ä»¶å±æ€§å¦‚ä¸‹ã€‚</p>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;	#æŒ‡å®šå·¥ä½œè¿›ç¨‹çš„æ•°é‡</span><br></pre></td></tr></table></figure>

<h2 id="nginxè¿›ç¨‹æ¨¡å‹"><a href="#nginxè¿›ç¨‹æ¨¡å‹" class="headerlink" title="nginxè¿›ç¨‹æ¨¡å‹"></a>nginxè¿›ç¨‹æ¨¡å‹</h2><ul>
<li><p>nginx:masterè¿›ç¨‹æ˜¯ä¸»è¿›ç¨‹ï¼Œå¯¹nginx:workerè¿›ç¨‹è¿›è¡Œç®¡ç†</p>
</li>
<li><p>nginx:workerè¿›ç¨‹æ˜¯å·¥ä½œè¿›ç¨‹ï¼Œä¸ºnginx:masterè¿›ç¨‹æœåŠ¡</p>
</li>
<li><p>nginx:masterä¼šå‘é€ä¿¡å·ç»™nginx:workerè¿›ç¨‹ï¼Œå®ä¾‹ä¿¡å·æŒ‡ä»¤å¦‚ä¸‹</p>
</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s stop</span><br><span class="line">./nginx -s quit</span><br><span class="line">./nginx -s reload</span><br><span class="line">./nginx -t</span><br></pre></td></tr></table></figure>

<p>//todoå¤šçœ‹çœ‹nginxçš„è¿›ç¨‹æ¨¡å‹åŠnginxæŠ¢å æœºåˆ¶è¿™å—çŸ¥è¯†<br><img src="/images/WGMHZNCTSG.png" alt="nginxè¿›ç¨‹æ¨¡å‹"></p>
<h1 id="nginxäº‹ä»¶å¤„ç†æ¨¡å‹"><a href="#nginxäº‹ä»¶å¤„ç†æ¨¡å‹" class="headerlink" title="nginxäº‹ä»¶å¤„ç†æ¨¡å‹"></a>nginxäº‹ä»¶å¤„ç†æ¨¡å‹</h1><ul>
<li>nginxäº‹ä»¶å¤„ç†æ¨¡å‹ç±»ä¼¼äºå¤šè·¯å¤ç”¨</li>
</ul>
<p><img src="/images/YSGFWLTNXZI.png" alt="nginxäº‹ä»¶å¤„ç†æ¨¡å‹"></p>
<h1 id="nginxå¸¸è§çš„é—®é¢˜"><a href="#nginxå¸¸è§çš„é—®é¢˜" class="headerlink" title="nginxå¸¸è§çš„é—®é¢˜"></a>nginxå¸¸è§çš„é—®é¢˜</h1><h2 id="open-â€œ-XXX-XXX-nginx-pidâ€-failed-2-No-such-file-or-directory"><a href="#open-â€œ-XXX-XXX-nginx-pidâ€-failed-2-No-such-file-or-directory" class="headerlink" title="open â€œ/XXX/XXX/nginx.pidâ€ failed (2: No such file or directory)"></a>open â€œ/XXX/XXX/nginx.pidâ€ failed (2: No such file or directory)</h2><ul>
<li>é¦–å…ˆè¿›å…¥pidç›®å½•</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /XXX/XXX</span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœæç¤ºcd: /XXX/XXXï¼šæ²¡æœ‰å“ªä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œåˆ›å»ºç›®å½•</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /XXX/XXX</span><br></pre></td></tr></table></figure>

<h2 id="nginx-error-invalid-PID-number-â€œâ€-â€œin-xxx-xxx-nginx-pidâ€"><a href="#nginx-error-invalid-PID-number-â€œâ€-â€œin-xxx-xxx-nginx-pidâ€" class="headerlink" title="nginx:[error] invalid PID number â€œâ€ â€œin /xxx/xxx/nginx.pidâ€"></a>nginx:[error] invalid PID number â€œâ€ â€œin /xxx/xxx/nginx.pidâ€</h2><ul>
<li><p>è¯¥é”™è¯¯å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªpidæ— æ•ˆï¼Œæˆ‘ä»¬åªéœ€è¦é‡æ–°æŒ‡å®šä¸€ä¸‹nginxçš„é…ç½®æ–‡ä»¶</p>
</li>
<li><p>é¦–å…ˆæŸ¥çœ‹nginxçš„å¸®åŠ©å‘½ä»¤,åœ¨nginxå®‰è£…ç›®å½•ä¸‹çš„sbinç›®å½•ä¸‹æ‰§è¡Œ</p>
</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -h</span><br></pre></td></tr></table></figure>

<ul>
<li>å‘½ä»¤ç»“æœ</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Options:</span><br><span class="line"> Â //-cæŸ¥çœ‹å¸®åŠ©</span><br><span class="line"> Â -?,-h Â  Â  Â  Â  : this help</span><br><span class="line"> Â //æŸ¥çœ‹ç‰ˆæœ¬</span><br><span class="line"> Â -v Â  Â  Â  Â  Â   : show version and exit</span><br><span class="line"> Â //ç‰ˆæœ¬åŠå…·ä½“ç¼–è¯‘å®‰è£…ç¯å¢ƒé…ç½®å‚æ•°</span><br><span class="line"> Â -V Â  Â  Â  Â  Â   : show version and configure options then exit</span><br><span class="line"> Â //æ ¡éªŒé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</span><br><span class="line"> Â -t Â  Â  Â  Â  Â   : test configuration and exit</span><br><span class="line">  -T            : test configuration, dump it and exit</span><br><span class="line">  -q            : suppress non-error messages during configuration testing</span><br><span class="line"> Â //å‘é€ä¿¡å·ç»™nginx:masterè¿›ç¨‹ï¼Œstopåœæ­¢/quitä¼˜é›…åœæ­¢/reopené‡æ–°æ‰“å¼€/reloadé‡æ–°è£…è½½</span><br><span class="line"> Â -s signal Â  Â  : send signal to a master process: stop, quit, reopen, reload</span><br><span class="line"> Â //nginxå®‰è£…è·¯å¾„</span><br><span class="line"> Â -p prefix Â  Â  : set prefix path (default: /usr/local/nginx/)</span><br><span class="line">  //-cæŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„</span><br><span class="line"> Â -c filename Â  : set configuration file (default: conf/nginx.conf)</span><br><span class="line">  -g directives : set global directives out of configuration file</span><br></pre></td></tr></table></figure>

<ul>
<li>æ‰§è¡Œå‘½ä»¤</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -c /.../conf/nginx.conf</span><br></pre></td></tr></table></figure>

<h1 id="nginxæ—¥å¿—åˆ‡å‰²"><a href="#nginxæ—¥å¿—åˆ‡å‰²" class="headerlink" title="nginxæ—¥å¿—åˆ‡å‰²"></a>nginxæ—¥å¿—åˆ‡å‰²</h1><ul>
<li>éšç€æ—¶é—´çš„æ¨ç§»é¡¹ç›®æ—¥å¿—è¶Šå¤§ï¼Œè¾¾åˆ°10GBç”šè‡³å‡ åGBï¼Œä¸ä¾¿äºæ—¥å¿—åˆ†æï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ—¥å¿—è¿›è¡Œåˆ‡å‰²</li>
</ul>
<h2 id="æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—çš„è„šæœ¬"><a href="#æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—çš„è„šæœ¬" class="headerlink" title="æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—çš„è„šæœ¬"></a>æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—çš„è„šæœ¬</h2><ul>
<li>åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„shellè„šæœ¬ï¼šcut_my_log.shï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">LOG_PATH=&quot;/var/log/nginx&quot;</span><br><span class="line">RECORD_TIME=$(date -d &quot;yesterday&quot; +%Y-%m-%d+%H:%M)</span><br><span class="line">PID=/var/run/nginx/nginx.pid</span><br><span class="line">mv $&#123;LOG_PATH&#125;/access.log $&#123;LOG_PATH&#125;/access.$&#123;RECORD_TIME&#125;.log</span><br><span class="line">mv $&#123;LOG_PATH&#125;/error.log $&#123;LOG_PATH&#125;/access.$&#123;RECORD_TIME&#125;.log</span><br><span class="line">#å‘nginx:masterè¿›ç¨‹å‘é€ä¿¡å·ï¼Œç”¨äºé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶</span><br><span class="line">kill -USR1 `cat $PID`</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ºcut_my_log.shè„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x cut_my_log.sh</span><br></pre></td></tr></table></figure>

<h1 id="nginxåŒ¹é…è§„åˆ™"><a href="#nginxåŒ¹é…è§„åˆ™" class="headerlink" title="nginxåŒ¹é…è§„åˆ™"></a>nginxåŒ¹é…è§„åˆ™</h1><ul>
<li><p>location / #è·¯å¾„å­˜åœ¨å³å¯è®¿é—®</p>
</li>
<li><p>location = / #ç²¾ç¡®åŒ¹é… ï¼ˆè¿™é‡Œåªèƒ½è®¿é—®åˆ°æ ¹ï¼‰</p>
</li>
<li><p>location ~ .(GIF|png|bmp|jpg|jpeg) #æ­£åˆ™è¡¨è¾¾å¼ä¸å¸¦*åŒºåˆ†å¤§å°å†™</p>
</li>
<li><p>location ~* .(GIF|png|bmp|jpg|jpeg) #æ­£åˆ™è¡¨è¾¾å¼å¸¦*ä¸åŒºåˆ†å¤§å°å†™</p>
</li>
<li><p>location ^~ /xxx/xxx #ä¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä»¥/xxx/xxxè·¯å¾„å¼€å¤´</p>
</li>
</ul>
<h1 id="upstreamæŒ‡ä»¤å‚æ•°"><a href="#upstreamæŒ‡ä»¤å‚æ•°" class="headerlink" title="upstreamæŒ‡ä»¤å‚æ•°"></a>upstreamæŒ‡ä»¤å‚æ•°</h1><ul>
<li>upstreamæŒ‡å®šå‚æ•°ä»¥keyä¸valueçš„å½¢å¼é…ç½®åˆ°ipåŠç«¯å£çš„åé¢å¦‚ä¸‹æ‰€ç¤º</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">upstream tomcats &#123;</span><br><span class="line">  Â  Â server 192.168.1.101:8080 key=value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æŒ‡ä»¤å‚æ•°"><a href="#æŒ‡ä»¤å‚æ•°" class="headerlink" title="æŒ‡ä»¤å‚æ•°"></a>æŒ‡ä»¤å‚æ•°</h2><hr>
<h3 id="max-conns-count-æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è®¾ç½®è¿‡è½½ä¿æŠ¤åšé™æµç°ä½œç”¨ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½èƒ½ç”Ÿæ•ˆï¼Œåœ¨1-11-5ä¹‹å‰è¿™ä¸ªå‚æ•°åªé€‚ç”¨äºå•†ä¸šç‰ˆæœ¬"><a href="#max-conns-count-æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è®¾ç½®è¿‡è½½ä¿æŠ¤åšé™æµç°ä½œç”¨ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½èƒ½ç”Ÿæ•ˆï¼Œåœ¨1-11-5ä¹‹å‰è¿™ä¸ªå‚æ•°åªé€‚ç”¨äºå•†ä¸šç‰ˆæœ¬" class="headerlink" title="max_conns=count (æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è®¾ç½®è¿‡è½½ä¿æŠ¤åšé™æµç°ä½œç”¨ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½èƒ½ç”Ÿæ•ˆï¼Œåœ¨1.11.5ä¹‹å‰è¿™ä¸ªå‚æ•°åªé€‚ç”¨äºå•†ä¸šç‰ˆæœ¬)"></a>max_conns=count (æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è®¾ç½®è¿‡è½½ä¿æŠ¤åšé™æµç°ä½œç”¨ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½èƒ½ç”Ÿæ•ˆï¼Œåœ¨1.11.5ä¹‹å‰è¿™ä¸ªå‚æ•°åªé€‚ç”¨äºå•†ä¸šç‰ˆæœ¬)</h3><hr>
<h3 id="slow-start-time-æœåŠ¡å™¨æ¢å¤è¿‡åç»è¿‡timeçš„æ—¶é—´è¿‡åå†åŠ å…¥åˆ°upstreamé›†ç¾¤ä¸­ï¼Œå•†ä¸šç‰ˆnginxä¸­æ‰èƒ½ä½¿ç”¨"><a href="#slow-start-time-æœåŠ¡å™¨æ¢å¤è¿‡åç»è¿‡timeçš„æ—¶é—´è¿‡åå†åŠ å…¥åˆ°upstreamé›†ç¾¤ä¸­ï¼Œå•†ä¸šç‰ˆnginxä¸­æ‰èƒ½ä½¿ç”¨" class="headerlink" title="slow_start=time(æœåŠ¡å™¨æ¢å¤è¿‡åç»è¿‡timeçš„æ—¶é—´è¿‡åå†åŠ å…¥åˆ°upstreamé›†ç¾¤ä¸­ï¼Œå•†ä¸šç‰ˆnginxä¸­æ‰èƒ½ä½¿ç”¨)"></a>slow_start=time(æœåŠ¡å™¨æ¢å¤è¿‡åç»è¿‡timeçš„æ—¶é—´è¿‡åå†åŠ å…¥åˆ°upstreamé›†ç¾¤ä¸­ï¼Œå•†ä¸šç‰ˆnginxä¸­æ‰èƒ½ä½¿ç”¨)</h3><hr>
<h3 id="down-é…ç½®è¯¥æœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€"><a href="#down-é…ç½®è¯¥æœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€" class="headerlink" title="down é…ç½®è¯¥æœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€"></a>down é…ç½®è¯¥æœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æ ‡è®°ä¸ºä¸å¯ç”¨çŠ¶æ€</h3><hr>
<h3 id="back-æ ‡è®°è¯¥æœåŠ¡æ˜¯ä¸€å°å¤‡ç”¨æœºï¼Œé›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ä¼šå¯åŠ¨è¯¥å°æœåŠ¡å™¨è¿›è¡Œå¤‡ç”¨"><a href="#back-æ ‡è®°è¯¥æœåŠ¡æ˜¯ä¸€å°å¤‡ç”¨æœºï¼Œé›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ä¼šå¯åŠ¨è¯¥å°æœåŠ¡å™¨è¿›è¡Œå¤‡ç”¨" class="headerlink" title="back æ ‡è®°è¯¥æœåŠ¡æ˜¯ä¸€å°å¤‡ç”¨æœºï¼Œé›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ä¼šå¯åŠ¨è¯¥å°æœåŠ¡å™¨è¿›è¡Œå¤‡ç”¨"></a>back æ ‡è®°è¯¥æœåŠ¡æ˜¯ä¸€å°å¤‡ç”¨æœºï¼Œé›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¸å¯ç”¨çš„æ—¶å€™ä¼šå¯åŠ¨è¯¥å°æœåŠ¡å™¨è¿›è¡Œå¤‡ç”¨</h3><hr>
<h3 id="max-fails-countæœ€å¤§å¤±è´¥æ¬¡æ•°"><a href="#max-fails-countæœ€å¤§å¤±è´¥æ¬¡æ•°" class="headerlink" title="max_fails=countæœ€å¤§å¤±è´¥æ¬¡æ•°"></a>max_fails=countæœ€å¤§å¤±è´¥æ¬¡æ•°</h3><h3 id="fail-time-out-time"><a href="#fail-time-out-time" class="headerlink" title="fail_time_out=time"></a>fail_time_out=time</h3><h3 id="ä»¥ä¸Šä¸¤ä¸ªå‚æ•°è¿ç”¨è¡¨ç¤ºtimeæ—¶é—´å†…å¤±è´¥æ¬¡æ•°è¶…è¿‡countå°±ä¼šå°†æœåŠ¡è¸¢å‡ºupstreamé›†ç¾¤ä¸­ï¼Œ15såå†å°è¯•è¯·æ±‚æ˜¯å¦æ­£å¸¸å¦‚æ­¤å¾€å¤"><a href="#ä»¥ä¸Šä¸¤ä¸ªå‚æ•°è¿ç”¨è¡¨ç¤ºtimeæ—¶é—´å†…å¤±è´¥æ¬¡æ•°è¶…è¿‡countå°±ä¼šå°†æœåŠ¡è¸¢å‡ºupstreamé›†ç¾¤ä¸­ï¼Œ15såå†å°è¯•è¯·æ±‚æ˜¯å¦æ­£å¸¸å¦‚æ­¤å¾€å¤" class="headerlink" title="ä»¥ä¸Šä¸¤ä¸ªå‚æ•°è¿ç”¨è¡¨ç¤ºtimeæ—¶é—´å†…å¤±è´¥æ¬¡æ•°è¶…è¿‡countå°±ä¼šå°†æœåŠ¡è¸¢å‡ºupstreamé›†ç¾¤ä¸­ï¼Œ15såå†å°è¯•è¯·æ±‚æ˜¯å¦æ­£å¸¸å¦‚æ­¤å¾€å¤"></a>ä»¥ä¸Šä¸¤ä¸ªå‚æ•°è¿ç”¨è¡¨ç¤ºtimeæ—¶é—´å†…å¤±è´¥æ¬¡æ•°è¶…è¿‡countå°±ä¼šå°†æœåŠ¡è¸¢å‡ºupstreamé›†ç¾¤ä¸­ï¼Œ15såå†å°è¯•è¯·æ±‚æ˜¯å¦æ­£å¸¸å¦‚æ­¤å¾€å¤</h3><hr>
<h1 id="keepalive-countæé«˜ååé‡"><a href="#keepalive-countæé«˜ååé‡" class="headerlink" title="keepalive=countæé«˜ååé‡"></a>keepalive=countæé«˜ååé‡</h1><figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">upstream tomcats &#123;</span><br><span class="line">	server 192.168.1.101:8080;</span><br><span class="line">	#ä¿æŒé•¿è¿æ¥çš„æ•°é‡</span><br><span class="line">	keepalive 32;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">	listen		80;</span><br><span class="line">	server_name	www.tomcats.com;</span><br><span class="line">	location / &#123;</span><br><span class="line">		proxy_pass http://tomcats;</span><br><span class="line">		#åè®®ç‰ˆæœ¬å·http1.1æ‰æ”¯æŒä¿æŒé•¿è¿æ¥é¿å…æœåŠ¡ç»å¸¸åˆ›å»ºå…³é—­æ¶ˆè€—æœåŠ¡å™¨èµ„æº</span><br><span class="line">		proxy_http_version 1.1;</span><br><span class="line">		#æ¸…é™¤collectionä¸­çš„ä¿¡æ¯</span><br><span class="line">		proxy_set_header Connection &quot;&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ip-hash-ipåœ°å€å–æ¨¡è¯·æ±‚æ‰“åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šé¢"><a href="#ip-hash-ipåœ°å€å–æ¨¡è¯·æ±‚æ‰“åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šé¢" class="headerlink" title="ip_hash ipåœ°å€å–æ¨¡è¯·æ±‚æ‰“åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šé¢"></a>ip_hash ipåœ°å€å–æ¨¡è¯·æ±‚æ‰“åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šé¢</h1><ul>
<li><p>é…ç½®æ–¹å¼å¦‚ä¸‹å³å¯</p>
</li>
<li><p>ä¸åŒipçš„å®¢æˆ·ç«¯ä¼šä¼šå›ºå®šçš„è¯·æ±‚åˆ°ä¸åŒçš„å›ºå®šæœåŠ¡å™¨</p>
</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">upstream tomcats &#123;</span><br><span class="line">	#ip_hashæ ¹æ®è¯·æ±‚çš„ipåœ°å€ä¸é›†ç¾¤ä¸­æœåŠ¡å™¨çš„æ•°é‡è¿›è¡Œæ±‚æ¨¡æ“ä½œ</span><br><span class="line">	ip_hash;</span><br><span class="line">	server 192.168.1.101:8080;</span><br><span class="line">	server 192.168.1.102:8080;</span><br><span class="line">	server 192.168.1.103:8080;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ip-hashåœ¨nginxæºç ä¸­çš„ç®—æ³•"><a href="#ip-hashåœ¨nginxæºç ä¸­çš„ç®—æ³•" class="headerlink" title="ip_hashåœ¨nginxæºç ä¸­çš„ç®—æ³•"></a>ip_hashåœ¨nginxæºç ä¸­çš„ç®—æ³•</h2><ul>
<li><p>ip_hashæºç åœ¨å®‰è£…åŒ…å†…/src/http/modules/ngx_http_upstream_ip_hash_module.cæ–‡ä»¶ä¸­</p>
</li>
<li><p>æºç ä¸­é€šè¿‡â€.â€å¯¹ipè¿›è¡Œåˆ‡å‰²çš„æ•°ç»„é•¿åº¦ä¸º4ï¼Œç´¢å¼•ä¸º0~3ï¼Œå–ç´¢å¼•2è¿›è¡Œå–æ¨¡ï¼Œæ‰€ä»¥åœ¨æœ¬åœ°å†…ç½‘ç¯å¢ƒè®¿é—®æœåŠ¡å™¨çš„æ—¶å€™çœ‹ä¸å‡ºæ¥ä¸åŒçš„ipæ‰“åˆ°äº†ç›¸åŒçš„æœåŠ¡å™¨</p>
<h2 id="ip-hashæ³¨æ„"><a href="#ip-hashæ³¨æ„" class="headerlink" title="ip_hashæ³¨æ„"></a>ip_hashæ³¨æ„</h2></li>
<li><p>ä½¿ç”¨ip_hashçš„æ—¶å€™å¦‚æœå…¶ä¸­ä¸€å°æœåŠ¡å™¨å‡ºç°äº†é—®é¢˜æˆ‘ä»¬éœ€è¦ç§»é™¤ä¸èƒ½åœ¨upstremä¸­ç›´æ¥åˆ é™¤ï¼Œå¦åˆ™hashçš„å€¼ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè¯·æ±‚çš„æœåŠ¡å™¨å°±ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬åº”è¯¥å°†æœåŠ¡å™¨æ ‡è®°ä¸ºdownä¸è¢«è¯·æ±‚ã€‚</p>
</li>
</ul>
<h2 id="ip-hashå¸¦æ¥çš„é—®é¢˜"><a href="#ip-hashå¸¦æ¥çš„é—®é¢˜" class="headerlink" title="ip_hashå¸¦æ¥çš„é—®é¢˜"></a>ip_hashå¸¦æ¥çš„é—®é¢˜</h2><ul>
<li>å¦‚æœæœåŠ¡å™¨æ•°é‡å‘ç”Ÿå˜åŒ–ï¼Œæ— è®ºæ˜¯æ–°å¢æˆ–è€…å‡å°‘éƒ½ä¼šå¯¼è‡´hashç®—æ³•ç®—å‡ºæ¥çš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œä¼šè¯ä¸¢å¤±ï¼Œç¼“å­˜æ— æ³•è®¿é—®ç­‰é—®é¢˜ã€‚</li>
</ul>
<h1 id="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"><a href="#ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•" class="headerlink" title="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"></a>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</h1><ul>
<li>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯å°†ç”¨æˆ·å“ˆå¸Œåˆ°è¿™ä¸ªç¯ä¸Šï¼Œç›¸åŒçš„ç”¨æˆ·åœ¨è®¿é—®çš„ä¸»æœºä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåªæœ‰å½“ä¸»æœºèŠ‚ç‚¹æ•°é‡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰ä¼šæœ‰å°‘é‡çš„ç”¨æˆ·ä¸»æœºè¯·æ±‚çš„æœåŠ¡å™¨å‘ç”Ÿå˜åŒ–,ä¿è¯å¤§éƒ¨åˆ†ç”¨æˆ·è¯·æ±‚çš„ä¸»æœºä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</li>
</ul>
<h2 id="åŸæœ‰çš„æœåŠ¡å™¨åŠç”¨æˆ·çŠ¶æ€"><a href="#åŸæœ‰çš„æœåŠ¡å™¨åŠç”¨æˆ·çŠ¶æ€" class="headerlink" title="åŸæœ‰çš„æœåŠ¡å™¨åŠç”¨æˆ·çŠ¶æ€"></a>åŸæœ‰çš„æœåŠ¡å™¨åŠç”¨æˆ·çŠ¶æ€</h2><p><img src="/images/img_2.png" alt="åŸæœ‰èŠ‚ç‚¹åŠç”¨æˆ·çŠ¶æ€"></p>
<h2 id="æœåŠ¡å™¨æ•°é‡å‡å°‘"><a href="#æœåŠ¡å™¨æ•°é‡å‡å°‘" class="headerlink" title="æœåŠ¡å™¨æ•°é‡å‡å°‘"></a>æœåŠ¡å™¨æ•°é‡å‡å°‘</h2><p><img src="/images/img_3.png" alt="æœåŠ¡å™¨æ•°é‡å‡å°‘"></p>
<ul>
<li>å›¾ä¸­èŠ‚ç‚¹3ç§»é™¤äº†ï¼ŒåŸæœ‰è®¿é—®èŠ‚ç‚¹3çš„2ä¸ªå°‘é‡ç”¨æˆ·è½¬ç§»åˆ°äº†èŠ‚ç‚¹4ï¼Œå…¶ä½™èŠ‚ç‚¹ä¸Šçš„ç”¨æˆ·è®¿é—®çš„æœåŠ¡å™¨ä¸å‘ç”Ÿå˜åŒ–</li>
</ul>
<h2 id="å‡å¦‚è¯´è¦å¢åŠ æœåŠ¡å™¨"><a href="#å‡å¦‚è¯´è¦å¢åŠ æœåŠ¡å™¨" class="headerlink" title="å‡å¦‚è¯´è¦å¢åŠ æœåŠ¡å™¨"></a>å‡å¦‚è¯´è¦å¢åŠ æœåŠ¡å™¨</h2><p><img src="/images/img_4.png" alt="æœåŠ¡å™¨æ•°é‡å¢åŠ "></p>
<ul>
<li>å›¾ä¸­æˆ‘ä»¬çœ‹å‡ºæœåŠ¡å™¨æ•°é‡å¢åŠ åªæœ‰ä¸€ä¸ªç”¨æˆ·å˜æ›´äº†æœåŠ¡å™¨çš„è¯·æ±‚åœ°å€ï¼Œå…¶ä½™ç”¨æˆ·ä¸å‘ç”Ÿæ”¹å˜ã€‚</li>
</ul>
<h1 id="Nginxè´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›"><a href="#Nginxè´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›" class="headerlink" title="Nginxè´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›"></a>Nginxè´Ÿè½½å‡è¡¡ç®—æ³•æœ‰å“ªäº›</h1><ul>
<li><p>nginxé»˜è®¤ä½¿ç”¨è½®è¯¢ç®—æ³•ã€‚</p>
</li>
<li><p>ip_hashæ ¹æ®è¯·æ±‚å®¢æˆ·ç«¯çš„ipè¿›è¡Œå“ˆå¸Œè¯·æ±‚åˆ°å›ºå®šçš„æœåŠ¡å™¨ã€‚</p>
</li>
<li><p>url_hashæ ¹æ®urlåœ°å€è¿›è¡Œhashè¯·æ±‚åˆ°å›ºå®šçš„æœåŠ¡å™¨ã€‚</p>
</li>
<li><p>least_connå“ªå°æœåŠ¡å™¨çš„è¿æ¥æ•°å°‘å°±è¿æ¥åˆ°å“ªä¸€å°æœåŠ¡å™¨</p>
</li>
</ul>
<h1 id="é…ç½®nginxé™æ€èµ„æºæ–‡ä»¶ç¼“å­˜è¿‡æœŸæ—¶é—´"><a href="#é…ç½®nginxé™æ€èµ„æºæ–‡ä»¶ç¼“å­˜è¿‡æœŸæ—¶é—´" class="headerlink" title="é…ç½®nginxé™æ€èµ„æºæ–‡ä»¶ç¼“å­˜è¿‡æœŸæ—¶é—´"></a>é…ç½®nginxé™æ€èµ„æºæ–‡ä»¶ç¼“å­˜è¿‡æœŸæ—¶é—´</h1><ul>
<li>åœ¨nginxé…ç½®ç»“æ„ä¸­çš„httpå±‚è¿›è¡Œé…ç½®</li>
</ul>
<figure class="hljs highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">proxy_cache_path /usr/local/nginx/upstream_cache keys_zone=mycache:5m max_size=1g inactive=30s use_temp_path=off;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">	listen		80;</span><br><span class="line">	server_name	www.tomcats.com;</span><br><span class="line">	</span><br><span class="line">	#é™æ€èµ„æºå¼€å¯å¹¶ä¸”ä½¿ç”¨ç¼“å­˜</span><br><span class="line">	proxy_cache mycache;</span><br><span class="line">	#é’ˆå¯¹200å’Œ304çŠ¶æ€ç çš„ç¼“å­˜è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º8h</span><br><span class="line">	proxy_cache_valid	200 304 8h;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>proxy_cache_path è®¾ç½®ç¼“å­˜ä¿å­˜çš„ç›®å½•</p>
</li>
<li><p>/usr/local/nginx/upstream_cacheæ˜¯å®šä¹‰çš„ä¿å­˜ç¼“å­˜çš„è·¯å¾„</p>
</li>
<li><p>keys_zone è®¾ç½®å…±äº«å†…å­˜ä¸€çº§å ç”¨ç©ºé—´çš„å¤§å°</p>
</li>
<li><p>max_size è®¾ç½®ç¼“å­˜å¤§å°</p>
</li>
<li><p>inactive è¶…è¿‡æ­¤æ—¶é—´ç¼“å­˜è‡ªåŠ¨æ¸…ç†</p>
</li>
<li><p>use_temp_path å…³é—­ä¸´æ—¶ç›®å½•</p>
</li>
</ul>
<h1 id="åŠ¨é™åˆ†ç¦»"><a href="#åŠ¨é™åˆ†ç¦»" class="headerlink" title="åŠ¨é™åˆ†ç¦»"></a>åŠ¨é™åˆ†ç¦»</h1><h2 id="ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼Ÿ</h2><blockquote>
<p>åŠ¨é™åˆ†ç¦»æœ¬è´¨æ˜¯å°†å‰ç«¯é™æ€èµ„æºä¸æˆ‘ä»¬åç«¯æœåŠ¡çš„æ¥å£åˆ†å¼€å‡å°åç«¯æœåŠ¡å™¨çš„å‹åŠ›ï¼Œæé«˜é™æ€èµ„æºçš„è®¿é—®é€Ÿåº¦ï¼ˆé™æ€èµ„æºå¯ä»¥æ˜¯è¢«ç¼“å­˜çš„è®¿é—®èµ·æ¥æ›´å¿«ï¼Œåç«¯ä¸éœ€è¦æ¸²æŸ“é¡µé¢ï¼‰</p>
</blockquote>
<blockquote>
<p>é™æ€æ•°æ®ï¼šcss/js/html/images/audios/videos/â€¦</p>
</blockquote>
<blockquote>
<p>åŠ¨æ€æ•°æ®ï¼šåç«¯æ¥å£ï¼Œä¸åŒæ—¶é—´å¾—åˆ°çš„å“åº”å¯èƒ½ä¸åŒ</p>
</blockquote>
<h2 id="åŠ¨é™åˆ†ç¦»çš„ç‰¹ç‚¹"><a href="#åŠ¨é™åˆ†ç¦»çš„ç‰¹ç‚¹" class="headerlink" title="åŠ¨é™åˆ†ç¦»çš„ç‰¹ç‚¹"></a>åŠ¨é™åˆ†ç¦»çš„ç‰¹ç‚¹</h2><blockquote>
<p>åˆ†å¸ƒå¼</p>
</blockquote>
<blockquote>
<p>å‰åç«¯æ¥å£</p>
</blockquote>
<blockquote>
<p>é™æ€å½’nginx</p>
</blockquote>
<blockquote>
<p>æ¥å£æœåŠ¡åŒ–</p>
</blockquote>
<h2 id="åŠ¨é™åˆ†ç¦»å®ç°æ–¹å¼"><a href="#åŠ¨é™åˆ†ç¦»å®ç°æ–¹å¼" class="headerlink" title="åŠ¨é™åˆ†ç¦»å®ç°æ–¹å¼"></a>åŠ¨é™åˆ†ç¦»å®ç°æ–¹å¼</h2><blockquote>
<p>ä½¿ç”¨cdnåŠ é€Ÿ</p>
</blockquote>
<p><img src="/images/img_42.png" alt="cdmåŠ é€Ÿ"></p>
<blockquote>
<p>ä½¿ç”¨nginxå®ç°åŠ¨é™åˆ†ç¦»</p>
</blockquote>
<p><img src="/images/img_43.png" alt="nginx"></p>
<h1 id="è½¯ä»¶æ¨è"><a href="#è½¯ä»¶æ¨è" class="headerlink" title="è½¯ä»¶æ¨è"></a>è½¯ä»¶æ¨è</h1><blockquote>
<p>nginxé…ç½®ç®¡ç†å·¥å…·<a href="http://www.nginxwebui.cn/" target="_blank" rel="noopener">nginxWebUI</a></p>
</blockquote>
<blockquote>
<p>è‡ªå»ºngrokï¼Œä»æ­¤æŠ›å¼ƒèŠ±ç”Ÿå£³<a href="https://www.vediotalk.com/archives/336" target="_blank" rel="noopener">æ•™ç¨‹åœ°å€</a></p>
</blockquote>

      
    </main>
    <footer class="post-footer">
      
    </footer>
  </article>
  
  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>
  
  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="æœç´¢" class="form-control">
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/tanliyuan_katong.jpg" alt="Tan Liyuan">
  
  <h1 class="author-name">Tan Liyuan</h1>
  <h2 class="author-description">ä¸€ä¸ªçƒ­çˆ±ç”Ÿæ´»çš„å°ç”·å­©</h2>
  <div class="site-count">
    
    
    
    
    <div class="archives-count count-block">
      <div class="site-count-title">å½’æ¡£</div>
      <div><a href="/archives/">28</a></div>
    </div>
    
    
    
    <div class="categories-count count-block">
      <div class="site-count-title">åˆ†ç±»</div>
      <div><a href="/categories/">12</a></div>
    </div>
    
    
    
    <div class="tags-count count-block">
      <div class="site-count-title">æ ‡ç­¾</div>
      <div><a href="/tags/">16</a></div>
    </div>
    
    
    
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="/atom.xml"><i class="fas fa-rss"></i>RSS</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    
    <hr>
    <div class="social-link sidebar-item">
      <div><i class="far fa-address-card"></i>ç¤¾äº¤é“¾æ¥<p></p></div>
      <ul>
        
        <li><i class="fas fa-envelope"></i><a href="mailto:15803657214@163.com" target="_blank">E-Mail</a></li>
        
        <li><i class="fab fa-github"></i><a href="https://github.com/developertanliyuan/" target="_blank">GitHub</a></li>
        
        <li><i class="fab fa-weibo"></i><a href="https://weibo.com/u/577007836" target="_blank">Weibo</a></li>
        
      </ul>
    </div>
    
    
    <hr>
    <div class="blogroll sidebar-item">
      <div><i class="fas fa-link"></i>å‹æƒ…é“¾æ¥</div>
      <ul>
        
        <li><i class="fa fa-paperclip"></i><a href="https://sh.alynx.one/" target="_blank">å–µ's StackHarbor</a></li>
        
        <li><i class="fa fa-paperclip"></i><a href="http://www.dyboy.cn/" target="_blank">ç¬¬ä¸€èµ„æºç½‘</a></li>
        
        <li><i class="fa fa-paperclip"></i><a href="https://info.liuwenhao.store/" target="_blank">åˆ˜æ–‡è±ªçš„ä¸ªäººä¸»é¡µ</a></li>
        
      </ul>
    </div>
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="å›åˆ°é¡¶éƒ¨"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">Tan Liyuan</span><span class="year"><i class="far fa-copyright"></i>2021</span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
        </div>
        <div class="powered-by">
          ç”± <a href="https://hexo.io/" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ <a href="https://github.com/AlynxZhou/hexo-theme-aria/" target="_blank">ARIA</a>
        </div>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
